const POST_THRESHOLD_S=.1;class GodotPositionReportingProcessor extends AudioWorkletProcessor{constructor(...e){super(...e),this.lastPostTime=currentTime,this.position=0,this.ended=!1,this.port.onmessage=e=>{e?.data?.type==="ended"&&(this.ended=!0)}}process(e){if(this.ended)return!1;if(e.length>0){const t=e[0];t.length>0&&(this.position+=t[0].length)}return currentTime-this.lastPostTime>POST_THRESHOLD_S&&(this.lastPostTime=currentTime,this.port.postMessage({type:"position",data:this.position})),!0}}registerProcessor("godot-position-reporting-processor",GodotPositionReportingProcessor)