var Godot=function(){var a=typeof document!='undefined'&&document.currentScript?document.currentScript.src:void 0;return function(aN){var g,bX,aZ,aw,ah,bw,bm,bp,bt,at,bi,Z,bc,bL,a$,cj,aD,A,bV,b$,ca,ay,bN,aI,aq,be,bD,ba,x,t,W,aX,e,K,j,bn,oh,L,bY,bu,cz,bo,by,cM,cL,aL,am,br,az,ci,X,s,I,u,ae,af,o,B,b,q,C,E,T,cm,cg,av,b_,h,d,ai,Q,an,r,cw,cv,aY,R,f,m,F,N,p,Y,G,y,w,D,v,aP,l,al,ab,J,ar,ag,au,_,z,i,cp,aH,aV,bx,aJ,aK,c,U,cx,cy,cA,nO,cB,bR,cF,cI,ao,aU,aQ,bb,bI,cu,cr,ch,ap,bG,bA,P,O,aE,V,bO,aR,co,bK;aN=aN||{},g=typeof aN!="undefined"?aN:{},g.ready=new Promise(function(a,b){bX=a,aZ=b}),aw={};for(ah in g)g.hasOwnProperty(ah)&&(aw[ah]=g[ah]);bw=[],bm="./this.program",bp=function(b,a){throw a},bt=typeof window=="object",at=typeof importScripts=="function",bi=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Z="";function oz(a){return g.locateFile?g.locateFile(a,Z):Z+a}(bt||at)&&(at?Z=self.location.href:typeof document!="undefined"&&document.currentScript&&(Z=document.currentScript.src),a&&(Z=a),Z.indexOf("blob:")!==0?Z=Z.substr(0,Z.lastIndexOf("/")+1):Z="",bc=function(b){var a=new XMLHttpRequest;return a.open("GET",b,!1),a.send(null),a.responseText},at&&(a$=function(b){var a=new XMLHttpRequest;return a.open("GET",b,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}),bL=function(c,d,b){var a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status==200||a.status==0&&a.response){d(a.response);return}b()},a.onerror=b,a.send(null)},cj=function(a){document.title=a}),aD=g.print||console.log.bind(console),A=g.printErr||console.warn.bind(console);for(ah in aw)aw.hasOwnProperty(ah)&&(g[ah]=aw[ah]);aw=null,g.arguments&&(bw=g.arguments),g.thisProgram&&(bm=g.thisProgram),g.quit&&(bp=g.quit);function aG(a){aG.shown||(aG.shown={}),aG.shown[a]||(aG.shown[a]=1,A(a))}bV=0,b$=function(a){bV=a},ca=function(){return bV},g.wasmBinary&&(ay=g.wasmBinary),bN=g.noExitRuntime||!1,typeof WebAssembly!="object"&&n("no native wasm support detected");function oy(a,b,c,d){switch(c=c||"i8",c.charAt(c.length-1)==="*"&&(c="i32"),c){case"i1":x[a>>0]=b;break;case"i8":x[a>>0]=b;break;case"i16":W[a>>1]=b;break;case"i32":e[a>>2]=b;break;case"i64":I=[b>>>0,(s=b,+Math.abs(s)>=1?s>0?(Math.min(+Math.floor(s/4294967296),4294967295)|0)>>>0:~~+Math.ceil((s-+(~~s>>>0))/4294967296)>>>0:0)],e[a>>2]=I[0],e[a+4>>2]=I[1];break;case"float":j[a>>2]=b;break;case"double":bn[a>>3]=b;break;default:n("invalid type for setValue: "+c)}}function ox(a,b,c){switch(b=b||"i8",b.charAt(b.length-1)==="*"&&(b="i32"),b){case"i1":return x[a>>0];case"i8":return x[a>>0];case"i16":return W[a>>1];case"i32":return e[a>>2];case"i64":return e[a>>2];case"float":return j[a>>2];case"double":return bn[a>>3];default:n("invalid type for getValue: "+b)}return null}aq=!1;function ac(a,b){a||n("Assertion failed: "+b)}function cn(a){var b=g["_"+a];return ac(b,"Cannot call unknown function "+a+", make sure it is exported"),b}function ow(l,f,k,b,m){var j={string:function(a){var b=0,c;return a!==null&&a!==void 0&&a!==0&&(c=(a.length<<2)+1,b=aE(c),M(a,b,c)),b},array:function(a){var b=aE(a.length);return cQ(a,b),b}},i,d,c,a,g,e;function h(a){return f==="string"?H(a):f==="boolean"?Boolean(a):a}if(i=cn(l),d=[],c=0,b)for(a=0;a<b.length;a++)g=j[k[a]],g?(c===0&&(c=P()),d[a]=g(b[a])):d[a]=b[a];return e=i.apply(null,d),e=h(e),c!==0&&O(c),e}function ov(b,c,a,d){var e,f;return a=a||[],e=a.every(function(a){return a==="number"}),f=c!=="string",f&&e&&!d?cn(b):function(){return ow(b,c,a,arguments,d)}}bD=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function aA(c,b,i){for(var j=b+i,d=b,e,a,f,g,h;c[d]&&!(d>=j);)++d;if(d-b>16&&c.subarray&&bD)return bD.decode(c.subarray(b,d));for(e="";b<d;){if(a=c[b++],!(a&128)){e+=String.fromCharCode(a);continue}if(f=c[b++]&63,(a&224)==192){e+=String.fromCharCode((a&31)<<6|f);continue}g=c[b++]&63,(a&240)==224?a=(a&15)<<12|f<<6|g:a=(a&7)<<18|f<<12|g<<6|c[b++]&63,a<65536?e+=String.fromCharCode(a):(h=a-65536,e+=String.fromCharCode(55296|h>>10,56320|h&1023))}return e}function H(a,b){return a?aA(t,a,b):""}function ax(f,c,b,g){var h,e,d,a,i;if(!(g>0))return 0;h=b,e=b+g-1;for(d=0;d<f.length;++d)if(a=f.charCodeAt(d),a>=55296&&a<=57343&&(i=f.charCodeAt(++d),a=65536+((a&1023)<<10)|i&1023),a<=127){if(b>=e)break;c[b++]=a}else if(a<=2047){if(b+1>=e)break;c[b++]=192|a>>6,c[b++]=128|a&63}else if(a<=65535){if(b+2>=e)break;c[b++]=224|a>>12,c[b++]=128|a>>6&63,c[b++]=128|a&63}else{if(b+3>=e)break;c[b++]=240|a>>18,c[b++]=128|a>>12&63,c[b++]=128|a>>6&63,c[b++]=128|a&63}return c[b]=0,b-h}function M(a,b,c){return ax(a,t,b,c)}function aj(d){for(var b=0,c=0,a;c<d.length;++c)a=d.charCodeAt(c),a>=55296&&a<=57343&&(a=65536+((a&1023)<<10)|d.charCodeAt(++c)&1023),a<=127?++b:a<=2047?b+=2:a<=65535?b+=3:b+=4;return b}function bT(b){var c=aj(b)+1,a=ao(c);return a&&ax(b,x,a,c),a}function cO(a){var b=aj(a)+1,c=aE(b);return ax(a,x,c,b),c}function cQ(a,b){x.set(a,b)}function cH(b,c,d){for(var a=0;a<b.length;++a)x[c++>>0]=b.charCodeAt(a);d||(x[c>>0]=0)}function ou(a,b){return a%b>0&&(a+=b-a%b),a}function cl(a){ba=a,g.HEAP8=x=new Int8Array(a),g.HEAP16=W=new Int16Array(a),g.HEAP32=e=new Int32Array(a),g.HEAPU8=t=new Uint8Array(a),g.HEAPU16=aX=new Uint16Array(a),g.HEAPU32=K=new Uint32Array(a),g.HEAPF32=j=new Float32Array(a),g.HEAPF64=bn=new Float64Array(a)}oh=g.INITIAL_MEMORY||33554432,bY=[],bu=[],cz=[],bo=[],by=[],cM=!1,cL=!1,aL=0;function cG(){return bN||aL>0}function og(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)oa(g.preRun.shift());aM(bY)}function oe(){cM=!0,!g.noFSInit&&!b.init.initialized&&b.init(),b.ignorePermissions=!1,af.init(),E.root=b.mount(E,{},null),aM(bu)}function od(){aM(cz)}function oc(){aM(bo),b.quit(),af.shutdown(),cL=!0}function ob(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)n_(g.postRun.shift());aM(by)}function oa(a){bY.unshift(a)}function n$(a){bu.unshift(a)}function n_(a){by.unshift(a)}am=0,br=null,az=null;function cb(a){return a}function bU(a){am++,g.monitorRunDependencies&&g.monitorRunDependencies(am)}function a_(b){if(am--,g.monitorRunDependencies&&g.monitorRunDependencies(am),am==0)if(br!==null&&(clearInterval(br),br=null),az){var a=az;az=null,a()}}g.preloadedImages={},g.preloadedAudios={};function n(a){g.onAbort&&g.onAbort(a),a+="",A(a),aq=!0,be=1,a="abort("+a+"). Build with -s ASSERTIONS=1 for more info.";var b=new WebAssembly.RuntimeError(a);throw aZ(b),b}ci="data:application/octet-stream;base64,";function ck(a){return a.startsWith(ci)}X="godot.javascript.opt.wasm",ck(X)||(X=oz(X));function cq(a){try{if(a==X&&ay)return new Uint8Array(ay);if(a$)return a$(a);throw"both async and sync fetching of the wasm failed"}catch(a){n(a)}}function nZ(){if(!ay&&(bt||at))if(typeof fetch=="function")return fetch(X,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+X+"'";return a.arrayBuffer()}).catch(function(){return cq(X)});return Promise.resolve().then(function(){return cq(X)})}function nY(){var a={a:cA},f;function c(a,c){var b=a.exports;g.asm=b,aI=g.asm.ck,cl(aI.buffer),L=g.asm.wk,n$(g.asm.dk),a_("wasm-instantiate")}bU("wasm-instantiate");function b(a){c(a.instance)}function d(b){return nZ().then(function(b){var c=WebAssembly.instantiate(b,a);return c}).then(b,function(a){A("failed to asynchronously prepare wasm: "+a),n(a)})}function e(){return!ay&&typeof WebAssembly.instantiateStreaming=="function"&&!ck(X)&&typeof fetch=="function"?fetch(X,{credentials:"same-origin"}).then(function(c){var e=WebAssembly.instantiateStreaming(c,a);return e.then(b,function(a){return A("wasm streaming compile failed: "+a),A("falling back to ArrayBuffer instantiation"),d(b)})}):d(b)}if(g.instantiateWasm)try{return f=g.instantiateWasm(a,c),f}catch(a){return A("Module.instantiateWasm callback failed with error: "+a),!1}return e().catch(aZ),{}}function aM(c){for(var a,b;c.length>0;){if(a=c.shift(),typeof a=="function"){a(g);continue}b=a.func,typeof b=="number"?a.arg===void 0?L.get(b)():L.get(b)(a.arg):b(a.arg===void 0?null:a.arg)}}function nX(a,b){bo.unshift({func:a,arg:b})}function nW(a,b){return nX(a,b)}u={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,e){for(var c=0,b=a.length-1,d;b>=0;b--)d=a[b],d==="."?a.splice(b,1):d===".."?(a.splice(b,1),c++):c&&(a.splice(b,1),c--);if(e)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";return a=u.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/"),!a&&!b&&(a="."),a&&c&&(a+="/"),(b?"/":"")+a},dirname:function(d){var b=u.splitPath(d),c=b[0],a=b[1];return!c&&!a?".":(a&&(a=a.substr(0,a.length-1)),c+a)},basename:function(a){if(a==="/")return"/";a=u.normalize(a),a=a.replace(/\/$/,"");var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return u.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return u.normalize(a.join("/"))},join2:function(a,b){return u.normalize(a+"/"+b)}};function nV(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var a=new Uint8Array(1);return function(){return crypto.getRandomValues(a),a[0]}}return function(){n("randomDevice")}}ae={resolve:function(){for(var a="",c=!1,d=arguments.length-1,e;d>=-1&&!c;d--){if(e=d>=0?arguments[d]:b.cwd(),typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";a=e+"/"+a,c=e.charAt(0)==="/"}return a=u.normalizeArray(a.split("/").filter(function(a){return!!a}),!c).join("/"),(c?"/":"")+a||"."},relative:function(g,h){var d,e,f,c,a,b;g=ae.resolve(g).substr(1),h=ae.resolve(h).substr(1);function i(b){for(var a=0,c;a<b.length;a++)if(b[a]!=="")break;for(c=b.length-1;c>=0;c--)if(b[c]!=="")break;return a>c?[]:b.slice(a,c-a+1)}d=i(g.split("/")),e=i(h.split("/")),f=Math.min(d.length,e.length),c=f;for(a=0;a<f;a++)if(d[a]!==e[a]){c=a;break}b=[];for(a=c;a<d.length;a++)b.push("..");return b=b.concat(e.slice(c)),b.join("/")}},af={ttys:[],init:function(){},shutdown:function(){},register:function(a,c){af.ttys[a]={input:[],output:[],ops:c},b.registerDevice(a,af.stream_ops)},stream_ops:{open:function(a){var c=af.ttys[a.node.rdev];if(!c)throw new b.ErrnoError(43);a.tty=c,a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(c,h,f,g,i){var d,e,a;if(!c.tty||!c.tty.ops.get_char)throw new b.ErrnoError(60);d=0;for(e=0;e<g;e++){try{a=c.tty.ops.get_char(c.tty)}catch(a){throw new b.ErrnoError(29)}if(a===void 0&&d===0)throw new b.ErrnoError(6);if(a===null||a===void 0)break;d++,h[f+e]=a}return d&&(c.node.timestamp=Date.now()),d},write:function(a,e,f,d,g){if(!a.tty||!a.tty.ops.put_char)throw new b.ErrnoError(60);try{for(var c=0;c<d;c++)a.tty.ops.put_char(a.tty,e[f+c])}catch(a){throw new b.ErrnoError(29)}return d&&(a.node.timestamp=Date.now()),c}},default_tty_ops:{get_char:function(b){if(!b.input.length){var a=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(a=window.prompt("Input: "),a!==null&&(a+="\n")):typeof readline=="function"&&(a=readline(),a!==null&&(a+="\n")),!a)return null;b.input=bq(a,!0)}return b.input.shift()},put_char:function(b,a){a===null||a===10?(aD(aA(b.output,0)),b.output=[]):a!=0&&b.output.push(a)},flush:function(a){a.output&&a.output.length>0&&(aD(aA(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(b,a){a===null||a===10?(A(aA(b.output,0)),b.output=[]):a!=0&&b.output.push(a)},flush:function(a){a.output&&a.output.length>0&&(A(aA(a.output,0)),a.output=[])}}};function cJ(a,b){t.fill(0,a,a+b)}function nU(a){n()}o={ops_table:null,mount:function(a){return o.createNode(null,"/",16384|511,0)},createNode:function(c,e,d,f){if(b.isBlkdev(d)||b.isFIFO(d))throw new b.ErrnoError(63);o.ops_table||(o.ops_table={dir:{node:{getattr:o.node_ops.getattr,setattr:o.node_ops.setattr,lookup:o.node_ops.lookup,mknod:o.node_ops.mknod,rename:o.node_ops.rename,unlink:o.node_ops.unlink,rmdir:o.node_ops.rmdir,readdir:o.node_ops.readdir,symlink:o.node_ops.symlink},stream:{llseek:o.stream_ops.llseek}},file:{node:{getattr:o.node_ops.getattr,setattr:o.node_ops.setattr},stream:{llseek:o.stream_ops.llseek,read:o.stream_ops.read,write:o.stream_ops.write,allocate:o.stream_ops.allocate,mmap:o.stream_ops.mmap,msync:o.stream_ops.msync}},link:{node:{getattr:o.node_ops.getattr,setattr:o.node_ops.setattr,readlink:o.node_ops.readlink},stream:{}},chrdev:{node:{getattr:o.node_ops.getattr,setattr:o.node_ops.setattr},stream:b.chrdev_stream_ops}});var a=b.createNode(c,e,d,f);return b.isDir(a.mode)?(a.node_ops=o.ops_table.dir.node,a.stream_ops=o.ops_table.dir.stream,a.contents={}):b.isFile(a.mode)?(a.node_ops=o.ops_table.file.node,a.stream_ops=o.ops_table.file.stream,a.usedBytes=0,a.contents=null):b.isLink(a.mode)?(a.node_ops=o.ops_table.link.node,a.stream_ops=o.ops_table.link.stream):b.isChrdev(a.mode)&&(a.node_ops=o.ops_table.chrdev.node,a.stream_ops=o.ops_table.chrdev.stream),a.timestamp=Date.now(),c&&(c.contents[e]=a,c.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(a){return a.contents?a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents):new Uint8Array(0)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0,d,e;if(c>=b)return;d=1024*1024,b=Math.max(b,c*(c<d?2:1.125)>>>0),c!=0&&(b=Math.max(b,256)),e=a.contents,a.contents=new Uint8Array(b),a.usedBytes>0&&a.contents.set(e.subarray(0,a.usedBytes),0)},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0)a.contents=null,a.usedBytes=0;else{var c=a.contents;a.contents=new Uint8Array(b),c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes))),a.usedBytes=b}},node_ops:{getattr:function(c){var a={};return a.dev=b.isChrdev(c.mode)?c.id:1,a.ino=c.id,a.mode=c.mode,a.nlink=1,a.uid=0,a.gid=0,a.rdev=c.rdev,b.isDir(c.mode)?a.size=4096:b.isFile(c.mode)?a.size=c.usedBytes:b.isLink(c.mode)?a.size=c.link.length:a.size=0,a.atime=new Date(c.timestamp),a.mtime=new Date(c.timestamp),a.ctime=new Date(c.timestamp),a.blksize=4096,a.blocks=Math.ceil(a.size/a.blksize),a},setattr:function(b,a){a.mode!==void 0&&(b.mode=a.mode),a.timestamp!==void 0&&(b.timestamp=a.timestamp),a.size!==void 0&&o.resizeFileStorage(b,a.size)},lookup:function(a,c){throw b.genericErrors[44]},mknod:function(a,b,c,d){return o.createNode(a,b,c,d)},rename:function(a,c,e){var d,f;if(b.isDir(a.mode)){try{d=b.lookupNode(c,e)}catch(a){}if(d)for(f in d.contents)throw new b.ErrnoError(55)}delete a.parent.contents[a.name],a.parent.timestamp=Date.now(),a.name=e,c.contents[e]=a,c.timestamp=a.parent.timestamp,a.parent=c},unlink:function(a,b){delete a.contents[b],a.timestamp=Date.now()},rmdir:function(a,c){var d=b.lookupNode(a,c),e;for(e in d.contents)throw new b.ErrnoError(55);delete a.contents[c],a.timestamp=Date.now()},readdir:function(a){var b=[".",".."],c;for(c in a.contents){if(!a.contents.hasOwnProperty(c))continue;b.push(c)}return b},symlink:function(b,c,d){var a=o.createNode(b,c,511|40960,0);return a.link=d,a},readlink:function(a){if(!b.isLink(a.mode))throw new b.ErrnoError(28);return a.link}},stream_ops:{read:function(e,g,f,h,a){var d=e.node.contents,b,c;if(a>=e.node.usedBytes)return 0;if(b=Math.min(e.node.usedBytes-a,h),b>8&&d.subarray)g.set(d.subarray(a,a+b),f);else for(c=0;c<b;c++)g[f+c]=d[a+c];return b},write:function(h,d,c,b,e,g){var a,f;if(d.buffer===x.buffer&&(g=!1),!b)return 0;if(a=h.node,a.timestamp=Date.now(),d.subarray&&(!a.contents||a.contents.subarray)){if(g)return a.contents=d.subarray(c,c+b),a.usedBytes=b,b;if(a.usedBytes===0&&e===0)return a.contents=d.slice(c,c+b),a.usedBytes=b,b;if(e+b<=a.usedBytes)return a.contents.set(d.subarray(c,c+b),e),b}if(o.expandFileStorage(a,e+b),a.contents.subarray&&d.subarray)a.contents.set(d.subarray(c,c+b),e);else for(f=0;f<b;f++)a.contents[e+f]=d[c+f];return a.usedBytes=Math.max(a.usedBytes,e+b),b},llseek:function(c,e,d){var a=e;if(d===1?a+=c.position:d===2&&b.isFile(c.node.mode)&&(a+=c.node.usedBytes),a<0)throw new b.ErrnoError(28);return a},allocate:function(a,b,c){o.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(g,i,f,d,j,h){var c,e,a;if(i!==0)throw new b.ErrnoError(28);if(!b.isFile(g.node.mode))throw new b.ErrnoError(43);if(a=g.node.contents,!(h&2)&&a.buffer===ba)e=!1,c=a.byteOffset;else{if((d>0||d+f<a.length)&&(a.subarray?a=a.subarray(d,d+f):a=Array.prototype.slice.call(a,d,d+f)),e=!0,c=nU(f),!c)throw new b.ErrnoError(48);x.set(a,c)}return{ptr:c,allocated:e}},msync:function(a,c,d,e,f){if(!b.isFile(a.node.mode))throw new b.ErrnoError(43);if(f&2)return 0;var g=o.stream_ops.write(a,c,0,e,d,!1);return 0}}};function nT(a,d,c,e){var b=e?"":cb("al "+a);bL(a,function(c){ac(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),d(new Uint8Array(c)),b&&a_(b)},function(b){if(c)c();else throw'Loading data file "'+a+'" failed.'}),b&&bU(b)}B={dbs:{},indexedDB:function(){if(typeof indexedDB!="undefined")return indexedDB;var a=null;return typeof window=="object"&&(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),ac(a,"IDBFS used, but indexedDB not supported"),a},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(a){return o.mount.apply(null,arguments)},syncfs:function(b,c,a){B.getLocalSet(b,function(d,e){if(d)return a(d);B.getRemoteSet(b,function(b,d){var f,g;if(b)return a(b);f=c?d:e,g=c?e:d,B.reconcile(f,g,a)})})},getDB:function(d,b){var c=B.dbs[d],a;if(c)return b(null,c);try{a=B.indexedDB().open(d,B.DB_VERSION)}catch(a){return b(a)}if(!a)return b("Unable to connect to IndexedDB");a.onupgradeneeded=function(b){var c=b.target.result,d=b.target.transaction,a;c.objectStoreNames.contains(B.DB_STORE_NAME)?a=d.objectStore(B.DB_STORE_NAME):a=c.createObjectStore(B.DB_STORE_NAME),a.indexNames.contains("timestamp")||a.createIndex("timestamp","timestamp",{unique:!1})},a.onsuccess=function(){c=a.result,B.dbs[d]=c,b(null,c)},a.onerror=function(a){b(this.error),a.preventDefault()}},getLocalSet:function(h,i){var e={},c,a,d;function f(a){return a!=="."&&a!==".."}function g(a){return function(b){return u.join2(a,b)}}for(c=b.readdir(h.mountpoint).filter(f).map(g(h.mountpoint));c.length;){a=c.pop();try{d=b.stat(a)}catch(a){return i(a)}b.isDir(d.mode)&&c.push.apply(c,b.readdir(a).filter(f).map(g(a))),e[a]={timestamp:d.mtime}}return i(null,{type:"local",entries:e})},getRemoteSet:function(c,a){var b={};B.getDB(c.mountpoint,function(d,e){var c,f,g;if(d)return a(d);try{c=e.transaction([B.DB_STORE_NAME],"readonly"),c.onerror=function(b){a(this.error),b.preventDefault()},f=c.objectStore(B.DB_STORE_NAME),g=f.index("timestamp"),g.openKeyCursor().onsuccess=function(d){var c=d.target.result;if(!c)return a(null,{type:"remote",db:e,entries:b});b[c.primaryKey]={timestamp:c.key},c.continue()}}catch(b){return a(b)}})},loadLocalEntry:function(e,c){var a,d,f;try{f=b.lookupPath(e),d=f.node,a=b.stat(e)}catch(a){return c(a)}return b.isDir(a.mode)?c(null,{timestamp:a.mtime,mode:a.mode}):b.isFile(a.mode)?(d.contents=o.getFileDataAsTypedArray(d),c(null,{timestamp:a.mtime,mode:a.mode,contents:d.contents})):c(new Error("node type not supported"))},storeLocalEntry:function(c,a,d){try{if(b.isDir(a.mode))b.mkdirTree(c,a.mode);else if(b.isFile(a.mode))b.writeFile(c,a.contents,{canOwn:!0});else return d(new Error("node type not supported"));b.chmod(c,a.mode),b.utime(c,a.timestamp,a.timestamp)}catch(a){return d(a)}d(null)},removeLocalEntry:function(a,d){var e,c;try{e=b.lookupPath(a),c=b.stat(a),b.isDir(c.mode)?b.rmdir(a):b.isFile(c.mode)&&b.unlink(a)}catch(a){return d(a)}d(null)},loadRemoteEntry:function(c,d,a){var b=c.get(d);b.onsuccess=function(b){a(null,b.target.result)},b.onerror=function(b){a(this.error),b.preventDefault()}},storeRemoteEntry:function(c,d,e,a){try{var b=c.put(e,d)}catch(b){a(b);return}b.onsuccess=function(){a(null)},b.onerror=function(b){a(this.error),b.preventDefault()}},removeRemoteEntry:function(c,d,a){var b=c.delete(d);b.onsuccess=function(){a(null)},b.onerror=function(b){a(this.error),b.preventDefault()}},reconcile:function(b,c,d){var e=0,j=[],i,f,k,g,h;if(Object.keys(b.entries).forEach(function(a){var f=b.entries[a],d=c.entries[a];(!d||f.timestamp.getTime()!=d.timestamp.getTime())&&(j.push(a),e++)}),i=[],Object.keys(c.entries).forEach(function(a){b.entries[a]||(i.push(a),e++)}),!e)return d(null);f=!1,k=b.type==="remote"?b.db:c.db,g=k.transaction([B.DB_STORE_NAME],"readwrite"),h=g.objectStore(B.DB_STORE_NAME);function a(a){if(a&&!f)return f=!0,d(a)}g.onerror=function(b){a(this.error),b.preventDefault()},g.oncomplete=function(a){f||d(null)},j.sort().forEach(function(b){c.type==="local"?B.loadRemoteEntry(h,b,function(c,d){if(c)return a(c);B.storeLocalEntry(b,d,a)}):B.loadLocalEntry(b,function(c,d){if(c)return a(c);B.storeRemoteEntry(h,b,d,a)})}),i.sort().reverse().forEach(function(b){c.type==="local"?B.removeLocalEntry(b,a):B.removeRemoteEntry(h,b,a)})}},b={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(i,a){var j,h,g,c,d,e,f,k,l,m;if(i=ae.resolve(b.cwd(),i),a=a||{},!i)return{path:"",node:null};j={follow_mount:!0,recurse_count:0};for(h in j)a[h]===void 0&&(a[h]=j[h]);if(a.recurse_count>8)throw new b.ErrnoError(32);g=u.normalizeArray(i.split("/").filter(function(a){return!!a}),!1),c=b.root,d="/";for(e=0;e<g.length;e++){if(f=e===g.length-1,f&&a.parent)break;if(c=b.lookupNode(c,g[e]),d=u.join2(d,g[e]),b.isMountpoint(c)&&(!f||f&&a.follow_mount)&&(c=c.mounted.root),!f||a.follow)for(k=0;b.isLink(c.mode);)if(l=b.readlink(d),d=ae.resolve(u.dirname(d),l),m=b.lookupPath(d,{recurse_count:a.recurse_count}),c=m.node,k++>40)throw new b.ErrnoError(32)}return{path:d,node:c}},getPath:function(a){for(var c,d;!0;){if(b.isRoot(a))return d=a.mount.mountpoint,!c?d:d[d.length-1]!=="/"?d+"/"+c:d+c;c=c?a.name+"/"+c:a.name,a=a.parent}},hashName:function(e,d){for(var a=0,c=0;c<d.length;c++)a=(a<<5)-a+d.charCodeAt(c)|0;return(e+a>>>0)%b.nameTable.length},hashAddNode:function(a){var c=b.hashName(a.parent.id,a.name);a.name_next=b.nameTable[c],b.nameTable[c]=a},hashRemoveNode:function(a){var d=b.hashName(a.parent.id,a.name),c;if(b.nameTable[d]===a)b.nameTable[d]=a.name_next;else for(c=b.nameTable[d];c;){if(c.name_next===a){c.name_next=a.name_next;break}c=c.name_next}},lookupNode:function(c,d){var e=b.mayLookup(c),f,a,g;if(e)throw new b.ErrnoError(e,c);f=b.hashName(c.id,d);for(a=b.nameTable[f];a;a=a.name_next)if(g=a.name,a.parent.id===c.id&&g===d)return a;return b.lookup(c,d)},createNode:function(c,d,e,f){var a=new b.FSNode(c,d,e,f);return b.hashAddNode(a),a},destroyNode:function(a){b.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(a){var c=b.flagModes[a];if(typeof c=="undefined")throw new Error("Unknown file open mode: "+a);return c},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];return a&512&&(b+="w"),b},nodePermissions:function(a,c){return b.ignorePermissions?0:c.includes("r")&&!(a.mode&292)?2:c.includes("w")&&!(a.mode&146)?2:c.includes("x")&&!(a.mode&73)?2:0},mayLookup:function(a){var c=b.nodePermissions(a,"x");return c?c:a.node_ops.lookup?0:2},mayCreate:function(a,c){try{var d=b.lookupNode(a,c);return 20}catch(a){}return b.nodePermissions(a,"wx")},mayDelete:function(c,e,f){var a,d;try{a=b.lookupNode(c,e)}catch(a){return a.errno}if(d=b.nodePermissions(c,"wx"),d)return d;if(f){{if(!b.isDir(a.mode))return 54;if(b.isRoot(a)||b.getPath(a)===b.cwd())return 10}}else if(b.isDir(a.mode))return 31;return 0},mayOpen:function(a,c){if(!a)return 44;if(b.isLink(a.mode))return 32;if(b.isDir(a.mode))if(b.flagsToPermissionString(c)!=="r"||c&512)return 31;return b.nodePermissions(a,b.flagsToPermissionString(c))},MAX_OPEN_FDS:4096,nextfd:function(c,d){c=c||0,d=d||b.MAX_OPEN_FDS;for(var a=c;a<=d;a++)if(!b.streams[a])return a;throw new b.ErrnoError(33)},getStream:function(a){return b.streams[a]},createStream:function(a,f,g){var c,d,e;b.FSStream||(b.FSStream=function(){},b.FSStream.prototype={object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}),c=new b.FSStream;for(d in a)c[d]=a[d];return a=c,e=b.nextfd(f,g),a.fd=e,b.streams[e]=a,a},closeStream:function(a){b.streams[a]=null},chrdev_stream_ops:{open:function(a){var c=b.getDevice(a.node.rdev);a.stream_ops=c.stream_ops,a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new b.ErrnoError(70)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,c){b.devices[a]={stream_ops:c}},getDevice:function(a){return b.devices[a]},getMounts:function(d){for(var b=[],a=[d],c;a.length;)c=a.pop(),b.push(c),a.push.apply(a,c.mounts);return b},syncfs:function(a,e){var d,f;typeof a=="function"&&(e=a,a=!1),b.syncFSRequests++,b.syncFSRequests>1&&A("warning: "+b.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work"),d=b.getMounts(b.root.mount),f=0;function g(a){return b.syncFSRequests--,e(a)}function c(a){if(a){if(!c.errored)return c.errored=!0,g(a);return}++f>=d.length&&g(null)}d.forEach(function(b){if(!b.type.syncfs)return c(null);b.type.syncfs(b,a,c)})},mount:function(g,j,d){var f=d==="/",i=!d,a,h,c,e;if(f&&b.root)throw new b.ErrnoError(10);if(!f&&!i){if(h=b.lookupPath(d,{follow_mount:!1}),d=h.path,a=h.node,b.isMountpoint(a))throw new b.ErrnoError(10);if(!b.isDir(a.mode))throw new b.ErrnoError(54)}return c={type:g,opts:j,mountpoint:d,mounts:[]},e=g.mount(c),e.mount=c,c.root=e,f?b.root=e:a&&(a.mounted=c,a.mount&&a.mount.mounts.push(c)),e},unmount:function(e){var c=b.lookupPath(e,{follow_mount:!1}),a,d,f,g;if(!b.isMountpoint(c.node))throw new b.ErrnoError(28);a=c.node,d=a.mounted,f=b.getMounts(d),Object.keys(b.nameTable).forEach(function(c){for(var a=b.nameTable[c],d;a;)d=a.name_next,f.includes(a.mount)&&b.destroyNode(a),a=d}),a.mounted=null,g=a.mount.mounts.indexOf(d),a.mount.mounts.splice(g,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(d,f,g){var h=b.lookupPath(d,{parent:!0}),c=h.node,a=u.basename(d),e;if(!a||a==="."||a==="..")throw new b.ErrnoError(28);if(e=b.mayCreate(c,a),e)throw new b.ErrnoError(e);if(!c.node_ops.mknod)throw new b.ErrnoError(63);return c.node_ops.mknod(c,a,f,g)},create:function(c,a){return a=a!==void 0?a:438,a&=4095,a|=32768,b.mknod(c,a,0)},mkdir:function(c,a){return a=a!==void 0?a:511,a&=511|512,a|=16384,b.mknod(c,a,0)},mkdirTree:function(e,f){for(var c=e.split("/"),d="",a=0;a<c.length;++a){if(!c[a])continue;d+="/"+c[a];try{b.mkdir(d,f)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(d,a,c){return typeof c=="undefined"&&(c=a,a=438),a|=8192,b.mknod(d,a,c)},symlink:function(e,f){var g,a,c,d;if(!ae.resolve(e))throw new b.ErrnoError(44);if(g=b.lookupPath(f,{parent:!0}),a=g.node,!a)throw new b.ErrnoError(44);if(c=u.basename(f),d=b.mayCreate(a,c),d)throw new b.ErrnoError(d);if(!a.node_ops.symlink)throw new b.ErrnoError(63);return a.node_ops.symlink(a,c,e)},rename:function(e,c){var n=u.dirname(e),o=u.dirname(c),l=u.basename(e),j=u.basename(c),i=b.lookupPath(e,{parent:!0}),a=i.node,d,g,k,h,m,f;if(i=b.lookupPath(c,{parent:!0}),d=i.node,!a||!d)throw new b.ErrnoError(44);if(a.mount!==d.mount)throw new b.ErrnoError(75);if(g=b.lookupNode(a,l),k=ae.relative(e,o),k.charAt(0)!==".")throw new b.ErrnoError(28);if(k=ae.relative(c,n),k.charAt(0)!==".")throw new b.ErrnoError(55);try{h=b.lookupNode(d,j)}catch(a){}if(g===h)return;if(m=b.isDir(g.mode),f=b.mayDelete(a,l,m),f)throw new b.ErrnoError(f);if(f=h?b.mayDelete(d,j,m):b.mayCreate(d,j),f)throw new b.ErrnoError(f);if(!a.node_ops.rename)throw new b.ErrnoError(63);if(b.isMountpoint(g)||h&&b.isMountpoint(h))throw new b.ErrnoError(10);if(d!==a)if(f=b.nodePermissions(a,"w"),f)throw new b.ErrnoError(f);try{b.trackingDelegate.willMovePath&&b.trackingDelegate.willMovePath(e,c)}catch(a){A("FS.trackingDelegate['willMovePath']('"+e+"', '"+c+"') threw an exception: "+a.message)}b.hashRemoveNode(g);try{a.node_ops.rename(g,d,j)}catch(a){throw a}finally{b.hashAddNode(g)}try{b.trackingDelegate.onMovePath&&b.trackingDelegate.onMovePath(e,c)}catch(a){A("FS.trackingDelegate['onMovePath']('"+e+"', '"+c+"') threw an exception: "+a.message)}},rmdir:function(a){var g=b.lookupPath(a,{parent:!0}),c=g.node,d=u.basename(a),e=b.lookupNode(c,d),f=b.mayDelete(c,d,!0);if(f)throw new b.ErrnoError(f);if(!c.node_ops.rmdir)throw new b.ErrnoError(63);if(b.isMountpoint(e))throw new b.ErrnoError(10);try{b.trackingDelegate.willDeletePath&&b.trackingDelegate.willDeletePath(a)}catch(b){A("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+b.message)}c.node_ops.rmdir(c,d),b.destroyNode(e);try{b.trackingDelegate.onDeletePath&&b.trackingDelegate.onDeletePath(a)}catch(b){A("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+b.message)}},readdir:function(c){var d=b.lookupPath(c,{follow:!0}),a=d.node;if(!a.node_ops.readdir)throw new b.ErrnoError(54);return a.node_ops.readdir(a)},unlink:function(a){var g=b.lookupPath(a,{parent:!0}),c=g.node,d=u.basename(a),e=b.lookupNode(c,d),f=b.mayDelete(c,d,!1);if(f)throw new b.ErrnoError(f);if(!c.node_ops.unlink)throw new b.ErrnoError(63);if(b.isMountpoint(e))throw new b.ErrnoError(10);try{b.trackingDelegate.willDeletePath&&b.trackingDelegate.willDeletePath(a)}catch(b){A("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+b.message)}c.node_ops.unlink(c,d),b.destroyNode(e);try{b.trackingDelegate.onDeletePath&&b.trackingDelegate.onDeletePath(a)}catch(b){A("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+b.message)}},readlink:function(c){var d=b.lookupPath(c),a=d.node;if(!a)throw new b.ErrnoError(44);if(!a.node_ops.readlink)throw new b.ErrnoError(28);return ae.resolve(b.getPath(a.parent),a.node_ops.readlink(a))},stat:function(c,d){var e=b.lookupPath(c,{follow:!d}),a=e.node;if(!a)throw new b.ErrnoError(44);if(!a.node_ops.getattr)throw new b.ErrnoError(63);return a.node_ops.getattr(a)},lstat:function(a){return b.stat(a,!0)},chmod:function(c,d,e){var a,f;if(typeof c=="string"?(f=b.lookupPath(c,{follow:!e}),a=f.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);a.node_ops.setattr(a,{mode:d&4095|a.mode&~4095,timestamp:Date.now()})},lchmod:function(a,c){b.chmod(a,c,!0)},fchmod:function(c,d){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);b.chmod(a.node,d)},chown:function(c,f,g,d){var a,e;if(typeof c=="string"?(e=b.lookupPath(c,{follow:!d}),a=e.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(a,c,d){b.chown(a,c,d,!0)},fchown:function(c,d,e){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);b.chown(a.node,d,e)},truncate:function(c,e){var a,f,d;if(e<0)throw new b.ErrnoError(28);if(typeof c=="string"?(f=b.lookupPath(c,{follow:!0}),a=f.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);if(b.isDir(a.mode))throw new b.ErrnoError(31);if(!b.isFile(a.mode))throw new b.ErrnoError(28);if(d=b.nodePermissions(a,"w"),d)throw new b.ErrnoError(d);a.node_ops.setattr(a,{size:e,timestamp:Date.now()})},ftruncate:function(c,d){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);if((a.flags&2097155)===0)throw new b.ErrnoError(28);b.truncate(a.node,d)},utime:function(c,d,e){var f=b.lookupPath(c,{follow:!0}),a=f.node;a.node_ops.setattr(a,{timestamp:Math.max(d,e)})},open:function(d,a,e,l,m){var c,k,i,j,f,h;if(d==="")throw new b.ErrnoError(44);if(a=typeof a=="string"?b.modeStringToFlags(a):a,e=typeof e=="undefined"?438:e,a&64?e=e&4095|32768:e=0,typeof d=="object")c=d;else{d=u.normalize(d);try{k=b.lookupPath(d,{follow:!(a&131072)}),c=k.node}catch(a){}}if(i=!1,a&64)if(c){if(a&128)throw new b.ErrnoError(20)}else c=b.mknod(d,e,0),i=!0;if(!c)throw new b.ErrnoError(44);if(b.isChrdev(c.mode)&&(a&=~512),a&65536&&!b.isDir(c.mode))throw new b.ErrnoError(54);if(!i)if(j=b.mayOpen(c,a),j)throw new b.ErrnoError(j);a&512&&b.truncate(c,0),a&=~(128|512|131072),f=b.createStream({node:c,path:b.getPath(c),flags:a,seekable:!0,position:0,stream_ops:c.stream_ops,ungotten:[],error:!1},l,m),f.stream_ops.open&&f.stream_ops.open(f),g.logReadFiles&&!(a&1)&&(b.readFiles||(b.readFiles={}),d in b.readFiles||(b.readFiles[d]=1,A("FS.trackingDelegate error on read file: "+d)));try{b.trackingDelegate.onOpenFile&&(h=0,(a&2097155)!==1&&(h|=b.tracking.openFlags.READ),(a&2097155)!==0&&(h|=b.tracking.openFlags.WRITE),b.trackingDelegate.onOpenFile(d,h))}catch(a){A("FS.trackingDelegate['onOpenFile']('"+d+"', flags) threw an exception: "+a.message)}return f},close:function(a){if(b.isClosed(a))throw new b.ErrnoError(8);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{b.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,d,c){if(b.isClosed(a))throw new b.ErrnoError(8);if(!a.seekable||!a.stream_ops.llseek)throw new b.ErrnoError(70);if(c!=0&&c!=1&&c!=2)throw new b.ErrnoError(28);return a.position=a.stream_ops.llseek(a,d,c),a.ungotten=[],a.position},read:function(a,g,h,f,c){var d,e;if(f<0||c<0)throw new b.ErrnoError(28);if(b.isClosed(a))throw new b.ErrnoError(8);if((a.flags&2097155)===1)throw new b.ErrnoError(8);if(b.isDir(a.node.mode))throw new b.ErrnoError(31);if(!a.stream_ops.read)throw new b.ErrnoError(28);if(d=typeof c!="undefined",d){if(!a.seekable)throw new b.ErrnoError(70)}else c=a.position;return e=a.stream_ops.read(a,g,h,f,c),d||(a.position+=e),e},write:function(a,i,g,f,c,h){var e,d;if(f<0||c<0)throw new b.ErrnoError(28);if(b.isClosed(a))throw new b.ErrnoError(8);if((a.flags&2097155)===0)throw new b.ErrnoError(8);if(b.isDir(a.node.mode))throw new b.ErrnoError(31);if(!a.stream_ops.write)throw new b.ErrnoError(28);if(a.seekable&&a.flags&1024&&b.llseek(a,0,2),e=typeof c!="undefined",e){if(!a.seekable)throw new b.ErrnoError(70)}else c=a.position;d=a.stream_ops.write(a,i,g,f,c,h),e||(a.position+=d);try{a.path&&b.trackingDelegate.onWriteToFile&&b.trackingDelegate.onWriteToFile(a.path)}catch(b){A("FS.trackingDelegate['onWriteToFile']('"+a.path+"') threw an exception: "+b.message)}return d},allocate:function(a,c,d){if(b.isClosed(a))throw new b.ErrnoError(8);if(c<0||d<=0)throw new b.ErrnoError(28);if((a.flags&2097155)===0)throw new b.ErrnoError(8);if(!b.isFile(a.node.mode)&&!b.isDir(a.node.mode))throw new b.ErrnoError(43);if(!a.stream_ops.allocate)throw new b.ErrnoError(138);a.stream_ops.allocate(a,c,d)},mmap:function(a,e,f,g,c,d){if((c&2)!==0&&(d&2)===0&&(a.flags&2097155)!==2)throw new b.ErrnoError(2);if((a.flags&2097155)===1)throw new b.ErrnoError(2);if(!a.stream_ops.mmap)throw new b.ErrnoError(43);return a.stream_ops.mmap(a,e,f,g,c,d)},msync:function(a,b,c,d,e){return!a||!a.stream_ops.msync?0:a.stream_ops.msync(a,b,c,d,e)},munmap:function(a){return 0},ioctl:function(a,c,d){if(!a.stream_ops.ioctl)throw new b.ErrnoError(59);return a.stream_ops.ioctl(a,c,d)},readFile:function(h,a){var d,e,g,f,c;if(a=a||{},a.flags=a.flags||0,a.encoding=a.encoding||"binary",a.encoding!=="utf8"&&a.encoding!=="binary")throw new Error('Invalid encoding type "'+a.encoding+'"');return e=b.open(h,a.flags),g=b.stat(h),f=g.size,c=new Uint8Array(f),b.read(e,c,0,f,0),a.encoding==="utf8"?d=aA(c,0):a.encoding==="binary"&&(d=c),b.close(e),d},writeFile:function(g,c,a){var d,e,f;if(a=a||{},a.flags=a.flags||577,d=b.open(g,a.flags,a.mode),typeof c=="string")e=new Uint8Array(aj(c)+1),f=ax(c,e,0,e.length),b.write(d,e,0,f,void 0,a.canOwn);else if(ArrayBuffer.isView(c))b.write(d,c,0,c.byteLength,void 0,a.canOwn);else throw new Error("Unsupported data type");b.close(d)},cwd:function(){return b.currentPath},chdir:function(d){var a=b.lookupPath(d,{follow:!0}),c;if(a.node===null)throw new b.ErrnoError(44);if(!b.isDir(a.node.mode))throw new b.ErrnoError(54);if(c=b.nodePermissions(a.node,"x"),c)throw new b.ErrnoError(c);b.currentPath=a.path},createDefaultDirectories:function(){b.mkdir("/tmp"),b.mkdir("/home"),b.mkdir("/home/web_user")},createDefaultDevices:function(){b.mkdir("/dev"),b.registerDevice(b.makedev(1,3),{read:function(){return 0},write:function(b,c,d,a,e){return a}}),b.mkdev("/dev/null",b.makedev(1,3)),af.register(b.makedev(5,0),af.default_tty_ops),af.register(b.makedev(6,0),af.default_tty1_ops),b.mkdev("/dev/tty",b.makedev(5,0)),b.mkdev("/dev/tty1",b.makedev(6,0));var a=nV();b.createDevice("/dev","random",a),b.createDevice("/dev","urandom",a),b.mkdir("/dev/shm"),b.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){b.mkdir("/proc");var a=b.mkdir("/proc/self");b.mkdir("/proc/self/fd"),b.mount({mount:function(){var c=b.createNode(a,"fd",16384|511,73);return c.node_ops={lookup:function(f,d){var e=+d,c=b.getStream(e),a;if(!c)throw new b.ErrnoError(8);return a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}},a.parent=a,a}},c}},{},"/proc/self/fd")},createStandardStreams:function(){var a,c,d;g.stdin?b.createDevice("/dev","stdin",g.stdin):b.symlink("/dev/tty","/dev/stdin"),g.stdout?b.createDevice("/dev","stdout",null,g.stdout):b.symlink("/dev/tty","/dev/stdout"),g.stderr?b.createDevice("/dev","stderr",null,g.stderr):b.symlink("/dev/tty1","/dev/stderr"),a=b.open("/dev/stdin",0),c=b.open("/dev/stdout",1),d=b.open("/dev/stderr",1)},ensureErrnoError:function(){if(b.ErrnoError)return;b.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error"},b.ErrnoError.prototype=new Error,b.ErrnoError.prototype.constructor=b.ErrnoError,[44].forEach(function(a){b.genericErrors[a]=new b.ErrnoError(a),b.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){b.ensureErrnoError(),b.nameTable=new Array(4096),b.mount(o,{},"/"),b.createDefaultDirectories(),b.createDefaultDevices(),b.createSpecialDirectories(),b.filesystems={MEMFS:o,IDBFS:B}},init:function(a,c,d){b.init.initialized=!0,b.ensureErrnoError(),g.stdin=a||g.stdin,g.stdout=c||g.stdout,g.stderr=d||g.stderr,b.createStandardStreams()},quit:function(){var c,a,d;b.init.initialized=!1,c=g._fflush,c&&c(0);for(a=0;a<b.streams.length;a++){if(d=b.streams[a],!d)continue;b.close(d)}},getMode:function(b,c){var a=0;return b&&(a|=292|73),c&&(a|=146),a},findObject:function(c,d){var a=b.analyzePath(c,d);return a.exists?a.object:null},analyzePath:function(d,e){var c,a;try{c=b.lookupPath(d,{follow:!e}),d=c.path}catch(a){}a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{c=b.lookupPath(d,{parent:!0}),a.parentExists=!0,a.parentPath=c.path,a.parentObject=c.node,a.name=u.basename(d),c=b.lookupPath(d,{follow:!e}),a.exists=!0,a.path=c.path,a.object=c.node,a.name=c.node.name,a.isRoot=c.path==="/"}catch(b){a.error=b.errno}return a},createPath:function(a,f,g,h){var d,e,c;for(a=typeof a=="string"?a:b.getPath(a),d=f.split("/").reverse();d.length;){if(e=d.pop(),!e)continue;c=u.join2(a,e);try{b.mkdir(c)}catch(a){}a=c}return c},createFile:function(a,c,h,d,e){var f=u.join2(typeof a=="string"?a:b.getPath(a),c),g=b.getMode(d,e);return b.create(f,g)},createDataFile:function(c,g,a,l,k,j){var n=g?u.join2(typeof c=="string"?c:b.getPath(c),g):c,f=b.getMode(l,k),e=b.create(n,f),h,d,m,i;if(a){if(typeof a=="string"){h=new Array(a.length);for(d=0,m=a.length;d<m;++d)h[d]=a.charCodeAt(d);a=h}b.chmod(e,f|146),i=b.open(e,577),b.write(i,a,0,a.length,0,j),b.close(i),b.chmod(e,f)}return e},createDevice:function(c,f,d,a){var g=u.join2(typeof c=="string"?c:b.getPath(c),f),h=b.getMode(!!d,!!a),e;return b.createDevice.major||(b.createDevice.major=64),e=b.makedev(b.createDevice.major++,0),b.registerDevice(e,{open:function(a){a.seekable=!1},close:function(b){a&&a.buffer&&a.buffer.length&&a(10)},read:function(h,i,f,g,j){for(var c=0,e=0,a;e<g;e++){try{a=d()}catch(a){throw new b.ErrnoError(29)}if(a===void 0&&c===0)throw new b.ErrnoError(6);if(a===null||a===void 0)break;c++,i[f+e]=a}return c&&(h.node.timestamp=Date.now()),c},write:function(e,f,g,d,h){for(var c=0;c<d;c++)try{a(f[g+c])}catch(a){throw new b.ErrnoError(29)}return d&&(e.node.timestamp=Date.now()),c}}),b.mkdev(g,h,e)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(bc)try{a.contents=bq(bc(a.url),!0),a.usedBytes=a.contents.length}catch(a){throw new b.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(i,j,d,k,l){var g,c,a,e,h;function f(){this.lengthKnown=!1,this.chunks=[]}if(f.prototype.get=function(a){var b,c;return a>this.length-1||a<0?void 0:(b=a%this.chunkSize,c=a/this.chunkSize|0,this.getter(c)[b])},f.prototype.setDataGetter=function(a){this.getter=a},f.prototype.cacheLength=function(){var b=new XMLHttpRequest,a,f,g,h,c,i,e;if(b.open("HEAD",d,!1),b.send(null),!(b.status>=200&&b.status<300||b.status===304))throw new Error("Couldn't load "+d+". Status: "+b.status);a=Number(b.getResponseHeader("Content-length")),g=(f=b.getResponseHeader("Accept-Ranges"))&&f==="bytes",h=(f=b.getResponseHeader("Content-Encoding"))&&f==="gzip",c=1024*1024,g||(c=a),i=function(f,e){if(f>e)throw new Error("invalid range ("+f+", "+e+") or no bytes requested!");if(e>a-1)throw new Error("only "+a+" bytes available! programmer error!");var b=new XMLHttpRequest;if(b.open("GET",d,!1),a!==c&&b.setRequestHeader("Range","bytes="+f+"-"+e),typeof Uint8Array!="undefined"&&(b.responseType="arraybuffer"),b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined"),b.send(null),!(b.status>=200&&b.status<300||b.status===304))throw new Error("Couldn't load "+d+". Status: "+b.status);return b.response!==void 0?new Uint8Array(b.response||[]):bq(b.responseText||"",!0)},e=this,e.setDataGetter(function(b){var f=b*c,d=(b+1)*c-1;if(d=Math.min(d,a-1),typeof e.chunks[b]=="undefined"&&(e.chunks[b]=i(f,d)),typeof e.chunks[b]=="undefined")throw new Error("doXHR failed!");return e.chunks[b]}),(h||!a)&&(c=a=1,a=this.getter(0).length,c=a,aD("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=a,this._chunkSize=c,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){if(!at)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";g=new f,Object.defineProperties(g,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}}),c={isDevice:!1,contents:g}}else c={isDevice:!1,url:d};return a=b.createFile(i,j,c,k,l),c.contents?a.contents=c.contents:c.url&&(a.contents=null,a.url=c.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}}),e={},h=Object.keys(a.stream_ops),h.forEach(function(c){var d=a.stream_ops[c];e[c]=function(){return b.forceLoadFile(a),d.apply(null,arguments)}}),e.read=function(j,h,g,i,f){var d,e,c;if(b.forceLoadFile(a),d=j.node.contents,f>=d.length)return 0;if(e=Math.min(d.length-f,i),d.slice)for(c=0;c<e;c++)h[g+c]=d[f+c];else for(c=0;c<e;c++)h[g+c]=d.get(f+c);return e},a.stream_ops=e,a},createPreloadedFile:function(i,e,f,p,o,j,d,m,n,k){var c,a;h.init(),c=e?ae.resolve(u.join2(i,e)):i,a=cb("cp "+c);function l(h){function l(c){k&&k(),m||b.createDataFile(i,e,c,p,o,n),j&&j(),a_(a)}var f=!1;g.preloadPlugins.forEach(function(b){if(f)return;b.canHandle(c)&&(b.handle(h,c,l,function(){d&&d(),a_(a)}),f=!0)}),f||l(h)}bU(a),typeof f=="string"?nT(f,function(a){l(a)},d):l(f)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,d,a){var f,c;d=d||function(){},a=a||function(){},f=b.indexedDB();try{c=f.open(b.DB_NAME(),b.DB_VERSION)}catch(b){return a(b)}c.onupgradeneeded=function(){aD("creating db");var a=c.result;a.createObjectStore(b.DB_STORE_NAME)},c.onsuccess=function(){var l=c.result,j=l.transaction([b.DB_STORE_NAME],"readwrite"),k=j.objectStore(b.DB_STORE_NAME),g=0,f=0,h=e.length;function i(){f==0?d():a()}e.forEach(function(a){var c=k.put(b.analyzePath(a).object.contents,a);c.onsuccess=function(){g++,g+f==h&&i()},c.onerror=function(){f++,g+f==h&&i()}}),j.onerror=a},c.onerror=a},loadFilesFromDB:function(e,d,a){var f,c;d=d||function(){},a=a||function(){},f=b.indexedDB();try{c=f.open(b.DB_NAME(),b.DB_VERSION)}catch(b){return a(b)}c.onupgradeneeded=a,c.onsuccess=function(){var l=c.result,j,k,g,f,h;try{j=l.transaction([b.DB_STORE_NAME],"readonly")}catch(b){a(b);return}k=j.objectStore(b.DB_STORE_NAME),g=0,f=0,h=e.length;function i(){f==0?d():a()}e.forEach(function(a){var c=k.get(a);c.onsuccess=function(){b.analyzePath(a).exists&&b.unlink(a),b.createDataFile(u.dirname(a),u.basename(a),c.result,!0,!0,!0),g++,g+f==h&&i()},c.onerror=function(){f++,g+f==h&&i()}}),j.onerror=a},c.onerror=a}},q={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,c,f){var a,d;if(c[0]==="/")return c;if(e===-100)a=b.cwd();else{if(d=b.getStream(e),!d)throw new b.ErrnoError(8);a=d.path}if(c.length==0){if(!f)throw new b.ErrnoError(44);return a}return u.join2(a,c)},doStat:function(f,d,a){try{var c=f(d)}catch(a){if(a&&a.node&&u.normalize(d)!==u.normalize(b.getPath(a.node)))return-54;throw a}return e[a>>2]=c.dev,e[a+4>>2]=0,e[a+8>>2]=c.ino,e[a+12>>2]=c.mode,e[a+16>>2]=c.nlink,e[a+20>>2]=c.uid,e[a+24>>2]=c.gid,e[a+28>>2]=c.rdev,e[a+32>>2]=0,I=[c.size>>>0,(s=c.size,+Math.abs(s)>=1?s>0?(Math.min(+Math.floor(s/4294967296),4294967295)|0)>>>0:~~+Math.ceil((s-+(~~s>>>0))/4294967296)>>>0:0)],e[a+40>>2]=I[0],e[a+44>>2]=I[1],e[a+48>>2]=4096,e[a+52>>2]=c.blocks,e[a+56>>2]=c.atime.getTime()/1e3|0,e[a+60>>2]=0,e[a+64>>2]=c.mtime.getTime()/1e3|0,e[a+68>>2]=0,e[a+72>>2]=c.ctime.getTime()/1e3|0,e[a+76>>2]=0,I=[c.ino>>>0,(s=c.ino,+Math.abs(s)>=1?s>0?(Math.min(+Math.floor(s/4294967296),4294967295)|0)>>>0:~~+Math.ceil((s-+(~~s>>>0))/4294967296)>>>0:0)],e[a+80>>2]=I[0],e[a+84>>2]=I[1],0},doMsync:function(a,d,c,e,f){var g=t.slice(a,a+c);b.msync(d,g,f,c,e)},doMkdir:function(a,c){return a=u.normalize(a),a[a.length-1]==="/"&&(a=a.substr(0,a.length-1)),b.mkdir(a,c,0),0},doMknod:function(c,a,d){switch(a&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return b.mknod(c,a,d),0},doReadlink:function(g,c,d){var e,a,f;return d<=0?-28:(e=b.readlink(g),a=Math.min(d,aj(e)),f=x[c+a],M(e,c,d+1),x[c+a]=f,a)},doAccess:function(f,c){var d,e,a;return c&~7?-28:(e=b.lookupPath(f,{follow:!0}),d=e.node,!d)?-44:(a="",c&4&&(a+="r"),c&2&&(a+="w"),c&1&&(a+="x"),a&&b.nodePermissions(d,a))?-2:0},doDup:function(d,e,a){var c=b.getStream(a);return c&&b.close(c),b.open(d,e,0,a,a).fd},doReadv:function(h,d,k,i){for(var f=0,a=0,j,g,c;a<k;a++){if(j=e[d+a*8>>2],g=e[d+(a*8+4)>>2],c=b.read(h,x,j,g,i),c<0)return-1;if(f+=c,c<g)break}return f},doWritev:function(g,c,k,h){for(var f=0,a=0,i,j,d;a<k;a++){if(i=e[c+a*8>>2],j=e[c+(a*8+4)>>2],d=b.write(g,x,i,j,h),d<0)return-1;f+=d}return f},varargs:void 0,get:function(){q.varargs+=4;var a=e[q.varargs-4>>2];return a},getStr:function(a){var b=H(a);return b},getStreamFromFD:function(c){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);return a},get64:function(a,b){return a}};function nS(B,g,d,f,C){var i,A,z,y,v,u,t,s,r,l,o,m,p,w,x,k,a,c,h,j;try{i=0,A=g?e[g>>2]:0,z=g?e[g+4>>2]:0,y=d?e[d>>2]:0,v=d?e[d+4>>2]:0,u=f?e[f>>2]:0,t=f?e[f+4>>2]:0,s=0,r=0,l=0,o=0,m=0,p=0,w=(g?e[g>>2]:0)|(d?e[d>>2]:0)|(f?e[f>>2]:0),x=(g?e[g+4>>2]:0)|(d?e[d+4>>2]:0)|(f?e[f+4>>2]:0),k=function(b,c,d,a){return b<32?c&a:d&a};for(a=0;a<B;a++){if(c=1<<a%32,!k(a,w,x,c))continue;if(h=b.getStream(a),!h)throw new b.ErrnoError(8);j=q.DEFAULT_POLLMASK,h.stream_ops.poll&&(j=h.stream_ops.poll(h)),j&1&&k(a,A,z,c)&&(a<32?s=s|c:r=r|c,i++),j&4&&k(a,y,v,c)&&(a<32?l=l|c:o=o|c,i++),j&2&&k(a,u,t,c)&&(a<32?m=m|c:p=p|c,i++)}return g&&(e[g>>2]=s,e[g+4>>2]=r),d&&(e[d>>2]=l,e[d+4>>2]=o),f&&(e[f>>2]=m,e[f+4>>2]=p),i}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}C={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},E={mount:function(a){return g.websocket=g.websocket&&"object"==typeof g.websocket?g.websocket:{},g.websocket._callbacks={},g.websocket.on=function(b,a){return"function"==typeof a&&(this._callbacks[b]=a),this},g.websocket.emit=function(a,b){"function"==typeof this._callbacks[a]&&this._callbacks[a].call(this,b)},b.createNode(null,"/",16384|511,0)},createSocket:function(i,d,e){var g,a,f,c,h;return d&=~526336,g=d==1,e&&ac(g==(e==6)),a={family:i,type:d,protocol:e,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:E.websocket_sock_ops},f=E.nextname(),c=b.createNode(E.root,f,49152,0),c.sock=a,h=b.createStream({path:f,node:c,flags:2,seekable:!1,stream_ops:E.stream_ops}),a.stream=h,a},getSocket:function(c){var a=b.getStream(c);return!a||!b.isSocket(a.node.mode)?null:a.node.sock},stream_ops:{poll:function(b){var a=b.node.sock;return a.sock_ops.poll(a)},ioctl:function(b,c,d){var a=b.node.sock;return a.sock_ops.ioctl(a,c,d)},read:function(f,c,d,e,g){var b=f.node.sock,a=b.sock_ops.recvmsg(b,e);return a?(c.set(a.buffer,d),a.buffer.length):0},write:function(b,c,d,e,f){var a=b.node.sock;return a.sock_ops.sendmsg(a,c,d,e)},close:function(b){var a=b.node.sock;a.sock_ops.close(a)}},nextname:function(){return E.nextname.current||(E.nextname.current=0),"socket["+E.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,c,h){var a,j,l,f,m,d,k,n,i;if(typeof c=="object"&&(a=c,c=null,h=null),a)if(a._socket)c=a._socket.remoteAddress,h=a._socket.remotePort;else{if(j=/ws[s]?:\/\/([^:]+):(\d+)/.exec(a.url),!j)throw new Error("WebSocket URL must be in the format ws(s)://address:port");c=j[1],h=parseInt(j[2],10)}else try{l=g.websocket&&"object"==typeof g.websocket,f="ws:#".replace("#","//"),l&&"string"==typeof g.websocket.url&&(f=g.websocket.url),(f==="ws://"||f==="wss://")&&(m=c.split("/"),f=f+m[0]+":"+h+"/"+m.slice(1).join("/")),d="binary",l&&"string"==typeof g.websocket.subprotocol&&(d=g.websocket.subprotocol),k=void 0,d!=="null"&&(d=d.replace(/^ +| +$/g,"").split(/ *, */),k=bi?{protocol:d.toString()}:d),l&&null===g.websocket.subprotocol&&(d="null",k=void 0),n=WebSocket,a=new n(f,k),a.binaryType="arraybuffer"}catch(a){throw new b.ErrnoError(C.EHOSTUNREACH)}return i={addr:c,port:h,socket:a,dgram_send_queue:[]},E.websocket_sock_ops.addPeer(e,i),E.websocket_sock_ops.handlePeerEvents(e,i),e.type===2&&typeof e.sport!="undefined"&&i.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(e.sport&65280)>>8,e.sport&255])),i},getPeer:function(a,b,c){return a.peers[b+":"+c]},addPeer:function(b,a){b.peers[a.addr+":"+a.port]=a},removePeer:function(b,a){delete b.peers[a.addr+":"+a.port]},handlePeerEvents:function(b,a){var c=!0,d=function(){g.websocket.emit("open",b.stream.fd);try{for(var c=a.dgram_send_queue.shift();c;)a.socket.send(c),c=a.dgram_send_queue.shift()}catch(b){a.socket.close()}};function e(d){var e,f,h;if(typeof d=="string")e=new TextEncoder,d=e.encode(d);else{if(ac(d.byteLength!==void 0),d.byteLength==0)return;d=new Uint8Array(d)}if(f=c,c=!1,f&&d.length===10&&d[0]===255&&d[1]===255&&d[2]===255&&d[3]===255&&d[4]==="p".charCodeAt(0)&&d[5]==="o".charCodeAt(0)&&d[6]==="r".charCodeAt(0)&&d[7]==="t".charCodeAt(0)){h=d[8]<<8|d[9],E.websocket_sock_ops.removePeer(b,a),a.port=h,E.websocket_sock_ops.addPeer(b,a);return}b.recv_queue.push({addr:a.addr,port:a.port,data:d}),g.websocket.emit("message",b.stream.fd)}bi?(a.socket.on("open",d),a.socket.on("message",function(a,b){if(!b.binary)return;e(new Uint8Array(a).buffer)}),a.socket.on("close",function(){g.websocket.emit("close",b.stream.fd)}),a.socket.on("error",function(a){b.error=C.ECONNREFUSED,g.websocket.emit("error",[b.stream.fd,b.error,"ECONNREFUSED: Connection refused"])})):(a.socket.onopen=d,a.socket.onclose=function(){g.websocket.emit("close",b.stream.fd)},a.socket.onmessage=function(a){e(a.data)},a.socket.onerror=function(a){b.error=C.ECONNREFUSED,g.websocket.emit("error",[b.stream.fd,b.error,"ECONNREFUSED: Connection refused"])})},poll:function(b){var c,a;return b.type===1&&b.server?b.pending.length?64|1:0:(c=0,a=b.type===1?E.websocket_sock_ops.getPeer(b,b.daddr,b.dport):null,(b.recv_queue.length||!a||a&&a.socket.readyState===a.socket.CLOSING||a&&a.socket.readyState===a.socket.CLOSED)&&(c|=64|1),(!a||a&&a.socket.readyState===a.socket.OPEN)&&(c|=4),(a&&a.socket.readyState===a.socket.CLOSING||a&&a.socket.readyState===a.socket.CLOSED)&&(c|=16),c)},ioctl:function(a,c,d){switch(c){case 21531:var b=0;return a.recv_queue.length&&(b=a.recv_queue[0].data.length),e[d>>2]=b,0;default:return C.EINVAL}},close:function(a){var c,b,d;if(a.server){try{a.server.close()}catch(a){}a.server=null}c=Object.keys(a.peers);for(b=0;b<c.length;b++){d=a.peers[c[b]];try{d.socket.close()}catch(a){}E.websocket_sock_ops.removePeer(a,d)}return 0},bind:function(a,c,d){if(typeof a.saddr!="undefined"||typeof a.sport!="undefined")throw new b.ErrnoError(C.EINVAL);if(a.saddr=c,a.sport=d,a.type===2){a.server&&(a.server.close(),a.server=null);try{a.sock_ops.listen(a,0)}catch(a){if(!(a instanceof b.ErrnoError))throw a;if(a.errno!==C.EOPNOTSUPP)throw a}}},connect:function(a,e,f){var c,d;if(a.server)throw new b.ErrnoError(C.EOPNOTSUPP);if(typeof a.daddr!="undefined"&&typeof a.dport!="undefined")if(c=E.websocket_sock_ops.getPeer(a,a.daddr,a.dport),c)throw c.socket.readyState===c.socket.CONNECTING?new b.ErrnoError(C.EALREADY):new b.ErrnoError(C.EISCONN);throw d=E.websocket_sock_ops.createPeer(a,e,f),a.daddr=d.addr,a.dport=d.port,new b.ErrnoError(C.EINPROGRESS)},listen:function(a,c){if(!bi)throw new b.ErrnoError(C.EOPNOTSUPP)},accept:function(a){if(!a.server)throw new b.ErrnoError(C.EINVAL);var c=a.pending.shift();return c.stream.flags=a.stream.flags,c},getname:function(a,e){var c,d;if(e){if(a.daddr===void 0||a.dport===void 0)throw new b.ErrnoError(C.ENOTCONN);c=a.daddr,d=a.dport}else c=a.saddr||0,d=a.sport||0;return{addr:c,port:d}},sendmsg:function(c,f,h,i,d,e){var a,g;if(c.type===2){if((d===void 0||e===void 0)&&(d=c.daddr,e=c.dport),d===void 0||e===void 0)throw new b.ErrnoError(C.EDESTADDRREQ)}else d=c.daddr,e=c.dport;if(a=E.websocket_sock_ops.getPeer(c,d,e),c.type===1){if(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)throw new b.ErrnoError(C.ENOTCONN);if(a.socket.readyState===a.socket.CONNECTING)throw new b.ErrnoError(C.EAGAIN)}if(ArrayBuffer.isView(f)&&(h+=f.byteOffset,f=f.buffer),g=f.slice(h,h+i),c.type===2)if(!a||a.socket.readyState!==a.socket.OPEN)return(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)&&(a=E.websocket_sock_ops.createPeer(c,d,e)),a.dgram_send_queue.push(g),i;try{return a.socket.send(g),i}catch(a){throw new b.ErrnoError(C.EINVAL)}},recvmsg:function(c,k){var a,d,f,g,h,e,i,j;if(c.type===1&&c.server)throw new b.ErrnoError(C.ENOTCONN);if(a=c.recv_queue.shift(),!a)if(c.type===1){if(d=E.websocket_sock_ops.getPeer(c,c.daddr,c.dport),!d)throw new b.ErrnoError(C.ENOTCONN);if(d.socket.readyState===d.socket.CLOSING||d.socket.readyState===d.socket.CLOSED)return null;throw new b.ErrnoError(C.EAGAIN)}else throw new b.ErrnoError(C.EAGAIN);return f=a.data.byteLength||a.data.length,g=a.data.byteOffset||0,h=a.data.buffer||a.data,e=Math.min(k,f),i={buffer:new Uint8Array(h,g,e),addr:a.addr,port:a.port},c.type===1&&e<f&&(j=f-e,a.data=new Uint8Array(h,g+e,j),c.recv_queue.unshift(a)),i}}};function ak(c){var a=E.getSocket(c);if(!a)throw new b.ErrnoError(8);return a}function bJ(a){return e[bI()>>2]=a,a}function bd(d){for(var a=d.split("."),b=0,c;b<4;b++){if(c=Number(a[b]),isNaN(c))return null;a[b]=c}return(a[0]|a[1]<<8|a[2]<<16|a[3]<<24)>>>0}function aC(a){return parseInt(a)}function bH(b){var g=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,c=[],f,e,a,d;if(!g.test(b))return null;if(b==="::")return[0,0,0,0,0,0,0,0];b.startsWith("::")?b=b.replace("::","Z:"):b=b.replace("::",":Z:"),b.indexOf(".")>0?(b=b.replace(new RegExp("[.]","g"),":"),a=b.split(":"),a[a.length-4]=aC(a[a.length-4])+aC(a[a.length-3])*256,a[a.length-3]=aC(a[a.length-2])+aC(a[a.length-1])*256,a=a.slice(0,a.length-2)):a=b.split(":"),f=0,e=0;for(d=0;d<a.length;d++)if(typeof a[d]=="string")if(a[d]==="Z"){for(e=0;e<8-a.length+1;e++)c[d+e]=0;f=e-1}else c[d+f]=aQ(parseInt(a[d],16));else c[d+f]=a[d];return[c[1]<<16|c[0],c[3]<<16|c[2],c[5]<<16|c[4],c[7]<<16|c[6]]}function bg(a,d,b,f,c){switch(d){case 2:b=bd(b),cJ(a,16),c&&(e[c>>2]=16),W[a>>1]=d,e[a+4>>2]=b,W[a+2>>1]=aQ(f);break;case 10:b=bH(b),cJ(a,28),c&&(e[c>>2]=28),e[a>>2]=d,e[a+8>>2]=b[0],e[a+12>>2]=b[1],e[a+16>>2]=b[2],e[a+20>>2]=b[3],W[a+2>>1]=aQ(f);break;default:return 5}return 0}T={address_map:{id:1,addrs:{},names:{}},lookup_name:function(a){var c=bd(a),b,d;return c!==null?a:(c=bH(a),c!==null)?a:(T.address_map.addrs[a]?b=T.address_map.addrs[a]:(d=T.address_map.id++,ac(d<65535,"exceeded max address mappings of 65535"),b="172.29."+(d&255)+"."+(d&65280),T.address_map.names[b]=a,T.address_map.addrs[a]=b),b)},lookup_addr:function(a){return T.address_map.names[a]?T.address_map.names[a]:null}};function nR(e,d,f,h){var c,a,g;try{return c=ak(e),a=c.sock_ops.accept(c),d&&(g=bg(d,a.family,T.lookup_name(a.daddr),a.dport,f)),a.stream.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nQ(a,c){try{return a=q.getStr(a),q.doAccess(a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function bz(a){return(a&255)+"."+(a>>8&255)+"."+(a>>16&255)+"."+(a>>24&255)}function cD(c){var b="",a=0,f=0,k=0,g=0,h=0,i=0,d=[c[0]&65535,c[0]>>16,c[1]&65535,c[1]>>16,c[2]&65535,c[2]>>16,c[3]&65535,c[3]>>16],j=!0,e="";for(i=0;i<5;i++)if(d[i]!==0){j=!1;break}if(j){if(e=bz(d[6]|d[7]<<16),d[5]===-1)return b="::ffff:",b+=e,b;if(d[5]===0)return b="::",e==="0.0.0.0"&&(e=""),e==="0.0.0.1"&&(e="1"),b+=e,b}for(a=0;a<8;a++)d[a]===0&&(a-k>1&&(h=0),k=a,h++),h>f&&(f=h,g=a-f+1);for(a=0;a<8;a++){if(f>1)if(d[a]===0&&a>=g&&a<g+f){a===g&&(b+=":",g===0&&(b+=":"));continue}b+=Number(bb(d[a]&65535)).toString(16),b+=a<7?":":""}return b}function cC(a,c){var d=W[a>>1],f=bb(aX[a+2>>1]),b;switch(d){case 2:if(c!==16)return{errno:28};b=e[a+4>>2],b=bz(b);break;case 10:if(c!==28)return{errno:28};b=[e[a+8>>2],e[a+12>>2],e[a+16>>2],e[a+20>>2]],b=cD(b);break;default:return{errno:5}}return{family:d,addr:b,port:f}}function bv(c,d,e){if(e&&c===0)return null;var a=cC(c,d);if(a.errno)throw new b.ErrnoError(a.errno);return a.addr=T.lookup_addr(a.addr)||a.addr,a}function nP(d,e,f){var a,c;try{return a=ak(d),c=bv(e,f),a.sock_ops.bind(a,c.addr,c.port),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nN(a){try{return a=q.getStr(a),b.chdir(a),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nM(a,c){try{return a=q.getStr(a),b.chmod(a,c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nL(d,e,f){var a,c;try{return a=ak(d),c=bv(e,f),a.sock_ops.connect(a,c.addr,c.port),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nK(h,f,g){var c,a,d,e;q.varargs=g;try{switch(c=q.getStreamFromFD(h),f){case 0:return a=q.get(),a<0?-28:(d=b.open(c.path,c.flags,0,a),d.fd);case 1:case 2:return 0;case 3:return c.flags;case 4:return a=q.get(),c.flags|=a,0;case 12:return a=q.get(),e=0,W[a+e>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return bJ(28),-1;default:return-28}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nJ(d,a){var c,e;try{return a===0?-28:(c=b.cwd(),e=aj(c),a<e+1)?-68:(M(c,d,a),d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nI(m,d,o){var c,f,a,l,g,h,j,k,i;try{for(c=q.getStreamFromFD(m),c.getdents||(c.getdents=b.readdir(c.path)),f=280,a=0,l=b.llseek(c,0,1),g=Math.floor(l/f);g<c.getdents.length&&a+f<=o;)k=c.getdents[g],k[0]==="."?(h=1,j=4):(i=b.lookupNode(c.node,k),h=i.id,j=b.isChrdev(i.mode)?2:b.isDir(i.mode)?4:b.isLink(i.mode)?10:8),I=[h>>>0,(s=h,+Math.abs(s)>=1?s>0?(Math.min(+Math.floor(s/4294967296),4294967295)|0)>>>0:~~+Math.ceil((s-+(~~s>>>0))/4294967296)>>>0:0)],e[d+a>>2]=I[0],e[d+a+4>>2]=I[1],I=[(g+1)*f>>>0,(s=(g+1)*f,+Math.abs(s)>=1?s>0?(Math.min(+Math.floor(s/4294967296),4294967295)|0)>>>0:~~+Math.ceil((s-+(~~s>>>0))/4294967296)>>>0:0)],e[d+a+8>>2]=I[0],e[d+a+12>>2]=I[1],W[d+a+16>>1]=280,x[d+a+18>>0]=j,M(k,d+a+19,256),a+=f,g+=1;return b.llseek(c,g*f,0),a}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nH(){return 42}function nG(c,d,e){var a,f;try{return A("__sys_getsockname "+c),a=ak(c),f=bg(d,a.family,T.lookup_name(a.saddr||"0.0.0.0"),a.sport,e),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nF(c,d,f,g,h){try{var a=ak(c);if(d===1)if(f===4)return e[g>>2]=a.error,e[h>>2]=4,a.error=null,0;return-50}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nC(f,d,g){var a,c;q.varargs=g;try{switch(a=q.getStreamFromFD(f),d){case 21509:case 21505:return a.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return a.tty?0:-59;case 21519:return a.tty?(c=q.get(),e[c>>2]=0,0):-59;case 21520:return a.tty?-28:-59;case 21531:return c=q.get(),b.ioctl(a,d,c);case 21523:return a.tty?0:-59;case 21524:return a.tty?0:-59;default:n("bad ioctl syscall "+d)}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nB(c,d){try{var a=ak(c);return a.sock_ops.listen(a,d),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nA(a,c){try{return a=q.getStr(a),q.doStat(b.lstat,a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nz(a,c){try{return a=q.getStr(a),q.doMkdir(a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function ny(f,g,a){var c,d,e;q.varargs=a;try{return c=q.getStr(f),d=a?q.get():0,e=b.open(c,g,d),e.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nx(j,k,l){var g,d,f,h,i,a,c;try{g=0;for(d=0;d<k;d++)f=j+8*d,h=e[f>>2],i=W[f+4>>1],a=32,c=b.getStream(h),c&&(a=q.DEFAULT_POLLMASK,c.stream_ops.poll&&(a=c.stream_ops.poll(c))),a&=i|8|16,a&&g++,W[f+6>>1]=a;return g}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nu(a,c,d){try{return a=q.getStr(a),q.doReadlink(a,c,d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function nr(g,h,e,j,d,f){var c,a,i;try{return c=ak(g),a=c.sock_ops.recvmsg(c,e),!a?0:(d&&(i=bg(d,c.family,T.lookup_name(a.addr),a.port,f)),t.set(a.buffer,h),a.buffer.byteLength)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function mZ(a,c){try{return a=q.getStr(a),c=q.getStr(c),b.rename(a,c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function mP(a){try{return a=q.getStr(a),b.rmdir(a),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function mJ(h,e,d,i,f,g){var a,c;try{return a=ak(h),c=bv(f,g,!0),!c?b.write(a.stream,x,e,d):a.sock_ops.sendmsg(a,x,e,d,c.addr,c.port)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}cm=function(a){A("warning: unsupported syscall: __sys_setsockopt");try{return-50}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}};function mE(a,c,d){try{var e=E.createSocket(a,c,d);return e.stream.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function mA(a,c){try{return a=q.getStr(a),q.doStat(b.stat,a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function mm(c,d,a){try{return c=q.getStr(c),e[a+4>>2]=4096,e[a+40>>2]=4096,e[a+8>>2]=1e6,e[a+12>>2]=5e5,e[a+16>>2]=5e5,e[a+20>>2]=b.nextInode,e[a+24>>2]=1e6,e[a+28>>2]=42,e[a+44>>2]=2,e[a+36>>2]=255,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function lU(a,c){try{return a=q.getStr(a),c=q.getStr(c),b.symlink(a,c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}function lT(a){try{return a=q.getStr(a),b.unlink(a),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),-a.errno}}cg=function(){return A("warning: unsupported syscall: __sys_wait4"),-52};function lS(){throw"longjmp"}function lJ(){n()}av=function(){return performance.now()},b_=!0;function lI(b,c){var a;if(b===0)a=Date.now();else if((b===1||b===4)&&b_)a=av();else return bJ(28),-1;return e[c>>2]=a/1e3|0,e[c+4>>2]=a%1e3*1e3*1e3|0,0}function k$(a){n("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function k_(){n("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function kZ(a,b){n("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function kY(a,b){n("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function bZ(b,d){var c,a,e;return h.mainLoop.timingMode=b,h.mainLoop.timingValue=d,!h.mainLoop.func?1:(h.mainLoop.running||(bs(),h.mainLoop.running=!0),b==0?(h.mainLoop.scheduler=function(){var a=Math.max(0,h.mainLoop.tickStartTime+d-av())|0;setTimeout(h.mainLoop.runner,a)},h.mainLoop.method="timeout"):b==1?(h.mainLoop.scheduler=function(){h.requestAnimationFrame(h.mainLoop.runner)},h.mainLoop.method="rAF"):b==2&&(typeof setImmediate=="undefined"&&(c=[],a="setimmediate",e=function(b){(b.data===a||b.data.target===a)&&(b.stopPropagation(),c.shift()())},addEventListener("message",e,!0),setImmediate=function(b){c.push(b),at?(g.setImmediates===void 0&&(g.setImmediates=[]),g.setImmediates.push(b),postMessage({target:a})):postMessage(a,"*")}),h.mainLoop.scheduler=function(){setImmediate(h.mainLoop.runner)},h.mainLoop.method="immediate"),0)}function kX(){return!d.currentContext||!d.currentContext.GLctx?-3:d.currentContext.defaultFbo?(d.blitOffscreenFramebuffer(d.currentContext),0):d.currentContext.attributes.explicitSwapControl?0:-3}function kS(){return kX()}function bs(){aL+=1}function kP(a){bE(a)}function cc(){if(!cG())try{kP(be)}catch(a){if(a instanceof aW)return;throw a}}function cd(c,b,d,e,f){ac(!h.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),h.mainLoop.func=c,h.mainLoop.arg=e;var g=h.mainLoop.currentlyRunningMainloop;function a(){return!(g<h.mainLoop.currentlyRunningMainloop)||(bP(),cc(),!1)}if(h.mainLoop.running=!1,h.mainLoop.runner=function(){var f,b,d,e;if(aq)return;if(h.mainLoop.queue.length>0){if(f=Date.now(),b=h.mainLoop.queue.shift(),b.func(b.arg),h.mainLoop.remainingBlockers&&(d=h.mainLoop.remainingBlockers,e=d%1==0?d-1:Math.floor(d),b.counted?h.mainLoop.remainingBlockers=e:(e=e+.5,h.mainLoop.remainingBlockers=(8*d+e)/9)),console.log('main loop blocker "'+b.name+'" took '+(Date.now()-f)+" ms"),h.mainLoop.updateStatus(),!a())return;setTimeout(h.mainLoop.runner,0);return}if(!a())return;if(h.mainLoop.currentFrameNumber=h.mainLoop.currentFrameNumber+1|0,h.mainLoop.timingMode==1&&h.mainLoop.timingValue>1&&h.mainLoop.currentFrameNumber%h.mainLoop.timingValue!=0){h.mainLoop.scheduler();return}if(h.mainLoop.timingMode==0&&(h.mainLoop.tickStartTime=av()),h.mainLoop.runIter(c),!a())return;typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),h.mainLoop.scheduler()},f||(b&&b>0?bZ(0,1e3/b):bZ(1,1),h.mainLoop.scheduler()),d)throw"unwind"}function bQ(a,b){if(aq)return;if(b){a();return}try{a()}catch(a){if(a instanceof aW)return;if(a!=="unwind")throw a&&typeof a=="object"&&a.stack&&A("exception thrown: "+[a,a.stack]),a}cc()}function cf(a,b){return bs(),setTimeout(function(){bP(),bQ(a)},b)}function bP(){aL-=1}h={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){h.mainLoop.scheduler=null,h.mainLoop.currentlyRunningMainloop++},resume:function(){var a,b,c;h.mainLoop.currentlyRunningMainloop++,a=h.mainLoop.timingMode,b=h.mainLoop.timingValue,c=h.mainLoop.func,h.mainLoop.func=null,cd(c,0,!1,h.mainLoop.arg,!0),bZ(a,b),h.mainLoop.scheduler()},updateStatus:function(){var c,a,b;g.setStatus&&(c=g.statusMessage||"Please wait...",a=h.mainLoop.remainingBlockers,b=h.mainLoop.expectedBlockers,a?a<b?g.setStatus(c+" ("+(b-a)+"/"+b+")"):g.setStatus(c):g.setStatus(""))},runIter:function(a){if(aq)return;if(g.preMainLoop){var b=g.preMainLoop();if(b===!1)return}bQ(a),g.postMainLoop&&g.postMainLoop()}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){var b,c,a;if(g.preloadPlugins||(g.preloadPlugins=[]),h.initted)return;h.initted=!0;try{new Blob,h.hasBlobConstructor=!0}catch(a){h.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}h.BlobBuilder=typeof MozBlobBuilder!="undefined"?MozBlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:h.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),h.URLObject=typeof window!="undefined"?window.URL?window.URL:window.webkitURL:void 0,!g.noImageDecoding&&typeof h.URLObject=="undefined"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),g.noImageDecoding=!0),b={},b.canHandle=function(a){return!g.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},b.handle=function(c,d,i,j){var b=null,f,e,a;if(h.hasBlobConstructor)try{b=new Blob([c],{type:h.getMimetype(d)}),b.size!==c.length&&(b=new Blob([new Uint8Array(c).buffer],{type:h.getMimetype(d)}))}catch(a){aG("Blob constructor present but fails: "+a+"; falling back to blob builder")}b||(f=new h.BlobBuilder,f.append(new Uint8Array(c).buffer),b=f.getBlob()),e=h.URLObject.createObjectURL(b),a=new Image,a.onload=function(){var b,f;ac(a.complete,"Image "+d+" could not be decoded"),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,f=b.getContext("2d"),f.drawImage(a,0,0),g.preloadedImages[d]=b,h.URLObject.revokeObjectURL(e),i&&i(c)},a.onerror=function(b){console.log("Image "+e+" could not be decoded"),j&&j()},a.src=e},g.preloadPlugins.push(b),c={},c.canHandle=function(a){return!g.noAudioDecoding&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},c.handle=function(e,b,f,j){var c=!1,k,l,a;function d(a){if(c)return;c=!0,g.preloadedAudios[b]=a,f&&f(e)}function i(){if(c)return;c=!0,g.preloadedAudios[b]=new Audio,j&&j()}if(h.hasBlobConstructor){try{k=new Blob([e],{type:h.getMimetype(b)})}catch(a){return i()}l=h.URLObject.createObjectURL(k),a=new Audio,a.addEventListener("canplaythrough",function(){d(a)},!1),a.onerror=function(h){if(c)return;console.log("warning: browser could not fully decode audio "+b+", trying slower base64 approach");function f(g){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="=",a="",c=0,b=0,d=0,h;d<g.length;d++)for(c=c<<8|g[d],b+=8;b>=6;)h=c>>b-6&63,b-=6,a+=e[h];return b==2?(a+=e[(c&3)<<4],a+=f+f):b==4&&(a+=e[(c&15)<<2],a+=f),a}a.src="data:audio/x-"+b.substr(-3)+";base64,"+f(e),d(a)},a.src=l,cf(function(){d(a)},1e4)}else return i()},g.preloadPlugins.push(c);function d(){h.pointerLock=document.pointerLockElement===g.canvas||document.mozPointerLockElement===g.canvas||document.webkitPointerLockElement===g.canvas||document.msPointerLockElement===g.canvas}a=g.canvas,a&&(a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock||a.msRequestPointerLock||function(){},a.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},a.exitPointerLock=a.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1),document.addEventListener("webkitpointerlockchange",d,!1),document.addEventListener("mspointerlockchange",d,!1),g.elementPointerLock&&a.addEventListener("click",function(a){!h.pointerLock&&g.canvas.requestPointerLock&&(g.canvas.requestPointerLock(),a.preventDefault())},!1))},createContext:function(f,b,l,i){var a,e,j,k;if(b&&g.ctx&&f==g.canvas)return g.ctx;if(b){if(j={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1},i)for(k in i)j[k]=i[k];typeof d!="undefined"&&(e=d.createContext(f,j),e&&(a=d.getContext(e).GLctx))}else a=f.getContext("2d");return a?(l&&(b||ac(typeof c=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),g.ctx=a,b&&d.makeContextCurrent(e),g.useWebGL=b,h.moduleContextCreatedCallbacks.forEach(function(a){a()}),h.init()),a):null},destroyContext:function(a,b,c){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(d,e){var b,a;h.lockPointer=d,h.resizeCanvas=e,typeof h.lockPointer=="undefined"&&(h.lockPointer=!0),typeof h.resizeCanvas=="undefined"&&(h.resizeCanvas=!1),b=g.canvas;function c(){h.isFullscreen=!1;var a=b.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===a?(b.exitFullscreen=h.exitFullscreen,h.lockPointer&&b.requestPointerLock(),h.isFullscreen=!0,h.resizeCanvas?h.setFullscreenCanvasSize():h.updateCanvasDimensions(b)):(a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),h.resizeCanvas?h.setWindowedCanvasSize():h.updateCanvasDimensions(b)),g.onFullScreen&&g.onFullScreen(h.isFullscreen),g.onFullscreen&&g.onFullscreen(h.isFullscreen)}h.fullscreenHandlersInstalled||(h.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",c,!1),document.addEventListener("mozfullscreenchange",c,!1),document.addEventListener("webkitfullscreenchange",c,!1),document.addEventListener("MSFullscreenChange",c,!1)),a=document.createElement("div"),b.parentNode.insertBefore(a,b),a.appendChild(b),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?function(){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(a.webkitRequestFullScreen?function(){a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),a.requestFullscreen()},exitFullscreen:function(){if(!h.isFullscreen)return!1;var a=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return a.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(b){var a=Date.now(),c;if(h.nextRAF===0)h.nextRAF=a+1e3/60;else while(a+2>=h.nextRAF)h.nextRAF+=1e3/60;c=Math.max(h.nextRAF-a,0),setTimeout(b,c)},requestAnimationFrame:function(a){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(a);return}var b=h.fakeRequestAnimationFrame;b(a)},safeSetTimeout:function(a){return cf(a)},safeRequestAnimationFrame:function(a){return bs(),h.requestAnimationFrame(function(){bP(),bQ(a)})},getMimetype:function(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[a.substr(a.lastIndexOf(".")+1)]},getUserMedia:function(a){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(a)},getMovementX:function(a){return a.movementX||a.mozMovementX||a.webkitMovementX||0},getMovementY:function(a){return a.movementY||a.mozMovementY||a.webkitMovementY||0},getMouseWheelDelta:function(a){var b=0;switch(a.type){case"DOMMouseScroll":b=a.detail/3;break;case"mousewheel":b=a.wheelDelta/120;break;case"wheel":switch(b=a.deltaY,a.deltaMode){case 0:b/=100;break;case 1:b/=3;break;case 2:b*=80;break;default:throw"unrecognized mouse wheel delta mode: "+a.deltaMode}break;default:throw"unrecognized mouse wheel event: "+a.type}return b},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(a){var b,o,l,m,n,c,j,k,d,i,e,f;if(h.pointerLock)a.type!="mousemove"&&"mozMovementX"in a?h.mouseMovementX=h.mouseMovementY=0:(h.mouseMovementX=h.getMovementX(a),h.mouseMovementY=h.getMovementY(a)),typeof SDL!="undefined"?(h.mouseX=SDL.mouseX+h.mouseMovementX,h.mouseY=SDL.mouseY+h.mouseMovementY):(h.mouseX+=h.mouseMovementX,h.mouseY+=h.mouseMovementY);else{if(b=g.canvas.getBoundingClientRect(),o=g.canvas.width,l=g.canvas.height,m=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,n=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset,a.type==="touchstart"||a.type==="touchend"||a.type==="touchmove"){if(c=a.touch,c===void 0)return;j=c.pageX-(m+b.left),k=c.pageY-(n+b.top),j=j*(o/b.width),k=k*(l/b.height),d={x:j,y:k},a.type==="touchstart"?(h.lastTouches[c.identifier]=d,h.touches[c.identifier]=d):(a.type==="touchend"||a.type==="touchmove")&&(i=h.touches[c.identifier],i||(i=d),h.lastTouches[c.identifier]=i,h.touches[c.identifier]=d);return}e=a.pageX-(m+b.left),f=a.pageY-(n+b.top),e=e*(o/b.width),f=f*(l/b.height),h.mouseMovementX=e-h.mouseX,h.mouseMovementY=f-h.mouseY,h.mouseX=e,h.mouseY=f}},resizeListeners:[],updateResizeListeners:function(){var a=g.canvas;h.resizeListeners.forEach(function(b){b(a.width,a.height)})},setCanvasSize:function(a,b,c){var d=g.canvas;h.updateCanvasDimensions(d,a,b),c||h.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var a=K[SDL.screen>>2];a=a|8388608,e[SDL.screen>>2]=a}h.updateCanvasDimensions(g.canvas),h.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var a=K[SDL.screen>>2];a=a&~8388608,e[SDL.screen>>2]=a}h.updateCanvasDimensions(g.canvas),h.updateResizeListeners()},updateCanvasDimensions:function(a,d,e){var b,c,f;d&&e?(a.widthNative=d,a.heightNative=e):(d=a.widthNative,e=a.heightNative),b=d,c=e,g.forcedAspectRatio&&g.forcedAspectRatio>0&&(b/c<g.forcedAspectRatio?b=Math.round(c*g.forcedAspectRatio):c=Math.round(b/g.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===a.parentNode&&typeof screen!="undefined"&&(f=Math.min(screen.width/b,screen.height/c),b=Math.round(b*f),c=Math.round(c*f)),h.resizeCanvas?(a.width!=b&&(a.width=b),a.height!=c&&(a.height=c),typeof a.style!="undefined"&&(a.style.removeProperty("width"),a.style.removeProperty("height"))):(a.width!=d&&(a.width=d),a.height!=e&&(a.height=e),typeof a.style!="undefined"&&(b!=d||c!=e?(a.style.setProperty("width",b+"px","important"),a.style.setProperty("height",c+"px","important")):(a.style.removeProperty("width"),a.style.removeProperty("height"))))}};function kH(){h.mainLoop.pause(),h.mainLoop.func=null}function kG(a){bN=!1,aL=0,bE(a)}function kF(a){var b=a.getExtension("ANGLE_instanced_arrays");if(b)return a.vertexAttribDivisor=function(a,c){b.vertexAttribDivisorANGLE(a,c)},a.drawArraysInstanced=function(a,c,d,e){b.drawArraysInstancedANGLE(a,c,d,e)},a.drawElementsInstanced=function(a,c,d,e,f){b.drawElementsInstancedANGLE(a,c,d,e,f)},1}function kE(a){var b=a.getExtension("OES_vertex_array_object");if(b)return a.createVertexArray=function(){return b.createVertexArrayOES()},a.deleteVertexArray=function(a){b.deleteVertexArrayOES(a)},a.bindVertexArray=function(a){b.bindVertexArrayOES(a)},a.isVertexArray=function(a){return b.isVertexArrayOES(a)},1}function kD(a){var b=a.getExtension("WEBGL_draw_buffers");if(b)return a.drawBuffers=function(a,c){b.drawBuffersWEBGL(a,c)},1}function kC(a){return!!(a.dibvbi=a.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function ir(a){return!!(a.mdibvbi=a.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function iq(a){return!!(a.multiDrawWebgl=a.getExtension("WEBGL_multi_draw"))}d={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(a){d.lastError||(d.lastError=a)},getNewId:function(b){for(var c=d.counter++,a=b.length;a<c;a++)b[a]=null;return c},getSource:function(h,f,g,c){for(var d="",a=0,b;a<f;++a)b=c?e[c+a*4>>2]:-1,d+=H(e[g+a*4>>2],b<0?void 0:b);return d},createContext:function(a,b){var c,e;return b.renderViaOffscreenBackBuffer&&(b.preserveDrawingBuffer=!0),a.getContextSafariWebGL2Fixed||(a.getContextSafariWebGL2Fixed=a.getContext,a.getContext=function(b,d){var c=a.getContextSafariWebGL2Fixed(b,d);return b=="webgl"==c instanceof WebGLRenderingContext?c:null}),c=b.majorVersion>1?a.getContext("webgl2",b):a.getContext("webgl",b),!c?0:(e=d.registerContext(c,b),e)},enableOffscreenFramebufferAttributes:function(a){a.renderViaOffscreenBackBuffer=!0,a.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(b){var a=b.GLctx,g=a.createFramebuffer(),i,j,n,m,h,k,e,l,f,c;a.bindFramebuffer(36160,g),b.defaultFbo=g,b.defaultFboForbidBlitFramebuffer=!1,a.getContextAttributes().antialias?b.defaultFboForbidBlitFramebuffer=!0:(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/),i!=null&&(j=i[1],b.defaultFboForbidBlitFramebuffer=j<67)),b.defaultColorTarget=a.createTexture(),b.defaultDepthTarget=a.createRenderbuffer(),d.resizeOffscreenFramebuffer(b),a.bindTexture(3553,b.defaultColorTarget),a.texParameteri(3553,10241,9728),a.texParameteri(3553,10240,9728),a.texParameteri(3553,10242,33071),a.texParameteri(3553,10243,33071),a.texImage2D(3553,0,6408,a.canvas.width,a.canvas.height,0,6408,5121,null),a.framebufferTexture2D(36160,36064,3553,b.defaultColorTarget,0),a.bindTexture(3553,null),n=a.createRenderbuffer(),a.bindRenderbuffer(36161,b.defaultDepthTarget),a.renderbufferStorage(36161,33189,a.canvas.width,a.canvas.height),a.framebufferRenderbuffer(36160,36096,36161,b.defaultDepthTarget),a.bindRenderbuffer(36161,null),m=[-1,-1,-1,1,1,-1,1,1],h=a.createBuffer(),a.bindBuffer(34962,h),a.bufferData(34962,new Float32Array(m),35044),a.bindBuffer(34962,null),b.blitVB=h,k="attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }",e=a.createShader(35633),a.shaderSource(e,k),a.compileShader(e),l="varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }",f=a.createShader(35632),a.shaderSource(f,l),a.compileShader(f),c=a.createProgram(),a.attachShader(c,e),a.attachShader(c,f),a.linkProgram(c),b.blitProgram=c,b.blitPosLoc=a.getAttribLocation(c,"pos"),a.useProgram(c),a.uniform1i(a.getUniformLocation(c,"sampler"),0),a.useProgram(null),b.defaultVao=void 0,a.createVertexArray&&(b.defaultVao=a.createVertexArray(),a.bindVertexArray(b.defaultVao),a.enableVertexAttribArray(b.blitPosLoc),a.bindVertexArray(null))},resizeOffscreenFramebuffer:function(b){var a=b.GLctx,c,d;b.defaultColorTarget&&(c=a.getParameter(32873),a.bindTexture(3553,b.defaultColorTarget),a.texImage2D(3553,0,6408,a.drawingBufferWidth,a.drawingBufferHeight,0,6408,5121,null),a.bindTexture(3553,c)),b.defaultDepthTarget&&(d=a.getParameter(36007),a.bindRenderbuffer(36161,b.defaultDepthTarget),a.renderbufferStorage(36161,33189,a.drawingBufferWidth,a.drawingBufferHeight),a.bindRenderbuffer(36161,d))},blitOffscreenFramebuffer:function(b){var a=b.GLctx,k=a.getParameter(3089),t,s,r,q,p,i,j,n,l,u,d,h,f,c,e,g,o;if(k&&a.disable(3089),t=a.getParameter(36006),a.blitFramebuffer&&!b.defaultFboForbidBlitFramebuffer)a.bindFramebuffer(36008,b.defaultFbo),a.bindFramebuffer(36009,null),a.blitFramebuffer(0,0,a.canvas.width,a.canvas.height,0,0,a.canvas.width,a.canvas.height,16384,9728);else{a.bindFramebuffer(36160,null),s=a.getParameter(35725),a.useProgram(b.blitProgram),r=a.getParameter(34964),a.bindBuffer(34962,b.blitVB),q=a.getParameter(34016),a.activeTexture(33984),p=a.getParameter(32873),a.bindTexture(3553,b.defaultColorTarget),i=a.getParameter(3042),i&&a.disable(3042),j=a.getParameter(2884),j&&a.disable(2884),n=a.getParameter(2929),n&&a.disable(2929),l=a.getParameter(2960),l&&a.disable(2960);function m(){a.vertexAttribPointer(b.blitPosLoc,2,5126,!1,0,0),a.drawArrays(5,0,4)}if(b.defaultVao)u=a.getParameter(34229),a.bindVertexArray(b.defaultVao),m(),a.bindVertexArray(u);else{d={buffer:a.getVertexAttrib(b.blitPosLoc,34975),size:a.getVertexAttrib(b.blitPosLoc,34339),stride:a.getVertexAttrib(b.blitPosLoc,34340),type:a.getVertexAttrib(b.blitPosLoc,34341),normalized:a.getVertexAttrib(b.blitPosLoc,34922),pointer:a.getVertexAttribOffset(b.blitPosLoc,34373)},h=a.getParameter(34921),f=[];for(c=0;c<h;++c)e=a.getVertexAttrib(c,34338),g=c==b.blitPosLoc,e&&!g&&a.disableVertexAttribArray(c),!e&&g&&a.enableVertexAttribArray(c),f[c]=e;m();for(c=0;c<h;++c)e=f[c],o=c==b.blitPosLoc,e&&!o&&a.enableVertexAttribArray(c),!e&&o&&a.disableVertexAttribArray(c);a.bindBuffer(34962,d.buffer),a.vertexAttribPointer(b.blitPosLoc,d.size,d.type,d.normalized,d.stride,d.offset)}l&&a.enable(2960),n&&a.enable(2929),j&&a.enable(2884),i&&a.enable(3042),a.bindTexture(3553,p),a.activeTexture(q),a.bindBuffer(34962,r),a.useProgram(s)}a.bindFramebuffer(36160,t),k&&a.enable(3089)},registerContext:function(c,a){var e=d.getNewId(d.contexts),b={handle:e,attributes:a,version:a.majorVersion,GLctx:c};return c.canvas&&(c.canvas.GLctxObject=b),d.contexts[e]=b,(typeof a.enableExtensionsByDefault=="undefined"||a.enableExtensionsByDefault)&&d.initExtensions(b),a.renderViaOffscreenBackBuffer&&d.createOffscreenFramebuffer(b),e},makeContextCurrent:function(a){return d.currentContext=d.contexts[a],g.ctx=c=d.currentContext&&d.currentContext.GLctx,!(a&&!c)},getContext:function(a){return d.contexts[a]},deleteContext:function(a){d.currentContext===d.contexts[a]&&(d.currentContext=null),typeof r=="object"&&r.removeAllHandlersOnTarget(d.contexts[a].GLctx.canvas),d.contexts[a]&&d.contexts[a].GLctx.canvas&&(d.contexts[a].GLctx.canvas.GLctxObject=void 0),d.contexts[a]=null},initExtensions:function(b){var a,c;if(b||(b=d.currentContext),b.initExtensionsDone)return;b.initExtensionsDone=!0,a=b.GLctx,kF(a),kE(a),kD(a),kC(a),ir(a),b.version>=2&&(a.disjointTimerQueryExt=a.getExtension("EXT_disjoint_timer_query_webgl2")),(b.version<2||!a.disjointTimerQueryExt)&&(a.disjointTimerQueryExt=a.getExtension("EXT_disjoint_timer_query")),iq(a),c=a.getSupportedExtensions()||[],c.forEach(function(b){!b.includes("lose_context")&&!b.includes("debug")&&a.getExtension(b)})}};function ih(a){c.activeTexture(a)}function ie(a,b){c.attachShader(d.programs[a],d.shaders[b])}function ib(a,b){c.beginQuery(a,d.queries[b])}function ia(a,b){c.disjointTimerQueryExt.beginQueryEXT(a,d.queries[b])}function hW(a){c.beginTransformFeedback(a)}function hU(a,b,e){c.bindAttribLocation(d.programs[a],b,H(e))}function hT(a,b){a==35051?c.currentPixelPackBufferBinding=b:a==35052&&(c.currentPixelUnpackBufferBinding=b),c.bindBuffer(a,d.buffers[b])}function gO(a,b,e){c.bindBufferBase(a,b,d.buffers[e])}function gN(a,b,e,f,g){c.bindBufferRange(a,b,d.buffers[e],f,g)}function gK(b,a){c.bindFramebuffer(b,a?d.framebuffers[a]:d.currentContext.defaultFbo)}function ge(a,b){c.bindRenderbuffer(a,d.renderbuffers[b])}function gd(a,b){c.bindSampler(a,d.samplers[b])}function gc(a,b){c.bindTexture(a,d.textures[b])}function fw(a,b){c.bindTransformFeedback(a,d.transformFeedbacks[b])}function fs(a){c.bindVertexArray(d.vaos[a])}function fr(a){c.bindVertexArray(d.vaos[a])}function fp(a,b,d,e){c.blendColor(a,b,d,e)}function fo(a){c.blendEquation(a)}function ff(a,b){c.blendEquationSeparate(a,b)}function eK(a,b){c.blendFunc(a,b)}function eC(a,b,d,e){c.blendFuncSeparate(a,b,d,e)}function eB(a,b,d,e,f,g,h,i,j,k){c.blitFramebuffer(a,b,d,e,f,g,h,i,j,k)}function et(e,b,a,f){d.currentContext.version>=2?a?c.bufferData(e,t,f,a,b):c.bufferData(e,b,f):c.bufferData(e,a?t.subarray(a,a+b):b,f)}function eh(b,e,f,a){if(d.currentContext.version>=2){c.bufferSubData(b,e,t,a,f);return}c.bufferSubData(b,e,t.subarray(a,a+f))}function dV(a){return c.checkFramebufferStatus(a)}function dL(a){c.clear(a)}function cY(a,b,d,e){c.clearBufferfi(a,b,d,e)}function cS(a,b,d){c.clearBufferfv(a,b,j,d>>2)}function cT(a,b,d){c.clearBufferiv(a,b,e,d>>2)}function cU(a,b,d){c.clearBufferuiv(a,b,K,d>>2)}function cV(a,b,d,e){c.clearColor(a,b,d,e)}function cW(a){c.clearDepth(a)}function cX(a){c.clearStencil(a)}function cE(a,b){return(a>>>0)+b*4294967296}function cZ(a,b,e,f){return c.clientWaitSync(d.syncs[a],b,cE(e,f))}function c_(a,b,d,e){c.colorMask(!!a,!!b,!!d,!!e)}function c$(a){c.compileShader(d.shaders[a])}function da(b,j,e,f,g,h,i,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexImage2D(b,j,e,f,g,h,i,a):c.compressedTexImage2D(b,j,e,f,g,h,t,a,i);return}c.compressedTexImage2D(b,j,e,f,g,h,a?t.subarray(a,a+i):null)}function db(a,b,d,e,f,g,h,i,j){c.currentPixelUnpackBufferBinding?c.compressedTexImage3D(a,b,d,e,f,g,h,i,j):c.compressedTexImage3D(a,b,d,e,f,g,h,t,j,i)}function dc(b,e,k,f,g,h,i,j,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage2D(b,e,k,f,g,h,i,j,a):c.compressedTexSubImage2D(b,e,k,f,g,h,i,t,a,j);return}c.compressedTexSubImage2D(b,e,k,f,g,h,i,a?t.subarray(a,a+j):null)}function dd(a,b,d,e,f,g,h,i,j,k,l){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,k,l):c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,t,l,k)}function de(a,b,d,e,f){c.copyBufferSubData(a,b,d,e,f)}function df(a,b,d,e,f,g,h,i){c.copyTexImage2D(a,b,d,e,f,g,h,i)}function dg(a,b,d,e,f,g,h,i){c.copyTexSubImage2D(a,b,d,e,f,g,h,i)}function dh(a,b,d,e,f,g,h,i,j){c.copyTexSubImage3D(a,b,d,e,f,g,h,i,j)}function di(){var b=d.getNewId(d.programs),a=c.createProgram();return a.name=b,a.maxUniformLength=a.maxAttributeLength=a.maxUniformBlockNameLength=0,a.uniformIdCounter=1,d.programs[b]=a,b}function dj(b){var a=d.getNewId(d.shaders);return d.shaders[a]=c.createShader(b),a}function dk(a){c.cullFace(a)}function dl(g,h){for(var b=0,a,f;b<g;b++){if(a=e[h+b*4>>2],f=d.buffers[a],!f)continue;c.deleteBuffer(f),f.name=0,d.buffers[a]=null,a==c.currentPixelPackBufferBinding&&(c.currentPixelPackBufferBinding=0),a==c.currentPixelUnpackBufferBinding&&(c.currentPixelUnpackBufferBinding=0)}}function dm(g,h){for(var a=0,f,b;a<g;++a){if(f=e[h+a*4>>2],b=d.framebuffers[f],!b)continue;c.deleteFramebuffer(b),b.name=0,d.framebuffers[f]=null}}function dn(a){if(!a)return;var b=d.programs[a];if(!b){d.recordError(1281);return}c.deleteProgram(b),b.name=0,d.programs[a]=null}function dp(g,h){for(var a=0,b,f;a<g;a++){if(b=e[h+a*4>>2],f=d.queries[b],!f)continue;c.deleteQuery(f),d.queries[b]=null}}function dq(g,h){for(var a=0,b,f;a<g;a++){if(b=e[h+a*4>>2],f=d.queries[b],!f)continue;c.disjointTimerQueryExt.deleteQueryEXT(f),d.queries[b]=null}}function dr(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.renderbuffers[f],!b)continue;c.deleteRenderbuffer(b),b.name=0,d.renderbuffers[f]=null}}function ds(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.samplers[f],!b)continue;c.deleteSampler(b),b.name=0,d.samplers[f]=null}}function dt(a){if(!a)return;var b=d.shaders[a];if(!b){d.recordError(1281);return}c.deleteShader(b),d.shaders[a]=null}function du(a){if(!a)return;var b=d.syncs[a];if(!b){d.recordError(1281);return}c.deleteSync(b),b.name=0,d.syncs[a]=null}function dv(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.textures[f],!b)continue;c.deleteTexture(b),b.name=0,d.textures[f]=null}}function dw(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.transformFeedbacks[f],!b)continue;c.deleteTransformFeedback(b),b.name=0,d.transformFeedbacks[f]=null}}function dx(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],c.deleteVertexArray(d.vaos[b]),d.vaos[b]=null}function dy(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],c.deleteVertexArray(d.vaos[b]),d.vaos[b]=null}function dz(a){c.depthFunc(a)}function dA(a){c.depthMask(!!a)}function dB(a,b){c.depthRange(a,b)}function dC(a,b){c.detachShader(d.programs[a],d.shaders[b])}function dD(a){c.disable(a)}function dE(a){c.disableVertexAttribArray(a)}function dF(a,b,d){c.drawArrays(a,b,d)}function dG(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dH(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dI(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dJ(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dK(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}ai=[];function dM(b,f){for(var d=ai[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function dN(b,f){for(var d=ai[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function dO(b,f){for(var d=ai[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function dP(a,b,d,e){c.drawElements(a,b,d,e)}function dQ(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function dR(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function dS(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function dT(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function dU(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function cP(a,b,d,e){c.drawElements(a,b,d,e)}function dW(a,e,f,b,c,d){cP(a,b,c,d)}function dX(a){c.enable(a)}function dY(a){c.enableVertexAttribArray(a)}function dZ(a){c.endQuery(a)}function d_(a){c.disjointTimerQueryExt.endQueryEXT(a)}function d$(){c.endTransformFeedback()}function ea(e,f){var a=c.fenceSync(e,f),b;return a?(b=d.getNewId(d.syncs),a.name=b,d.syncs[b]=a,b):0}function eb(){c.finish()}function ec(){c.flush()}function ed(a,b,e,f){c.framebufferRenderbuffer(a,b,e,d.renderbuffers[f])}function ee(a,b,e,f,g){c.framebufferTexture2D(a,b,e,d.textures[f],g)}function ef(a,b,e,f,g){c.framebufferTextureLayer(a,b,d.textures[e],f,g)}function eg(a){c.frontFace(a)}function S(j,h,i,g){for(var f=0,a,b;f<j;f++)a=c[i](),b=a&&d.getNewId(g),a?(a.name=b,g[b]=a):d.recordError(1282),e[h+f*4>>2]=b}function ei(a,b){S(a,b,"createBuffer",d.buffers)}function ej(a,b){S(a,b,"createFramebuffer",d.framebuffers)}function ek(a,b){S(a,b,"createQuery",d.queries)}function el(g,h){for(var a=0,b,f;a<g;a++){if(b=c.disjointTimerQueryExt.createQueryEXT(),!b){for(d.recordError(1282);a<g;)e[h+a++*4>>2]=0;return}f=d.getNewId(d.queries),b.name=f,d.queries[f]=b,e[h+a*4>>2]=f}}function em(a,b){S(a,b,"createRenderbuffer",d.renderbuffers)}function en(a,b){S(a,b,"createSampler",d.samplers)}function eo(a,b){S(a,b,"createTexture",d.textures)}function ep(a,b){S(a,b,"createTransformFeedback",d.transformFeedbacks)}function eq(a,b){S(a,b,"createVertexArray",d.vaos)}function er(a,b){S(a,b,"createVertexArray",d.vaos)}function es(a){c.generateMipmap(a)}function cN(k,b,l,m,h,i,f,j){var a,g;b=d.programs[b],a=c[k](b,l),a&&(g=j&&M(a.name,j,m),h&&(e[h>>2]=g),i&&(e[i>>2]=a.size),f&&(e[f>>2]=a.type))}function eu(a,b,c,d,e,f,g){cN("getActiveAttrib",a,b,c,d,e,f,g)}function ev(a,b,c,d,e,f,g){cN("getActiveUniform",a,b,c,d,e,f,g)}function ew(b,j,g,a,h){var f,i;if(b=d.programs[b],f=c.getActiveUniformBlockName(b,j),!f)return;h&&g>0?(i=M(f,h,g),a&&(e[a>>2]=i)):a&&(e[a>>2]=0)}function ex(g,i,h,f){var j,b,a;if(!f){d.recordError(1281);return}if(g=d.programs[g],h==35393){j=c.getActiveUniformBlockName(g,i),e[f>>2]=j.length+1;return}if(b=c.getActiveUniformBlockParameter(g,i,h),b===null)return;if(h==35395)for(a=0;a<b.length;a++)e[f+a*4>>2]=b[a];else e[f>>2]=b}function ey(g,j,h,l,i){var f,a,b,k;if(!i){d.recordError(1281);return}if(j>0&&h==0){d.recordError(1281);return}g=d.programs[g],f=[];for(a=0;a<j;a++)f.push(e[h+a*4>>2]);if(b=c.getActiveUniforms(g,f,l),!b)return;k=b.length;for(a=0;a<k;a++)e[i+a*4>>2]=b[a]}function ez(j,f,h,i){var g=c.getAttachedShaders(d.programs[j]),b=g.length,a,k;b>f&&(b=f),e[h>>2]=b;for(a=0;a<b;++a)k=d.shaders.indexOf(g[a]),e[i+a*4>>2]=k}function eA(a,b){return c.getAttribLocation(d.programs[a],H(b))}function aT(a,b){K[a>>2]=b,K[a+4>>2]=(b-K[a>>2])/4294967296}function aB(i,g,h){var b,k,l,a,f;if(!g){d.recordError(1281);return}switch(b=void 0,i){case 36346:b=1;break;case 36344:h!=0&&h!=1&&d.recordError(1280);return;case 34814:case 36345:b=0;break;case 34466:k=c.getParameter(34467),b=k?k.length:0;break;case 33309:if(d.currentContext.version<2){d.recordError(1282);return}l=c.getSupportedExtensions()||[],b=2*l.length;break;case 33307:case 33308:if(d.currentContext.version<2){d.recordError(1280);return}b=i==33307?3:0;break}if(b===void 0)switch(a=c.getParameter(i),typeof a){case"number":b=a;break;case"boolean":b=a?1:0;break;case"string":d.recordError(1280);return;case"object":if(a===null)switch(i){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{b=0;break}default:{d.recordError(1280);return}}else if(a instanceof Float32Array||a instanceof Uint32Array||a instanceof Int32Array||a instanceof Array){for(f=0;f<a.length;++f)switch(h){case 0:e[g+f*4>>2]=a[f];break;case 2:j[g+f*4>>2]=a[f];break;case 4:x[g+f>>0]=a[f]?1:0;break}return}else try{b=a.name|0}catch(a){d.recordError(1280),A("GL_INVALID_ENUM in glGet"+h+"v: Unknown object returned from WebGL getParameter("+i+")! (error: "+a+")");return}break;default:d.recordError(1280),A("GL_INVALID_ENUM in glGet"+h+"v: Native code calling glGet"+h+"v("+i+") and it returns "+a+" of type "+typeof a+"!");return}switch(h){case 1:aT(g,b);break;case 0:e[g>>2]=b;break;case 2:j[g>>2]=b;break;case 4:x[g>>0]=b?1:0;break}}function eD(a,b){aB(a,b,4)}function eE(b,e,a){if(!a){d.recordError(1281);return}aT(a,c.getBufferParameter(b,e))}function eF(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getBufferParameter(b,f)}function eG(){var a=c.getError()||d.lastError;return d.lastError=0,a}function eH(a,b){aB(a,b,2)}function eI(a,b){return c.getFragDataLocation(d.programs[a],H(b))}function eJ(b,d,f,g){var a=c.getFramebufferAttachmentParameter(b,d,f);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=a.name|0),e[g>>2]=a}function cK(g,i,f,h){var b,a;if(!f){d.recordError(1281);return}switch(b=c.getIndexedParameter(g,i),typeof b){case"boolean":a=b?1:0;break;case"number":a=b;break;case"object":if(b===null)switch(g){case 35983:case 35368:a=0;break;default:{d.recordError(1280);return}}else if(b instanceof WebGLBuffer)a=b.name|0;else{d.recordError(1280);return}break;default:d.recordError(1280);return}switch(h){case 1:aT(f,a);break;case 0:e[f>>2]=a;break;case 2:j[f>>2]=a;break;case 4:x[f>>0]=a?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+h}}function eL(a,b,c){cK(a,b,c,1)}function eM(a,b){aB(a,b,1)}function eN(a,b,c){cK(a,b,c,0)}function eO(a,b){aB(a,b,0)}function eP(j,h,i,f,g){var b,a;if(f<0){d.recordError(1281);return}if(!g){d.recordError(1281);return}if(b=c.getInternalformatParameter(j,h,i),b===null)return;for(a=0;a<b.length&&a<f;++a)e[g+a>>2]=b[a]}function eQ(a,b,c,e,f){d.recordError(1282)}function eR(h,b,f,g){var a=c.getProgramInfoLog(d.programs[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?M(a,g,b):0,f&&(e[f>>2]=i)}function eS(a,g,f){var h,b;if(!f){d.recordError(1281);return}if(a>=d.counter){d.recordError(1281);return}if(a=d.programs[a],g==35716)h=c.getProgramInfoLog(a),h===null&&(h="(unknown error)"),e[f>>2]=h.length+1;else if(g==35719){if(!a.maxUniformLength)for(b=0;b<c.getProgramParameter(a,35718);++b)a.maxUniformLength=Math.max(a.maxUniformLength,c.getActiveUniform(a,b).name.length+1);e[f>>2]=a.maxUniformLength}else if(g==35722){if(!a.maxAttributeLength)for(b=0;b<c.getProgramParameter(a,35721);++b)a.maxAttributeLength=Math.max(a.maxAttributeLength,c.getActiveAttrib(a,b).name.length+1);e[f>>2]=a.maxAttributeLength}else if(g==35381){if(!a.maxUniformBlockNameLength)for(b=0;b<c.getProgramParameter(a,35382);++b)a.maxUniformBlockNameLength=Math.max(a.maxUniformBlockNameLength,c.getActiveUniformBlockName(a,b).length+1);e[f>>2]=a.maxUniformBlockNameLength}else e[f>>2]=c.getProgramParameter(a,g)}function eT(h,f,g){var e,a,b;if(!g){d.recordError(1281);return}e=d.queries[h],d.currentContext.version<2?a=c.disjointTimerQueryExt.getQueryObjectEXT(e,f):a=c.getQueryParameter(e,f),typeof a=="boolean"?b=a?1:0:b=a,aT(g,b)}function eU(h,i,f){var g,a,b;if(!f){d.recordError(1281);return}g=d.queries[h],a=c.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function eV(h,f,g){var e,a,b;if(!g){d.recordError(1281);return}e=d.queries[h],d.currentContext.version<2?a=c.disjointTimerQueryExt.getQueryObjectEXT(e,f):a=c.getQueryParameter(e,f),typeof a=="boolean"?b=a?1:0:b=a,aT(g,b)}function eW(h,i,f){var g,a,b;if(!f){d.recordError(1281);return}g=d.queries[h],a=c.getQueryParameter(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function eX(h,i,f){var g,a,b;if(!f){d.recordError(1281);return}g=d.queries[h],a=c.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function eY(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getQuery(b,f)}function eZ(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.disjointTimerQueryExt.getQueryEXT(b,f)}function e_(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getRenderbufferParameter(b,f)}function e$(b,e,a){if(!a){d.recordError(1281);return}j[a>>2]=c.getSamplerParameter(d.samplers[b],e)}function fa(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getSamplerParameter(d.samplers[b],f)}function fb(h,b,f,g){var a=c.getShaderInfoLog(d.shaders[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?M(a,g,b):0,f&&(e[f>>2]=i)}function fc(d,f,b,g){var a=c.getShaderPrecisionFormat(d,f);e[b>>2]=a.rangeMin,e[b+4>>2]=a.rangeMax,e[g>>2]=a.precision}function fd(h,a,b,f){var g=c.getShaderSource(d.shaders[h]),i;if(!g)return;i=a>0&&f?M(g,f,a):0,b&&(e[b>>2]=i)}function fe(f,g,b){var a,i,h,j;if(!b){d.recordError(1281);return}g==35716?(a=c.getShaderInfoLog(d.shaders[f]),a===null&&(a="(unknown error)"),i=a?a.length+1:0,e[b>>2]=i):g==35720?(h=c.getShaderSource(d.shaders[f]),j=h?h.length+1:0,e[b>>2]=j):e[b>>2]=c.getShaderParameter(d.shaders[f],g)}function ad(a){var b=aj(a)+1,c=ao(b);return M(a,c,b),c}function fg(f){var a=d.stringCache[f],g,i,b,h,j,e;if(!a){switch(f){case 7939:g=c.getSupportedExtensions()||[],g=g.concat(g.map(function(a){return"GL_"+a})),a=ad(g.join(" "));break;case 7936:case 7937:case 37445:case 37446:i=c.getParameter(f),i||d.recordError(1280),a=i&&ad(i);break;case 7938:b=c.getParameter(7938),d.currentContext.version>=2?b="OpenGL ES 3.0 ("+b+")":b="OpenGL ES 2.0 ("+b+")",a=ad(b);break;case 35724:h=c.getParameter(35724),j=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,e=h.match(j),e!==null&&(e[1].length==3&&(e[1]=e[1]+"0"),h="OpenGL ES GLSL ES "+e[1]+" ("+h+")"),a=ad(h);break;default:d.recordError(1280)}d.stringCache[f]=a}return a}function fh(f,e){var a,b;if(d.currentContext.version<2)return d.recordError(1282),0;if(a=d.stringiCache[f],a)return e<0||e>=a.length?(d.recordError(1281),0):a[e];switch(f){case 7939:return b=c.getSupportedExtensions()||[],b=b.concat(b.map(function(a){return"GL_"+a})),b=b.map(function(a){return ad(a)}),a=d.stringiCache[f]=b,e<0||e>=a.length?(d.recordError(1281),0):a[e];default:return d.recordError(1280),0}}function fi(g,h,i,a,b){if(i<0){d.recordError(1281);return}if(!b){d.recordError(1281);return}var f=c.getSyncParameter(d.syncs[g],h);f!==null&&(e[b>>2]=f,a&&(e[a>>2]=1))}function fj(b,e,a){if(!a){d.recordError(1281);return}j[a>>2]=c.getTexParameter(b,e)}function fk(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getTexParameter(b,f)}function fl(f,l,g,b,h,i,j){var a,k;if(f=d.programs[f],a=c.getTransformFeedbackVarying(f,l),!a)return;j&&g>0?(k=M(a.name,j,g),b&&(e[b>>2]=k)):b&&(e[b>>2]=0),h&&(e[h>>2]=a.size),i&&(e[i>>2]=a.type)}function fm(a,b){return c.getUniformBlockIndex(d.programs[a],H(b))}function fn(h,i,j,f){var g,a,b,k;if(!f){d.recordError(1281);return}if(i>0&&(j==0||f==0)){d.recordError(1281);return}h=d.programs[h],g=[];for(a=0;a<i;a++)g.push(H(e[j+a*4>>2]));if(b=c.getUniformIndices(h,g),!b)return;k=b.length;for(a=0;a<k;a++)e[f+a*4>>2]=b[a]}function bS(a){return a.slice(-1)=="]"&&a.lastIndexOf("[")}function bM(a){var e=a.uniformLocsById,l=a.uniformSizeAndIdsByName,b,d,j,f,g,i,k,h;if(!e){a.uniformLocsById=e={},a.uniformArrayNamesById={};for(b=0;b<c.getProgramParameter(a,35718);++b){j=c.getActiveUniform(a,b),f=j.name,g=j.size,i=bS(f),k=i>0?f.slice(0,i):f,h=a.uniformIdCounter,a.uniformIdCounter+=g,l[k]=[g,h];for(d=0;d<g;++d)e[h]=d,a.uniformArrayNamesById[h++]=k}}}function fq(e,a){var h,b,i,f,g;if(a=H(a),e=d.programs[e]){if(bM(e),h=e.uniformLocsById,b=0,i=a,f=bS(a),f>0&&(b=aC(a.slice(f+1))>>>0,i=a.slice(0,f)),g=e.uniformSizeAndIdsByName[i],g&&b<g[0])if(b+=g[1],h[b]=h[b]||c.getUniformLocation(e,a))return b}else d.recordError(1281);return-1}function k(e){var a=c.currentProgram,b;if(a)return b=a.uniformLocsById[e],typeof b=="number"&&(a.uniformLocsById[e]=b=c.getUniformLocation(a,a.uniformArrayNamesById[e]+(b>0?"["+b+"]":""))),b;d.recordError(1282)}function bB(g,i,f,h){var a,b;if(!f){d.recordError(1281);return}if(g=d.programs[g],bM(g),a=c.getUniform(g,k(i)),typeof a=="number"||typeof a=="boolean")switch(h){case 0:e[f>>2]=a;break;case 2:j[f>>2]=a;break}else for(b=0;b<a.length;b++)switch(h){case 0:e[f+b*4>>2]=a[b];break;case 2:j[f+b*4>>2]=a[b];break}}function ft(a,b,c){bB(a,b,c,2)}function fu(a,b,c){bB(a,b,c,0)}function fv(a,b,c){bB(a,b,c,0)}function bj(i,g,f,h){var a,b;if(!f){d.recordError(1281);return}if(a=c.getVertexAttrib(i,g),g==34975)e[f>>2]=a&&a.name;else if(typeof a=="number"||typeof a=="boolean")switch(h){case 0:e[f>>2]=a;break;case 2:j[f>>2]=a;break;case 5:e[f>>2]=Math.fround(a);break}else for(b=0;b<a.length;b++)switch(h){case 0:e[f+b*4>>2]=a[b];break;case 2:j[f+b*4>>2]=a[b];break;case 5:e[f+b*4>>2]=Math.fround(a[b]);break}}function fx(a,b,c){bj(a,b,c,0)}function fy(a,b,c){bj(a,b,c,0)}function fz(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getVertexAttribOffset(b,f)}function fA(a,b,c){bj(a,b,c,2)}function fB(a,b,c){bj(a,b,c,5)}function fC(a,b){c.hint(a,b)}function fD(f,b,g){for(var d=ai[b],a=0;a<b;a++)d[a]=e[g+a*4>>2];c.invalidateFramebuffer(f,d)}function fE(f,b,k,g,h,i,j){for(var d=ai[b],a=0;a<b;a++)d[a]=e[k+a*4>>2];c.invalidateSubFramebuffer(f,d,g,h,i,j)}function fF(b){var a=d.buffers[b];return a?c.isBuffer(a):0}function fG(a){return c.isEnabled(a)}function fH(b){var a=d.framebuffers[b];return a?c.isFramebuffer(a):0}function fI(a){return a=d.programs[a],!a?0:c.isProgram(a)}function fJ(b){var a=d.queries[b];return a?c.isQuery(a):0}function fK(b){var a=d.queries[b];return a?c.disjointTimerQueryExt.isQueryEXT(a):0}function fL(b){var a=d.renderbuffers[b];return a?c.isRenderbuffer(a):0}function fM(b){var a=d.samplers[b];return a?c.isSampler(a):0}function fN(b){var a=d.shaders[b];return a?c.isShader(a):0}function fO(a){return c.isSync(d.syncs[a])}function fP(b){var a=d.textures[b];return a?c.isTexture(a):0}function fQ(a){return c.isTransformFeedback(d.transformFeedbacks[a])}function fR(b){var a=d.vaos[b];return a?c.isVertexArray(a):0}function fS(b){var a=d.vaos[b];return a?c.isVertexArray(a):0}function fT(a){c.lineWidth(a)}function fU(a){a=d.programs[a],c.linkProgram(a),a.uniformLocsById=0,a.uniformSizeAndIdsByName={}}function fV(){c.pauseTransformFeedback()}function fW(a,b){a==3317&&(d.unpackAlignment=b),c.pixelStorei(a,b)}function fX(a,b){c.polygonOffset(a,b)}function fY(a,b,c,e){d.recordError(1280)}function fZ(a,b,c){d.recordError(1280)}function f_(a,b){c.disjointTimerQueryExt.queryCounterEXT(d.queries[a],b)}function f$(a){c.readBuffer(a)}function ga(g,c,d,e){var b,a;function f(b,a){return b+a-1&-a}return b=g*d,a=f(b,e),c*a}function gb(a){var b={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return b[a-6402]||1}function aa(a){return a-=5120,a==0?x:a==1?t:a==2?W:a==4?e:a==6?j:a==5||a==28922||a==28520||a==30779||a==30782?K:aX}function $(a){return 31-Math.clz32(a.BYTES_PER_ELEMENT)}function aF(g,h,e,f,c,l){var b=aa(g),a=$(b),i=1<<a,j=gb(h)*i,k=ga(e,f,j,d.unpackAlignment);return b.subarray(c>>a,c+k>>a)}function gf(g,h,e,f,a,b,i){var j,k;if(d.currentContext.version>=2){c.currentPixelPackBufferBinding?c.readPixels(g,h,e,f,a,b,i):(j=aa(b),c.readPixels(g,h,e,f,a,b,j,i>>$(j)));return}if(k=aF(b,a,e,f,i,a),!k){d.recordError(1280);return}c.readPixels(g,h,e,f,a,b,k)}function gg(){}function gh(a,b,d,e){c.renderbufferStorage(a,b,d,e)}function gi(a,b,d,e,f){c.renderbufferStorageMultisample(a,b,d,e,f)}function gj(){c.resumeTransformFeedback()}function gk(a,b){c.sampleCoverage(a,!!b)}function gl(a,b,e){c.samplerParameterf(d.samplers[a],b,e)}function gm(a,b,e){var f=j[e>>2];c.samplerParameterf(d.samplers[a],b,f)}function gn(a,b,e){c.samplerParameteri(d.samplers[a],b,e)}function go(a,b,f){var g=e[f>>2];c.samplerParameteri(d.samplers[a],b,g)}function gp(a,b,d,e){c.scissor(a,b,d,e)}function gq(){d.recordError(1280)}function gr(a,b,e,f){var g=d.getSource(a,b,e,f);c.shaderSource(d.shaders[a],g)}function gs(a,b,d){c.stencilFunc(a,b,d)}function gt(a,b,d,e){c.stencilFuncSeparate(a,b,d,e)}function gu(a){c.stencilMask(a)}function gv(a,b){c.stencilMaskSeparate(a,b)}function gw(a,b,d){c.stencilOp(a,b,d)}function gx(a,b,d,e){c.stencilOpSeparate(a,b,d,e)}function gy(j,k,e,f,g,i,b,a,h){if(d.currentContext.version>=2){if(c.currentPixelUnpackBufferBinding)c.texImage2D(j,k,e,f,g,i,b,a,h);else if(h){var l=aa(a);c.texImage2D(j,k,e,f,g,i,b,a,l,h>>$(l))}else c.texImage2D(j,k,e,f,g,i,b,a,null);return}c.texImage2D(j,k,e,f,g,i,b,a,h?aF(a,b,f,g,h,e):null)}function gz(b,d,j,e,f,g,h,i,a,k){if(c.currentPixelUnpackBufferBinding)c.texImage3D(b,d,j,e,f,g,h,i,a,k);else if(k){var l=aa(a);c.texImage3D(b,d,j,e,f,g,h,i,a,l,k>>$(l))}else c.texImage3D(b,d,j,e,f,g,h,i,a,null)}function gA(a,b,d){c.texParameterf(a,b,d)}function gB(a,b,d){var e=j[d>>2];c.texParameterf(a,b,e)}function gC(a,b,d){c.texParameteri(a,b,d)}function gD(a,b,d){var f=e[d>>2];c.texParameteri(a,b,f)}function gE(a,b,d,e,f){c.texStorage2D(a,b,d,e,f)}function gF(a,b,d,e,f,g){c.texStorage3D(a,b,d,e,f,g)}function gG(i,j,k,h,f,g,b,a,e){var l,m;if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.texSubImage2D(i,j,k,h,f,g,b,a,e):e?(l=aa(a),c.texSubImage2D(i,j,k,h,f,g,b,a,l,e>>$(l))):c.texSubImage2D(i,j,k,h,f,g,b,a,null);return}m=null,e&&(m=aF(a,b,f,g,e,0)),c.texSubImage2D(i,j,k,h,f,g,b,a,m)}function gH(b,d,e,k,f,g,h,i,j,a,l){if(c.currentPixelUnpackBufferBinding)c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,l);else if(l){var m=aa(a);c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,m,l>>$(m))}else c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,null)}function gI(b,g,h,i){var f,a;b=d.programs[b],f=[];for(a=0;a<g;a++)f.push(H(e[h+a*4>>2]));c.transformFeedbackVaryings(b,f,i)}function gJ(a,b){c.uniform1f(k(a),b)}Q=[];function gL(g,a,e){var f,b;if(d.currentContext.version>=2){c.uniform1fv(k(g),j,e>>2,a);return}if(a<=288){f=Q[a-1];for(b=0;b<a;++b)f[b]=j[e+4*b>>2]}else f=j.subarray(e>>2,e+a*4>>2);c.uniform1fv(k(g),f)}function gM(a,b){c.uniform1i(k(a),b)}an=[];function cR(h,a,f){var g,b;if(d.currentContext.version>=2){c.uniform1iv(k(h),e,f>>2,a);return}if(a<=288){g=an[a-1];for(b=0;b<a;++b)g[b]=e[f+4*b>>2]}else g=e.subarray(f>>2,f+a*4>>2);c.uniform1iv(k(h),g)}function gP(a,b){c.uniform1ui(k(a),b)}function gQ(a,b,d){c.uniform1uiv(k(a),K,d>>2,b)}function gR(a,b,d){c.uniform2f(k(a),b,d)}function gS(g,b,e){var f,a;if(d.currentContext.version>=2){c.uniform2fv(k(g),j,e>>2,b*2);return}if(b<=144){f=Q[2*b-1];for(a=0;a<2*b;a+=2)f[a]=j[e+4*a>>2],f[a+1]=j[e+(4*a+4)>>2]}else f=j.subarray(e>>2,e+b*8>>2);c.uniform2fv(k(g),f)}function gT(a,b,d){c.uniform2i(k(a),b,d)}function gU(h,b,f){var g,a;if(d.currentContext.version>=2){c.uniform2iv(k(h),e,f>>2,b*2);return}if(b<=144){g=an[2*b-1];for(a=0;a<2*b;a+=2)g[a]=e[f+4*a>>2],g[a+1]=e[f+(4*a+4)>>2]}else g=e.subarray(f>>2,f+b*8>>2);c.uniform2iv(k(h),g)}function gV(a,b,d){c.uniform2ui(k(a),b,d)}function gW(a,b,d){c.uniform2uiv(k(a),K,d>>2,b*2)}function gX(a,b,d,e){c.uniform3f(k(a),b,d,e)}function gY(g,f,b){var e,a;if(d.currentContext.version>=2){c.uniform3fv(k(g),j,b>>2,f*3);return}if(f<=96){e=Q[3*f-1];for(a=0;a<3*f;a+=3)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2]}else e=j.subarray(b>>2,b+f*12>>2);c.uniform3fv(k(g),e)}function gZ(a,b,d,e){c.uniform3i(k(a),b,d,e)}function g_(h,g,b){var f,a;if(d.currentContext.version>=2){c.uniform3iv(k(h),e,b>>2,g*3);return}if(g<=96){f=an[3*g-1];for(a=0;a<3*g;a+=3)f[a]=e[b+4*a>>2],f[a+1]=e[b+(4*a+4)>>2],f[a+2]=e[b+(4*a+8)>>2]}else f=e.subarray(b>>2,b+g*12>>2);c.uniform3iv(k(h),f)}function g$(a,b,d,e){c.uniform3ui(k(a),b,d,e)}function ha(a,b,d){c.uniform3uiv(k(a),K,d>>2,b*3)}function hb(a,b,d,e,f){c.uniform4f(k(a),b,d,e,f)}function hc(i,f,g){var b,h,a,e;if(d.currentContext.version>=2){c.uniform4fv(k(i),j,g>>2,f*4);return}if(f<=72){b=Q[4*f-1],h=j,g>>=2;for(a=0;a<4*f;a+=4)e=g+a,b[a]=h[e],b[a+1]=h[e+1],b[a+2]=h[e+2],b[a+3]=h[e+3]}else b=j.subarray(g>>2,g+f*16>>2);c.uniform4fv(k(i),b)}function hd(a,b,d,e,f){c.uniform4i(k(a),b,d,e,f)}function he(h,g,b){var f,a;if(d.currentContext.version>=2){c.uniform4iv(k(h),e,b>>2,g*4);return}if(g<=72){f=an[4*g-1];for(a=0;a<4*g;a+=4)f[a]=e[b+4*a>>2],f[a+1]=e[b+(4*a+4)>>2],f[a+2]=e[b+(4*a+8)>>2],f[a+3]=e[b+(4*a+12)>>2]}else f=e.subarray(b>>2,b+g*16>>2);c.uniform4iv(k(h),f)}function hf(a,b,d,e,f){c.uniform4ui(k(a),b,d,e,f)}function hg(a,b,d){c.uniform4uiv(k(a),K,d>>2,b*4)}function hh(a,b,e){a=d.programs[a],c.uniformBlockBinding(a,b,e)}function hi(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix2fv(k(g),!!h,j,b>>2,f*4);return}if(f<=72){e=Q[4*f-1];for(a=0;a<4*f;a+=4)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2]}else e=j.subarray(b>>2,b+f*16>>2);c.uniformMatrix2fv(k(g),!!h,e)}function hj(a,b,d,e){c.uniformMatrix2x3fv(k(a),!!d,j,e>>2,b*6)}function hk(a,b,d,e){c.uniformMatrix2x4fv(k(a),!!d,j,e>>2,b*8)}function hl(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix3fv(k(g),!!h,j,b>>2,f*9);return}if(f<=32){e=Q[9*f-1];for(a=0;a<9*f;a+=9)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2],e[a+4]=j[b+(4*a+16)>>2],e[a+5]=j[b+(4*a+20)>>2],e[a+6]=j[b+(4*a+24)>>2],e[a+7]=j[b+(4*a+28)>>2],e[a+8]=j[b+(4*a+32)>>2]}else e=j.subarray(b>>2,b+f*36>>2);c.uniformMatrix3fv(k(g),!!h,e)}function hm(a,b,d,e){c.uniformMatrix3x2fv(k(a),!!d,j,e>>2,b*6)}function hn(a,b,d,e){c.uniformMatrix3x4fv(k(a),!!d,j,e>>2,b*12)}function ho(l,h,i,g){var b,f,a,e;if(d.currentContext.version>=2){c.uniformMatrix4fv(k(l),!!i,j,g>>2,h*16);return}if(h<=18){b=Q[16*h-1],f=j,g>>=2;for(a=0;a<16*h;a+=16)e=g+a,b[a]=f[e],b[a+1]=f[e+1],b[a+2]=f[e+2],b[a+3]=f[e+3],b[a+4]=f[e+4],b[a+5]=f[e+5],b[a+6]=f[e+6],b[a+7]=f[e+7],b[a+8]=f[e+8],b[a+9]=f[e+9],b[a+10]=f[e+10],b[a+11]=f[e+11],b[a+12]=f[e+12],b[a+13]=f[e+13],b[a+14]=f[e+14],b[a+15]=f[e+15]}else b=j.subarray(g>>2,g+h*64>>2);c.uniformMatrix4fv(k(l),!!i,b)}function hp(a,b,d,e){c.uniformMatrix4x2fv(k(a),!!d,j,e>>2,b*8)}function hq(a,b,d,e){c.uniformMatrix4x3fv(k(a),!!d,j,e>>2,b*12)}function hr(a){a=d.programs[a],c.useProgram(a),c.currentProgram=a}function hs(a){c.validateProgram(d.programs[a])}function ht(a,b){c.vertexAttrib1f(a,b)}function hu(a,b){c.vertexAttrib1f(a,j[b>>2])}function hv(a,b,d){c.vertexAttrib2f(a,b,d)}function hw(b,a){c.vertexAttrib2f(b,j[a>>2],j[a+4>>2])}function hx(a,b,d,e){c.vertexAttrib3f(a,b,d,e)}function hy(b,a){c.vertexAttrib3f(b,j[a>>2],j[a+4>>2],j[a+8>>2])}function hz(a,b,d,e,f){c.vertexAttrib4f(a,b,d,e,f)}function hA(b,a){c.vertexAttrib4f(b,j[a>>2],j[a+4>>2],j[a+8>>2],j[a+12>>2])}function hB(a,b){c.vertexAttribDivisor(a,b)}function hC(a,b){c.vertexAttribDivisor(a,b)}function hD(a,b){c.vertexAttribDivisor(a,b)}function hE(a,b){c.vertexAttribDivisor(a,b)}function hF(a,b){c.vertexAttribDivisor(a,b)}function hG(a,b,d,e,f){c.vertexAttribI4i(a,b,d,e,f)}function hH(b,a){c.vertexAttribI4i(b,e[a>>2],e[a+4>>2],e[a+8>>2],e[a+12>>2])}function hI(a,b,d,e,f){c.vertexAttribI4ui(a,b,d,e,f)}function hJ(b,a){c.vertexAttribI4ui(b,K[a>>2],K[a+4>>2],K[a+8>>2],K[a+12>>2])}function hK(a,b,d,e,f){c.vertexAttribIPointer(a,b,d,e,f)}function hL(a,b,d,e,f,g){c.vertexAttribPointer(a,b,d,!!e,f,g)}function hM(a,b,d,e){c.viewport(a,b,d,e)}function hN(a,b,e,f){c.waitSync(d.syncs[a],b,cE(e,f))}function hO(b,a,c){t.copyWithin(b,a,a+c)}function hP(a){try{return aI.grow(a-ba.byteLength+65535>>>16),cl(aI.buffer),1}catch(a){}}function hQ(a){var e=t.length,d,b,c,f,g;if(a=a>>>0,d=2147483648,a>d)return!1;for(b=1;b<=4;b*=2)if(c=e*(1+.2/b),c=Math.min(c,a+100663296),f=Math.min(d,ou(Math.max(a,c),65536)),g=hP(f),g)return!0;return!1}function hR(a,b,c){var d=L.get(a);cd(d,b,c)}function hS(a){for(var b=av();av()-b<a;);}r={inEventHandler:0,removeAllEventListeners:function(){for(var a=r.eventHandlers.length-1;a>=0;--a)r._removeHandler(a);r.eventHandlers=[],r.deferredCalls=[]},registerRemoveEventListeners:function(){r.removeEventListenersRegistered||(bo.push(r.removeAllEventListeners),r.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(b,e,c){var d,a;function f(a,b){if(a.length!=b.length)return!1;for(var c in a)if(a[c]!=b[c])return!1;return!0}for(d in r.deferredCalls)if(a=r.deferredCalls[d],a.targetFunction==b&&f(a.argsList,c))return;r.deferredCalls.push({targetFunction:b,precedence:e,argsList:c}),r.deferredCalls.sort(function(a,b){return a.precedence<b.precedence})},removeDeferredCalls:function(b){for(var a=0;a<r.deferredCalls.length;++a)r.deferredCalls[a].targetFunction==b&&(r.deferredCalls.splice(a,1),--a)},canPerformEventHandlerRequests:function(){return r.inEventHandler&&r.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){var a,b;if(!r.canPerformEventHandlerRequests())return;for(a=0;a<r.deferredCalls.length;++a)b=r.deferredCalls[a],r.deferredCalls.splice(a,1),--a,b.targetFunction.apply(null,b.argsList)},eventHandlers:[],removeAllHandlersOnTarget:function(c,b){for(var a=0;a<r.eventHandlers.length;++a)r.eventHandlers[a].target==c&&(!b||b==r.eventHandlers[a].eventTypeString)&&r._removeHandler(a--)},_removeHandler:function(b){var a=r.eventHandlers[b];a.target.removeEventListener(a.eventTypeString,a.eventListenerFunc,a.useCapture),r.eventHandlers.splice(b,1)},registerOrRemoveHandler:function(a){var c=function(b){++r.inEventHandler,r.currentEventHandler=a,r.runDeferredCalls(),a.handlerFunc(b),r.runDeferredCalls(),--r.inEventHandler},b;if(a.callbackfunc)a.eventListenerFunc=c,a.target.addEventListener(a.eventTypeString,c,a.useCapture),r.eventHandlers.push(a),r.registerRemoveEventListeners();else for(b=0;b<r.eventHandlers.length;++b)r.eventHandlers[b].target==a.target&&r.eventHandlers[b].eventTypeString==a.eventTypeString&&r._removeHandler(b--)},getNodeNameForTarget:function(a){return a?a==window?"#window":a==screen?"#screen":a&&a.nodeName?a.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},cw=["default","low-power","high-performance"];function hV(a){return a>2?H(a):a}cv=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];function hX(a){a=hV(a);var b=cv[a]||(typeof document!="undefined"?document.querySelector(a):void 0);return b}function hY(a){return hX(a)}function hZ(f,g){var a=g>>2,h=e[a+(24>>2)],b={alpha:!!e[a+(0>>2)],depth:!!e[a+(4>>2)],stencil:!!e[a+(8>>2)],antialias:!!e[a+(12>>2)],premultipliedAlpha:!!e[a+(16>>2)],preserveDrawingBuffer:!!e[a+(20>>2)],powerPreference:cw[h],failIfMajorPerformanceCaveat:!!e[a+(28>>2)],majorVersion:e[a+(32>>2)],minorVersion:e[a+(36>>2)],enableExtensionsByDefault:e[a+(40>>2)],explicitSwapControl:e[a+(44>>2)],proxyContextToMainThread:e[a+(48>>2)],renderViaOffscreenBackBuffer:e[a+(52>>2)]},c=hY(f),i;return c?(b.explicitSwapControl&&!b.renderViaOffscreenBackBuffer&&(b.renderViaOffscreenBackBuffer=!0),i=d.createContext(c,b),i):0}function h_(a,b){return hZ(a,b)}function h$(){return d.currentContext?d.currentContext.handle:0}function bl(){return h$()}g._emscripten_webgl_get_current_context=bl;function ct(a){var b=d.makeContextCurrent(a);return b?0:-5}g._emscripten_webgl_make_context_current=ct;function ic(a){d.currentContext==a&&(d.currentContext=0),d.deleteContext(a)}function id(c){for(var a=c>>2,b=0;b<56>>2;++b)e[a+b]=0;e[a+(0>>2)]=e[a+(4>>2)]=e[a+(12>>2)]=e[a+(16>>2)]=e[a+(32>>2)]=e[a+(40>>2)]=1}aY={};function ig(){return bm||"./this.program"}function aO(){var d,b,a,c;if(!aO.strings){d=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:d,_:ig()};for(a in aY)aY[a]===void 0?delete b[a]:b[a]=aY[a];c=[];for(a in b)c.push(a+"="+b[a]);aO.strings=c}return aO.strings}function ii(c,d){try{var a=0;return aO().forEach(function(b,g){var f=d+a;e[c+g*4>>2]=f,cH(b,f),a+=b.length+1}),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}function ij(d,f){var a,c;try{return a=aO(),e[d>>2]=a.length,c=0,a.forEach(function(a){c+=a.length+1}),e[f>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}function ik(a){try{var c=q.getStreamFromFD(a);return b.close(c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}function il(d,e){var a,c;try{return a=q.getStreamFromFD(d),c=a.tty?2:b.isDir(a.mode)?3:b.isLink(a.mode)?7:4,x[e>>0]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}function im(d,f,g,h){var a,c;try{return a=q.getStreamFromFD(d),c=q.doReadv(a,f,g),e[h>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}function io(i,j,k,g,h){var a,f,c,d;try{return a=q.getStreamFromFD(i),f=4294967296,c=k*f+(j>>>0),d=9007199254740992,c<=-d||c>=d?-61:(b.llseek(a,c,g),I=[a.position>>>0,(s=a.position,+Math.abs(s)>=1?s>0?(Math.min(+Math.floor(s/4294967296),4294967295)|0)>>>0:~~+Math.ceil((s-+(~~s>>>0))/4294967296)>>>0:0)],e[h>>2]=I[0],e[h+4>>2]=I[1],a.getdents&&c===0&&g===0&&(a.getdents=null),0)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}function ip(d,f,g,h){var a,c;try{return a=q.getStreamFromFD(d),c=q.doWritev(a,f,g),e[h>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&n(a),a.errno}}R={};function aS(a){var c=256,b;return aS.buffer||(aS.buffer=ao(c),R[0]="Success",R[""+-1]="Invalid value for 'ai_flags' field",R[""+-2]="NAME or SERVICE is unknown",R[""+-3]="Temporary failure in name resolution",R[""+-4]="Non-recoverable failure in name res",R[""+-6]="'ai_family' not supported",R[""+-7]="'ai_socktype' not supported",R[""+-8]="SERVICE not supported for 'ai_socktype'",R[""+-10]="Memory allocation failure",R[""+-11]="System error returned in 'errno'",R[""+-12]="Argument buffer overflow"),b="Unknown error",a in R&&(R[a].length>c-1?b="Message too long":b=R[a]),cH(b,aS.buffer),aS.buffer}function is(){return ca()}function it(d,k,h,l){var b=0,j=0,g=0,a=0,c=0,f=0,i;function m(b,i,j,k,c,h){var f=b===10?28:16,d,a,g;return c=b===10?cD(c):bz(c),d=ao(f),g=bg(d,b,c,h),ac(!g),a=ao(32),e[a+4>>2]=b,e[a+8>>2]=i,e[a+12>>2]=j,e[a+24>>2]=k,e[a+20>>2]=d,b===10?e[a+16>>2]=28:e[a+16>>2]=16,e[a+28>>2]=0,a}if(h&&(g=e[h>>2],a=e[h+4>>2],c=e[h+8>>2],f=e[h+12>>2]),c&&!f&&(f=c===2?17:6),!c&&f&&(c=f===17?2:1),f===0&&(f=6),c===0&&(c=1),!d&&!k)return-2;if(g&~(1|2|4|1024|8|16|32))return-1;if(h!==0&&e[h>>2]&2&&!d)return-1;if(g&32)return-2;if(c!==0&&c!==1&&c!==2)return-7;if(a!==0&&a!==2&&a!==10)return-6;if(k)if(k=H(k),j=parseInt(k,10),isNaN(j))return g&1024?-2:-8;if(!d)return a===0&&(a=2),(g&1)===0&&(a===2?b=aU(2130706433):b=[0,0,0,1]),i=m(a,c,f,null,b,j),e[l>>2]=i,0;if(d=H(d),b=bd(d),b!==null)if(a===0||a===2)a=2;else if(a===10&&g&8)b=[0,0,aU(65535),b],a=10;else return-2;else if(b=bH(d),b!==null)if(a===0||a===10)a=10;else return-2;return b!=null?(i=m(a,c,f,d,b,j),e[l>>2]=i,0):g&4?-2:(d=T.lookup_name(d),b=bd(d),a===0?a=2:a===10&&(b=[0,0,aU(65535),b]),i=m(a,c,f,null,b,j),e[l>>2]=i,0)}function iu(m,l,j,d,i,f,h){var a=cC(m,l),e,c,b,k,g;if(a.errno)return-6;if(e=a.port,c=a.addr,b=!1,j&&d){if(h&1||!(k=T.lookup_addr(c))){if(h&8)return-2}else c=k;g=M(c,j,d),g+1>=d&&(b=!0)}return i&&f&&(e=""+e,g=M(e,i,f),g+1>=f&&(b=!0)),b?-12:0}function iv(a){var b=Date.now();return e[a>>2]=b/1e3|0,e[a+4>>2]=b%1e3*1e3|0,0}function iw(a){c.activeTexture(a)}function ix(a,b){c.attachShader(d.programs[a],d.shaders[b])}function iy(a){c.beginTransformFeedback(a)}function iz(a,b,e){c.bindAttribLocation(d.programs[a],b,H(e))}function iA(a,b){a==35051?c.currentPixelPackBufferBinding=b:a==35052&&(c.currentPixelUnpackBufferBinding=b),c.bindBuffer(a,d.buffers[b])}function iB(a,b,e){c.bindBufferBase(a,b,d.buffers[e])}function iC(b,a){c.bindFramebuffer(b,a?d.framebuffers[a]:d.currentContext.defaultFbo)}function iD(a,b){c.bindRenderbuffer(a,d.renderbuffers[b])}function iE(a,b){c.bindTexture(a,d.textures[b])}function iF(a){c.bindVertexArray(d.vaos[a])}function iG(a){c.blendEquation(a)}function iH(a,b){c.blendFunc(a,b)}function iI(a,b,d,e){c.blendFuncSeparate(a,b,d,e)}function iJ(a,b,d,e,f,g,h,i,j,k){c.blitFramebuffer(a,b,d,e,f,g,h,i,j,k)}function iK(e,b,a,f){d.currentContext.version>=2?a?c.bufferData(e,t,f,a,b):c.bufferData(e,b,f):c.bufferData(e,a?t.subarray(a,a+b):b,f)}function iL(b,e,f,a){if(d.currentContext.version>=2){c.bufferSubData(b,e,t,a,f);return}c.bufferSubData(b,e,t.subarray(a,a+f))}function iM(a){return c.checkFramebufferStatus(a)}function iN(a){c.clear(a)}function iO(a,b,d){c.clearBufferfv(a,b,j,d>>2)}function iP(a,b,d,e){c.clearColor(a,b,d,e)}function iQ(a){c.clearDepth(a)}function iR(a,b,d,e){c.colorMask(!!a,!!b,!!d,!!e)}function iS(a){c.compileShader(d.shaders[a])}function iT(b,j,e,f,g,h,i,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexImage2D(b,j,e,f,g,h,i,a):c.compressedTexImage2D(b,j,e,f,g,h,t,a,i);return}c.compressedTexImage2D(b,j,e,f,g,h,a?t.subarray(a,a+i):null)}function iU(b,e,k,f,g,h,i,j,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage2D(b,e,k,f,g,h,i,j,a):c.compressedTexSubImage2D(b,e,k,f,g,h,i,t,a,j);return}c.compressedTexSubImage2D(b,e,k,f,g,h,i,a?t.subarray(a,a+j):null)}function iV(a,b,d,e,f,g,h,i,j,k,l){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,k,l):c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,t,l,k)}function iW(a,b,d,e,f){c.copyBufferSubData(a,b,d,e,f)}function iX(a,b,d,e,f,g,h,i){c.copyTexSubImage2D(a,b,d,e,f,g,h,i)}function iY(){var b=d.getNewId(d.programs),a=c.createProgram();return a.name=b,a.maxUniformLength=a.maxAttributeLength=a.maxUniformBlockNameLength=0,a.uniformIdCounter=1,d.programs[b]=a,b}function iZ(b){var a=d.getNewId(d.shaders);return d.shaders[a]=c.createShader(b),a}function i_(a){c.cullFace(a)}function i$(g,h){for(var b=0,a,f;b<g;b++){if(a=e[h+b*4>>2],f=d.buffers[a],!f)continue;c.deleteBuffer(f),f.name=0,d.buffers[a]=null,a==c.currentPixelPackBufferBinding&&(c.currentPixelPackBufferBinding=0),a==c.currentPixelUnpackBufferBinding&&(c.currentPixelUnpackBufferBinding=0)}}function ja(g,h){for(var a=0,f,b;a<g;++a){if(f=e[h+a*4>>2],b=d.framebuffers[f],!b)continue;c.deleteFramebuffer(b),b.name=0,d.framebuffers[f]=null}}function jb(a){if(!a)return;var b=d.programs[a];if(!b){d.recordError(1281);return}c.deleteProgram(b),b.name=0,d.programs[a]=null}function jc(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.renderbuffers[f],!b)continue;c.deleteRenderbuffer(b),b.name=0,d.renderbuffers[f]=null}}function jd(a){if(!a)return;var b=d.shaders[a];if(!b){d.recordError(1281);return}c.deleteShader(b),d.shaders[a]=null}function je(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.textures[f],!b)continue;c.deleteTexture(b),b.name=0,d.textures[f]=null}}function jf(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],c.deleteVertexArray(d.vaos[b]),d.vaos[b]=null}function jg(a){c.depthFunc(a)}function jh(a){c.depthMask(!!a)}function ji(a){c.disable(a)}function jj(a){c.disableVertexAttribArray(a)}function jk(a,b,d){c.drawArrays(a,b,d)}function jl(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function jm(b,f){for(var d=ai[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function jn(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function jo(a){c.enable(a)}function jp(a){c.enableVertexAttribArray(a)}function jq(){c.endTransformFeedback()}function jr(){c.finish()}function js(a,b,e,f){c.framebufferRenderbuffer(a,b,e,d.renderbuffers[f])}function jt(a,b,e,f,g){c.framebufferTexture2D(a,b,e,d.textures[f],g)}function ju(a,b,e,f,g){c.framebufferTextureLayer(a,b,d.textures[e],f,g)}function jv(a){c.frontFace(a)}function jw(a,b){S(a,b,"createBuffer",d.buffers)}function jx(a,b){S(a,b,"createFramebuffer",d.framebuffers)}function jy(a,b){S(a,b,"createRenderbuffer",d.renderbuffers)}function jz(a,b){S(a,b,"createTexture",d.textures)}function jA(a,b){S(a,b,"createVertexArray",d.vaos)}function jB(a){c.generateMipmap(a)}function jC(){var a=c.getError()||d.lastError;return d.lastError=0,a}function jD(a,b){aB(a,b,2)}function jE(a,b){aB(a,b,0)}function jF(h,b,f,g){var a=c.getProgramInfoLog(d.programs[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?M(a,g,b):0,f&&(e[f>>2]=i)}function jG(a,g,f){var h,b;if(!f){d.recordError(1281);return}if(a>=d.counter){d.recordError(1281);return}if(a=d.programs[a],g==35716)h=c.getProgramInfoLog(a),h===null&&(h="(unknown error)"),e[f>>2]=h.length+1;else if(g==35719){if(!a.maxUniformLength)for(b=0;b<c.getProgramParameter(a,35718);++b)a.maxUniformLength=Math.max(a.maxUniformLength,c.getActiveUniform(a,b).name.length+1);e[f>>2]=a.maxUniformLength}else if(g==35722){if(!a.maxAttributeLength)for(b=0;b<c.getProgramParameter(a,35721);++b)a.maxAttributeLength=Math.max(a.maxAttributeLength,c.getActiveAttrib(a,b).name.length+1);e[f>>2]=a.maxAttributeLength}else if(g==35381){if(!a.maxUniformBlockNameLength)for(b=0;b<c.getProgramParameter(a,35382);++b)a.maxUniformBlockNameLength=Math.max(a.maxUniformBlockNameLength,c.getActiveUniformBlockName(a,b).length+1);e[f>>2]=a.maxUniformBlockNameLength}else e[f>>2]=c.getProgramParameter(a,g)}function jH(h,b,f,g){var a=c.getShaderInfoLog(d.shaders[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?M(a,g,b):0,f&&(e[f>>2]=i)}function jI(f,g,b){var a,i,h,j;if(!b){d.recordError(1281);return}g==35716?(a=c.getShaderInfoLog(d.shaders[f]),a===null&&(a="(unknown error)"),i=a?a.length+1:0,e[b>>2]=i):g==35720?(h=c.getShaderSource(d.shaders[f]),j=h?h.length+1:0,e[b>>2]=j):e[b>>2]=c.getShaderParameter(d.shaders[f],g)}function jJ(f){var a=d.stringCache[f],g,i,b,h,j,e;if(!a){switch(f){case 7939:g=c.getSupportedExtensions()||[],g=g.concat(g.map(function(a){return"GL_"+a})),a=ad(g.join(" "));break;case 7936:case 7937:case 37445:case 37446:i=c.getParameter(f),i||d.recordError(1280),a=i&&ad(i);break;case 7938:b=c.getParameter(7938),d.currentContext.version>=2?b="OpenGL ES 3.0 ("+b+")":b="OpenGL ES 2.0 ("+b+")",a=ad(b);break;case 35724:h=c.getParameter(35724),j=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,e=h.match(j),e!==null&&(e[1].length==3&&(e[1]=e[1]+"0"),h="OpenGL ES GLSL ES "+e[1]+" ("+h+")"),a=ad(h);break;default:d.recordError(1280)}d.stringCache[f]=a}return a}function jK(f,e){var a,b;if(d.currentContext.version<2)return d.recordError(1282),0;if(a=d.stringiCache[f],a)return e<0||e>=a.length?(d.recordError(1281),0):a[e];switch(f){case 7939:return b=c.getSupportedExtensions()||[],b=b.concat(b.map(function(a){return"GL_"+a})),b=b.map(function(a){return ad(a)}),a=d.stringiCache[f]=b,e<0||e>=a.length?(d.recordError(1281),0):a[e];default:return d.recordError(1280),0}}function jL(a,b){return c.getUniformBlockIndex(d.programs[a],H(b))}function jM(e,a){var h,b,i,f,g;if(a=H(a),e=d.programs[e]){if(bM(e),h=e.uniformLocsById,b=0,i=a,f=bS(a),f>0&&(b=aC(a.slice(f+1))>>>0,i=a.slice(0,f)),g=e.uniformSizeAndIdsByName[i],g&&b<g[0])if(b+=g[1],h[b]=h[b]||c.getUniformLocation(e,a))return b}else d.recordError(1281);return-1}function jN(f,b,g){for(var d=ai[b],a=0;a<b;a++)d[a]=e[g+a*4>>2];c.invalidateFramebuffer(f,d)}function jO(a){a=d.programs[a],c.linkProgram(a),a.uniformLocsById=0,a.uniformSizeAndIdsByName={}}function jP(a,b){a==3317&&(d.unpackAlignment=b),c.pixelStorei(a,b)}function jQ(a){c.readBuffer(a)}function jR(g,h,e,f,a,b,i){var j,k;if(d.currentContext.version>=2){c.currentPixelPackBufferBinding?c.readPixels(g,h,e,f,a,b,i):(j=aa(b),c.readPixels(g,h,e,f,a,b,j,i>>$(j)));return}if(k=aF(b,a,e,f,i,a),!k){d.recordError(1280);return}c.readPixels(g,h,e,f,a,b,k)}function jS(a,b,d,e){c.renderbufferStorage(a,b,d,e)}function jT(a,b,d,e,f){c.renderbufferStorageMultisample(a,b,d,e,f)}function jU(a,b,d,e){c.scissor(a,b,d,e)}function jV(a,b,e,f){var g=d.getSource(a,b,e,f);c.shaderSource(d.shaders[a],g)}function jW(j,k,e,f,g,i,b,a,h){if(d.currentContext.version>=2){if(c.currentPixelUnpackBufferBinding)c.texImage2D(j,k,e,f,g,i,b,a,h);else if(h){var l=aa(a);c.texImage2D(j,k,e,f,g,i,b,a,l,h>>$(l))}else c.texImage2D(j,k,e,f,g,i,b,a,null);return}c.texImage2D(j,k,e,f,g,i,b,a,h?aF(a,b,f,g,h,e):null)}function jX(b,d,j,e,f,g,h,i,a,k){if(c.currentPixelUnpackBufferBinding)c.texImage3D(b,d,j,e,f,g,h,i,a,k);else if(k){var l=aa(a);c.texImage3D(b,d,j,e,f,g,h,i,a,l,k>>$(l))}else c.texImage3D(b,d,j,e,f,g,h,i,a,null)}function jY(a,b,d){c.texParameterf(a,b,d)}function jZ(a,b,d){c.texParameteri(a,b,d)}function j_(a,b,d,e,f){c.texStorage2D(a,b,d,e,f)}function j$(i,j,k,h,f,g,b,a,e){var l,m;if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.texSubImage2D(i,j,k,h,f,g,b,a,e):e?(l=aa(a),c.texSubImage2D(i,j,k,h,f,g,b,a,l,e>>$(l))):c.texSubImage2D(i,j,k,h,f,g,b,a,null);return}m=null,e&&(m=aF(a,b,f,g,e,0)),c.texSubImage2D(i,j,k,h,f,g,b,a,m)}function ka(b,d,e,k,f,g,h,i,j,a,l){if(c.currentPixelUnpackBufferBinding)c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,l);else if(l){var m=aa(a);c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,m,l>>$(m))}else c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,null)}function kb(b,g,h,i){var f,a;b=d.programs[b],f=[];for(a=0;a<g;a++)f.push(H(e[h+a*4>>2]));c.transformFeedbackVaryings(b,f,i)}function kc(a,b){c.uniform1f(k(a),b)}function kd(a,b){c.uniform1i(k(a),b)}function ke(h,a,f){var g,b;if(d.currentContext.version>=2){c.uniform1iv(k(h),e,f>>2,a);return}if(a<=288){g=an[a-1];for(b=0;b<a;++b)g[b]=e[f+4*b>>2]}else g=e.subarray(f>>2,f+a*4>>2);c.uniform1iv(k(h),g)}function kf(a,b){c.uniform1ui(k(a),b)}function kg(a,b,d){c.uniform2f(k(a),b,d)}function kh(g,b,e){var f,a;if(d.currentContext.version>=2){c.uniform2fv(k(g),j,e>>2,b*2);return}if(b<=144){f=Q[2*b-1];for(a=0;a<2*b;a+=2)f[a]=j[e+4*a>>2],f[a+1]=j[e+(4*a+4)>>2]}else f=j.subarray(e>>2,e+b*8>>2);c.uniform2fv(k(g),f)}function ki(a,b,d){c.uniform2i(k(a),b,d)}function kj(h,b,f){var g,a;if(d.currentContext.version>=2){c.uniform2iv(k(h),e,f>>2,b*2);return}if(b<=144){g=an[2*b-1];for(a=0;a<2*b;a+=2)g[a]=e[f+4*a>>2],g[a+1]=e[f+(4*a+4)>>2]}else g=e.subarray(f>>2,f+b*8>>2);c.uniform2iv(k(h),g)}function kk(a,b,d,e){c.uniform3f(k(a),b,d,e)}function kl(g,f,b){var e,a;if(d.currentContext.version>=2){c.uniform3fv(k(g),j,b>>2,f*3);return}if(f<=96){e=Q[3*f-1];for(a=0;a<3*f;a+=3)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2]}else e=j.subarray(b>>2,b+f*12>>2);c.uniform3fv(k(g),e)}function km(a,b,d,e){c.uniform3i(k(a),b,d,e)}function kn(a,b,d,e,f){c.uniform4f(k(a),b,d,e,f)}function ko(i,f,g){var b,h,a,e;if(d.currentContext.version>=2){c.uniform4fv(k(i),j,g>>2,f*4);return}if(f<=72){b=Q[4*f-1],h=j,g>>=2;for(a=0;a<4*f;a+=4)e=g+a,b[a]=h[e],b[a+1]=h[e+1],b[a+2]=h[e+2],b[a+3]=h[e+3]}else b=j.subarray(g>>2,g+f*16>>2);c.uniform4fv(k(i),b)}function kp(a,b,d,e,f){c.uniform4i(k(a),b,d,e,f)}function kq(a,b,e){a=d.programs[a],c.uniformBlockBinding(a,b,e)}function kr(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix2fv(k(g),!!h,j,b>>2,f*4);return}if(f<=72){e=Q[4*f-1];for(a=0;a<4*f;a+=4)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2]}else e=j.subarray(b>>2,b+f*16>>2);c.uniformMatrix2fv(k(g),!!h,e)}function ks(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix3fv(k(g),!!h,j,b>>2,f*9);return}if(f<=32){e=Q[9*f-1];for(a=0;a<9*f;a+=9)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2],e[a+4]=j[b+(4*a+16)>>2],e[a+5]=j[b+(4*a+20)>>2],e[a+6]=j[b+(4*a+24)>>2],e[a+7]=j[b+(4*a+28)>>2],e[a+8]=j[b+(4*a+32)>>2]}else e=j.subarray(b>>2,b+f*36>>2);c.uniformMatrix3fv(k(g),!!h,e)}function kt(l,h,i,g){var b,f,a,e;if(d.currentContext.version>=2){c.uniformMatrix4fv(k(l),!!i,j,g>>2,h*16);return}if(h<=18){b=Q[16*h-1],f=j,g>>=2;for(a=0;a<16*h;a+=16)e=g+a,b[a]=f[e],b[a+1]=f[e+1],b[a+2]=f[e+2],b[a+3]=f[e+3],b[a+4]=f[e+4],b[a+5]=f[e+5],b[a+6]=f[e+6],b[a+7]=f[e+7],b[a+8]=f[e+8],b[a+9]=f[e+9],b[a+10]=f[e+10],b[a+11]=f[e+11],b[a+12]=f[e+12],b[a+13]=f[e+13],b[a+14]=f[e+14],b[a+15]=f[e+15]}else b=j.subarray(g>>2,g+h*64>>2);c.uniformMatrix4fv(k(l),!!i,b)}function ku(a){a=d.programs[a],c.useProgram(a),c.currentProgram=a}function kv(a,b,d,e,f){c.vertexAttrib4f(a,b,d,e,f)}function kw(b,a){c.vertexAttrib4f(b,j[a>>2],j[a+4>>2],j[a+8>>2],j[a+12>>2])}function kx(a,b){c.vertexAttribDivisor(a,b)}function ky(a,b,d,e,f){c.vertexAttribI4ui(a,b,d,e,f)}function kz(a,b,d,e,f){c.vertexAttribIPointer(a,b,d,e,f)}function kA(a,b,d,e,f,g){c.vertexAttribPointer(a,b,d,!!e,f,g)}function kB(a,b,d,e){c.viewport(a,b,d,e)}function bf(c,a){var b=new Date(e[c>>2]*1e3),d,f;return e[a>>2]=b.getUTCSeconds(),e[a+4>>2]=b.getUTCMinutes(),e[a+8>>2]=b.getUTCHours(),e[a+12>>2]=b.getUTCDate(),e[a+16>>2]=b.getUTCMonth(),e[a+20>>2]=b.getUTCFullYear()-1900,e[a+24>>2]=b.getUTCDay(),e[a+36>>2]=0,e[a+32>>2]=0,d=Date.UTC(b.getUTCFullYear(),0,1,0,0,0,0),f=(b.getTime()-d)/(1e3*60*60*24)|0,e[a+28>>2]=f,bf.GMTString||(bf.GMTString=bT("GMT")),e[a+40>>2]=bf.GMTString,a}f={get_func:function(a){return L.get(a)},error:function(){A.apply(null,Array.from(arguments))},print:function(){aD.apply(null,Array.from(arguments))},malloc:function(a){return ao(a)},free:function(a){bR(a)},getHeapValue:function(a,b){return ox(a,b)},setHeapValue:function(a,b,c){oy(a,b,c)},heapSub:function(a,b,d){const c=a.BYTES_PER_ELEMENT;return a.subarray(b/c,b/c+d)},heapSlice:function(a,b,d){const c=a.BYTES_PER_ELEMENT;return a.slice(b/c,b/c+d)},heapCopy:function(b,a,c){const d=a.BYTES_PER_ELEMENT;return b.set(a,c/d)},parseString:function(a){return H(a)},parseStringArray:function(b,c){const a=[],d=f.heapSub(e,b,c);return d.forEach(function(b){a.push(f.parseString(b))}),a},strlen:function(a){return aj(a)},allocString:function(a){const b=f.strlen(a)+1,c=f.malloc(b);return M(a,c,b),c},allocStringArray:function(a){const b=a.length,c=f.malloc(b*4);for(let d=0;d<b;d++)e[(c>>2)+d]=f.allocString(a[d]);return c},freeStringArray:function(a,b){for(let c=0;c<b;c++)f.free(e[(a>>2)+c]);f.free(a)},stringToHeap:function(a,b,c){return ax(a,x,b,c)}},m={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(a){m.canvas_resize_policy=a.canvasResizePolicy,m.canvas=a.canvas,m.locale=a.locale||m.locale,m.virtual_keyboard=a.virtualKeyboard,m.persistent_drops=!!a.persistentDrops,m.on_execute=a.onExecute,m.on_exit=a.onExit,a.focusCanvas&&m.canvas.focus()},locate_file:function(a){return g.locateFile(a)},clear:function(){m.canvas=null,m.locale="en",m.canvas_resize_policy=2,m.virtual_keyboard=!1,m.persistent_drops=!1,m.on_execute=null,m.on_exit=null}},F={_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return F._idbfs?1:0},init:function(a){if(F._idbfs=!1,!Array.isArray(a))return Promise.reject(new Error("Persistent paths must be an array"));if(!a.length)return Promise.resolve();F._mount_points=a.slice();function c(a){try{b.stat(a)}catch(c){if(c.errno!==C.ENOENT)throw c;b.mkdirTree(a)}}return F._mount_points.forEach(function(a){c(a),b.mount(B,{},a)}),new Promise(function(a,c){b.syncfs(!0,function(b){b?(F._mount_points=[],F._idbfs=!1,f.print(`IndexedDB not available: ${b.message}`)):F._idbfs=!0,a(b)})})},deinit:function(){F._mount_points.forEach(function(a){try{b.unmount(a)}catch(a){f.print("Already unmounted",a)}F._idbfs&&B.dbs[a]&&(B.dbs[a].close(),delete B.dbs[a])}),F._mount_points=[],F._idbfs=!1,F._syncing=!1},sync:function(){return F._syncing?(f.error("Already syncing!"),Promise.resolve()):(F._syncing=!0,new Promise(function(a,c){b.syncfs(!1,function(b){b&&f.error(`Failed to save IDB file system: ${b.message}`),F._syncing=!1,a(b)})}))},copy_to_fs:function(a,e){const d=a.lastIndexOf("/");let c="/";d>0&&(c=a.slice(0,d));try{b.stat(c)}catch(a){if(a.errno!==C.ENOENT)throw a;b.mkdirTree(c)}b.writeFile(a,new Uint8Array(e))}},N={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(a){N._async_cbs.push(a)},cleanup:function(b){const a=m.on_exit;F.deinit(),m.clear(),a&&a(b)},finish_async:function(a){N._fs_sync_promise.then(function(b){const a=[];return N._async_cbs.forEach(function(b){a.push(new Promise(b))}),Promise.all(a)}).then(function(){return F.sync()}).then(function(b){setTimeout(function(){a()},0)})}},p={ctx:null,input:null,driver:null,interval:0,init:function(b,f,d,e){const c={};b&&(c.sampleRate=b);const a=new(window.AudioContext||window.webkitAudioContext)(c);return p.ctx=a,a.onstatechange=function(){let b=0;switch(a.state){case"suspended":b=0;break;case"running":b=1;break;case"closed":b=2;break}d(b)},a.onstatechange(),p.interval=setInterval(function(){let b=0;a.baseLatency&&(b+=p.ctx.baseLatency),a.outputLatency&&(b+=p.ctx.outputLatency),e(b)},1e3),N.atexit(p.close_async),a.destination.channelCount},create_input:function(b){if(p.input)return 0;function a(a){try{p.input=p.ctx.createMediaStreamSource(a),b(p.input)}catch(a){f.error("Failed creaating input.",a)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(a,function(a){f.error("Error getting user media.",a)});else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return f.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},a,function(a){f.print(a)})}return 0},close_async:function(b,d){const a=p.ctx;if(p.ctx=null,!a){b();return}p.interval&&(clearInterval(p.interval),p.interval=0),p.input&&(p.input.disconnect(),p.input=null);let c=Promise.resolve();p.driver&&(c=p.driver.close()),c.then(function(){return a.close()}).then(function(){a.onstatechange=null,b()}).catch(function(c){a.onstatechange=null,f.error("Error closing AudioContext",c),b()})}};function kI(){return p.create_input(function(a){a.connect(p.driver.get_node())})}function kJ(){if(p.input){const a=p.input.mediaStream.getTracks();for(let b=0;b<a.length;b++)a[b].stop();p.input.disconnect(),p.input=null}}function kK(){return p.ctx&&p.ctx.createScriptProcessor?1:0}function kL(){return p.ctx&&p.ctx.audioWorklet?1:0}function kM(a,b,c,d){const e=f.get_func(c),g=f.get_func(d),h=f.getHeapValue(a,"i32"),i=p.init(h,b,e,g);return f.setHeapValue(a,p.ctx.sampleRate,"i32"),i}function kN(){return window.AudioContext||window.webkitAudioContext?1:0}function kO(){p.ctx&&p.ctx.state!=="running"&&p.ctx.resume()}Y={script:null,create:function(a,b){return Y.script=p.ctx.createScriptProcessor(a,2,b),p.driver=Y,Y.script.bufferSize},start:function(a,b,c,d,e){Y.script.onaudioprocess=function(g){const l=f.heapSub(j,a,b),h=g.inputBuffer;if(p.input){const a=h.getChannelData(0).length;for(let b=0;b<2;b++){const c=h.getChannelData(b);for(let d=0;d<a;d++)l[d*2+b]=c[d]}}e();const m=f.heapSub(j,c,d),i=g.outputBuffer,k=i.numberOfChannels;for(let a=0;a<k;a++){const b=i.getChannelData(a);for(let c=0;c<b.length;c++)b[c]=m[c*k+a]}},Y.script.connect(p.ctx.destination)},get_node:function(){return Y.script},close:function(){return new Promise(function(a,b){Y.script.disconnect(),Y.script.onaudioprocess=null,Y.script=null,a()})}};function kQ(a,b){const c=f.getHeapValue(a,"i32");try{const d=Y.create(c,b);f.setHeapValue(a,d,"i32")}catch(a){return f.error("Error starting AudioDriverScriptProcessor",a),1}return 0}function kR(a,b,c,d,e){const g=f.get_func(e);Y.start(a,b,c,d,g)}G={promise:null,worklet:null,ring_buffer:null,create:function(a){const b=m.locate_file("godot.audio.worklet.js");G.promise=p.ctx.audioWorklet.addModule(b).then(function(){return G.worklet=new AudioWorkletNode(p.ctx,"godot-processor",{outputChannelCount:[a]}),Promise.resolve()}),p.driver=G},start:function(a,b,c){G.promise.then(function(){const d=G.worklet;d.connect(p.ctx.destination),d.port.postMessage({cmd:"start",data:[c,a,b]}),d.port.onmessage=function(a){f.error(a.data)}})},start_no_threads:function(c,b,d,e,a,g){function h(){let i=0,k=0,h=0;const l=new Float32Array(b);function m(k){if(h===0)return;const a=f.heapSub(j,c,b),e=a.length,g=h;if(d(i,h),i+h>=e){const b=e-i;l.set(a.subarray(i,e)),h-=b,i=0}h>0&&l.set(a.subarray(i,i+h),g-h),k.postMessage({cmd:"chunk",data:l.subarray(0,g)}),i+=h,h=0}this.receive=function(c){const h=f.heapSub(j,e,a),i=k;let b=c.length,d=0;k+b>=a&&(d=a-k,h.set(c.subarray(0,d),k),b-=d,k=0),b&&h.set(c.subarray(d,b),k),g(i,c.length),k+=b},this.consumed=function(a,b){h+=a,m(b)}}G.ring_buffer=new h,G.promise.then(function(){const d=G.worklet,e=f.heapSlice(j,c,b);d.connect(p.ctx.destination),d.port.postMessage({cmd:"start_nothreads",data:[e,a]}),d.port.onmessage=function(b){if(!G.worklet)return;if(b.data.cmd==="read"){const a=b.data.data;G.ring_buffer.consumed(a,G.worklet.port)}else if(b.data.cmd==="input"){const c=b.data.data;if(c.length>a){f.error("Input chunk is too big");return}G.ring_buffer.receive(c)}else f.error(b.data)}})},get_node:function(){return G.worklet},close:function(){return new Promise(function(a,b){if(G.promise===null)return;G.promise.then(function(){G.worklet.port.postMessage({cmd:"stop",data:null}),G.worklet.disconnect(),G.worklet=null,G.promise=null,a()}).catch(function(a){})})}};function kT(a){try{G.create(a)}catch(a){return f.error("Error starting AudioDriverWorklet",a),1}return 0}function kU(a,b,c,d,e,g){const h=f.get_func(c),i=f.get_func(g);G.start_no_threads(a,b,h,d,e,i)}function kV(a,b){f.stringToHeap(`#${m.canvas.id}`,a,b)}function kW(a,b){f.stringToHeap(m.locale,a,b)}y={shape:"auto",visible:!0,cursors:{},set_style:function(a){m.canvas.style.cursor=a},set_shape:function(a){y.shape=a;let b=a;if(a in y.cursors){const c=y.cursors[a];b=`url("${c.url}") ${c.x} ${c.y}, auto`}y.visible&&y.set_style(b)},clear:function(){y.set_style(""),y.shape="auto",y.visible=!0,Object.keys(y.cursors).forEach(function(a){URL.revokeObjectURL(y.cursors[a]),delete y.cursors[a]})},lockPointer:function(){const a=m.canvas;a.requestPointerLock&&a.requestPointerLock()},releasePointer:function(){document.exitPointerLock&&document.exitPointerLock()},isPointerLocked:function(){return document.pointerLockElement===m.canvas}},w={handlers:[],has:function(a,b,c,d){return w.handlers.findIndex(function(e){return e.target===a&&e.event===b&&e.method===c&&e.capture===d})!==-1},add:function(a,b,c,d){if(w.has(a,b,c,d))return;function e(a,b,c,d){this.target=a,this.event=b,this.method=c,this.capture=d}w.handlers.push(new e(a,b,c,d)),a.addEventListener(b,c,d)},clear:function(){w.handlers.forEach(function(a){a.target.removeEventListener(a.event,a.method,a.capture)}),w.handlers.length=0}},D={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return D.hidpi?window.devicePixelRatio||1:1},isFullscreen:function(){const a=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return a?a===m.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!D.hasFullscreen())return 1;const a=m.canvas;try{const b=(a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.mozRequestFullscreen||a.webkitRequestFullscreen).call(a);b&&b.catch(function(){})}catch(a){return 1}return 0},exitFullscreen:function(){if(!D.isFullscreen())return 0;try{const a=document.exitFullscreen();a&&a.catch(function(){})}catch(a){return 1}return 0},_updateGL:function(){const b=bl(),a=d.getContext(b);a&&d.resizeOffscreenFramebuffer(a)},updateSize:function(){const g=D.isFullscreen(),h=m.canvas_resize_policy===2,i=m.canvas_resize_policy===0,j=D.desired_size[0],k=D.desired_size[1],a=m.canvas;let b=j,c=k;if(i)return a.width!==b||a.height!==c?(D.desired_size=[a.width,a.height],D._updateGL(),1):0;const d=D.getPixelRatio();(g||h)&&(b=window.innerWidth*d,c=window.innerHeight*d);const e=`${b/d}px`,f=`${c/d}px`;return a.style.width!==e||a.style.height!==f||a.width!==b||a.height!==c?(a.width=b,a.height=c,a.style.width=e,a.style.height=f,D._updateGL(),1):0}},v={textinput:null,textarea:null,available:function(){return m.virtual_keyboard&&"ontouchstart"in window},init:function(b){function a(c){const a=document.createElement(c);return a.style.display="none",a.style.position="absolute",a.style.zIndex="-1",a.style.background="transparent",a.style.padding="0px",a.style.margin="0px",a.style.overflow="hidden",a.style.width="0px",a.style.height="0px",a.style.border="0px",a.style.outline="none",a.readonly=!0,a.disabled=!0,w.add(a,"input",function(d){const c=f.allocString(a.value);b(c,a.selectionEnd),f.free(c)},!1),w.add(a,"blur",function(b){a.style.display="none",a.readonly=!0,a.disabled=!0},!1),m.canvas.insertAdjacentElement("beforebegin",a),a}v.textinput=a("input"),v.textarea=a("textarea"),v.updateSize()},show:function(b,c,d,e){if(!v.textinput||!v.textarea)return;(v.textinput.style.display!==""||v.textarea.style.display!=="")&&v.hide(),v.updateSize();const a=c?v.textarea:v.textinput;a.readonly=!1,a.disabled=!1,a.value=b,a.style.display="block",a.focus(),a.setSelectionRange(d,e)},hide:function(){if(!v.textinput||!v.textarea)return;[v.textinput,v.textarea].forEach(function(a){a.blur(),a.style.display="none",a.value=""})},updateSize:function(){if(!v.textinput||!v.textarea)return;const a=m.canvas.getBoundingClientRect();function b(b){b.style.left=`${a.left}px`,b.style.top=`${a.top}px`,b.style.width=`${a.width}px`,b.style.height=`${a.height}px`}b(v.textinput),b(v.textarea)},clear:function(){v.textinput&&(v.textinput.remove(),v.textinput=null),v.textarea&&(v.textarea.remove(),v.textarea=null)}},aP={window_icon:"",findDPI:function(){function b(a){return window.matchMedia(`(max-resolution: ${a}dpi)`).matches}function a(b,c,d){const e=parseInt((c-b)/2+b,10);return c-b<=1?d(c)?c:b:d(e)?a(b,e,d):a(e,c,d)}try{const c=a(0,800,b);return c>=96?c:96}catch(a){return 96}}};function la(a){window.alert(f.parseString(a))}function lb(){m.canvas.focus()}function lc(){return document.activeElement===m.canvas}function ld(a){const b=f.get_func(a);try{navigator.clipboard.readText().then(function(c){const a=f.allocString(c);b(a),f.free(a)}).catch(function(a){})}catch(a){}}function le(a){const b=f.parseString(a);return!navigator.clipboard||!navigator.clipboard.writeText?1:(navigator.clipboard.writeText(b).catch(function(a){f.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",a)}),0)}function lf(){return!y.visible}function lg(){return y.isPointerLocked()?1:0}function lh(a){a?y.lockPointer():y.releasePointer()}function li(h,d,c,e,g){const a=f.parseString(h),b=y.cursors[a];if(c>0){const b=new Blob([f.heapSlice(t,d,c)],{type:"image/png"}),h=URL.createObjectURL(b);y.cursors[a]={url:h,x:e,y:g}}else delete y.cursors[a];a===y.shape&&y.set_shape(y.shape),b&&URL.revokeObjectURL(b.url)}function lj(a){y.set_shape(f.parseString(a))}function lk(b){const a=b!==0;if(a===y.visible)return;y.visible=a,a?y.set_shape(y.shape):y.set_style("none")}function ll(a,b){D.desired_size=[a,b],D.updateSize()}function lm(b){const c=m.canvas,d=f.get_func(b);function a(a){a.target===c&&d(D.isFullscreen())}w.add(document,"fullscreenchange",a,!1),w.add(document,"mozfullscreenchange",a,!1),w.add(document,"webkitfullscreenchange",a,!1)}function ln(){return D.exitFullscreen()}function lo(){return D.requestFullscreen()}function lp(b,c,e,f){const g=bl(),a=d.getContext(g);a&&a.GLctx.getBufferSubData(b,c,t,f,e)}function lq(a){if(a!==1&&a!==2)return!1;try{return!!document.createElement("canvas").getContext(a===2?"webgl2":"webgl")}catch(a){}return!1}function lr(){const a=["Windows","Win64","Win32","WinCE"],b=navigator.platform||"";return a.indexOf(b)!==-1?1:0}function ls(a,b,c,d,e){const g=m.canvas,h=f.get_func(a),i=[b,c,d,e];["mouseover","mouseleave","focus","blur"].forEach(function(a,b){w.add(g,a,function(){h(i[b])},!0)})}function lt(){return D.getPixelRatio()}function lu(){return aP.findDPI()}function lv(b,c){const a=D.getPixelRatio();f.setHeapValue(b,window.screen.width*a,"i32"),f.setHeapValue(c,window.screen.height*a,"i32")}function lw(b,c,d,e){const a=m.canvas;switch(w.add(a,"contextmenu",function(a){a.preventDefault()},!1),w.add(a,"webglcontextlost",function(a){alert("WebGL context lost, please reload the page"),a.preventDefault()},!1),D.hidpi=!!e,m.canvas_resize_policy){case 0:D.desired_size=[a.width,a.height];break;case 1:D.desired_size=[b,c];break;default:a.style.position="absolute",a.style.top=0,a.style.left=0;break}D.updateSize(),d&&D.requestFullscreen()}function lx(){const a=D.updateSize();return a&&v.updateSize(),a}function ly(){return"ontouchstart"in window}function lz(){return v.available()}function lA(a){const b=f.get_func(a);v.available()&&v.init(b)}function lB(){v.hide()}function lC(d,e,a,b){const g=f.parseString(d),c=a>0?a:0,h=b>0?b:c;v.show(g,e,c,h)}function lD(a){const b=f.get_func(a);w.add(window,"blur",function(){b()},!1)}function lE(c,d){let a=document.getElementById("-gd-engine-icon");a===null&&(a=document.createElement("link"),a.rel="icon",a.id="-gd-engine-icon",document.head.appendChild(a));const b=aP.window_icon,e=new Blob([f.heapSlice(t,c,d)],{type:"image/png"});aP.window_icon=URL.createObjectURL(e),a.href=aP.window_icon,b&&URL.revokeObjectURL(b)}function lF(a,b){f.setHeapValue(a,m.canvas.width,"i32"),f.setHeapValue(b,m.canvas.height,"i32")}function lG(a){document.title=f.parseString(a)}function lH(h,i,b,d,e,g){const c=f.parseString(h);let a=null;try{if(i){const b=eval;a=b(c)}else a=eval(c)}catch(a){f.error(a)}switch(typeof a){case"boolean":return f.setHeapValue(b,a,"i32"),1;case"number":return f.setHeapValue(b,a,"double"),3;case"string":return f.setHeapValue(b,f.allocString(a),"*"),4;case"object":if(a===null)break;if(ArrayBuffer.isView(a)&&!(a instanceof Uint8Array)?a=new Uint8Array(a.buffer):a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a instanceof Uint8Array){const b=f.get_func(g),c=b(d,e,a.length);return t.set(a,c),20}break}return 0}l={_last_id:0,_references:{},get:function(a){return l._references[a]},add:function(b){const a=++l._last_id;return l._references[a]=b,a},remove:function(a){delete l._references[a]}},al={onread:function(c,b){const a=l.get(c);if(!a)return;b.value&&a.chunks.push(b.value),a.reading=!1,a.done=b.done},onresponse:function(d,b){const a=l.get(d);if(!a)return;let c=!1;b.headers.forEach(function(a,b){const d=a.toLowerCase().trim(),e=b.toLowerCase().trim();e==="transfer-encoding"&&d==="chunked"&&(c=!0)}),a.status=b.status,a.response=b,a.reader=b.body.getReader(),a.chunked=c},onerror:function(c,a){f.error(a);const b=l.get(c);if(!b)return;b.error=a},create:function(c,d,e,f){const a={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[],bodySize:-1},b=l.add(a),g={method:c,headers:e,body:f};return a.request=fetch(d,g),a.request.then(al.onresponse.bind(null,b)).catch(al.onerror.bind(null,b)),b},free:function(b){const a=l.get(b);if(!a)return;if(l.remove(b),!a.request)return;a.request.then(function(a){a.abort()}).catch(function(a){})},read:function(b){const a=l.get(b);if(!a)return;if(a.reader&&!a.reading){if(a.done){a.reader=null;return}a.reading=!0,a.reader.read().then(al.onread.bind(null,b)).catch(al.onerror.bind(null,b))}}};function lK(b){const a=l.get(b);return!a||!a.response?-1:a.bodySize}function lL(b,c,d,e,g,a){const h=f.parseString(b),i=f.parseString(c),j=f.parseStringArray(d,e),k=a?f.heapSlice(x,g,a):null;return al.create(h,i,j.map(function(a){const b=a.indexOf(":");return b<=0?[]:[a.slice(0,b).trim(),a.slice(b+1).trim()]}).filter(function(a){return a.length===2}),k)}function lM(a){al.free(a)}function lN(b){const a=l.get(b);return!a||!a.response?0:a.status}function lO(b){const a=l.get(b);return!a||!a.response?-1:a.chunked?1:0}function lP(d,e,g){const b=l.get(d);if(!b||!b.response)return 0;let a=g;const c=b.chunks;while(a&&c.length){const d=b.chunks[0];d.length>a?(f.heapCopy(x,d.slice(0,a),e),c[0]=d.slice(a),a=0):(f.heapCopy(x,d,e),a-=d.length,c.pop())}return c.length||al.read(d),g-a}function lQ(h,d,e){const b=l.get(h);if(!b||!b.response)return 1;const g=f.get_func(d),a=[];b.response.headers.forEach(function(b,c){a.push(`${c}:${b}`)});const c=f.allocStringArray(a);return g(a.length,c,e),f.freeStringArray(c,a.length),0}function lR(b){const a=l.get(b);return a?a.error?-1:a.response?a.reader?1:a.done?2:-1:0:-1}ab={samples:[],get_pads:function(){try{const a=navigator.getGamepads();return a||[]}catch(a){return[]}},get_samples:function(){return ab.samples},get_sample:function(a){const b=ab.samples;return a<b.length?b[a]:null},sample:function(){const b=ab.get_pads(),a=[];for(let d=0;d<b.length;d++){const c=b[d];if(!c){a.push(null);continue}const e={standard:c.mapping==="standard",buttons:[],axes:[],connected:c.connected};for(let a=0;a<c.buttons.length;a++)e.buttons.push(c.buttons[a].value);for(let a=0;a<c.axes.length;a++)e.axes.push(c.axes[a]);a.push(e)}ab.samples=a},init:function(b){w.samples=[];function c(a){const e=ab.get_guid(a),c=f.allocString(a.id),d=f.allocString(e);b(a.index,1,c,d),f.free(c),f.free(d)}const a=ab.get_pads();for(let b=0;b<a.length;b++)a[b]&&c(a[b]);w.add(window,"gamepadconnected",function(a){a.gamepad&&c(a.gamepad)},!1),w.add(window,"gamepaddisconnected",function(a){a.gamepad&&b(a.gamepad.index,0)},!1)},get_guid:function(f){if(f.mapping)return f.mapping;const b=navigator.userAgent;let a="Unknown";b.indexOf("Android")>=0?a="Android":b.indexOf("Linux")>=0?a="Linux":b.indexOf("iPhone")>=0?a="iOS":b.indexOf("Macintosh")>=0?a="MacOSX":b.indexOf("Windows")>=0&&(a="Windows");const d=f.id,g=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,h=/^([0-9a-f]+)-([0-9a-f]+)-/i;let c="",e="";if(g.test(d)){const a=g.exec(d);c=a[1].padStart(4,"0"),e=a[2].padStart(4,"0")}else if(h.test(d)){const a=h.exec(d);c=a[1].padStart(4,"0"),e=a[2].padStart(4,"0")}return!c||!e?`${a}Unknown`:a+c+e}},J={promises:[],pending_files:[],add_entry:function(a){a.isDirectory?J.add_dir(a):a.isFile?J.add_file(a):f.error("Unrecognized entry...",a)},add_dir:function(a){J.promises.push(new Promise(function(b,d){const c=a.createReader();c.readEntries(function(a){for(let b=0;b<a.length;b++)J.add_entry(a[b]);b()})}))},add_file:function(a){J.promises.push(new Promise(function(c,b){a.file(function(a){const d=new FileReader;d.onload=function(){const b={path:a.relativePath||a.webkitRelativePath,name:a.name,type:a.type,size:a.size,data:d.result};b.path||(b.path=b.name),J.pending_files.push(b),c()},d.onerror=function(){f.print("Error reading file"),b()},d.readAsArrayBuffer(a)},function(a){f.print("Error!"),b()})}))},process:function(a,b){if(J.promises.length===0){a();return}J.promises.pop().then(function(){setTimeout(function(){J.process(a,b)},0)})},_process_event:function(a,c){if(a.preventDefault(),a.dataTransfer.items){for(let d=0;d<a.dataTransfer.items.length;d++){const b=a.dataTransfer.items[d];let c=null;"getAsEntry"in b?c=b.getAsEntry():"webkitGetAsEntry"in b&&(c=b.webkitGetAsEntry()),c&&J.add_entry(c)}}else f.error("File upload not supported");new Promise(J.process).then(function(){const a=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,d=[],e=[];b.mkdir(a.slice(0,-1)),J.pending_files.forEach(f=>{const b=f.path;F.copy_to_fs(a+b,f.data);let c=b.indexOf("/");if(c===-1)d.push(a+b);else{const e=b.substr(0,c);c=e.indexOf("/"),c<0&&d.indexOf(a+e)===-1&&d.push(a+e)}e.push(a+b)}),J.promises=[],J.pending_files=[],c(d),m.persistent_drops?N.atexit(function(b,c){J.remove_drop(e,a),b()}):J.remove_drop(e,a)})},remove_drop:function(d,a){const c=[a.substr(0,a.length-1)];d.forEach(function(f){b.unlink(f);let d=f.replace(a,""),e=d.lastIndexOf("/");while(e>0)d=d.substr(0,e),c.indexOf(a+d)===-1&&c.push(a+d),e=d.lastIndexOf("/")}),c.sort(function(c,d){const a=(c.match(/\//g)||[]).length,b=(d.match(/\//g)||[]).length;return a>b?-1:a<b?1:0}).forEach(function(a){b.rmdir(a)})},handler:function(a){return function(b){J._process_event(b,a)}}},ar={getModifiers:function(a){return a.shiftKey+0+(a.altKey+0<<1)+(a.ctrlKey+0<<2)+(a.metaKey+0<<3)},computePosition:function(b,a){const c=m.canvas,d=c.width/a.width,e=c.height/a.height,f=(b.clientX-a.x)*d,g=(b.clientY-a.y)*e;return[f,g]}};function lV(b){const c=f.get_func(b),d=function(e){const a=e||[];if(!a.length)return;const b=a.length,d=f.allocStringArray(a);c(d,b),f.freeStringArray(d,b)},a=m.canvas;w.add(a,"dragover",function(a){a.preventDefault()},!1),w.add(a,"drop",J.handler(d))}function lW(a){const b=f.get_func(a);ab.init(b)}function lX(){return ab.sample(),0}function lY(){return ab.get_samples().length}function lZ(h,i,j,k,l,g){const a=ab.get_sample(h);if(!a||!a.connected)return 1;const b=a.buttons,d=b.length<16?b.length:16;for(let a=0;a<d;a++)f.setHeapValue(i+(a<<2),b[a],"float");f.setHeapValue(j,d,"i32");const c=a.axes,e=c.length<10?c.length:10;for(let a=0;a<e;a++)f.setHeapValue(k+(a<<2),c[a],"float");f.setHeapValue(l,e,"i32");const m=a.standard?1:0;return f.setHeapValue(g,m,"i32"),0}function l_(b,c,d){const e=f.get_func(b);function a(b,a){const g=ar.getModifiers(a);f.stringToHeap(a.code,c,32),f.stringToHeap(a.key,d,32),e(b,a.repeat,g),a.preventDefault()}w.add(m.canvas,"keydown",a.bind(null,1),!1),w.add(m.canvas,"keyup",a.bind(null,0),!1)}function l$(c){const d=f.get_func(c),a=m.canvas;function b(c,b){const f=a.getBoundingClientRect(),e=ar.computePosition(b,f),g=ar.getModifiers(b);c&&m.canvas.focus(),d(c,b.button,e[0],e[1],g)&&b.preventDefault()}w.add(a,"mousedown",b.bind(null,1),!1),w.add(window,"mouseup",b.bind(null,0),!1)}function ma(b){const c=f.get_func(b),a=m.canvas;function d(b){const d=a.getBoundingClientRect(),e=ar.computePosition(b,d),f=a.width/d.width,g=a.height/d.height,h=b.movementX*f,i=b.movementY*g,j=ar.getModifiers(b);c(e[0],e[1],h,i,j)}w.add(window,"mousemove",d,!1)}function mb(a){const b=f.get_func(a);function c(a){b(a.deltaX||0,a.deltaY||0)&&a.preventDefault()}w.add(m.canvas,"wheel",c,!1)}function mc(a){const b=f.get_func(a);w.add(window,"paste",function(c){const d=c.clipboardData.getData("text"),a=f.allocString(d);b(a),f.free(a)},!1)}function md(d,e,c){const g=f.get_func(d),a=m.canvas;function b(h,b){h===0&&m.canvas.focus();const i=a.getBoundingClientRect(),d=b.changedTouches;for(let a=0;a<d.length;a++){const b=d[a],g=ar.computePosition(b,i);f.setHeapValue(c+a*2*8,g[0],"double"),f.setHeapValue(c+(a*2+1)*8,g[1],"double"),f.setHeapValue(e+a*4,b.identifier,"i32")}g(h,d.length),b.cancelable&&b.preventDefault()}w.add(a,"touchstart",b.bind(null,0),!1),w.add(a,"touchend",b.bind(null,1),!1),w.add(a,"touchcancel",b.bind(null,1),!1),w.add(a,"touchmove",b.bind(null,2),!1)}function me(c,d,j,k){const e=f.heapSlice(x,c,d),g=f.parseString(j),h=f.parseString(k),i=new Blob([e],{type:h}),b=window.URL.createObjectURL(i),a=document.createElement("a");a.href=b,a.download=g,a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(b)}function mf(a){const b=f.parseString(a),c=JSON.parse(b);return m.on_execute?(m.on_execute(c),0):1}function mg(a){const b=f.get_func(a);N.finish_async(b)}function mh(){return F.is_persistent()}function mi(a){const b=f.get_func(a);N._fs_sync_promise=F.sync(),N._fs_sync_promise.then(function(a){b()})}function mj(){return navigator.hardwareConcurrency||1}function mk(a){N.request_quit=f.get_func(a)}function ml(a){window.open(f.parseString(a),"_blank")}ag={connect:function(b,c,d,e,g){const a=l.get(b);if(!a)return;a.binaryType="arraybuffer",a.onopen=function(a){c()},a.onclose=function(a){g()},a.onerror=function(a){e()},a.onmessage=function(a){let b,e=0;if(a.data instanceof ArrayBuffer)b=new Uint8Array(a.data);else if(a.data instanceof Blob){f.error("Blob type not supported");return}else if(typeof a.data=="string"){e=1;const c=new TextEncoder("utf-8");b=new Uint8Array(c.encode(a.data))}else{f.error("Unknown message type");return}const g=b.length*b.BYTES_PER_ELEMENT,c=f.malloc(g);t.set(b,c),d(c,g,e),f.free(c)}},close:function(b){const a=l.get(b);if(!a)return;a.onopen=null,a.onmessage=null,a.onerror=null,a.onclose=null,a.close()},get_prop:function(c,b,d){const a=l.get(c);return a&&a[b]!==void 0?a[b]:d}};function mn(a){const b=l.get(a);if(!b)return;ag.close(a)}function mo(b,a,c,d,e,g){const h=f.get_func(c).bind(null,a),i=f.get_func(d).bind(null,a),j=f.get_func(e).bind(null,a),k=f.get_func(g).bind(null,a);ag.connect(b,h,i,j,k)}function mp(a){ag.close(a),l.remove(a)}function mq(a){return ag.get_prop(a,"bufferedAmount",0)}function mr(a){return ag.get_prop(a,"id",65535)}function ms(a){return ag.get_prop(a,"negotiated",65535)}function mt(a){return ag.get_prop(a,"ordered",!0)}function mu(b){const a=l.get(b);return!a||!a.label?0:f.allocString(a.label)}function mv(b){const a=l.get(b);return a?a.maxPacketLifeTime!==void 0?a.maxPacketLifeTime:a.maxRetransmitTime!==void 0?a.maxRetransmitTime:65535:65535}function mw(a){return ag.get_prop(a,"maxRetransmits",65535)}function mx(b){const a=l.get(b);return!a||!a.protocol?0:f.allocString(a.protocol)}function my(b){const a=l.get(b);if(!a)return 3;switch(a.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;case"closed":default:return 3}}function mz(d,e,c,g){const a=l.get(d);if(!a)return 1;const b=new Uint8Array(c);for(let a=0;a<c;a++)b[a]=f.getHeapValue(e+a,"i8");if(g)a.send(b.buffer);else{const c=new TextDecoder("utf-8").decode(b);a.send(c)}return 0}au={onstatechange:function(b,c,d,f){const e=l.get(b);if(!e)return;let a;switch(c.iceConnectionState){case"new":a=0;break;case"checking":a=1;break;case"connected":case"completed":a=2;break;case"disconnected":a=3;break;case"failed":a=4;break;case"closed":default:a=5;break}d(a)},onicecandidate:function(h,e,c){const g=l.get(h);if(!g||!c.candidate)return;const a=c.candidate,d=f.allocString(a.candidate),b=f.allocString(a.sdpMid);e(b,a.sdpMLineIndex,d),f.free(d),f.free(b)},ondatachannel:function(a,b,c){const d=l.get(a);if(!d)return;const e=l.add(c.channel);b(e)},onsession:function(d,e,a){const g=l.get(d);if(!g)return;const b=f.allocString(a.type),c=f.allocString(a.sdp);e(b,c),f.free(b),f.free(c)},onerror:function(a,b,c){const d=l.get(a);if(!d)return;f.error(c),b()}};function mB(b){const a=l.get(b);if(!a)return;a.close()}function mC(e,c,g,k,m){const n=f.get_func(g).bind(null,c),h=f.get_func(k).bind(null,c),i=f.get_func(m).bind(null,c),j=JSON.parse(f.parseString(e));let a=null;try{a=new RTCPeerConnection(j)}catch(a){return f.error(a),0}const d=au,b=l.add(a);return a.oniceconnectionstatechange=d.onstatechange.bind(null,b,a,n),a.onicecandidate=d.onicecandidate.bind(null,b,h),a.ondatachannel=d.ondatachannel.bind(null,b,i),b}function mD(a,b,c){try{const d=l.get(a);if(!d)return 0;const e=f.parseString(b),g=JSON.parse(f.parseString(c)),h=d.createDataChannel(e,g);return l.add(h)}catch(a){return f.error(a),0}}function oA(b){const a=l.get(b);if(!a)return;a.oniceconnectionstatechange=null,a.onicecandidate=null,a.ondatachannel=null,l.remove(b)}function mF(b,c,d,e){const a=l.get(b);if(!a)return;const g=f.parseString(c),h=f.parseString(e);a.addIceCandidate(new RTCIceCandidate({candidate:h,sdpMid:g,sdpMlineIndex:d}))}function mG(a,c,d,e,g){const b=l.get(a);if(!b)return;const h=f.parseString(c),i=f.parseString(d),j=f.get_func(g).bind(null,e);b.setLocalDescription({sdp:i,type:h}).catch(function(b){au.onerror(a,j,b)})}function mH(a,b,d,e){const c=l.get(a);if(!c)return;const g=f.get_func(d).bind(null,b),h=f.get_func(e).bind(null,b);c.createOffer().then(function(b){au.onsession(a,g,b)}).catch(function(b){au.onerror(a,h,b)})}function mI(a,i,e,d,g,h){const b=l.get(a);if(!b)return;const c=f.parseString(i),j=f.parseString(e),k=f.get_func(h).bind(null,d),m=f.get_func(g).bind(null,d);b.setRemoteDescription({sdp:j,type:c}).then(function(){return c!=="offer"?Promise.resolve():b.createAnswer().then(function(b){au.onsession(a,m,b)})}).catch(function(b){au.onerror(a,k,b)})}_={_onopen:function(c,d,e){const a=l.get(c);if(!a)return;const b=f.allocString(a.protocol);d(b),f.free(b)},_onmessage:function(h,i,a){const g=l.get(h);if(!g)return;let b,e=0;if(a.data instanceof ArrayBuffer)b=new Uint8Array(a.data);else if(a.data instanceof Blob){f.error("Blob type not supported");return}else if(typeof a.data=="string"){e=1;const c=new TextEncoder("utf-8");b=new Uint8Array(c.encode(a.data))}else{f.error("Unknown message type");return}const d=b.length*b.BYTES_PER_ELEMENT,c=f.malloc(d);t.set(b,c),i(c,d,e),f.free(c)},_onerror:function(a,b,d){const c=l.get(a);if(!c)return;b()},_onclose:function(c,d,a){const e=l.get(c);if(!e)return;const b=f.allocString(a.reason);d(a.code,b,a.wasClean?1:0),f.free(b)},send:function(b,c){const a=l.get(b);return!a||a.readyState!==a.OPEN?1:(a.send(c),0)},bufferedAmount:function(b){const a=l.get(b);return a?a.bufferedAmount:0},create:function(a,c,d,e,f){const b=l.add(a);return a.onopen=_._onopen.bind(null,b,c),a.onmessage=_._onmessage.bind(null,b,d),a.onerror=_._onerror.bind(null,b,e),a.onclose=_._onclose.bind(null,b,f),b},close:function(b,c,d){const a=l.get(b);if(a&&a.readyState<a.CLOSING){const b=c,e=f.parseString(d);a.close(b,e)}},destroy:function(b){const a=l.get(b);if(!a)return;_.close(b,1001,""),l.remove(b),a.onopen=null,a.onmessage=null,a.onerror=null,a.onclose=null}};function mK(a){return _.bufferedAmount(a)}function mL(a,b,c){const d=b,e=f.parseString(c);_.close(a,d,e)}function mM(a,i,e,g,h,m,n){const o=f.get_func(g).bind(null,a),j=f.get_func(h).bind(null,a),k=f.get_func(m).bind(null,a),l=f.get_func(n).bind(null,a),c=f.parseString(i),d=f.parseString(e);let b=null;try{d?b=new WebSocket(c,d.split(",")):b=new WebSocket(c)}catch(a){return 0}return b.binaryType="arraybuffer",_.create(b,o,j,k,l)}function mN(a){_.destroy(a)}function mO(h,e,d,g){const b=new Uint8Array(d);let a=0;for(a=0;a<d;a++)b[a]=f.getHeapValue(e+a,"i8");let c=b.buffer;return g||(c=new TextDecoder("utf-8").decode(b)),_.send(h,c)}z={proxies:null,MyProxy:function(a){const b=l.add(this);z.proxies.set(a,b);let c=1;this.ref=function(){c++},this.unref=function(){c--,c===0&&(l.remove(b),z.proxies.delete(a))},this.get_val=function(){return a},this.get_id=function(){return b}},get_proxied:function(b){const a=z.proxies.get(b);if(a===void 0){const a=new z.MyProxy(b);return a.get_id()}return l.get(a).ref(),a},get_proxied_value:function(b){const a=l.get(b);return a===void 0?void 0:a.get_val()},variant2js:function(b,a){switch(b){case 0:return null;case 1:return!!f.getHeapValue(a,"i64");case 2:return f.getHeapValue(a,"i64");case 3:return f.getHeapValue(a,"double");case 4:return f.parseString(f.getHeapValue(a,"*"));case 17:return z.get_proxied_value(f.getHeapValue(a,"i64"));default:return void 0}},js2variant:function(a,b){if(a===void 0||a===null)return 0;const c=typeof a;if(c==="boolean")return f.setHeapValue(b,a,"i64"),1;if(c==="number")return Number.isInteger(a)?(f.setHeapValue(b,a,"i64"),2):(f.setHeapValue(b,a,"double"),3);if(c==="string"){const c=f.allocString(a);return f.setHeapValue(b,c,"*"),4}const d=z.get_proxied(a);return f.setHeapValue(b,d,"i64"),17}};function mQ(b,c){const d=f.get_func(c);let a=0;const e=function(){if(!z.get_proxied_value(a))return;const c=Array.from(arguments);d(b,z.get_proxied(c),c.length)};return a=z.get_proxied(e),a}function mR(g,j,e,h,b,c,i){const a=f.parseString(g);if(typeof window[a]=="undefined")return-1;const k=f.get_func(h),l=f.get_func(i),d=new Array(e);for(let a=0;a<e;a++){const g=k(j,a,b,c),h=f.getHeapValue(c,"*");d[a]=z.variant2js(g,b),h&&l(c,g)}try{const c=new window[a](...d);return z.js2variant(c,b)}catch(b){return f.error(`Error calling constructor ${a} with args:`,d,"error:",b),-1}}function mS(b){const a=f.parseString(b);return typeof window[a]!="undefined"?z.get_proxied(window[a]):0}function mT(n,k,j,e,h,a,c,i){const b=z.get_proxied_value(n);if(b===void 0)return-1;const d=f.parseString(k),l=f.get_func(h),m=f.get_func(i),g=new Array(e);for(let b=0;b<e;b++){const d=l(j,b,a,c),h=f.getHeapValue(c,"*");g[b]=z.variant2js(d,a),h&&m(c,d)}try{const c=b[d](...g);return z.js2variant(c,a)}catch(a){return f.error(`Error calling method ${d} on:`,b,"error:",a),-1}}function mU(d,b,c){const a=z.get_proxied_value(d);if(a===void 0)return 0;if(c){const d=f.parseString(c);try{return z.js2variant(a[d],b)}catch(b){return f.error(`Error getting variable ${d} on object`,a),0}}return z.js2variant(a,b)}function mV(d,e,c){const b=z.get_proxied_value(d);if(b===void 0)return-1;const a=z.variant2js(e,c);if(a===void 0||a===null)return-1;try{return z.js2variant(b[a],c)}catch(c){return f.error(`Error getting variable ${a} on object`,b,c),-1}}function mW(c,d,e,g){const a=z.get_proxied_value(c);if(a===void 0)return;const b=f.parseString(d);try{a[b]=z.variant2js(e,g)}catch(c){f.error(`Error setting variable ${b} on object`,a)}}function mX(h,c,d,e,g){const a=z.get_proxied_value(h);if(a===void 0)return-1;const b=z.variant2js(c,d);try{return a[b]=z.variant2js(e,g),0}catch(c){return f.error(`Error setting variable ${b} on object`,a),-1}}function mY(b){const a=l.get(b);a!==void 0&&a.unref()}i={gl:null,texture_ids:[null,null],textures:[null,null],session:null,space:null,frame:null,pose:null,orig_requestAnimationFrame:null,requestAnimationFrame:a=>{if(i.session&&i.space){const b=function(c,b){i.frame=b,i.pose=b.getViewerPose(i.space),a(c),i.frame=null,i.pose=null};i.session.requestAnimationFrame(b)}else i.orig_requestAnimationFrame(a)},monkeyPatchRequestAnimationFrame:a=>{i.orig_requestAnimationFrame===null&&(i.orig_requestAnimationFrame=h.requestAnimationFrame),h.requestAnimationFrame=a?i.requestAnimationFrame:i.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{h.mainLoop.pause(),window.setTimeout(function(){h.mainLoop.resume()},0)},shaderProgram:null,programInfo:null,buffer:null,vsSource:"\n			const vec2 scale = vec2(0.5, 0.5);\n			attribute vec4 aVertexPosition;\n\n			varying highp vec2 vTextureCoord;\n\n			void main () {\n				gl_Position = aVertexPosition;\n				vTextureCoord = aVertexPosition.xy * scale + scale;\n			}\n		",fsSource:"\n			varying highp vec2 vTextureCoord;\n\n			uniform sampler2D uSampler;\n\n			void main() {\n				gl_FragColor = texture2D(uSampler, vTextureCoord);\n			}\n		",initShaderProgram:(a,c,d)=>{const e=i.loadShader(a,a.VERTEX_SHADER,c),g=i.loadShader(a,a.FRAGMENT_SHADER,d),b=a.createProgram();return a.attachShader(b,e),a.attachShader(b,g),a.linkProgram(b),!a.getProgramParameter(b,a.LINK_STATUS)?(f.error(`Unable to initialize the shader program: ${a.getProgramInfoLog(b)}`),null):b},loadShader:(a,c,d)=>{const b=a.createShader(c);return a.shaderSource(b,d),a.compileShader(b),!a.getShaderParameter(b,a.COMPILE_STATUS)?(f.error(`An error occurred compiling the shader: ${a.getShaderInfoLog(b)}`),a.deleteShader(b),null):b},initBuffer:a=>{const b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);const c=[-1,-1,1,-1,-1,1,1,1];return a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW),b},blitTexture:(a,b)=>{i.shaderProgram===null&&(i.shaderProgram=i.initShaderProgram(a,i.vsSource,i.fsSource),i.programInfo={program:i.shaderProgram,attribLocations:{vertexPosition:a.getAttribLocation(i.shaderProgram,"aVertexPosition")},uniformLocations:{uSampler:a.getUniformLocation(i.shaderProgram,"uSampler")}},i.buffer=i.initBuffer(a));const c=a.getParameter(a.CURRENT_PROGRAM);a.useProgram(i.shaderProgram),a.bindBuffer(a.ARRAY_BUFFER,i.buffer),a.vertexAttribPointer(i.programInfo.attribLocations.vertexPosition,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(i.programInfo.attribLocations.vertexPosition),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,b),a.uniform1i(i.programInfo.uniformLocations.uSampler,0),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.bindTexture(a.TEXTURE_2D,null),a.disableVertexAttribArray(i.programInfo.attribLocations.vertexPosition),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(c)},controllers:[],sampleControllers:()=>{if(!i.session||!i.frame)return;let b=2;const a=[];i.session.inputSources.forEach(c=>{c.targetRayMode==="tracked-pointer"?c.handedness==="right"?a[1]=c:(c.handedness==="left"||!a[0])&&(a[0]=c):a[b++]=c}),i.controllers=a},getControllerId:a=>i.controllers.indexOf(a)};function m_(f){if(!i.session||!i.pose)return;const e=f===2?1:0,d=i.session.renderState.baseLayer,g=i.pose.views[e],c=d.getViewport(g),a=i.gl,h=a.getParameter(a.FRAMEBUFFER_BINDING),b=a.getParameter(a.VIEWPORT);a.bindFramebuffer(a.FRAMEBUFFER,d.framebuffer),a.viewport(c.x,c.y,c.width,c.height),i.blitTexture(a,i.textures[e]),a.bindFramebuffer(a.FRAMEBUFFER,h),a.viewport(b[0],b[1],b[2],b[3])}function m$(){if(!i.space||!i.space.boundsGeometry)return 0;const b=i.space.boundsGeometry.length;if(b===0)return 0;const a=f.malloc((b*3+1)*4);f.setHeapValue(a,b,"i32");for(let c=0;c<b;c++){const d=i.space.boundsGeometry[c];f.setHeapValue(a+(c*3+1)*4,d.x,"float"),f.setHeapValue(a+(c*3+2)*4,d.y,"float"),f.setHeapValue(a+(c*3+3)*4,d.z,"float")}return a}function na(d){if(i.controllers.length===0)return 0;const a=i.controllers[d];if(!a||!a.gamepad)return 0;const b=a.gamepad.axes.length,c=f.malloc((b+1)*4);f.setHeapValue(c,b,"i32");for(let d=0;d<b;d++){let e=a.gamepad.axes[d];(d===1||d===3)&&(e*=-1),f.setHeapValue(c+4+d*4,e,"float")}return c}function nb(d){if(i.controllers.length===0)return 0;const a=i.controllers[d];if(!a||!a.gamepad)return 0;const b=a.gamepad.buttons.length,c=f.malloc((b+1)*4);f.setHeapValue(c,b,"i32");for(let d=0;d<b;d++)f.setHeapValue(c+4+d*4,a.gamepad.buttons[d].value,"float");return c}function nc(){return!i.session||!i.frame?0:i.controllers.length}function nd(h){if(!i.session||!i.frame)return 0;const b=i.controllers[h];if(!b)return 0;const d=i.frame,e=i.space,c=d.getPose(b.targetRaySpace,e);if(!c)return 0;const g=c.transform.matrix,a=f.malloc(16*4);for(let b=0;b<16;b++)f.setHeapValue(a+b*4,g[b],"float");return a}function ne(j){if(!i.session)return 0;const b=j===2?1:0;if(i.texture_ids[b])return i.texture_ids[b];if(!i.pose)return 0;const g=i.session.renderState.baseLayer,h=i.pose.views[b],f=g.getViewport(h),a=i.gl,c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,f.width,f.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null);const e=d.getNewId(d.textures);return d.textures[e]=c,i.textures[b]=c,i.texture_ids[b]=e,e}function nf(b){if(!i.session||!i.pose)return 0;const c=b===2?1:0,d=i.pose.views[c].projectionMatrix,a=f.malloc(16*4);for(let b=0;b<16;b++)f.setHeapValue(a+b*4,d[b],"float");return a}function ng(){if(!i.session||!i.pose)return 0;const c=i.session.renderState.baseLayer,d=i.pose.views[0],b=c.getViewport(d),a=f.malloc(2*4);return f.setHeapValue(a+0,b.width,"i32"),f.setHeapValue(a+4,b.height,"i32"),a}function nh(b){if(!i.session||!i.pose)return 0;const d=i.pose.views;let a;b===0?a=i.pose.transform.matrix:a=d[b-1].transform.matrix;const c=f.malloc(16*4);for(let b=0;b<16;b++)f.setHeapValue(c+b*4,a[b],"float");return c}function ni(){return!i.session||!i.pose?0:i.pose.views.length}function nj(){return!i.session||!i.session.visibilityState?0:f.allocString(i.session.visibilityState)}function nk(x,w,t,q,p,o,n,k,l,m){i.monkeyPatchRequestAnimationFrame(!0);const j=f.parseString(x),h=f.parseString(w).split(",").map(a=>a.trim()).filter(a=>a!==""),g=f.parseString(t).split(",").map(a=>a.trim()).filter(a=>a!==""),e=f.parseString(q).split(",").map(a=>a.trim()),r=f.get_func(p),s=f.get_func(o),b=f.get_func(n),u=f.get_func(k),v=f.get_func(l),c=f.get_func(m),a={};h.length>0&&(a.requiredFeatures=h),g.length>0&&(a.optionalFeatures=g),navigator.xr.requestSession(j,a).then(function(a){i.session=a,a.addEventListener("end",function(a){s()}),a.addEventListener("inputsourceschange",function(a){let b=!1;[a.added,a.removed].forEach(a=>{a.forEach(a=>{a.targetRayMode==="tracked-pointer"&&(b=!0)})}),b&&u()}),["selectstart","select","selectend","squeezestart","squeeze","squeezeend"].forEach(b=>{a.addEventListener(b,function(c){const a=f.allocString(b);v(a,i.getControllerId(c.inputSource)),f.free(a)})}),a.addEventListener("visibilitychange",function(b){const a=f.allocString("visibility_state_changed");c(a),f.free(a)});const h=bl(),g=d.getContext(h).GLctx;i.gl=g,g.makeXRCompatible().then(function(){a.updateRenderState({baseLayer:new XRWebGLLayer(a,g)});function h(a,b){i.space=a,a.onreset=function(b){const a=f.allocString("reference_space_reset");c(a),f.free(a)},i.pauseResumeMainLoop(),window.setTimeout(function(){const a=f.allocString(b);r(a),f.free(a)},0)}function d(){const c=e.shift();a.requestReferenceSpace(c).then(a=>{h(a,c)}).catch(()=>{if(e.length===0){const a=f.allocString("Unable to get any of the requested reference space types");b(a),f.free(a)}else d()})}d()}).catch(function(c){const a=f.allocString(`Unable to make WebGL context compatible with WebXR: ${c}`);b(a),f.free(a)})}).catch(function(c){const a=f.allocString(`Unable to start session: ${c}`);b(a),f.free(a)})}function nl(a){return!(!i.session||!i.frame)&&!!i.controllers[a]}function nm(c,d){const a=f.parseString(c),b=f.get_func(d);if(navigator.xr)navigator.xr.isSessionSupported(a).then(function(d){const c=f.allocString(a);b(c,d?1:0),f.free(c)});else{const c=f.allocString(a);b(c,0),f.free(c)}}function nn(){return!!navigator.xr}function no(){i.sampleControllers()}function np(){i.session&&i.session.end().catch(a=>{});const a=i.gl;for(let b=0;b<i.textures.length;b++){const c=i.textures[b];c!==null&&a.deleteTexture(c),i.textures[b]=null;const e=i.texture_ids[b];e!==null&&(d.textures[e]=null),i.texture_ids[b]=null}i.session=null,i.space=null,i.frame=null,i.pose=null,i.monkeyPatchRequestAnimationFrame(!1),i.pauseResumeMainLoop()}function nq(a,b){return bJ(C.EPERM),-1}function bF(){var c,d,f,a,b,i,k,l,g,h;if(bF.called)return;bF.called=!0,c=(new Date).getFullYear(),d=new Date(c,0,1),f=new Date(c,6,1),a=d.getTimezoneOffset(),b=f.getTimezoneOffset(),i=Math.max(a,b),e[bA()>>2]=i*60,e[bG()>>2]=Number(a!=b);function j(b){var a=b.toTimeString().match(/\(([A-Za-z ]+)\)$/);return a?a[1]:"GMT"}k=j(d),l=j(f),g=bT(k),h=bT(l),b<a?(e[ap()>>2]=g,e[ap()+4>>2]=h):(e[ap()>>2]=h,e[ap()+4>>2]=g)}function ns(j,b){var a,d,h,f,c,g,i;return bF(),a=new Date(e[j>>2]*1e3),e[b>>2]=a.getSeconds(),e[b+4>>2]=a.getMinutes(),e[b+8>>2]=a.getHours(),e[b+12>>2]=a.getDate(),e[b+16>>2]=a.getMonth(),e[b+20>>2]=a.getFullYear()-1900,e[b+24>>2]=a.getDay(),d=new Date(a.getFullYear(),0,1),h=(a.getTime()-d.getTime())/(1e3*60*60*24)|0,e[b+28>>2]=h,e[b+36>>2]=-(a.getTimezoneOffset()*60),f=new Date(a.getFullYear(),6,1).getTimezoneOffset(),c=d.getTimezoneOffset(),g=(f!=c&&a.getTimezoneOffset()==Math.min(c,f))|0,e[b+32>>2]=g,i=e[ap()+(g?4:0)>>2],e[b+40>>2]=i,b}function nt(a){b$(a)}cp=0;function nv(a,b,c){return a==14?(cp=e[b>>2],0):0}function nw(a,b,c){return nv(a,b,c)}function bh(a){return a%4===0&&(a%100!==0||a%400===0)}function bC(c,d){for(var a=0,b=0;b<=d;a+=c[b++]);return a}aH=[31,29,31,30,31,30,31,31,30,31,30,31],aV=[31,28,31,30,31,30,31,31,30,31,30,31];function bk(e,b){for(var a=new Date(e.getTime()),f,c,d;b>0;)if(f=bh(a.getFullYear()),c=a.getMonth(),d=(f?aH:aV)[c],b>d-a.getDate())b-=d-a.getDate()+1,a.setDate(1),c<11?a.setMonth(c+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else return a.setDate(a.getDate()+b),a;return a}function cs(s,r,q,b){var k=e[b+40>>2],p={tm_sec:e[b>>2],tm_min:e[b+4>>2],tm_hour:e[b+8>>2],tm_mday:e[b+12>>2],tm_mon:e[b+16>>2],tm_year:e[b+20>>2],tm_wday:e[b+24>>2],tm_yday:e[b+28>>2],tm_isdst:e[b+32>>2],tm_gmtoff:e[b+36>>2],tm_zone:k?H(k):""},f=H(q),j={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"},d,i,l,o,h;for(d in j)f=f.replace(new RegExp(d,"g"),j[d]);i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function m(b,c,d){for(var a=typeof b=="number"?b.toString():b||"";a.length<c;)a=d[0]+a;return a}function a(a,b){return m(a,b,"0")}function c(b,c){function d(a){return a<0?-1:a>0?1:0}var a;return(a=d(b.getFullYear()-c.getFullYear()))===0&&(a=d(b.getMonth()-c.getMonth()))===0&&(a=d(b.getDate()-c.getDate())),a}function g(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function n(b){var a=bk(new Date(b.tm_year+1900,0,1),b.tm_yday),d=new Date(a.getFullYear(),0,4),e=new Date(a.getFullYear()+1,0,4),f=g(d),h=g(e);return c(f,a)<=0?c(h,a)<=0?a.getFullYear()+1:a.getFullYear():a.getFullYear()-1}o={"%a":function(a){return i[a.tm_wday].substring(0,3)},"%A":function(a){return i[a.tm_wday]},"%b":function(a){return l[a.tm_mon].substring(0,3)},"%B":function(a){return l[a.tm_mon]},"%C":function(b){var c=b.tm_year+1900;return a(c/100|0,2)},"%d":function(b){return a(b.tm_mday,2)},"%e":function(a){return m(a.tm_mday,2," ")},"%g":function(a){return n(a).toString().substring(2)},"%G":function(a){return n(a)},"%H":function(b){return a(b.tm_hour,2)},"%I":function(c){var b=c.tm_hour;return b==0?b=12:b>12&&(b-=12),a(b,2)},"%j":function(b){return a(b.tm_mday+bC(bh(b.tm_year+1900)?aH:aV,b.tm_mon-1),3)},"%m":function(b){return a(b.tm_mon+1,2)},"%M":function(b){return a(b.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){return a.tm_hour>=0&&a.tm_hour<12?"AM":"PM"},"%S":function(b){return a(b.tm_sec,2)},"%t":function(){return"	"},"%u":function(a){return a.tm_wday||7},"%U":function(d){var b=new Date(d.tm_year+1900,0,1),f=b.getDay()===0?b:bk(b,7-b.getDay()),e=new Date(d.tm_year+1900,d.tm_mon,d.tm_mday),g,h,i;return c(f,e)<0?(g=bC(bh(e.getFullYear())?aH:aV,e.getMonth()-1)-31,h=31-f.getDate(),i=h+g+e.getDate(),a(Math.ceil(i/7),2)):c(f,b)===0?"01":"00"},"%V":function(b){var h=new Date(b.tm_year+1900,0,4),i=new Date(b.tm_year+1901,0,4),d=g(h),j=g(i),f=bk(new Date(b.tm_year+1900,0,1),b.tm_yday),e;return c(f,d)<0?"53":c(j,f)<=0?"01":(d.getFullYear()<b.tm_year+1900?e=b.tm_yday+32-d.getDate():e=b.tm_yday+1-d.getDate(),a(Math.ceil(e/7),2))},"%w":function(a){return a.tm_wday},"%W":function(d){var b=new Date(d.tm_year,0,1),f=b.getDay()===1?b:bk(b,b.getDay()===0?1:7-b.getDay()+1),e=new Date(d.tm_year+1900,d.tm_mon,d.tm_mday),g,h,i;return c(f,e)<0?(g=bC(bh(e.getFullYear())?aH:aV,e.getMonth()-1)-31,h=31-f.getDate(),i=h+g+e.getDate(),a(Math.ceil(i/7),2)):c(f,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(b){var a=b.tm_gmtoff,c=a>=0;return a=Math.abs(a)/60,a=a/60*100+a%60,(c?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(d in o)f.includes(d)&&(f=f.replace(new RegExp(d,"g"),o[d](p)));return h=bq(f,!1),h.length>r?0:(cQ(h,s),h.length-1)}function nD(a,b,c,d){return cs(a,b,c,d)}function nE(a){var b=Date.now()/1e3|0;return a&&(e[a>>2]=b),b}bx=function(a,c,d,e){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=b.nextInode++,this.name=c,this.mode=d,this.node_ops={},this.stream_ops={},this.rdev=e},aJ=292|73,aK=146,Object.defineProperties(bx.prototype,{read:{get:function(){return(this.mode&aJ)===aJ},set:function(a){a?this.mode|=aJ:this.mode&=~aJ}},write:{get:function(){return(this.mode&aK)===aK},set:function(a){a?this.mode|=aK:this.mode&=~aK}},isFolder:{get:function(){return b.isDir(this.mode)}},isDevice:{get:function(){return b.isChrdev(this.mode)}}}),b.FSNode=bx,b.staticInit(),g.requestFullscreen=function(a,b){h.requestFullscreen(a,b)},g.requestAnimationFrame=function(a){h.requestAnimationFrame(a)},g.setCanvasSize=function(a,b,c){h.setCanvasSize(a,b,c)},g.pauseMainLoop=function(){h.mainLoop.pause()},g.resumeMainLoop=function(){h.mainLoop.resume()},g.getUserMedia=function(){h.getUserMedia()},g.createContext=function(a,b,c,d){return h.createContext(a,b,c,d)};for(U=0;U<32;++U)ai.push(new Array(U));cx=new Float32Array(288);for(U=0;U<288;++U)Q[U]=cx.subarray(0,U+1);cy=new Int32Array(288);for(U=0;U<288;++U)an[U]=cy.subarray(0,U+1);g.request_quit=function(){N.request_quit()},g.onExit=N.cleanup,N._fs_sync_promise=Promise.resolve(),g.initConfig=m.init_config,g.initFS=F.init,g.copyToFS=F.copy_to_fs,N.atexit(function(a,b){y.clear(),a()}),N.atexit(function(a,b){w.clear(),a()}),N.atexit(function(a,b){v.clear(),a()}),z.proxies=new Map;function bq(b,d,c){var e=c>0?c:aj(b)+1,a=new Array(e),f=ax(b,a,0,a.length);return d&&(a.length=f),a}cA={l:nW,hd:nS,Ic:nR,Zc:nQ,Lc:nP,Yc:nN,gd:nM,Kc:nL,Da:nK,Xc:nJ,ld:nI,Wc:nH,Hc:nG,Ec:nF,pb:nC,Jc:nB,fd:nA,ed:nz,qb:ny,id:nx,Tc:nu,Fc:nr,_c:mZ,$c:mP,Gc:mJ,Dc:cm,mb:mE,dd:mA,bd:mm,Sc:lU,ad:lT,jd:cg,Cc:lS,ka:lJ,Ca:lI,hj:k$,Ka:k_,ib:kZ,gj:kY,tb:kH,Ih:kG,ri:ih,qi:ie,ef:ib,Ii:ia,Me:hW,pi:hU,oi:hT,Je:gO,Ke:gN,mi:gK,li:ge,Ld:gd,ki:gc,Cd:fw,Re:fs,Ai:fr,ji:fp,ii:fo,hi:ff,gi:eK,fi:eC,Ve:eB,ei:et,di:eh,ai:dV,$h:dL,je:cY,ke:cS,ne:cT,me:cU,_h:cV,Zh:cW,Yh:cX,Vd:cZ,Xh:c_,Wh:c$,Vh:da,kf:db,Uh:dc,jf:dd,he:de,Th:df,Sh:dg,lf:dh,Rh:di,Qh:dj,Ph:dk,Oh:dl,Nh:dm,Mh:dn,gf:dp,Li:dq,Lh:dr,Nd:ds,Kh:dt,Wd:du,Jh:dv,Bd:dw,Qe:dx,zi:dy,Hh:dz,Gh:dA,Fh:dB,Eh:dC,Dh:dD,Ch:dE,Bh:dF,_d:dG,ui:dH,uf:dI,vf:dJ,md:dK,af:dM,qf:dN,vi:dO,Ah:dP,Zd:dQ,ti:dR,rf:dS,sf:dT,tf:dU,of:dW,zh:dX,yh:dY,df:dZ,Hi:d_,Le:d$,Yd:ea,xh:eb,wh:ec,vh:ed,uh:ee,Te:ef,th:eg,sh:ei,qh:ej,hf:ek,Mi:el,ph:em,Od:en,oh:eo,Ad:ep,Pe:eq,xi:er,rh:es,mh:eu,lh:ev,ce:ew,de:ex,fe:ey,kh:ez,jh:eA,ih:eD,Pd:eE,hh:eF,gh:eG,fh:eH,xe:eI,eh:eJ,Rd:eL,Td:eM,Ne:eN,dh:eO,od:eP,wd:eQ,ah:eR,bh:eS,Ci:eT,Ei:eU,Bi:eV,bf:eW,Di:eX,cf:eY,Fi:eZ,$g:e_,Ed:e$,Gd:fa,Zg:fb,Yg:fc,Xg:fd,_g:fe,Wg:fg,ie:fh,Sd:fi,Vg:fj,Ug:fk,Ge:fl,ee:fm,ge:fn,Qg:fq,Sg:ft,Rg:fu,ye:fv,Ee:fx,De:fy,Ng:fz,Pg:fA,Og:fB,Mg:fC,sd:fD,rd:fE,Lg:fF,Kg:fG,Jg:fH,Hg:fI,ff:fJ,Ki:fK,Gg:fL,Md:fM,Fg:fN,Xd:fO,Eg:fP,zd:fQ,Oe:fR,wi:fS,Dg:fT,Cg:fU,yd:fV,Bg:fW,Ag:fX,vd:fY,td:fZ,Gi:f_,pf:f$,zg:gf,yg:gg,wg:gh,Ue:gi,xd:gj,vg:gk,Id:gl,Hd:gm,Kd:gn,Jd:go,ug:gp,tg:gq,sg:gr,rg:gs,qg:gt,pg:gu,og:gv,ng:gw,lg:gx,kg:gy,nf:gz,jg:gA,ig:gB,hg:gC,gg:gD,qd:gE,pd:gF,fg:gG,mf:gH,Ie:gI,eg:gJ,dg:gL,cg:gM,$f:cR,ve:gP,re:gQ,_f:gR,Zf:gS,Yf:gT,Xf:gU,ue:gV,qe:gW,Wf:gX,Vf:gY,Uf:gZ,Tf:g_,te:g$,pe:ha,Sf:hb,Qf:hc,Pf:hd,Of:he,se:hf,oe:hg,be:hh,Nf:hi,$e:hj,Ze:hk,Mf:hl,_e:hm,Xe:hn,Lf:ho,Ye:hp,We:hq,Kf:hr,Jf:hs,If:ht,Hf:hu,Ff:hv,Ef:hw,Df:hx,Cf:hy,Bf:hz,Af:hA,Dd:hB,si:hC,wf:hD,xf:hE,nd:hF,Ce:hG,Ae:hH,Be:hI,ze:hJ,Fe:hK,zf:hL,yf:hM,Ud:hN,Nc:hO,Xa:hQ,sb:hR,Rc:hS,jb:kS,Ac:h_,_b:ic,Mc:id,uc:ct,Pc:ii,Qc:ij,ua:ik,Uc:il,ob:im,xc:io,nb:ip,Va:aS,k:is,Wa:it,Pb:iu,hb:iv,c:iw,Na:ix,cb:iy,yb:iz,b:iA,O:iB,e:iC,aa:iD,a:iE,n:iF,E:iG,S:iH,y:iI,ia:iJ,r:iK,L:iL,N:iM,K:iN,qa:iO,Q:iP,ca:iQ,P:iR,Pa:iS,Db:iT,Xi:iU,Cb:iV,Ui:iW,_a:iX,zb:iY,Ra:iZ,ra:i_,M:i$,H:ja,R:jb,W:jc,J:jd,D:je,fa:jf,Z:jg,I:jh,i:ji,q:jj,B:jk,xa:jl,Ha:jm,da:cP,Ia:jn,s:jo,j:jp,bb:jq,bj:jr,$:js,x:jt,Wi:ju,Fb:jv,C:jw,F:jx,ha:jy,w:jz,Y:jA,T:jB,Gb:jC,Ab:jD,ba:jE,wb:jF,Ma:jG,Oa:jH,pa:jI,Sa:jJ,Ti:jK,Pi:jL,va:jM,_i:jN,xb:jO,ma:jP,ja:jQ,db:jR,ga:jS,Ea:jT,V:jU,Qa:jV,t:jW,Ga:jX,g:jY,d:jZ,Yi:j_,Fa:j$,Ta:ka,Qi:kb,f:kc,v:kd,eb:ke,Bb:kf,ab:kg,o:kh,Ba:ki,na:kj,$a:kk,X:kl,Aa:km,wa:kn,z:ko,za:kp,Oi:kq,vb:kr,ub:ks,p:kt,ea:ku,A:kv,U:kw,G:kx,ej:ky,Ja:kz,h:kA,u:kB,Ib:bf,ci:kI,bg:kJ,ae:kK,ac:kL,ak:kM,bk:kN,aj:kO,vc:kQ,kc:kR,Tb:kT,$j:kU,Rb:kV,ch:kW,Xb:la,le:lb,we:lc,kd:ld,ud:le,Se:lf,He:lg,Ya:lh,rb:li,Gf:lj,Za:lk,xg:ll,lc:lm,Rf:ln,ag:lo,Qj:lp,lb:lq,Vc:lr,ic:ls,$b:lt,bc:lu,Ig:lv,cd:lw,Tg:lx,$d:ly,gc:lz,hc:lA,ec:lB,fc:lC,jc:lD,Vb:lE,mg:lF,Wb:lG,yi:lH,ij:lK,yj:lL,Nb:lM,dj:lN,oj:lO,fj:lP,cj:lQ,fb:lR,mc:lV,oc:lW,cc:lX,Qd:lY,Fd:lZ,pc:l_,tc:l$,sc:ma,rc:mb,nc:mc,qc:md,ni:me,Zb:mf,nh:mg,Qb:mh,dc:mi,Yb:mj,Sb:mk,Ub:ml,_j:mn,Rj:mo,Nj:mp,Sj:mq,Wj:mr,Tj:ms,Xj:mt,Pj:mu,Vj:mv,Uj:mw,Oj:mx,Zj:my,Yj:mz,Mj:mB,Hj:mC,Gj:mD,Ob:oA,Ij:mF,Kj:mG,Lj:mH,Jj:mI,Mb:mK,Ej:mL,Dj:mM,Lb:mN,Fj:mO,Ri:mQ,Ji:mR,Ni:mS,Si:mT,Zi:mU,Eb:mV,$i:mW,Vi:mX,bi:mY,qj:m_,Aj:m$,lj:na,mj:nb,pj:nc,nj:nd,rj:ne,sj:nf,uj:ng,tj:nh,zj:ni,Bj:nj,wj:nk,Jb:nl,Cj:nm,xj:nn,Kb:no,vj:np,ya:ol,la:om,zc:oq,kb:on,Bc:oo,yc:os,wc:ot,_:oj,oa:oi,ta:ok,sa:op,La:or,jj:nq,gb:ns,m:nt,kj:nw,Hb:cs,Oc:nD,Ua:nE},nO=nY(),cB=g.___wasm_call_ctors=function(){return(cB=g.___wasm_call_ctors=g.asm.dk).apply(null,arguments)},bR=g._free=function(){return(bR=g._free=g.asm.ek).apply(null,arguments)},cF=g.__Z13godot_js_mainiPPc=function(){return(cF=g.__Z13godot_js_mainiPPc=g.asm.fk).apply(null,arguments)},cI=g._main=function(){return(cI=g._main=g.asm.gk).apply(null,arguments)},ao=g._malloc=function(){return(ao=g._malloc=g.asm.hk).apply(null,arguments)},aU=g._htonl=function(){return(aU=g._htonl=g.asm.ik).apply(null,arguments)},aQ=g._htons=function(){return(aQ=g._htons=g.asm.jk).apply(null,arguments)},bb=g._ntohs=function(){return(bb=g._ntohs=g.asm.kk).apply(null,arguments)},bI=g.___errno_location=function(){return(bI=g.___errno_location=g.asm.lk).apply(null,arguments)},cu=g.__emwebxr_on_input_event=function(){return(cu=g.__emwebxr_on_input_event=g.asm.mk).apply(null,arguments)},cr=g.__emwebxr_on_simple_event=function(){return(cr=g.__emwebxr_on_simple_event=g.asm.nk).apply(null,arguments)},ch=g._fflush=function(){return(ch=g._fflush=g.asm.ok).apply(null,arguments)},ap=g.__get_tzname=function(){return(ap=g.__get_tzname=g.asm.pk).apply(null,arguments)},bG=g.__get_daylight=function(){return(bG=g.__get_daylight=g.asm.qk).apply(null,arguments)},bA=g.__get_timezone=function(){return(bA=g.__get_timezone=g.asm.rk).apply(null,arguments)},P=g.stackSave=function(){return(P=g.stackSave=g.asm.sk).apply(null,arguments)},O=g.stackRestore=function(){return(O=g.stackRestore=g.asm.tk).apply(null,arguments)},aE=g.stackAlloc=function(){return(aE=g.stackAlloc=g.asm.uk).apply(null,arguments)},V=g._setThrew=function(){return(V=g._setThrew=g.asm.vk).apply(null,arguments)},bO=g.dynCall_iij=function(){return(bO=g.dynCall_iij=g.asm.xk).apply(null,arguments)};function oi(a,b,c){var d=P();try{L.get(a)(b,c)}catch(a){if(O(d),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function oj(a,b){var c=P();try{L.get(a)(b)}catch(a){if(O(c),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function ok(a,b,c,d){var e=P();try{L.get(a)(b,c,d)}catch(a){if(O(e),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function ol(a,b){var c=P();try{return L.get(a)(b)}catch(a){if(O(c),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function om(a,b,c){var d=P();try{return L.get(a)(b,c)}catch(a){if(O(d),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function on(a,b,c,d,e){var f=P();try{return L.get(a)(b,c,d,e)}catch(a){if(O(f),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function oo(a,b,c,d,e,f){var g=P();try{return L.get(a)(b,c,d,e,f)}catch(a){if(O(g),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function op(a,b,c,d,e){var f=P();try{L.get(a)(b,c,d,e)}catch(a){if(O(f),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function oq(a,b,c,d){var e=P();try{return L.get(a)(b,c,d)}catch(a){if(O(e),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function or(a,b,c,d,e,f,g,h){var i=P();try{L.get(a)(b,c,d,e,f,g,h)}catch(a){if(O(i),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function os(a,b,c,d,e,f,g){var h=P();try{return L.get(a)(b,c,d,e,f,g)}catch(a){if(O(h),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}function ot(a,b,c,d){var e=P();try{return bO(a,b,c,d)}catch(a){if(O(e),a!==a+0&&a!=="longjmp")throw a;V(1,0)}}g.cwrap=ov,g.callMain=ce;function aW(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}co=!1,az=function a(){aR||bW(),aR||(az=a)};function ce(a){var h=g._main,b,c,d,i,f;a=a||[],b=a.length+1,c=aE((b+1)*4),e[c>>2]=cO(bm);for(d=1;d<b;d++)e[(c>>2)+d]=cO(a[d-1]);e[(c>>2)+b]=0;try{i=h(b,c),bE(i,!0)}catch(a){if(a instanceof aW||a=="unwind")return;f=a,a&&typeof a=="object"&&a.stack&&(f=[a,a.stack]),A("exception thrown: "+f),bp(1,a)}finally{co=!0}}function bW(a){if(a=a||bw,am>0)return;if(og(),am>0)return;function b(){if(aR)return;if(aR=!0,g.calledRun=!0,aq)return;oe(),od(),bX(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),bK&&ce(a),ob()}g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),b()},1)):b()}g.run=bW;function bE(a,b){be=a,cG()||(oc(),g.onExit&&g.onExit(a),aq=!0),bp(a,new aW(a))}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.pop()();return bK=!1,g.noInitialRun&&(bK=!1),bW(),aN.ready}}();typeof exports=='object'&&typeof module=='object'?module.exports=Godot:typeof define=='function'&&define.amd?define([],function(){return Godot}):typeof exports=='object'&&(exports.Godot=Godot);const Preloader=function(){function g(b,a){function c(b,d){return b.read().then(function(e){return a.done?Promise.resolve():(e.value&&(d.enqueue(e.value),a.loaded+=e.value.length),!e.done)?c(b,d):(a.done=!0,Promise.resolve())})}const d=b.body.getReader();return new Response(new ReadableStream({start:function(a){c(d,a).then(function(){a.close()})}}),{headers:b.headers})}function h(a,b,c,d){return b[a]={total:c||0,loaded:0,done:!1},fetch(a).then(function(c){if(!c.ok)return Promise.reject(new Error(`Failed loading file '${a}'`));const e=g(c,b[a]);return d?Promise.resolve(e):e.arrayBuffer()})}function e(a,b=1){function c(c){return b<=1?Promise.reject(c):new Promise(function(c,d){setTimeout(function(){e(a,b-1).then(c).catch(d)},1e3)})}return a().catch(c)}const f=4,c={},a={loaded:0,total:0};let b=null;const d=function(){let f=0,e=0,g=!0,h=!0;Object.keys(c).forEach(function(b){const a=c[b];a.done||(h=!1),!g||a.total===0?(g=!1,e=0):e+=a.total,f+=a.loaded}),(f!==a.loaded||e!==a.total)&&(a.loaded=f,a.total=e,typeof b=='function'&&b(f,e)),h||requestAnimationFrame(d)};this.animateProgress=d,this.setProgressFunc=function(a){b=a},this.loadPromise=function(a,b,d=!1){return e(h.bind(null,a,c,b,d),f)},this.preloadedFiles=[],this.preload=function(a,c,d){let b=null;if(typeof a=='string'){const b=this;return this.loadPromise(a,d).then(function(d){return b.preloadedFiles.push({path:c||a,buffer:d}),Promise.resolve()})}return a instanceof ArrayBuffer?b=new Uint8Array(a):ArrayBuffer.isView(a)&&(b=new Uint8Array(a.buffer)),b?(this.preloadedFiles.push({path:c,buffer:a}),Promise.resolve()):Promise.reject(new Error('Invalid object for preloading'))}},EngineConfig={},InternalConfig=function(b){const c={unloadAfterInit:!0,canvas:null,executable:'',mainPack:null,locale:null,canvasResizePolicy:2,args:[],focusCanvas:!0,experimentalVK:!1,persistentPaths:['/userfs'],persistentDrops:!1,gdnativeLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(a){console.error.apply(console,Array.from(arguments))}};function a(a){this.update(a)}return a.prototype=c,a.prototype.update=function(c){const b=c||{};function a(a,c){return typeof b[a]=='undefined'?c:b[a]}this.unloadAfterInit=a('unloadAfterInit',this.unloadAfterInit),this.onPrintError=a('onPrintError',this.onPrintError),this.onPrint=a('onPrint',this.onPrint),this.onProgress=a('onProgress',this.onProgress),this.canvas=a('canvas',this.canvas),this.executable=a('executable',this.executable),this.mainPack=a('mainPack',this.mainPack),this.locale=a('locale',this.locale),this.canvasResizePolicy=a('canvasResizePolicy',this.canvasResizePolicy),this.persistentPaths=a('persistentPaths',this.persistentPaths),this.persistentDrops=a('persistentDrops',this.persistentDrops),this.experimentalVK=a('experimentalVK',this.experimentalVK),this.focusCanvas=a('focusCanvas',this.focusCanvas),this.gdnativeLibs=a('gdnativeLibs',this.gdnativeLibs),this.fileSizes=a('fileSizes',this.fileSizes),this.args=a('args',this.args),this.onExecute=a('onExecute',this.onExecute),this.onExit=a('onExit',this.onExit)},a.prototype.getModuleConfig=function(a,c){let b=c;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!0,dynamicLibraries:[`${a}.side.wasm`],instantiateWasm:function(a,d){function c(a){d(a.instance,a.module)}return typeof WebAssembly.instantiateStreaming!='undefined'?WebAssembly.instantiateStreaming(Promise.resolve(b),a).then(c):b.arrayBuffer().then(function(b){WebAssembly.instantiate(b,a).then(c)}),b=null,{}},locateFile:function(b){return b.endsWith('.worker.js')?`${a}.worker.js`:b.endsWith('.audio.worklet.js')?`${a}.audio.worklet.js`:b.endsWith('.js')?`${a}.js`:b.endsWith('.side.wasm')?`${a}.side.wasm`:b.endsWith('.wasm')?`${a}.wasm`:b}}},a.prototype.getGodotConfig=function(c){if(!(this.canvas instanceof HTMLCanvasElement)){const a=document.getElementsByTagName('canvas');if(a.length&&a[0]instanceof HTMLCanvasElement&&(this.canvas=a[0]),!this.canvas)throw new Error('No canvas found in page')}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let a=this.locale;a||(a=navigator.languages?navigator.languages[0]:navigator.language,a=a.split('.')[0]);const b=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale:a,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,focusCanvas:this.focusCanvas,onExecute:this.onExecute,onExit:function(a){c(),typeof b=='function'&&b(a)}}},new a(b)},Engine=function(){const c=new Preloader;let d=null,f='',b=null;function a(a){this.config=new InternalConfig(a),this.rtenv=null}a.load=function(a,b){return d==null&&(f=a,d=c.loadPromise(`${f}.wasm`,b,!0),requestAnimationFrame(c.animateProgress)),d},a.unload=function(){d=null},a.isWebGLAvailable=function(a=1){try{return!!document.createElement('canvas').getContext(['webgl','webgl2'][a-1])}catch(a){}return!1};function e(e){const g={init:function(g){if(b)return b;if(d==null){if(!g)return b=Promise.reject(new Error('A base path must be provided when calling `init` and the engine is not loaded.')),b;a.load(g,this.config.fileSizes[`${g}.wasm`])}const e=this;function h(b){return new Promise(function(c,d){b.then(function(b){const d=new Response(b.clone().body,{headers:[['content-type','application/wasm']]});Godot(e.config.getModuleConfig(f,d)).then(function(b){const d=e.config.persistentPaths;b.initFS(d).then(function(d){e.rtenv=b,e.config.unloadAfterInit&&a.unload(),c()})})})})}return c.setProgressFunc(this.config.onProgress),b=h(d),b},preloadFile:function(a,b){return c.preload(a,b,this.config.fileSizes[a])},start:function(d){this.config.update(d);const a=this;return a.init().then(function(){if(!a.rtenv)return Promise.reject(new Error('The engine must be initialized before it can be started'));let d={};try{d=a.config.getGodotConfig(function(){a.rtenv=null})}catch(a){return Promise.reject(a)}a.rtenv.initConfig(d);const e=[];return a.config.gdnativeLibs.forEach(function(b){e.push(a.rtenv.loadDynamicLibrary(b,{loadAsync:!0}))}),Promise.all(e).then(function(){return new Promise(function(d,e){c.preloadedFiles.forEach(function(b){a.rtenv.copyToFS(b.path,b.buffer)}),c.preloadedFiles.length=0,a.rtenv.callMain(a.config.args),b=null,d()})})})},startGame:function(d){this.config.update(d);const b=this.config.executable,a=this.config.mainPack||`${b}.pck`;this.config.args=['--main-pack',a].concat(this.config.args);const c=this;return Promise.all([this.init(b),this.preloadFile(a,a)]).then(function(){return c.start.apply(c)})},copyToFS:function(a,b){if(this.rtenv==null)throw new Error('Engine must be inited before copying files');this.rtenv.copyToFS(a,b)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()}};return a.prototype=g,a.prototype.init=a.prototype.init,a.prototype.preloadFile=a.prototype.preloadFile,a.prototype.start=a.prototype.start,a.prototype.startGame=a.prototype.startGame,a.prototype.copyToFS=a.prototype.copyToFS,a.prototype.requestQuit=a.prototype.requestQuit,a.prototype.load=a.load,a.prototype.unload=a.unload,a.prototype.isWebGLAvailable=a.isWebGLAvailable,new a(e)}return e.load=a.load,e.unload=a.unload,e.isWebGLAvailable=a.isWebGLAvailable,e}();typeof window!='undefined'&&(window.Engine=Engine)