var Godot=(()=>{var e=typeof document!="undefined"?document.currentScript?.src:void 0;return function(t={}){var In,Ji,ze,jt,le,Ce,yt,Ot,xt,it,$e,q,kt,Ze,Te,x,Ne,Le,te,Ae,b,z,P,St,l,g,v,W,id,zt,ht,Lt,js,Rt,Pt,Ie,ve,ee,ae,we,he,zn,Xt,nn,_e,ye,en,oe,G,Jt,pe,L,Sn,Ye,Qt,Mn,C,Dn,Kt,f,X,We,Q,Pe,ys,Z,Ft,Mt,p,ui,hi,Be,zi,Gi,Xi,tt,y,Zi,vt,n,F,ne,ke,Oe,ut,De,V,ot,_t,wt,st,fe,Wo,_o,Re,H,On,yn,oo,gt,mn,fn,pn,gn,bn,re,He,qe,Xe,cn,an,on,sn,pt,tn,Zt,r,Fn,Tn,Ee,Gt,Yt,Ve,ft,Wt,Me,$t,nt,Bt,c,Wn,Un,Kn,qn,Yn,Gn,Xn,_,Zn,Jn,es,Ht,ns,ss,os,is,rs,cs,ls,je,us,hs,Ue,fs,ge,gs,vs,bs,_s,xs,Es,ks,As,Ss,Ms,Fs,Ts,zs,dn,Ns,Ls,Rs,Ps,Hs,Is,Bs,Vs,$s,Ws,Us,Ks,qs,Ys,Gs,Xs,Qs,Zs,Js,eo,to,no,so,un,io,ao,ro,co,lo,uo,ho,mo,fo,po,go,vo,bo,jo,yo,Nt,wo,Oo,xo,Co,Eo,ko,Ao,So,Mo,Fo,To,zo,Do,No,Lo,Ro,Po,Ho,Io,Bo,Vo,$o,Dt,lt,Ko,qo,Yo,Go,Xo,Qo,Zo,Jo,ei,ti,Tt,si,oi,ii,ai,ri,ci,li,xe,me,At,mi,fi,pi,gi,vi,bi,ji,yi,_i,wi,Oi,xi,D,Ei,ki,rt,Si,Mi,Fi,Ti,ue,Di,Ni,Li,Ri,Pi,Hi,Ii,Bi,Vi,$i,Wi,Ui,Ki,qi,Yi,s,o,m,j,Ge,O,S,be,h,E,k,se,M,N,Pn,Bn,Vn,$n,ts,ps,Uo,ni,a,I,U,ce,Se,d,w,T,R,ws,K,Y,J,Nn,Ln,et,Ut,Ci,Ai,Ct,B,Dl,Qi,Ll,Ds,Fe,An,mt,ct,rn,$l,Wl,hn,vn,ln,wn,Hn,Je,Vt,It,dt,Qn,ds,Ke,Et,i=t,bt=new Promise((e,t)=>{Ji=e,ze=t});if(["_memory","__Z14godot_web_mainiPPc","__emwebxr_on_input_event","__emwebxr_on_simple_event","___indirect_function_table","_main","onRuntimeInitialized"].forEach(e=>{Object.getOwnPropertyDescriptor(bt,e)||Object.defineProperty(bt,e,{get:()=>A("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>A("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}),jt=typeof window=="object",le=typeof importScripts=="function",Ce=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",yt=!jt&&!Ce&&!le,i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");Ot=Object.assign({},i),xt=[],it="./this.program",$e=(e,t)=>{throw t},q="";function ad(e){return i.locateFile?i.locateFile(e,q):q+e}if(yt){if(typeof process=="object"&&typeof require=="function"||typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else if(jt||le){if(le?q=self.location.href:typeof document!="undefined"&&document.currentScript&&(q=document.currentScript.src),e&&(q=e),q.startsWith("blob:")?q="":q=q.substr(0,q.replace(/[?#].*/,"").lastIndexOf("/")+1),typeof window!="object"&&typeof importScripts!="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");le&&(Ze=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),kt=e=>(u(!nn(e),"readAsync does not work with file:// URLs"),fetch(e,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))))}else throw new Error("environment detection error");Te=i.print||console.log.bind(console),x=i.printErr||console.error.bind(console),Object.assign(i,Ot),Ot=null,Fl(),i.arguments&&(xt=i.arguments),ie("arguments","arguments_"),i.thisProgram&&(it=i.thisProgram),ie("thisProgram","thisProgram"),i.quit&&($e=i.quit),ie("quit","quit_"),u(typeof i.memoryInitializerPrefixURL=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),u(typeof i.pthreadMainPrefixURL=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),u(typeof i.cdInitializerPrefixURL=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),u(typeof i.filePackagePrefixURL=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),u(typeof i.read=="undefined","Module.read option was removed"),u(typeof i.readAsync=="undefined","Module.readAsync option was removed (modify readAsync in JS)"),u(typeof i.readBinary=="undefined","Module.readBinary option was removed (modify readBinary in JS)"),u(typeof i.setWindowTitle=="undefined","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),u(typeof i.TOTAL_MEMORY=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),ie("asm","wasmExports"),ie("readAsync","readAsync"),ie("readBinary","readBinary"),ie("setWindowTitle","setWindowTitle"),u(!Ce,"node environment detected but not enabled at build time.  Add `node` to `-sENVIRONMENT` to enable."),u(!yt,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable."),i.wasmBinary&&(Ne=i.wasmBinary),ie("wasmBinary","wasmBinary"),typeof WebAssembly!="object"&&x("no native wasm support detected"),te=!1;function u(e,t){e||A("Assertion failed"+(t?": "+t:""))}function Cs(){var e=Le.buffer;i.HEAP8=b=new Int8Array(e),i.HEAP16=P=new Int16Array(e),i.HEAPU8=z=new Uint8Array(e),i.HEAPU16=St=new Uint16Array(e),i.HEAP32=l=new Int32Array(e),i.HEAPU32=g=new Uint32Array(e),i.HEAPF32=v=new Float32Array(e),i.HEAPF64=zt=new Float64Array(e),i.HEAP64=W=new BigInt64Array(e),i.HEAPU64=id=new BigUint64Array(e)}u(!i.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),u(typeof Int32Array!="undefined"&&typeof Float64Array!="undefined"&&Int32Array.prototype.subarray!=void 0&&Int32Array.prototype.set!=void 0,"JS engine does not provide full typed array support"),u(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),u(!i.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");function sd(){var e=Je();u((e&3)==0),e==0&&(e+=4),g[e>>2]=34821223,g[e+4>>2]=2310721022,g[0>>2]=1668509029}function de(){if(te)return;var t,n,e=Je();e==0&&(e+=4),t=g[e>>2],n=g[e+4>>2],(t!=34821223||n!=2310721022)&&A(`Stack overflow! Stack cookie has been overwritten at ${oe(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${oe(n)} ${oe(t)}`),g[0>>2]!=1668509029&&A("Runtime error: The application has corrupted its heap memory area (address zero)!")}(function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,t[0]!==115||t[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),ht=[],Lt=[],js=[],Rt=[],Pt=[],Ie=!1,ve=!1;function nd(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Ql(i.preRun.shift());ye(ht)}function td(){u(!Ie),Ie=!0,de(),!i.noFSInit&&!n.init.initialized&&n.init(),n.ignorePermissions=!1,Z.init(),F.root=n.mount(F,{},null),ye(Lt)}function ed(){de(),ye(js)}function Jl(){u(!ve),de(),vn(),ye(Rt),n.quit(),Z.shutdown(),y.quit(),ve=!0}function Zl(){if(de(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Gl(i.postRun.shift());ye(Pt)}function Ql(e){ht.unshift(e)}function Xl(e){Lt.unshift(e)}function Gl(e){Pt.unshift(e)}u(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),u(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),u(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),u(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ee=0,ae=null,we=null,he={};function Rn(e){for(var t=e;1;){if(!he[e])return e;e=t+Math.random()}}function qt(e){ee++,i.monitorRunDependencies?.(ee),e?(u(!he[e]),he[e]=1,ae===null&&typeof setInterval!="undefined"&&(ae=setInterval(()=>{if(te){clearInterval(ae),ae=null;return}var t,e=!1;for(t in he)e||(e=!0,x("still waiting on run dependencies:")),x(`dependency: ${t}`);e&&x("(end of list)")},1e4))):x("warning: run dependency added without ID")}function at(e){if(ee--,i.monitorRunDependencies?.(ee),e?(u(he[e]),delete he[e]):x("warning: run dependency removed without ID"),ee==0&&(ae!==null&&(clearInterval(ae),ae=null),we)){var t=we;we=null,t()}}function A(e){i.onAbort?.(e),e="Aborted("+e+")",x(e),te=!0,Ae=1;var t=new WebAssembly.RuntimeError(e);throw ze(t),t}zn="data:application/octet-stream;base64,",Xt=e=>e.startsWith(zn),nn=e=>e.startsWith("file://");function $(e,t){return(...n)=>{u(Ie,`native function \`${e}\` called before runtime initialization`),u(!ve,`native function \`${e}\` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)`);var s=B[e];return u(s,`exported native function \`${e}\` not found`),u(n.length<=t,`native function \`${e}\` called with ${n.length} args but expects ${t}`),s(...n)}}function Yl(){var e="godot.web.template_release.wasm32.nothreads.wasm";return Xt(e)?e:ad(e)}function _n(e){if(e==_e&&Ne)return new Uint8Array(Ne);if(Ze)return Ze(e);throw"both async and sync fetching of the wasm failed"}function ql(e){return Ne?Promise.resolve().then(()=>_n(e)):kt(e).then(e=>new Uint8Array(e),()=>_n(e))}function jn(e,t,n){return ql(e).then(e=>WebAssembly.instantiate(e,t)).then(n,e=>{x(`failed to asynchronously prepare wasm: ${e}`),nn(_e)&&x(`warning: Loading from a file URI (${_e}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),A(e)})}function Kl(e,t,n,s){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Xt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(e=>{var o=WebAssembly.instantiateStreaming(e,n);return o.then(s,function(e){return x(`wasm streaming compile failed: ${e}`),x("falling back to ArrayBuffer instantiation"),jn(t,n,s)})}):jn(t,n,s)}function Ul(){return{env:Ct,wasi_snapshot_preview1:Ct}}function Vl(){var e,t=Ul();function n(e){return B=e.exports,Le=B.memory,u(Le,"memory not found in wasm exports"),Cs(),Ye=B.__indirect_function_table,u(Ye,"table not found in wasm exports"),Xl(B.__wasm_call_ctors),at("wasm-instantiate"),B}qt("wasm-instantiate"),e=i;function s(t){u(i===e,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),e=null,n(t.instance)}if(i.instantiateWasm)try{return i.instantiateWasm(t,n)}catch(e){x(`Module.instantiateWasm callback failed with error: ${e}`),ze(e)}return _e||(_e=Yl()),Kl(Ne,_e,t,s).catch(ze),{}}function ie(e,t,n=!0){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){let s=n?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";A(`\`Module.${e}\` has been replaced by \`${t}\``+s)}})}function Bl(e){Object.getOwnPropertyDescriptor(i,e)&&A(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function xn(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function Cn(e,t){typeof globalThis!="undefined"&&Object.defineProperty(globalThis,e,{configurable:!0,get(){G(`\`${e}\` is not longer defined by emscripten. ${t}`)}})}Cn("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Cn("asm","Please use wasmExports instead");function Il(e){typeof globalThis!="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,e)&&Object.defineProperty(globalThis,e,{configurable:!0,get(){var t=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,n=e;return n.startsWith("_")||(n="$"+e),t+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${n}')`,xn(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),G(t)}}),En(e)}function En(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;xn(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),A(t)}})}function kn(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}ye=e=>{for(;e.length>0;)e.shift()(i)};function Hl(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return b[e];case"i8":return b[e];case"i16":return P[e>>1];case"i32":return l[e>>2];case"i64":return W[e>>3];case"float":return v[e>>2];case"double":return zt[e>>3];case"*":return g[e>>2];default:A(`invalid type for getValue: ${t}`)}}en=i.noExitRuntime||!1,oe=e=>(u(typeof e=="number"),e>>>=0,"0x"+e.toString(16).padStart(8,"0"));function Pl(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":b[e]=t;break;case"i8":b[e]=t;break;case"i16":P[e>>1]=t;break;case"i32":l[e>>2]=t;break;case"i64":W[e>>3]=BigInt(t);break;case"float":v[e>>2]=t;break;case"double":zt[e>>3]=t;break;case"*":g[e>>2]=t;break;default:A(`invalid type for setValue: ${n}`)}}G=e=>{G.shown||={},G.shown[e]||(G.shown[e]=1,x(e))},Jt=typeof TextDecoder!="undefined"?new TextDecoder:void 0,pe=(e,t,n)=>{for(var s,i,a,r,c,l=t+n,o=t;e[o]&&!(o>=l);)++o;if(o-t>16&&e.buffer&&Jt)return Jt.decode(e.subarray(t,o));for(i="";t<o;){if(s=e[t++],!(s&128)){i+=String.fromCharCode(s);continue}if(a=e[t++]&63,(s&224)==192){i+=String.fromCharCode((s&31)<<6|a);continue}r=e[t++]&63,(s&240)==224?s=(s&15)<<12|a<<6|r:((s&248)!=240&&G("Invalid UTF-8 leading byte "+oe(s)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),s=(s&7)<<18|a<<12|r<<6|e[t++]&63),s<65536?i+=String.fromCharCode(s):(c=s-65536,i+=String.fromCharCode(55296|c>>10,56320|c&1023))}return i},L=(e,t)=>(u(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?pe(z,e,t):""),Sn=(e,t,n,s)=>{A(`Assertion failed: ${L(e)}, at: `+[t?L(t):"unknown filename",n,s?L(s):"unknown function"])},Qt=e=>Ye.get(e),Mn=(e,t)=>Qt(e)(t),C={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var o,s=0,n=e.length-1;n>=0;n--)o=e[n],o==="."?e.splice(n,1):o===".."?(e.splice(n,1),s++):s&&(e.splice(n,1),s--);if(t)for(;s;s--)e.unshift("..");return e},normalize:e=>{var t=C.isAbs(e),n=e.substr(-1)==="/";return e=C.normalizeArray(e.split("/").filter(e=>!!e),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var n=C.splitPath(e),s=n[0],t=n[1];return!s&&!t?".":(t&&(t=t.substr(0,t.length-1)),s+t)},basename:e=>{if(e==="/")return"/";e=C.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>C.normalize(e.join("/")),join2:(e,t)=>C.normalize(e+"/"+t)},Dn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);A("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")},Kt=e=>(Kt=Dn())(e),X={resolve:(...e)=>{for(var s,t="",o=!1,i=e.length-1;i>=-1&&!o;i--){if(s=i>=0?e[i]:n.cwd(),typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,o=C.isAbs(s)}return t=C.normalizeArray(t.split("/").filter(e=>!!e),!o).join("/"),(o?"/":"")+t||"."},relative:(e,t)=>{e=X.resolve(e).substr(1),t=X.resolve(t).substr(1);function r(e){for(var n,t=0;t<e.length;t++)if(e[t]!=="")break;for(n=e.length-1;n>=0;n--)if(e[n]!=="")break;return t>n?[]:e.slice(t,n-t+1)}for(var s,o=r(e.split("/")),i=r(t.split("/")),c=Math.min(o.length,i.length),a=c,n=0;n<c;n++)if(o[n]!==i[n]){a=n;break}for(s=[],n=a;n<o.length;n++)s.push("..");return s=s.concat(i.slice(a)),s.join("/")}},We=[],Q=e=>{for(var n,t=0,s=0;s<e.length;++s)n=e.charCodeAt(s),n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++s):t+=3;return t},Pe=(e,t,n,s)=>{if(u(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(s>0))return 0;for(var o,r,c=n,i=n+s-1,a=0;a<e.length;++a)if(o=e.charCodeAt(a),o>=55296&&o<=57343&&(r=e.charCodeAt(++a),o=65536+((o&1023)<<10)|r&1023),o<=127){if(n>=i)break;t[n++]=o}else if(o<=2047){if(n+1>=i)break;t[n++]=192|o>>6,t[n++]=128|o&63}else if(o<=65535){if(n+2>=i)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|o&63}else{if(n+3>=i)break;o>1114111&&G("Invalid Unicode code point "+oe(o)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|o&63}return t[n]=0,n-c};function ms(e,t,n){var o=n>0?n:Q(e)+1,s=new Array(o),i=Pe(e,s,0,s.length);return t&&(s.length=i),s}ys=()=>{if(!We.length){var e=null;if(typeof window!="undefined"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;We=ms(e,!0)}return We.shift()},Z={ttys:[],init(){},shutdown(){},register(e,t){Z.ttys[e]={input:[],output:[],ops:t},n.registerDevice(e,Z.stream_ops)},stream_ops:{open(e){var t=Z.ttys[e.node.rdev];if(!t)throw new n.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,s,o){if(!e.tty||!e.tty.ops.get_char)throw new n.ErrnoError(60);for(var a,r=0,c=0;c<o;c++){try{a=e.tty.ops.get_char(e.tty)}catch{throw new n.ErrnoError(29)}if(a===void 0&&r===0)throw new n.ErrnoError(6);if(a==null)break;r++,t[s+c]=a}return r&&(e.node.timestamp=Date.now()),r},write(e,t,s,o){if(!e.tty||!e.tty.ops.put_char)throw new n.ErrnoError(60);try{for(var a=0;a<o;a++)e.tty.ops.put_char(e.tty,t[s+a])}catch{throw new n.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char(){return ys()},put_char(e,t){t===null||t===10?(Te(pe(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Te(pe(e.output,0)),e.output=[])},ioctl_tcgets(){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(){return 0},ioctl_tiocgwinsz(){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(x(pe(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(x(pe(e.output,0)),e.output=[])}}},Ft=(e,t)=>(z.fill(0,e,e+t),e),Mt=e=>{A("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")},p={ops_table:null,mount(){return p.createNode(null,"/",16384|511,0)},createNode(e,t,s,o){if(n.isBlkdev(s)||n.isFIFO(s))throw new n.ErrnoError(63);p.ops_table||={dir:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr,lookup:p.node_ops.lookup,mknod:p.node_ops.mknod,rename:p.node_ops.rename,unlink:p.node_ops.unlink,rmdir:p.node_ops.rmdir,readdir:p.node_ops.readdir,symlink:p.node_ops.symlink},stream:{llseek:p.stream_ops.llseek}},file:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr},stream:{llseek:p.stream_ops.llseek,read:p.stream_ops.read,write:p.stream_ops.write,allocate:p.stream_ops.allocate,mmap:p.stream_ops.mmap,msync:p.stream_ops.msync}},link:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr,readlink:p.node_ops.readlink},stream:{}},chrdev:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr},stream:n.chrdev_stream_ops}};var i=n.createNode(e,t,s,o);return n.isDir(i.mode)?(i.node_ops=p.ops_table.dir.node,i.stream_ops=p.ops_table.dir.stream,i.contents={}):n.isFile(i.mode)?(i.node_ops=p.ops_table.file.node,i.stream_ops=p.ops_table.file.stream,i.usedBytes=0,i.contents=null):n.isLink(i.mode)?(i.node_ops=p.ops_table.link.node,i.stream_ops=p.ops_table.link.stream):n.isChrdev(i.mode)&&(i.node_ops=p.ops_table.chrdev.node,i.stream_ops=p.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var s,o,n=e.contents?e.contents.length:0;if(n>=t)return;s=1024*1024,t=Math.max(t,n*(n<s?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),o=e.contents,e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)},resizeFileStorage(e,t){if(e.usedBytes==t)return;if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=n.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,n.isDir(e.mode)?t.size=4096:n.isFile(e.mode)?t.size=e.usedBytes:n.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&p.resizeFileStorage(e,t.size)},lookup(){throw n.genericErrors[44]},mknod(e,t,n,s){return p.createNode(e,t,n,s)},rename(e,t,s){if(n.isDir(e.mode)){var o,i;try{o=n.lookupNode(t,s)}catch{}if(o)for(i in o.contents)throw new n.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=s,t.contents[s]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var o,s=n.lookupNode(e,t);for(o in s.contents)throw new n.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var n,t=[".",".."];for(n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var s=p.createNode(e,t,511|40960,0);return s.link=n,s},readlink(e){if(!n.isLink(e.mode))throw new n.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,s,o){var i,a,r=e.node.contents;if(o>=e.node.usedBytes)return 0;if(i=Math.min(e.node.usedBytes-o,s),u(i>=0),i>8&&r.subarray)t.set(r.subarray(o,o+i),n);else for(a=0;a<i;a++)t[n+a]=r[o+a];return i},write(e,t,n,s,o,i){if(u(!(t instanceof ArrayBuffer)),t.buffer===b.buffer&&(i=!1),!s)return 0;var r,a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return u(o===0,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(n,n+s),a.usedBytes=s,s;if(a.usedBytes===0&&o===0)return a.contents=t.slice(n,n+s),a.usedBytes=s,s;if(o+s<=a.usedBytes)return a.contents.set(t.subarray(n,n+s),o),s}if(p.expandFileStorage(a,o+s),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+s),o);else for(r=0;r<s;r++)a.contents[o+r]=t[n+r];return a.usedBytes=Math.max(a.usedBytes,o+s),s},llseek(e,t,s){var o=t;if(s===1?o+=e.position:s===2&&n.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new n.ErrnoError(28);return o},allocate(e,t,n){p.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,s,o,i){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);var r,c,a=e.node.contents;if(!(i&2)&&a.buffer===b.buffer)c=!1,r=a.byteOffset;else{if((s>0||s+t<a.length)&&(a.subarray?a=a.subarray(s,s+t):a=Array.prototype.slice.call(a,s,s+t)),c=!0,r=Mt(t),!r)throw new n.ErrnoError(48);b.set(a,r)}return{ptr:r,allocated:c}},msync(e,t,n,s){return p.stream_ops.write(e,t,0,s,n,!1),0}}},ui=(e,t,n,s)=>{var o=s?"":Rn(`al ${e}`);kt(e).then(n=>{u(n,`Loading data file "${e}" failed (no arrayBuffer).`),t(new Uint8Array(n)),o&&at(o)},t=>{if(n)n();else throw`Loading data file "${e}" failed.`}),o&&qt(o)},hi=(e,t,s,o,i,a)=>{n.createDataFile(e,t,s,o,i,a)},Be=i.preloadPlugins||[],zi=(e,t,n,s)=>{typeof c!="undefined"&&c.init();var o=!1;return Be.forEach(i=>{if(o)return;i.canHandle(t)&&(i.handle(e,t,n,s),o=!0)}),o},Gi=(e,t,n,s,o,i,a,r,c,l)=>{var u=t?X.resolve(C.join2(e,t)):e,d=Rn(`cp ${u}`);function h(n){function h(n){l?.(),r||hi(e,t,n,s,o,c),i?.(),at(d)}if(zi(n,u,h,()=>{a?.(),at(d)}))return;h(n)}qt(d),typeof n=="string"?ui(n,h,a):h(n)},Xi=e=>{var n={r:0,"r+":2,w:512|64|1,"w+":512|64|2,a:1024|64|1,"a+":1024|64|2},t=n[e];if(typeof t=="undefined")throw new Error(`Unknown file open mode: ${e}`);return t},tt=(e,t)=>{var n=0;return e&&(n|=292|73),t&&(n|=146),n},y={dbs:{},indexedDB:()=>{if(typeof indexedDB!="undefined")return indexedDB;var e=null;return typeof window=="object"&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),u(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",queuePersist:e=>{function n(){e.idbPersistState==="again"?t():e.idbPersistState=0}function t(){e.idbPersistState="idb",y.syncfs(e,!1,n)}e.idbPersistState?e.idbPersistState==="idb"&&(e.idbPersistState="again"):e.idbPersistState=setTimeout(t,0)},mount:e=>{var n,t=p.mount(e);return e?.opts?.autoPersist&&(t.idbPersistState=0,n=t.node_ops,t.node_ops=Object.assign({},t.node_ops),t.node_ops.mknod=(e,s,o,i)=>{var a=n.mknod(e,s,o,i);return a.node_ops=t.node_ops,a.idbfs_mount=t.mount,a.memfs_stream_ops=a.stream_ops,a.stream_ops=Object.assign({},a.stream_ops),a.stream_ops.write=(e,t,n,s,o,i)=>(e.node.isModified=!0,a.memfs_stream_ops.write(e,t,n,s,o,i)),a.stream_ops.close=e=>{var t=e.node;if(t.isModified&&(y.queuePersist(t.idbfs_mount),t.isModified=!1),t.memfs_stream_ops.close)return t.memfs_stream_ops.close(e)},a},t.node_ops.mkdir=(...e)=>(y.queuePersist(t.mount),n.mkdir(...e)),t.node_ops.rmdir=(...e)=>(y.queuePersist(t.mount),n.rmdir(...e)),t.node_ops.symlink=(...e)=>(y.queuePersist(t.mount),n.symlink(...e)),t.node_ops.unlink=(...e)=>(y.queuePersist(t.mount),n.unlink(...e)),t.node_ops.rename=(...e)=>(y.queuePersist(t.mount),n.rename(...e))),t},syncfs:(e,t,n)=>{y.getLocalSet(e,(s,o)=>{if(s)return n(s);y.getRemoteSet(e,(e,s)=>{if(e)return n(e);var i=t?s:o,a=t?o:s;y.reconcile(i,a,n)})})},quit:()=>{Object.values(y.dbs).forEach(e=>e.close()),y.dbs={}},getDB:(e,t)=>{var n,s=y.dbs[e];if(s)return t(null,s);try{n=y.indexedDB().open(e,y.DB_VERSION)}catch(e){return t(e)}if(!n)return t("Unable to connect to IndexedDB");n.onupgradeneeded=e=>{var t,n=e.target.result,s=e.target.transaction;n.objectStoreNames.contains(y.DB_STORE_NAME)?t=s.objectStore(y.DB_STORE_NAME):t=n.createObjectStore(y.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},n.onsuccess=()=>{s=n.result,y.dbs[e]=s,t(null,s)},n.onerror=e=>{t(e.target.error),e.preventDefault()}},getLocalSet:(e,t)=>{var s,o,i,a={};function r(e){return e!=="."&&e!==".."}function c(e){return t=>C.join2(e,t)}for(o=n.readdir(e.mountpoint).filter(r).map(c(e.mountpoint));o.length;){s=o.pop();try{i=n.stat(s)}catch(e){return t(e)}n.isDir(i.mode)&&o.push(...n.readdir(s).filter(r).map(c(s))),a[s]={timestamp:i.mtime}}return t(null,{type:"local",entries:a})},getRemoteSet:(e,t)=>{var n={};y.getDB(e.mountpoint,(e,s)=>{if(e)return t(e);try{var i,a,o=s.transaction([y.DB_STORE_NAME],"readonly");o.onerror=e=>{t(e.target.error),e.preventDefault()},i=o.objectStore(y.DB_STORE_NAME),a=i.index("timestamp"),a.openKeyCursor().onsuccess=e=>{var o=e.target.result;if(!o)return t(null,{type:"remote",db:s,entries:n});n[o.primaryKey]={timestamp:o.key},o.continue()}}catch(e){return t(e)}})},loadLocalEntry:(e,t)=>{try{var s,o,i=n.lookupPath(e);o=i.node,s=n.stat(e)}catch(e){return t(e)}return n.isDir(s.mode)?t(null,{timestamp:s.mtime,mode:s.mode}):n.isFile(s.mode)?(o.contents=p.getFileDataAsTypedArray(o),t(null,{timestamp:s.mtime,mode:s.mode,contents:o.contents})):t(new Error("node type not supported"))},storeLocalEntry:(e,t,s)=>{try{if(n.isDir(t.mode))n.mkdirTree(e,t.mode);else if(n.isFile(t.mode))n.writeFile(e,t.contents,{canOwn:!0});else return s(new Error("node type not supported"));n.chmod(e,t.mode),n.utime(e,t.timestamp,t.timestamp)}catch(e){return s(e)}s(null)},removeLocalEntry:(e,t)=>{try{var s=n.stat(e);n.isDir(s.mode)?n.rmdir(e):n.isFile(s.mode)&&n.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:(e,t,n)=>{var s=e.get(t);s.onsuccess=e=>n(null,e.target.result),s.onerror=e=>{n(e.target.error),e.preventDefault()}},storeRemoteEntry:(e,t,n,s)=>{try{var o=e.put(n,t)}catch(e){s(e);return}o.onsuccess=e=>s(),o.onerror=e=>{s(e.target.error),e.preventDefault()}},removeRemoteEntry:(e,t,n)=>{var s=e.delete(t);s.onsuccess=e=>n(),s.onerror=e=>{n(e.target.error),e.preventDefault()}},reconcile:(e,t,n)=>{var o,i,a,c,d,r=0,l=[];if(Object.keys(e.entries).forEach(function(n){var o=e.entries[n],s=t.entries[n];(!s||o.timestamp.getTime()!=s.timestamp.getTime())&&(l.push(n),r++)}),c=[],Object.keys(t.entries).forEach(function(t){e.entries[t]||(c.push(t),r++)}),!r)return n(null);i=!1,d=e.type==="remote"?e.db:t.db,o=d.transaction([y.DB_STORE_NAME],"readwrite"),a=o.objectStore(y.DB_STORE_NAME);function s(e){if(e&&!i)return i=!0,n(e)}o.onerror=o.onabort=e=>{s(e.target.error),e.preventDefault()},o.oncomplete=e=>{i||n(null)},l.sort().forEach(e=>{t.type==="local"?y.loadRemoteEntry(a,e,(t,n)=>{if(t)return s(t);y.storeLocalEntry(e,n,s)}):y.loadLocalEntry(e,(t,n)=>{if(t)return s(t);y.storeRemoteEntry(a,e,n,s)})}),c.sort().reverse().forEach(e=>{t.type==="local"?y.removeLocalEntry(e,s):y.removeRemoteEntry(a,e,s)})}},Zi=e=>L(hn(e)),vt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},n={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(e){super(Ie?Zi(e):""),this.name="ErrnoError",this.errno=e;for(var t in vt)if(vt[t]===e){this.code=t;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,s,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=n.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=o,this.readMode=292|73,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return n.isDir(this.mode)}get isDevice(){return n.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=X.resolve(e),!e)return{path:"",node:null};var s,o,i,a,r,c,l,d,u={follow_mount:!0,recurse_count:0};if(t=Object.assign(u,t),t.recurse_count>8)throw new n.ErrnoError(32);for(a=e.split("/").filter(e=>!!e),s=n.root,o="/",i=0;i<a.length;i++){if(r=i===a.length-1,r&&t.parent)break;if(s=n.lookupNode(s,a[i]),o=C.join2(o,a[i]),n.isMountpoint(s)&&(!r||r&&t.follow_mount)&&(s=s.mounted.root),!r||t.follow)for(c=0;n.isLink(s.mode);)if(l=n.readlink(o),o=X.resolve(C.dirname(o),l),d=n.lookupPath(o,{recurse_count:t.recurse_count+1}),s=d.node,c++>40)throw new n.ErrnoError(32)}return{path:o,node:s}},getPath(e){for(;!0;){if(n.isRoot(e)){var t,s=e.mount.mountpoint;return t?s[s.length-1]!=="/"?`${s}/${t}`:s+t:s}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var s=0,o=0;o<t.length;o++)s=(s<<5)-s+t.charCodeAt(o)|0;return(e+s>>>0)%n.nameTable.length},hashAddNode(e){var t=n.hashName(e.parent.id,e.name);e.name_next=n.nameTable[t],n.nameTable[t]=e},hashRemoveNode(e){var t,s=n.hashName(e.parent.id,e.name);if(n.nameTable[s]===e)n.nameTable[s]=e.name_next;else for(t=n.nameTable[s];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,t){var s,i,a,o=n.mayLookup(e);if(o)throw new n.ErrnoError(o);for(i=n.hashName(e.id,t),s=n.nameTable[i];s;s=s.name_next)if(a=s.name,s.parent.id===e.id&&a===t)return s;return n.lookup(e,t)},createNode(e,t,s,o){u(typeof e=="object");var i=new n.FSNode(e,t,s,o);return n.hashAddNode(i),i},destroyNode(e){n.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return n.ignorePermissions?0:t.includes("r")&&!(e.mode&292)?2:t.includes("w")&&!(e.mode&146)?2:t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!n.isDir(e.mode))return 54;var t=n.nodePermissions(e,"x");return t?t:e.node_ops.lookup?0:2},mayCreate(e,t){try{var s=n.lookupNode(e,t);return 20}catch{}return n.nodePermissions(e,"wx")},mayDelete(e,t,s){try{o=n.lookupNode(e,t)}catch(e){return e.errno}var o,i=n.nodePermissions(e,"wx");if(i)return i;if(s){{if(!n.isDir(o.mode))return 54;if(n.isRoot(o)||n.getPath(o)===n.cwd())return 10}}else if(n.isDir(o.mode))return 31;return 0},mayOpen(e,t){return e?n.isLink(e.mode)?32:n.isDir(e.mode)&&(n.flagsToPermissionString(t)!=="r"||t&512)?31:n.nodePermissions(e,n.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=n.MAX_OPEN_FDS;e++)if(!n.streams[e])return e;throw new n.ErrnoError(33)},getStreamChecked(e){var t=n.getStream(e);if(!t)throw new n.ErrnoError(8);return t},getStream:e=>n.streams[e],createStream(e,t=-1){return u(t>=-1),e=Object.assign(new n.FSStream,e),t==-1&&(t=n.nextfd()),e.fd=t,n.streams[t]=e,e},closeStream(e){n.streams[e]=null},dupStream(e,t=-1){var s=n.createStream(e,t);return s.stream_ops?.dup?.(s),s},chrdev_stream_ops:{open(e){var t=n.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new n.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){n.devices[e]={stream_ops:t}},getDevice:e=>n.devices[e],getMounts(e){for(var n,s=[],t=[e];t.length;)n=t.pop(),s.push(n),t.push(...n.mounts);return s},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),n.syncFSRequests++,n.syncFSRequests>1&&x(`warning: ${n.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var o=n.getMounts(n.root.mount),a=0;function i(e){return u(n.syncFSRequests>0),n.syncFSRequests--,t(e)}function s(e){if(e){if(!s.errored)return s.errored=!0,i(e);return}++a>=o.length&&i(null)}o.forEach(t=>{if(!t.type.syncfs)return s(null);t.type.syncfs(t,e,s)})},mount(e,t,s){if(typeof e=="string")throw e;var o,i,a,c,r=s==="/",l=!s;if(r&&n.root)throw new n.ErrnoError(10);if(!r&&!l){if(c=n.lookupPath(s,{follow_mount:!1}),s=c.path,o=c.node,n.isMountpoint(o))throw new n.ErrnoError(10);if(!n.isDir(o.mode))throw new n.ErrnoError(54)}return i={type:e,opts:t,mountpoint:s,mounts:[]},a=e.mount(i),a.mount=i,i.root=a,r?n.root=a:o&&(o.mounted=i,o.mount&&o.mount.mounts.push(i)),a},unmount(e){var t,s,o,a,i=n.lookupPath(e,{follow_mount:!1});if(!n.isMountpoint(i.node))throw new n.ErrnoError(28);t=i.node,s=t.mounted,a=n.getMounts(s),Object.keys(n.nameTable).forEach(e=>{for(var s,t=n.nameTable[e];t;)s=t.name_next,a.includes(t.mount)&&n.destroyNode(t),t=s}),t.mounted=null,o=t.mount.mounts.indexOf(s),u(o!==-1),t.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,s){var a,r=n.lookupPath(e,{parent:!0}),i=r.node,o=C.basename(e);if(!o||o==="."||o==="..")throw new n.ErrnoError(28);if(a=n.mayCreate(i,o),a)throw new n.ErrnoError(a);if(!i.node_ops.mknod)throw new n.ErrnoError(63);return i.node_ops.mknod(i,o,t,s)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,n.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=511|512,t|=16384,n.mknod(e,t,0)},mkdirTree(e,t){for(var o=e.split("/"),i="",s=0;s<o.length;++s){if(!o[s])continue;i+="/"+o[s];try{n.mkdir(i,t)}catch(e){if(e.errno!=20)throw e}}},mkdev(e,t,s){return typeof s=="undefined"&&(s=t,t=438),t|=8192,n.mknod(e,t,s)},symlink(e,t){if(!X.resolve(e))throw new n.ErrnoError(44);var o,i,a=n.lookupPath(t,{parent:!0}),s=a.node;if(!s)throw new n.ErrnoError(44);if(o=C.basename(t),i=n.mayCreate(s,o),i)throw new n.ErrnoError(i);if(!s.node_ops.symlink)throw new n.ErrnoError(63);return s.node_ops.symlink(s,o,e)},rename(e,t){var s,a,r,l,d,m=C.dirname(e),f=C.dirname(t),u=C.basename(e),c=C.basename(t),h=n.lookupPath(e,{parent:!0}),o=h.node,h=n.lookupPath(t,{parent:!0}),i=h.node;if(!o||!i)throw new n.ErrnoError(44);if(o.mount!==i.mount)throw new n.ErrnoError(75);if(a=n.lookupNode(o,u),l=X.relative(e,f),l.charAt(0)!==".")throw new n.ErrnoError(28);if(l=X.relative(t,m),l.charAt(0)!==".")throw new n.ErrnoError(55);try{r=n.lookupNode(i,c)}catch{}if(a===r)return;if(d=n.isDir(a.mode),s=n.mayDelete(o,u,d),s)throw new n.ErrnoError(s);if(s=r?n.mayDelete(i,c,d):n.mayCreate(i,c),s)throw new n.ErrnoError(s);if(!o.node_ops.rename)throw new n.ErrnoError(63);if(n.isMountpoint(a)||r&&n.isMountpoint(r))throw new n.ErrnoError(10);if(i!==o&&(s=n.nodePermissions(o,"w"),s))throw new n.ErrnoError(s);n.hashRemoveNode(a);try{o.node_ops.rename(a,i,c),a.parent=i}catch(e){throw e}finally{n.hashAddNode(a)}},rmdir(e){var a=n.lookupPath(e,{parent:!0}),t=a.node,s=C.basename(e),o=n.lookupNode(t,s),i=n.mayDelete(t,s,!0);if(i)throw new n.ErrnoError(i);if(!t.node_ops.rmdir)throw new n.ErrnoError(63);if(n.isMountpoint(o))throw new n.ErrnoError(10);t.node_ops.rmdir(t,s),n.destroyNode(o)},readdir(e){var s=n.lookupPath(e,{follow:!0}),t=s.node;if(!t.node_ops.readdir)throw new n.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var s,o,i,a=n.lookupPath(e,{parent:!0}),t=a.node;if(!t)throw new n.ErrnoError(44);if(s=C.basename(e),o=n.lookupNode(t,s),i=n.mayDelete(t,s,!1),i)throw new n.ErrnoError(i);if(!t.node_ops.unlink)throw new n.ErrnoError(63);if(n.isMountpoint(o))throw new n.ErrnoError(10);t.node_ops.unlink(t,s),n.destroyNode(o)},readlink(e){var s=n.lookupPath(e),t=s.node;if(!t)throw new n.ErrnoError(44);if(!t.node_ops.readlink)throw new n.ErrnoError(28);return X.resolve(n.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var o=n.lookupPath(e,{follow:!t}),s=o.node;if(!s)throw new n.ErrnoError(44);if(!s.node_ops.getattr)throw new n.ErrnoError(63);return s.node_ops.getattr(s)},lstat(e){return n.stat(e,!0)},chmod(e,t,s){if(typeof e=="string"){var o,i=n.lookupPath(e,{follow:!s});o=i.node}else o=e;if(!o.node_ops.setattr)throw new n.ErrnoError(63);o.node_ops.setattr(o,{mode:t&4095|o.mode&~4095,timestamp:Date.now()})},lchmod(e,t){n.chmod(e,t,!0)},fchmod(e,t){var s=n.getStreamChecked(e);n.chmod(s.node,t)},chown(e,t,s,o){if(typeof e=="string"){var i,a=n.lookupPath(e,{follow:!o});i=a.node}else i=e;if(!i.node_ops.setattr)throw new n.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(e,t,s){n.chown(e,t,s,!0)},fchown(e,t,s){var o=n.getStreamChecked(e);n.chown(o.node,t,s)},truncate(e,t){if(t<0)throw new n.ErrnoError(28);if(typeof e=="string"){var s,o,i=n.lookupPath(e,{follow:!0});s=i.node}else s=e;if(!s.node_ops.setattr)throw new n.ErrnoError(63);if(n.isDir(s.mode))throw new n.ErrnoError(31);if(!n.isFile(s.mode))throw new n.ErrnoError(28);if(o=n.nodePermissions(s,"w"),o)throw new n.ErrnoError(o);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate(e,t){var s=n.getStreamChecked(e);if((s.flags&2097155)===0)throw new n.ErrnoError(28);n.truncate(s.node,t)},utime(e,t,s){var i=n.lookupPath(e,{follow:!0}),o=i.node;o.node_ops.setattr(o,{timestamp:Math.max(t,s)})},open(e,t,s){if(e==="")throw new n.ErrnoError(44);if(t=typeof t=="string"?Xi(t):t,t&64?(s=typeof s=="undefined"?438:s,s=s&4095|32768):s=0,typeof e=="object")o=e;else{e=C.normalize(e);try{var o,a,r,c,l=n.lookupPath(e,{follow:!(t&131072)});o=l.node}catch{}}if(r=!1,t&64)if(o){if(t&128)throw new n.ErrnoError(20)}else o=n.mknod(e,s,0),r=!0;if(!o)throw new n.ErrnoError(44);if(n.isChrdev(o.mode)&&(t&=~512),t&65536&&!n.isDir(o.mode))throw new n.ErrnoError(54);if(!r&&(c=n.mayOpen(o,t),c))throw new n.ErrnoError(c);return t&512&&!r&&n.truncate(o,0),t&=~(128|512|131072),a=n.createStream({node:o,path:n.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1}),a.stream_ops.open&&a.stream_ops.open(a),i.logReadFiles&&!(t&1)&&(n.readFiles||(n.readFiles={}),e in n.readFiles||(n.readFiles[e]=1)),a},close(e){if(n.isClosed(e))throw new n.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{n.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,s){if(n.isClosed(e))throw new n.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new n.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new n.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,s),e.ungotten=[],e.position},read(e,t,s,o,i){if(u(s>=0),o<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(e))throw new n.ErrnoError(8);if((e.flags&2097155)===1)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.read)throw new n.ErrnoError(28);var a,r=typeof i!="undefined";if(r){if(!e.seekable)throw new n.ErrnoError(70)}else i=e.position;return a=e.stream_ops.read(e,t,s,o,i),r||(e.position+=a),a},write(e,t,s,o,i,a){if(u(s>=0),o<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(e))throw new n.ErrnoError(8);if((e.flags&2097155)===0)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.write)throw new n.ErrnoError(28);e.seekable&&e.flags&1024&&n.llseek(e,0,2);var r,c=typeof i!="undefined";if(c){if(!e.seekable)throw new n.ErrnoError(70)}else i=e.position;return r=e.stream_ops.write(e,t,s,o,i,a),c||(e.position+=r),r},allocate(e,t,s){if(n.isClosed(e))throw new n.ErrnoError(8);if(t<0||s<=0)throw new n.ErrnoError(28);if((e.flags&2097155)===0)throw new n.ErrnoError(8);if(!n.isFile(e.node.mode)&&!n.isDir(e.node.mode))throw new n.ErrnoError(43);if(!e.stream_ops.allocate)throw new n.ErrnoError(138);e.stream_ops.allocate(e,t,s)},mmap(e,t,s,o,i){if((o&2)!==0&&(i&2)===0&&(e.flags&2097155)!==2)throw new n.ErrnoError(2);if((e.flags&2097155)===1)throw new n.ErrnoError(2);if(!e.stream_ops.mmap)throw new n.ErrnoError(43);return e.stream_ops.mmap(e,t,s,o,i)},msync(e,t,n,s,o){return u(n>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,n,s,o):0},ioctl(e,t,s){if(!e.stream_ops.ioctl)throw new n.ErrnoError(59);return e.stream_ops.ioctl(e,t,s)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var s,i=n.open(e,t.flags),r=n.stat(e),a=r.size,o=new Uint8Array(a);return n.read(i,o,0,a,0),t.encoding==="utf8"?s=pe(o,0):t.encoding==="binary"&&(s=o),n.close(i),s},writeFile(e,t,s={}){s.flags=s.flags||577;var o,a,i=n.open(e,s.flags,s.mode);if(typeof t=="string")o=new Uint8Array(Q(t)+1),a=Pe(t,o,0,o.length),n.write(i,o,0,a,void 0,s.canOwn);else if(ArrayBuffer.isView(t))n.write(i,t,0,t.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");n.close(i)},cwd:()=>n.currentPath,chdir(e){var s,t=n.lookupPath(e,{follow:!0});if(t.node===null)throw new n.ErrnoError(44);if(!n.isDir(t.node.mode))throw new n.ErrnoError(54);if(s=n.nodePermissions(t.node,"x"),s)throw new n.ErrnoError(s);n.currentPath=t.path},createDefaultDirectories(){n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},createDefaultDevices(){n.mkdir("/dev"),n.registerDevice(n.makedev(1,3),{read:()=>0,write:(e,t,n,s)=>s}),n.mkdev("/dev/null",n.makedev(1,3)),Z.register(n.makedev(5,0),Z.default_tty_ops),Z.register(n.makedev(6,0),Z.default_tty1_ops),n.mkdev("/dev/tty",n.makedev(5,0)),n.mkdev("/dev/tty1",n.makedev(6,0));var t=new Uint8Array(1024),e=0,s=()=>(e===0&&(e=Kt(t).byteLength),t[--e]);n.createDevice("/dev","random",s),n.createDevice("/dev","urandom",s),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},createSpecialDirectories(){n.mkdir("/proc");var e=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount(){var t=n.createNode(e,"fd",16384|511,73);return t.node_ops={lookup(e,t){var o=+t,i=n.getStreamChecked(o),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return s.parent=s,s}},t}},{},"/proc/self/fd")},createStandardStreams(){i.stdin?n.createDevice("/dev","stdin",i.stdin):n.symlink("/dev/tty","/dev/stdin"),i.stdout?n.createDevice("/dev","stdout",null,i.stdout):n.symlink("/dev/tty","/dev/stdout"),i.stderr?n.createDevice("/dev","stderr",null,i.stderr):n.symlink("/dev/tty1","/dev/stderr");var e=n.open("/dev/stdin",0),t=n.open("/dev/stdout",1),s=n.open("/dev/stderr",1);u(e.fd===0,`invalid handle for stdin (${e.fd})`),u(t.fd===1,`invalid handle for stdout (${t.fd})`),u(s.fd===2,`invalid handle for stderr (${s.fd})`)},staticInit(){[44].forEach(e=>{n.genericErrors[e]=new n.ErrnoError(e),n.genericErrors[e].stack="<generic error, no stack>"}),n.nameTable=new Array(4096),n.mount(p,{},"/"),n.createDefaultDirectories(),n.createDefaultDevices(),n.createSpecialDirectories(),n.filesystems={MEMFS:p,IDBFS:y}},init(e,t,s){u(!n.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),n.init.initialized=!0,i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=s||i.stderr,n.createStandardStreams()},quit(){n.init.initialized=!1,An(0);for(var t,e=0;e<n.streams.length;e++){if(t=n.streams[e],!t)continue;n.close(t)}},findObject(e,t){var s=n.analyzePath(e,t);return s.exists?s.object:null},analyzePath(e,t){try{var s,o=n.lookupPath(e,{follow:!t});e=o.path}catch{}s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{o=n.lookupPath(e,{parent:!0}),s.parentExists=!0,s.parentPath=o.path,s.parentObject=o.node,s.name=C.basename(e),o=n.lookupPath(e,{follow:!t}),s.exists=!0,s.path=o.path,s.object=o.node,s.name=o.node.name,s.isRoot=o.path==="/"}catch(e){s.error=e.errno}return s},createPath(e,t){e=typeof e=="string"?e:n.getPath(e);for(var i,a,r=t.split("/").reverse();r.length;){if(a=r.pop(),!a)continue;i=C.join2(e,a);try{n.mkdir(i)}catch{}e=i}return i},createFile(e,t,s,o,i){var a=C.join2(typeof e=="string"?e:n.getPath(e),t),r=tt(o,i);return n.create(a,r)},createDataFile(e,t,s,o,i,a){if(d=t,e&&(e=typeof e=="string"?e:n.getPath(e),d=t?C.join2(e,t):e),r=tt(o,i),c=n.create(d,r),s){if(typeof s=="string"){for(var r,c,d,u,h=new Array(s.length),l=0,m=s.length;l<m;++l)h[l]=s.charCodeAt(l);s=h}n.chmod(c,r|146),u=n.open(c,577),n.write(u,s,0,s.length,0,a),n.close(u),n.chmod(c,r)}},createDevice(e,t,s,o){var i,a=C.join2(typeof e=="string"?e:n.getPath(e),t),r=tt(!!s,!!o);return n.createDevice.major||(n.createDevice.major=64),i=n.makedev(n.createDevice.major++,0),n.registerDevice(i,{open(e){e.seekable=!1},close(){o?.buffer?.length&&o(10)},read(e,t,o,i){for(var r,c=0,l=0;l<i;l++){try{r=s()}catch{throw new n.ErrnoError(29)}if(r===void 0&&c===0)throw new n.ErrnoError(6);if(r==null)break;c++,t[o+l]=r}return c&&(e.node.timestamp=Date.now()),c},write(e,t,s,i){for(var r=0;r<i;r++)try{o(t[s+r])}catch{throw new n.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),r}}),n.mkdev(a,r,i)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=Ze(e.url),e.usedBytes=e.contents.length}catch{throw new n.ErrnoError(29)}},createLazyFile(e,t,s,o,i){class h{constructor(){this.lengthKnown=!1,this.chunks=[]}get(e){if(e>this.length-1||e<0)return void 0;var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}setDataGetter(e){this.getter=e}cacheLength(){var e,n,o,i,a,r,c,t=new XMLHttpRequest;if(t.open("HEAD",s,!1),t.send(null),!(t.status>=200&&t.status<300||t.status===304))throw new Error("Couldn't load "+s+". Status: "+t.status);e=Number(t.getResponseHeader("Content-length")),a=(i=t.getResponseHeader("Accept-Ranges"))&&i==="bytes",r=(i=t.getResponseHeader("Content-Encoding"))&&i==="gzip",n=1024*1024,a||(n=e),c=(t,o)=>{if(t>o)throw new Error("invalid range ("+t+", "+o+") or no bytes requested!");if(o>e-1)throw new Error("only "+e+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",s,!1),e!==n&&i.setRequestHeader("Range","bytes="+t+"-"+o),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||i.status===304))throw new Error("Couldn't load "+s+". Status: "+i.status);return i.response!==void 0?new Uint8Array(i.response||[]):ms(i.responseText||"",!0)},o=this,o.setDataGetter(t=>{var i=t*n,s=(t+1)*n-1,s=Math.min(s,e-1);if(typeof o.chunks[t]=="undefined"&&(o.chunks[t]=c(i,s)),typeof o.chunks[t]=="undefined")throw new Error("doXHR failed!");return o.chunks[t]}),(r||!e)&&(n=e=1,e=this.getter(0).length,n=e,Te("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=e,this._chunkSize=n,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest!="undefined"){if(!le)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a,c,l,m=new h,r={isDevice:!1,contents:m}}else r={isDevice:!1,url:s};a=n.createFile(e,t,r,o,i),r.contents?a.contents=r.contents:r.url&&(a.contents=null,a.url=r.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}}),c={},l=Object.keys(a.stream_ops),l.forEach(e=>{var t=a.stream_ops[e];c[e]=(...e)=>(n.forceLoadFile(a),t(...e))});function d(e,t,n,s,o){var i,r,a=e.node.contents;if(o>=a.length)return 0;if(r=Math.min(a.length-o,s),u(r>=0),a.slice)for(i=0;i<r;i++)t[n+i]=a[o+i];else for(i=0;i<r;i++)t[n+i]=a.get(o+i);return r}return c.read=(e,t,s,o,i)=>(n.forceLoadFile(a),d(e,t,s,o,i)),c.mmap=(e,t,s)=>{n.forceLoadFile(a);var r=Mt(t);if(!r)throw new n.ErrnoError(48);return d(e,b,r,t,s),{ptr:r,allocated:!0}},a.stream_ops=c,a},absolutePath(){A("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){A("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){A("FS.createLink has been removed; use FS.symlink instead")},joinPath(){A("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){A("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){A("FS.standardizePath has been removed; use PATH.normalize instead")}},f={DEFAULT_POLLMASK:5,calculateAt(e,t,s){if(C.isAbs(t))return t;if(e===-100)o=n.cwd();else{var o,i=f.getStreamFromFD(e);o=i.path}if(t.length==0){if(!s)throw new n.ErrnoError(44);return o}return C.join2(o,t)},doStat(e,t,n){var o,i,a,s=e(t);return l[n>>2]=s.dev,l[n+4>>2]=s.mode,g[n+8>>2]=s.nlink,l[n+12>>2]=s.uid,l[n+16>>2]=s.gid,l[n+20>>2]=s.rdev,W[n+24>>3]=BigInt(s.size),l[n+32>>2]=4096,l[n+36>>2]=s.blocks,o=s.atime.getTime(),i=s.mtime.getTime(),a=s.ctime.getTime(),W[n+40>>3]=BigInt(Math.floor(o/1e3)),g[n+48>>2]=o%1e3*1e3,W[n+56>>3]=BigInt(Math.floor(i/1e3)),g[n+64>>2]=i%1e3*1e3,W[n+72>>3]=BigInt(Math.floor(a/1e3)),g[n+80>>2]=a%1e3*1e3,W[n+88>>3]=BigInt(s.ino),0},doMsync(e,t,s,o,i){if(!n.isFile(t.node.mode))throw new n.ErrnoError(43);if(o&2)return 0;var a=z.slice(e,e+s);n.msync(t,a,i,s,o)},getStreamFromFD(e){var t=n.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=L(e);return t}};function Rl(e,t,s,o,i){try{u(e<=64,"nfds must be less than or equal to 64");for(var r,d,p,_,A,S,c=0,F=t?l[t>>2]:0,M=t?l[t+4>>2]:0,C=s?l[s>>2]:0,x=s?l[s+4>>2]:0,w=o?l[o>>2]:0,k=o?l[o+4>>2]:0,g=0,v=0,b=0,m=0,j=0,y=0,E=(t?l[t>>2]:0)|(s?l[s>>2]:0)|(o?l[o>>2]:0),O=(t?l[t+4>>2]:0)|(s?l[s+4>>2]:0)|(o?l[o+4>>2]:0),h=function(e,t,n,s){return e<32?t&s:n&s},a=0;a<e;a++){if(r=1<<a%32,!h(a,E,O,r))continue;p=f.getStreamFromFD(a),d=f.DEFAULT_POLLMASK,p.stream_ops.poll&&(_=-1,i&&(A=t?l[i>>2]:0,S=t?l[i+4>>2]:0,_=(A+S/1e6)*1e3),d=p.stream_ops.poll(p,_)),d&1&&h(a,F,M,r)&&(a<32?g=g|r:v=v|r,c++),d&4&&h(a,C,x,r)&&(a<32?b=b|r:m=m|r,c++),d&2&&h(a,w,k,r)&&(a<32?j=j|r:y=y|r,c++)}return t&&(l[t>>2]=g,l[t+4>>2]=v),s&&(l[s>>2]=b,l[s+4>>2]=m),o&&(l[o>>2]=j,l[o+4>>2]=y),c}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}F={mount(){return i.websocket=i.websocket&&"object"==typeof i.websocket?i.websocket:{},i.websocket._callbacks={},i.websocket.on=function(e,t){return"function"==typeof t&&(this._callbacks[e]=t),this},i.websocket.emit=function(e,t){"function"==typeof this._callbacks[e]&&this._callbacks[e].call(this,t)},n.createNode(null,"/",16384|511,0)},createSocket(e,t,s){t&=~526336;var o,i,a,r,c=t==1;if(c&&s&&s!=6)throw new n.ErrnoError(66);return o={family:e,type:t,protocol:s,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:F.websocket_sock_ops},i=F.nextname(),a=n.createNode(F.root,i,49152,0),a.sock=o,r=n.createStream({path:i,node:a,flags:2,seekable:!1,stream_ops:F.stream_ops}),o.stream=r,o},getSocket(e){var t=n.getStream(e);return!t||!n.isSocket(t.node.mode)?null:t.node.sock},stream_ops:{poll(e){var t=e.node.sock;return t.sock_ops.poll(t)},ioctl(e,t,n){var s=e.node.sock;return s.sock_ops.ioctl(s,t,n)},read(e,t,n,s){var a=e.node.sock,i=a.sock_ops.recvmsg(a,s);return i?(t.set(i.buffer,n),i.buffer.length):0},write(e,t,n,s){var i=e.node.sock;return i.sock_ops.sendmsg(i,t,n,s)},close(e){var t=e.node.sock;t.sock_ops.close(t)}},nextname(){return F.nextname.current||(F.nextname.current=0),"socket["+F.nextname.current+++"]"},websocket_sock_ops:{createPeer(e,t,s){if(typeof t=="object"&&(o=t,t=null,s=null),o)if(o._socket)t=o._socket.remoteAddress,s=o._socket.remotePort;else{var o,a,r,c,l,d,h,m,u=/ws[s]?:\/\/([^:]+):(\d+)/.exec(o.url);if(!u)throw new Error("WebSocket URL must be in the format ws(s)://address:port");t=u[1],s=parseInt(u[2],10)}else try{l=i.websocket&&"object"==typeof i.websocket,a="ws:#".replace("#","//"),l&&"string"==typeof i.websocket.url&&(a=i.websocket.url),(a==="ws://"||a==="wss://")&&(h=t.split("/"),a=a+h[0]+":"+s+"/"+h.slice(1).join("/")),r="binary",l&&"string"==typeof i.websocket.subprotocol&&(r=i.websocket.subprotocol),d=void 0,r!=="null"&&(r=r.replace(/^ +| +$/g,"").split(/ *, */),d=r),l&&null===i.websocket.subprotocol&&(r="null",d=void 0),m=WebSocket,o=new m(a,d),o.binaryType="arraybuffer"}catch{throw new n.ErrnoError(23)}return c={addr:t,port:s,socket:o,dgram_send_queue:[]},F.websocket_sock_ops.addPeer(e,c),F.websocket_sock_ops.handlePeerEvents(e,c),e.type===2&&typeof e.sport!="undefined"&&c.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(e.sport&65280)>>8,e.sport&255])),c},getPeer(e,t,n){return e.peers[t+":"+n]},addPeer(e,t){e.peers[t.addr+":"+t.port]=t},removePeer(e,t){delete e.peers[t.addr+":"+t.port]},handlePeerEvents(e,t){var n=!0,s=function(){i.websocket.emit("open",e.stream.fd);try{for(var n=t.dgram_send_queue.shift();n;)t.socket.send(n),n=t.dgram_send_queue.shift()}catch{t.socket.close()}};function o(s){if(typeof s=="string"){var o,a,r=new TextEncoder;s=r.encode(s)}else{if(u(s.byteLength!==void 0),s.byteLength==0)return;s=new Uint8Array(s)}if(o=n,n=!1,o&&s.length===10&&s[0]===255&&s[1]===255&&s[2]===255&&s[3]===255&&s[4]==="p".charCodeAt(0)&&s[5]==="o".charCodeAt(0)&&s[6]==="r".charCodeAt(0)&&s[7]==="t".charCodeAt(0)){a=s[8]<<8|s[9],F.websocket_sock_ops.removePeer(e,t),t.port=a,F.websocket_sock_ops.addPeer(e,t);return}e.recv_queue.push({addr:t.addr,port:t.port,data:s}),i.websocket.emit("message",e.stream.fd)}Ce?(t.socket.on("open",s),t.socket.on("message",function(e,t){if(!t)return;o(new Uint8Array(e).buffer)}),t.socket.on("close",function(){i.websocket.emit("close",e.stream.fd)}),t.socket.on("error",function(){e.error=14,i.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})):(t.socket.onopen=s,t.socket.onclose=function(){i.websocket.emit("close",e.stream.fd)},t.socket.onmessage=function(t){o(t.data)},t.socket.onerror=function(){e.error=14,i.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll(e){if(e.type===1&&e.server)return e.pending.length?64|1:0;var n=0,t=e.type===1?F.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!t||t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(n|=64|1),(!t||t&&t.socket.readyState===t.socket.OPEN)&&(n|=4),(t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(n|=16),n},ioctl(e,t,n){switch(t){case 21531:var s=0;return e.recv_queue.length&&(s=e.recv_queue[0].data.length),l[n>>2]=s,0;default:return 28}},close(e){if(e.server){try{e.server.close()}catch{}e.server=null}for(var n,s=Object.keys(e.peers),t=0;t<s.length;t++){n=e.peers[s[t]];try{n.socket.close()}catch{}F.websocket_sock_ops.removePeer(e,n)}return 0},bind(e,t,s){if(typeof e.saddr!="undefined"||typeof e.sport!="undefined")throw new n.ErrnoError(28);if(e.saddr=t,e.sport=s,e.type===2){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(e){if(e.name!=="ErrnoError")throw e;if(e.errno!==138)throw e}}},connect(e,t,s){if(e.server)throw new n.ErrnoError(138);if(typeof e.daddr!="undefined"&&typeof e.dport!="undefined"){var i,o=F.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(o)throw o.socket.readyState===o.socket.CONNECTING?new n.ErrnoError(7):new n.ErrnoError(30)}throw i=F.websocket_sock_ops.createPeer(e,t,s),e.daddr=i.addr,e.dport=i.port,new n.ErrnoError(26)},listen(){if(!Ce)throw new n.ErrnoError(138)},accept(e){if(!e.server||!e.pending.length)throw new n.ErrnoError(28);var t=e.pending.shift();return t.stream.flags=e.stream.flags,t},getname(e,t){var s,o;if(t){if(e.daddr===void 0||e.dport===void 0)throw new n.ErrnoError(53);s=e.daddr,o=e.dport}else s=e.saddr||0,o=e.sport||0;return{addr:s,port:o}},sendmsg(e,t,s,o,i,a){if(e.type===2){if((i===void 0||a===void 0)&&(i=e.daddr,a=e.dport),i===void 0||a===void 0)throw new n.ErrnoError(17)}else i=e.daddr,a=e.dport;var c,r=F.websocket_sock_ops.getPeer(e,i,a);if(e.type===1){if(!r||r.socket.readyState===r.socket.CLOSING||r.socket.readyState===r.socket.CLOSED)throw new n.ErrnoError(53);if(r.socket.readyState===r.socket.CONNECTING)throw new n.ErrnoError(6)}if(ArrayBuffer.isView(t)&&(s+=t.byteOffset,t=t.buffer),c=t.slice(s,s+o),e.type===2&&(!r||r.socket.readyState!==r.socket.OPEN))return(!r||r.socket.readyState===r.socket.CLOSING||r.socket.readyState===r.socket.CLOSED)&&(r=F.websocket_sock_ops.createPeer(e,i,a)),r.dgram_send_queue.push(c),o;try{return r.socket.send(c),o}catch{throw new n.ErrnoError(28)}},recvmsg(e,t){if(e.type===1&&e.server)throw new n.ErrnoError(53);var o,i,a,r,c,l,d,s=e.recv_queue.shift();if(!s){if(e.type===1){if(o=F.websocket_sock_ops.getPeer(e,e.daddr,e.dport),!o)throw new n.ErrnoError(53);if(o.socket.readyState===o.socket.CLOSING||o.socket.readyState===o.socket.CLOSED)return null;throw new n.ErrnoError(6)}throw new n.ErrnoError(6)}return a=s.data.byteLength||s.data.length,r=s.data.byteOffset||0,c=s.data.buffer||s.data,i=Math.min(t,a),l={buffer:new Uint8Array(c,r,i),addr:s.addr,port:s.port},e.type===1&&i<a&&(d=a-i,s.data=new Uint8Array(c,r+i,d),e.recv_queue.unshift(s)),l}}},ne=e=>{var t=F.getSocket(e);if(!t)throw new n.ErrnoError(8);return t},ke=e=>{for(var s,t=e.split("."),n=0;n<4;n++){if(s=Number(t[n]),isNaN(s))return null;t[n]=s}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0},Oe=e=>parseInt(e),ut=e=>{var t,s,o,i,a=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,n=[];if(!a.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),t=e.split(":"),t[t.length-4]=Oe(t[t.length-4])+Oe(t[t.length-3])*256,t[t.length-3]=Oe(t[t.length-2])+Oe(t[t.length-1])*256,t=t.slice(0,t.length-2)):t=e.split(":"),i=0,o=0;for(s=0;s<t.length;s++)if(typeof t[s]=="string")if(t[s]==="Z"){for(o=0;o<8-t.length+1;o++)n[s+o]=0;i=o-1}else n[s+i]=ct(parseInt(t[s],16));else n[s+i]=t[s];return[n[1]<<16|n[0],n[3]<<16|n[2],n[5]<<16|n[4],n[7]<<16|n[6]]},De=(e,t,n,s,o)=>{switch(t){case 2:n=ke(n),Ft(e,16),o&&(l[o>>2]=16),P[e>>1]=t,l[e+4>>2]=n,P[e+2>>1]=ct(s);break;case 10:n=ut(n),Ft(e,28),o&&(l[o>>2]=28),l[e>>2]=t,l[e+8>>2]=n[0],l[e+12>>2]=n[1],l[e+16>>2]=n[2],l[e+20>>2]=n[3],P[e+2>>1]=ct(s);break;default:return 5}return 0},V={address_map:{id:1,addrs:{},names:{}},lookup_name(e){var t,n,s=ke(e);return s!==null?e:(s=ut(e),s!==null?e:(V.address_map.addrs[e]?t=V.address_map.addrs[e]:(n=V.address_map.id++,u(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(n&255)+"."+(n&65280),V.address_map.names[t]=e,V.address_map.addrs[e]=t),t))},lookup_addr(e){return V.address_map.names[e]?V.address_map.names[e]:null}};function Nl(e,t,s){try{var l,c=ne(e),r=c.sock_ops.accept(c);return t&&(l=De(t,r.family,V.lookup_name(r.daddr),r.dport,s),u(!l)),r.stream.fd}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}ot=e=>(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255),_t=e=>{var n="",t=0,i=0,l=0,a=0,r=0,c=0,s=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],d=!0,o="";for(c=0;c<5;c++)if(s[c]!==0){d=!1;break}if(d){if(o=ot(s[6]|s[7]<<16),s[5]===-1)return n="::ffff:",n+=o,n;if(s[5]===0)return n="::",o==="0.0.0.0"&&(o=""),o==="0.0.0.1"&&(o="1"),n+=o,n}for(t=0;t<8;t++)s[t]===0&&(t-l>1&&(r=0),l=t,r++),r>i&&(i=r,a=t-i+1);for(t=0;t<8;t++){if(i>1&&s[t]===0&&t>=a&&t<a+i){t===a&&(n+=":",a===0&&(n+=":"));continue}n+=Number(rn(s[t]&65535)).toString(16),n+=t<7?":":""}return n},wt=(e,t)=>{var n,s=P[e>>1],o=rn(St[e+2>>1]);switch(s){case 2:if(t!==16)return{errno:28};n=l[e+4>>2],n=ot(n);break;case 10:if(t!==28)return{errno:28};n=[l[e+8>>2],l[e+12>>2],l[e+16>>2],l[e+20>>2]],n=_t(n);break;default:return{errno:5}}return{family:s,addr:n,port:o}},st=(e,t,s)=>{if(s&&e===0)return null;var o=wt(e,t);if(o.errno)throw new n.ErrnoError(o.errno);return o.addr=V.lookup_addr(o.addr)||o.addr,o};function zl(e,t,s){try{var c=ne(e),r=st(t,s);return c.sock_ops.bind(c,r.addr,r.port),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Tl(e){try{return e=f.getStr(e),n.chdir(e),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Ml(e,t){try{return e=f.getStr(e),n.chmod(e,t),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Sl(e,t,s){try{var c=ne(e),r=st(t,s);return c.sock_ops.connect(c,r.addr,r.port),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Al(e,t,s,o){try{if(t=f.getStr(t),u(o===0),t=f.calculateAt(e,t),s&~7)return-28;var i,r=n.lookupPath(t,{follow:!0}),a=r.node;return a?(i="",s&4&&(i+="r"),s&2&&(i+="w"),s&1&&(i+="x"),i&&n.nodePermissions(a,i)?-2:0):-44}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function kl(e,t){try{return n.fchmod(e,t),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Qe(){u(f.varargs!=void 0);var e=l[+f.varargs>>2];return f.varargs+=4,e}fe=Qe;function El(e,t,s){f.varargs=s;try{var o,a,r,i=f.getStreamFromFD(e);switch(t){case 0:{if(o=Qe(),o<0)return-28;for(;n.streams[o];)o++;return a=n.dupStream(i,o),a.fd}case 1:case 2:return 0;case 3:return i.flags;case 4:return o=Qe(),i.flags|=o,0;case 12:return o=fe(),r=0,P[o+r>>1]=2,0;case 13:case 14:return 0}return-28}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Cl(e,t){try{var s=f.getStreamFromFD(e);return f.doStat(n.stat,s.path,t)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}Wo=9007199254740992,_o=-9007199254740992,Re=e=>e<_o||e>Wo?NaN:Number(e);function xl(e,t){t=Re(t);try{return isNaN(t)?61:(n.ftruncate(e,t),0)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}H=(e,t,n)=>(u(typeof n=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Pe(e,z,t,n));function Ol(e,t){try{if(t===0)return-28;var o=n.cwd(),s=Q(o)+1;return t<s?-68:(H(o,e,t),s)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function wl(e,t,s){try{var i,a,r,c,l,d,h,m,p,o=f.getStreamFromFD(e);for(o.getdents||=n.readdir(o.path),a=280,i=0,m=n.llseek(o,0,1),r=Math.floor(m/a);r<o.getdents.length&&i+a<=s;)l=o.getdents[r],l==="."?(c=o.node.id,h=4):l===".."?(p=n.lookupPath(o.path,{parent:!0}),c=p.node.id,h=4):(d=n.lookupNode(o.node,l),c=d.id,h=n.isChrdev(d.mode)?2:n.isDir(d.mode)?4:n.isLink(d.mode)?10:8),u(c),W[t+i>>3]=BigInt(c),W[t+i+8>>3]=BigInt((r+1)*a),P[t+i+16>>1]=280,b[t+i+18]=h,H(l,t+i+19,256),i+=a,r+=1;return n.llseek(o,r*a,0),i}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function _l(e,t,s){try{var r=ne(e),c=De(t,r.family,V.lookup_name(r.saddr||"0.0.0.0"),r.sport,s);return u(!c),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function yl(e,t,s,o,i){try{var r=ne(e);return t===1&&s===4?(l[o>>2]=r.error,l[i>>2]=4,r.error=null,0):-50}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ea(e,t,s){f.varargs=s;try{var i,a,r,c,d,u,h,m,p,o=f.getStreamFromFD(e);switch(t){case 21509:return o.tty?0:-59;case 21505:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcgets){r=o.tty.ops.ioctl_tcgets(o),i=fe(),l[i>>2]=r.c_iflag||0,l[i+4>>2]=r.c_oflag||0,l[i+8>>2]=r.c_cflag||0,l[i+12>>2]=r.c_lflag||0;for(a=0;a<32;a++)b[i+a+17]=r.c_cc[a]||0;return 0}return 0}case 21510:case 21511:case 21512:return o.tty?0:-59;case 21506:case 21507:case 21508:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcsets){for(i=fe(),u=l[i>>2],h=l[i+4>>2],m=l[i+8>>2],p=l[i+12>>2],c=[],a=0;a<32;a++)c.push(b[i+a+17]);return o.tty.ops.ioctl_tcsets(o.tty,t,{c_iflag:u,c_oflag:h,c_cflag:m,c_lflag:p,c_cc:c})}return 0}case 21519:return o.tty?(i=fe(),l[i>>2]=0,0):-59;case 21520:return o.tty?-28:-59;case 21531:return i=fe(),n.ioctl(o,t,i);case 21523:return o.tty?(o.tty.ops.ioctl_tiocgwinsz&&(d=o.tty.ops.ioctl_tiocgwinsz(o.tty),i=fe(),P[i>>1]=d[0],P[i+2>>1]=d[1]),0):-59;case 21524:return o.tty?0:-59;case 21515:return o.tty?0:-59;default:return-28}}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function jl(e,t){try{var s=ne(e);return s.sock_ops.listen(s,t),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function bl(e,t){try{return e=f.getStr(e),f.doStat(n.lstat,e,t)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function vl(e,t,s){try{return t=f.getStr(t),t=f.calculateAt(e,t),t=C.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),n.mkdir(t,s,0),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function fl(e,t,s,o){try{switch(t=f.getStr(t),t=f.calculateAt(e,t),s&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return n.mknod(t,s,o),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ul(e,t,s,o){try{t=f.getStr(t);var a=o&256,i=o&4096;return o=o&~6400,u(!o,`unknown flags in __syscall_newfstatat: ${o}`),t=f.calculateAt(e,t,i),f.doStat(a?n.lstat:n.stat,t,s)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Jc(e,t,s,o){f.varargs=o;try{t=f.getStr(t),t=f.calculateAt(e,t);var i=o?Qe():0;return n.open(t,s,i).fd}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Hc(e,t){try{for(var o,i,r,d,u,c=0,a=0;a<t;a++)r=e+8*a,d=l[r>>2],u=P[r+4>>1],o=32,i=n.getStream(d),i&&(o=f.DEFAULT_POLLMASK,i.stream_ops.poll&&(o=i.stream_ops.poll(i,-1))),o&=u|8|16,o&&c++,P[r+6>>1]=o;return c}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function zc(e,t,s,o){try{if(t=f.getStr(t),t=f.calculateAt(e,t),o<=0)return-28;var a=n.readlink(t),i=Math.min(o,Q(a)),r=b[s+i];return H(a,s,o+1),b[s+i]=r,i}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function fc(e,t,s,o,i,a){try{var l,c=ne(e),r=c.sock_ops.recvmsg(c,s);return r?(i&&(l=De(i,c.family,V.lookup_name(r.addr),r.port,a),u(!l)),z.set(r.buffer,t),r.buffer.byteLength):0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ec(e,t,s,o){try{return t=f.getStr(t),o=f.getStr(o),t=f.calculateAt(e,t),o=f.calculateAt(s,o),n.rename(t,o),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Qr(e){try{return e=f.getStr(e),n.rmdir(e),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Ar(e,t,s,o,i,a){try{var c=ne(e),r=st(i,a,!0);return r?c.sock_ops.sendmsg(c,b,t,s,r.addr,r.port):n.write(c.stream,b,t,s)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function kr(e,t,s){try{var o=F.createSocket(e,t,s);return u(o.stream.fd<64),o.stream.fd}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Er(e,t){try{return e=f.getStr(e),f.doStat(n.stat,e,t)}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function Cr(e,t,s){try{return e=f.getStr(e),u(t===64),l[s+4>>2]=4096,l[s+40>>2]=4096,l[s+8>>2]=1e6,l[s+12>>2]=5e5,l[s+16>>2]=5e5,l[s+20>>2]=n.nextInode,l[s+24>>2]=1e6,l[s+28>>2]=42,l[s+44>>2]=2,l[s+36>>2]=255,0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function vr(e,t){try{return e=f.getStr(e),t=f.getStr(t),n.symlink(e,t),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function gr(e,t,s){try{return t=f.getStr(t),t=f.calculateAt(e,t),s===0?n.unlink(t):s===512?n.rmdir(t):A("Invalid flags passed to unlinkat"),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}On=()=>{A("native code called abort()")},yn=1,oo=()=>yn,gt=()=>{en=!1,re=0};function Na(e,t){e=Re(e);var s,o,n=new Date(e*1e3);l[t>>2]=n.getUTCSeconds(),l[t+4>>2]=n.getUTCMinutes(),l[t+8>>2]=n.getUTCHours(),l[t+12>>2]=n.getUTCDate(),l[t+16>>2]=n.getUTCMonth(),l[t+20>>2]=n.getUTCFullYear()-1900,l[t+24>>2]=n.getUTCDay(),s=Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0),o=(n.getTime()-s)/(1e3*60*60*24)|0,l[t+28>>2]=o}mn=e=>e%4===0&&(e%100!==0||e%400===0),fn=[0,31,60,91,121,152,182,213,244,274,305,335],pn=[0,31,59,90,120,151,181,212,243,273,304,334],gn=e=>{var t=mn(e.getFullYear()),n=t?fn:pn,s=n[e.getMonth()]+e.getDate()-1;return s};function Da(e,t){e=Re(e);var s,o,i,a,r,n=new Date(e*1e3);l[t>>2]=n.getSeconds(),l[t+4>>2]=n.getMinutes(),l[t+8>>2]=n.getHours(),l[t+12>>2]=n.getDate(),l[t+16>>2]=n.getMonth(),l[t+20>>2]=n.getFullYear()-1900,l[t+24>>2]=n.getDay(),i=gn(n)|0,l[t+28>>2]=i,l[t+36>>2]=-(n.getTimezoneOffset()*60),a=new Date(n.getFullYear(),0,1),s=new Date(n.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),r=(s!=o&&n.getTimezoneOffset()==Math.min(o,s))|0,l[t+32>>2]=r}bn=(e,t,n,s)=>{var o,i,c,d=(new Date).getFullYear(),h=new Date(d,0,1),m=new Date(d,6,1),a=h.getTimezoneOffset(),r=m.getTimezoneOffset(),f=Math.max(a,r);g[e>>2]=f*60,l[t>>2]=Number(a!=r),c=e=>{var n=e>=0?"-":"+",t=Math.abs(e),s=String(Math.floor(t/60)).padStart(2,"0"),o=String(t%60).padStart(2,"0");return`UTC${n}${s}${o}`},o=c(a),i=c(r),u(o),u(i),u(Q(o)<=16,`timezone name truncated to fit in TZNAME_MAX (${o})`),u(Q(i)<=16,`timezone name truncated to fit in TZNAME_MAX (${i})`),r<a?(H(o,n,17),H(i,s,17)):(H(o,s,17),H(i,n,17))},re=0,He=()=>{re+=1},qe=(e,t)=>{if(c.mainLoop.timingMode=e,c.mainLoop.timingValue=t,!c.mainLoop.func)return x("emscripten_set_main_loop_timing: Cannot set timing mode for main loop since a main loop does not exist! Call emscripten_set_main_loop first to set one up."),1;if(c.mainLoop.running||(He(),c.mainLoop.running=!0),e==0)c.mainLoop.scheduler=function(){var n=Math.max(0,c.mainLoop.tickStartTime+t-Xe())|0;setTimeout(c.mainLoop.runner,n)},c.mainLoop.method="timeout";else if(e==1)c.mainLoop.scheduler=function(){c.requestAnimationFrame(c.mainLoop.runner)},c.mainLoop.method="rAF";else if(e==2){if(typeof c.setImmediate=="undefined")if(typeof setImmediate=="undefined"){var s=[],n="setimmediate",o=e=>{(e.data===n||e.data.target===n)&&(e.stopPropagation(),s.shift()())};addEventListener("message",o,!0),c.setImmediate=function(t){s.push(t),le?(i.setImmediates??=[],i.setImmediates.push(t),postMessage({target:n})):postMessage(n,"*")}}else c.setImmediate=setImmediate;c.mainLoop.scheduler=function(){c.setImmediate(c.mainLoop.runner)},c.mainLoop.method="immediate"}return 0},Xe=()=>performance.now(),cn=e=>{var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=(e,n)=>t.vertexAttribDivisorANGLE(e,n),e.drawArraysInstanced=(e,n,s,o)=>t.drawArraysInstancedANGLE(e,n,s,o),e.drawElementsInstanced=(e,n,s,o,i)=>t.drawElementsInstancedANGLE(e,n,s,o,i),1},an=e=>{var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=()=>t.createVertexArrayOES(),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.isVertexArray=e=>t.isVertexArrayOES(e),1},on=e=>{var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=(e,n)=>t.drawBuffersWEBGL(e,n),1},sn=e=>!!(e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")),pt=e=>!!(e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")),tn=e=>!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")),Zt=e=>{var t=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_disjoint_timer_query","EXT_frag_depth","EXT_shader_texture_lod","EXT_sRGB","OES_element_index_uint","OES_fbo_render_mipmap","OES_standard_derivatives","OES_texture_float","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_depth_texture","WEBGL_draw_buffers","EXT_color_buffer_float","EXT_conservative_depth","EXT_disjoint_timer_query_webgl2","EXT_texture_norm16","NV_shader_noperspective_interpolation","WEBGL_clip_cull_distance","EXT_color_buffer_half_float","EXT_depth_clamp","EXT_float_blend","EXT_texture_compression_bptc","EXT_texture_compression_rgtc","EXT_texture_filter_anisotropic","KHR_parallel_shader_compile","OES_texture_float_linear","WEBGL_blend_func_extended","WEBGL_compressed_texture_astc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_lose_context","WEBGL_multi_draw"];return(e.getSupportedExtensions()||[]).filter(e=>t.includes(e))},r={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,unpackRowLength:0,recordError:e=>{r.lastError||(r.lastError=e)},getNewId:e=>{for(var n=r.counter++,t=e.length;t<n;t++)e[t]=null;return n},genObject:(e,t,n,s)=>{for(var o,i,c=0;c<e;c++)o=a[n](),i=o&&r.getNewId(s),o?(o.name=i,s[i]=o):r.recordError(1282),l[t+c*4>>2]=i},getSource:(e,t,n,s)=>{for(var a,i="",o=0;o<t;++o)a=s?g[s+o*4>>2]:void 0,i+=L(g[n+o*4>>2],a);return i},createContext:(e,t)=>{t.renderViaOffscreenBackBuffer&&(t.preserveDrawingBuffer=!0);var s,n=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return n?(s=r.registerContext(n,t),s):0},enableOffscreenFramebufferAttributes:e=>{e.renderViaOffscreenBackBuffer=!0,e.preserveDrawingBuffer=!0},createOffscreenFramebuffer:e=>{var n,s,o,i,c,l,d,u,t=e.GLctx,a=t.createFramebuffer();t.bindFramebuffer(36160,a),e.defaultFbo=a,e.defaultFboForbidBlitFramebuffer=!1,t.getContextAttributes().antialias&&(e.defaultFboForbidBlitFramebuffer=!0),e.defaultColorTarget=t.createTexture(),e.defaultDepthTarget=t.createRenderbuffer(),r.resizeOffscreenFramebuffer(e),t.bindTexture(3553,e.defaultColorTarget),t.texParameteri(3553,10241,9728),t.texParameteri(3553,10240,9728),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.texImage2D(3553,0,6408,t.canvas.width,t.canvas.height,0,6408,5121,null),t.framebufferTexture2D(36160,36064,3553,e.defaultColorTarget,0),t.bindTexture(3553,null),u=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.canvas.width,t.canvas.height),t.framebufferRenderbuffer(36160,36096,36161,e.defaultDepthTarget),t.bindRenderbuffer(36161,null),c=[-1,-1,-1,1,1,-1,1,1],i=t.createBuffer(),t.bindBuffer(34962,i),t.bufferData(34962,new Float32Array(c),35044),t.bindBuffer(34962,null),e.blitVB=i,l="attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }",s=t.createShader(35633),t.shaderSource(s,l),t.compileShader(s),d="varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }",o=t.createShader(35632),t.shaderSource(o,d),t.compileShader(o),n=t.createProgram(),t.attachShader(n,s),t.attachShader(n,o),t.linkProgram(n),e.blitProgram=n,e.blitPosLoc=t.getAttribLocation(n,"pos"),t.useProgram(n),t.uniform1i(t.getUniformLocation(n,"sampler"),0),t.useProgram(null),e.defaultVao=void 0,t.createVertexArray&&(e.defaultVao=t.createVertexArray(),t.bindVertexArray(e.defaultVao),t.enableVertexAttribArray(e.blitPosLoc),t.bindVertexArray(null))},resizeOffscreenFramebuffer:e=>{var n,s,t=e.GLctx;e.defaultColorTarget&&(n=t.getParameter(32873),t.bindTexture(3553,e.defaultColorTarget),t.texImage2D(3553,0,6408,t.drawingBufferWidth,t.drawingBufferHeight,0,6408,5121,null),t.bindTexture(3553,n)),e.defaultDepthTarget&&(s=t.getParameter(36007),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.drawingBufferWidth,t.drawingBufferHeight),t.bindRenderbuffer(36161,s))},blitOffscreenFramebuffer:e=>{var n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,y,t=e.GLctx,b=t.getParameter(3089);if(b&&t.disable(3089),v=t.getParameter(36006),t.blitFramebuffer&&!e.defaultFboForbidBlitFramebuffer)t.bindFramebuffer(36008,e.defaultFbo),t.bindFramebuffer(36009,null),t.blitFramebuffer(0,0,t.canvas.width,t.canvas.height,0,0,t.canvas.width,t.canvas.height,16384,9728);else{t.bindFramebuffer(36160,null),g=t.getParameter(35725),t.useProgram(e.blitProgram),f=t.getParameter(34964),t.bindBuffer(34962,e.blitVB),p=t.getParameter(34016),t.activeTexture(33984),y=t.getParameter(32873),t.bindTexture(3553,e.defaultColorTarget),c=t.getParameter(3042),c&&t.disable(3042),l=t.getParameter(2884),l&&t.disable(2884),d=t.getParameter(2929),d&&t.disable(2929),u=t.getParameter(2960),u&&t.disable(2960);function j(){t.vertexAttribPointer(e.blitPosLoc,2,5126,!1,0,0),t.drawArrays(5,0,4)}if(e.defaultVao)m=t.getParameter(34229),t.bindVertexArray(e.defaultVao),j(),t.bindVertexArray(m);else{for(s={buffer:t.getVertexAttrib(e.blitPosLoc,34975),size:t.getVertexAttrib(e.blitPosLoc,34339),stride:t.getVertexAttrib(e.blitPosLoc,34340),type:t.getVertexAttrib(e.blitPosLoc,34341),normalized:t.getVertexAttrib(e.blitPosLoc,34922),pointer:t.getVertexAttribOffset(e.blitPosLoc,34373)},a=t.getParameter(34921),i=[],n=0;n<a;++n)o=t.getVertexAttrib(n,34338),h=n==e.blitPosLoc,o&&!h&&t.disableVertexAttribArray(n),!o&&h&&t.enableVertexAttribArray(n),i[n]=o;j();for(n=0;n<a;++n)o=i[n],r=n==e.blitPosLoc,o&&!r&&t.enableVertexAttribArray(n),!o&&r&&t.disableVertexAttribArray(n);t.bindBuffer(34962,s.buffer),t.vertexAttribPointer(e.blitPosLoc,s.size,s.type,s.normalized,s.stride,s.offset)}u&&t.enable(2960),d&&t.enable(2929),l&&t.enable(2884),c&&t.enable(3042),t.bindTexture(3553,y),t.activeTexture(p),t.bindBuffer(34962,f),t.useProgram(g)}t.bindFramebuffer(36160,v),b&&t.enable(3089)},registerContext:(e,t)=>{var s=r.getNewId(r.contexts),n={handle:s,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),r.contexts[s]=n,(typeof t.enableExtensionsByDefault=="undefined"||t.enableExtensionsByDefault)&&r.initExtensions(n),t.renderViaOffscreenBackBuffer&&r.createOffscreenFramebuffer(n),s},makeContextCurrent:e=>(r.currentContext=r.contexts[e],i.ctx=a=r.currentContext?.GLctx,!e||!!a),getContext:e=>r.contexts[e],deleteContext:e=>{r.currentContext===r.contexts[e]&&(r.currentContext=null),typeof _=="object"&&_.removeAllHandlersOnTarget(r.contexts[e].GLctx.canvas),r.contexts[e]&&r.contexts[e].GLctx.canvas&&(r.contexts[e].GLctx.canvas.GLctxObject=void 0),r.contexts[e]=null},initExtensions:e=>{if(e||=r.currentContext,e.initExtensionsDone)return;e.initExtensionsDone=!0;var t=e.GLctx;cn(t),an(t),on(t),sn(t),pt(t),e.version>=2&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),tn(t),Zt(t).forEach(e=>{!e.includes("lose_context")&&!e.includes("debug")&&t.getExtension(e)})}},Fn=()=>!r.currentContext||!r.currentContext.GLctx?-3:r.currentContext.defaultFbo?(r.blitOffscreenFramebuffer(r.currentContext),0):r.currentContext.attributes.explicitSwapControl?0:-3,Tn=Fn,Ee=()=>en||re>0,Gt=e=>{Ae=e,Ee()||(i.onExit?.(e),te=!0),$e(e,new kn(e))},Yt=(e,t)=>{if(Ae=e,Ee()||Jl(),Ee()&&!t){var n=`program exited (with status: ${e}), but keepRuntimeAlive() is set (counter=${re}) due to an async operation, so halting execution but not exiting the runtime or preventing further async execution (you can use emscripten_force_exit, if you want to force a true shutdown)`;ze(n),x(n)}Gt(e)},Ve=Yt,ft=e=>{if(e instanceof kn||e=="unwind")return Ae;de(),e instanceof WebAssembly.RuntimeError&&dt()<=0&&x("Stack overflow detected.  You can try increasing -sSTACK_SIZE (currently set to 5242880)"),$e(1,e)},Wt=()=>{if(ve)return;if(!Ee())try{Ve(Ae)}catch(e){ft(e)}},Me=()=>{u(re>0),re-=1},$t=(e,t,n,s,o)=>{u(!c.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),c.mainLoop.func=e,c.mainLoop.arg=s;var r=c.mainLoop.currentlyRunningMainloop;function a(){return!(r<c.mainLoop.currentlyRunningMainloop)||(Me(),Wt(),!1)}if(c.mainLoop.running=!1,c.mainLoop.runner=function(){if(te)return;if(c.mainLoop.queue.length>0){var n,s,r=Date.now(),o=c.mainLoop.queue.shift();if(o.func(o.arg),c.mainLoop.remainingBlockers&&(n=c.mainLoop.remainingBlockers,s=n%1==0?n-1:Math.floor(n),o.counted?c.mainLoop.remainingBlockers=s:(s=s+.5,c.mainLoop.remainingBlockers=(8*n+s)/9)),c.mainLoop.updateStatus(),!a())return;setTimeout(c.mainLoop.runner,0);return}if(!a())return;if(c.mainLoop.currentFrameNumber=c.mainLoop.currentFrameNumber+1|0,c.mainLoop.timingMode==1&&c.mainLoop.timingValue>1&&c.mainLoop.currentFrameNumber%c.mainLoop.timingValue!=0){c.mainLoop.scheduler();return}if(c.mainLoop.timingMode==0&&(c.mainLoop.tickStartTime=Xe()),c.mainLoop.method==="timeout"&&i.ctx&&(G("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),c.mainLoop.method=""),c.mainLoop.runIter(e),de(),!a())return;typeof SDL=="object"&&SDL.audio?.queueNewAudioData?.(),c.mainLoop.scheduler()},o||(t&&t>0?qe(0,1e3/t):qe(1,1),c.mainLoop.scheduler()),n)throw"unwind"},nt=e=>{if(ve||te){x("user callback triggered after runtime exited or application aborted.  Ignoring.");return}try{e(),Wt()}catch(e){ft(e)}},Bt=(e,t)=>(He(),setTimeout(()=>{Me(),nt(e)},t)),c={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause(){c.mainLoop.scheduler=null,c.mainLoop.currentlyRunningMainloop++},resume(){c.mainLoop.currentlyRunningMainloop++;var e=c.mainLoop.timingMode,t=c.mainLoop.timingValue,n=c.mainLoop.func;c.mainLoop.func=null,$t(n,0,!1,c.mainLoop.arg,!0),qe(e,t),c.mainLoop.scheduler()},updateStatus(){if(i.setStatus){var t=i.statusMessage||"Please wait...",e=c.mainLoop.remainingBlockers,n=c.mainLoop.expectedBlockers;e?e<n?i.setStatus(`{message} ({expected - remaining}/{expected})`):i.setStatus(t):i.setStatus("")}},runIter(e){if(te)return;if(i.preMainLoop){var t=i.preMainLoop();if(t===!1)return}nt(e),i.postMainLoop?.()}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init(){if(c.initted)return;c.initted=!0;var e,t,s={};s.canHandle=function(t){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},s.handle=function(t,n,s,o){var i,a,r=new Blob([t],{type:c.getMimetype(n)});r.size!==t.length&&(r=new Blob([new Uint8Array(t).buffer],{type:c.getMimetype(n)})),a=URL.createObjectURL(r),u(typeof a=="string","createObjectURL must return a url as a string"),i=new Image,i.onload=()=>{u(i.complete,`Image ${n} could not be decoded`);var o,e=document.createElement("canvas");e.width=i.width,e.height=i.height,o=e.getContext("2d"),o.drawImage(i,0,0),Uo[n]=e,URL.revokeObjectURL(a),s?.(t)},i.onerror=e=>{x(`Image ${a} could not be decoded`),o?.()},i.src=a},Be.push(s),t={},t.canHandle=function(t){return!i.noAudioDecoding&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},t.handle=function(t,n,s){var i,l,d,a=!1;function r(e){if(a)return;a=!0,ni[n]=e,s?.(t)}d=new Blob([t],{type:c.getMimetype(n)}),l=URL.createObjectURL(d),u(typeof l=="string","createObjectURL must return a url as a string"),i=new Audio,i.addEventListener("canplaythrough",()=>r(i),!1),i.onerror=function(){if(a)return;x(`warning: browser could not fully decode audio ${n}, trying slower base64 approach`);function o(e){for(var r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="=",t="",s=0,n=0,a=0;a<e.length;a++)for(s=s<<8|e[a],n+=8;n>=6;)r=s>>n-6&63,n-=6,t+=o[r];return n==2?(t+=o[(s&3)<<4],t+=i+i):n==4&&(t+=o[(s&15)<<2],t+=i),t}i.src="data:audio/x-"+n.substr(-3)+";base64,"+o(t),r(i)},i.src=l,Bt(()=>{r(i)},1e4)},Be.push(t);function n(){c.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}e=i.canvas,e&&(e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock||e.msRequestPointerLock||(()=>{}),e.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),e.exitPointerLock=e.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),i.elementPointerLock&&e.addEventListener("click",e=>{!c.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),e.preventDefault())},!1))},createContext(e,t,n,s){if(t&&i.ctx&&e==i.canvas)return i.ctx;if(t){var o,l,h,d={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1};if(s)for(h in s)d[h]=s[h];typeof r!="undefined"&&(l=r.createContext(e,d),l&&(o=r.getContext(l).GLctx))}else o=e.getContext("2d");return o?(n&&(t||u(typeof a=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=o,t&&r.makeContextCurrent(l),i.useWebGL=t,c.moduleContextCreatedCallbacks.forEach(e=>e()),c.init()),o):null},destroyContext(){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,t){c.lockPointer=e,c.resizeCanvas=t,typeof c.lockPointer=="undefined"&&(c.lockPointer=!0),typeof c.resizeCanvas=="undefined"&&(c.resizeCanvas=!1);var n,s=i.canvas;function o(){c.isFullscreen=!1;var e=s.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(s.exitFullscreen=c.exitFullscreen,c.lockPointer&&s.requestPointerLock(),c.isFullscreen=!0,c.resizeCanvas?c.setFullscreenCanvasSize():c.updateCanvasDimensions(s)):(e.parentNode.insertBefore(s,e),e.parentNode.removeChild(e),c.resizeCanvas?c.setWindowedCanvasSize():c.updateCanvasDimensions(s)),i.onFullScreen?.(c.isFullscreen),i.onFullscreen?.(c.isFullscreen)}c.fullscreenHandlersInstalled||(c.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("webkitfullscreenchange",o,!1),document.addEventListener("MSFullscreenChange",o,!1)),n=document.createElement("div"),s.parentNode.insertBefore(n,s),n.appendChild(s),n.requestFullscreen=n.requestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen||(n.webkitRequestFullscreen?()=>n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(n.webkitRequestFullScreen?()=>n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),n.requestFullscreen()},requestFullScreen(){A("Module.requestFullScreen has been replaced by Module.requestFullscreen (without a capital S)")},exitFullscreen(){if(!c.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame(e){var n,t=Date.now();if(c.nextRAF===0)c.nextRAF=t+1e3/60;else for(;t+2>=c.nextRAF;)c.nextRAF+=1e3/60;n=Math.max(c.nextRAF-t,0),setTimeout(e,n)},requestAnimationFrame(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var t=c.fakeRequestAnimationFrame;t(e)},safeSetTimeout(e,t){return Bt(e,t)},safeRequestAnimationFrame(e){return He(),c.requestAnimationFrame(()=>{Me(),nt(e)})},getMimetype(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia(e){window.getUserMedia||=navigator.getUserMedia||navigator.mozGetUserMedia,window.getUserMedia(e)},getMovementX(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseCoords(e,t){var s,o,n=i.canvas.getBoundingClientRect(),c=i.canvas.width,l=i.canvas.height,a=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,r=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset;return u(typeof a!="undefined"&&typeof r!="undefined","Unable to retrieve scroll position, mouse positions likely broken."),s=e-(a+n.left),o=t-(r+n.top),s=s*(c/n.width),o=o*(l/n.height),{x:s,y:o}},setMouseCoords(e,t){const{x:n,y:s}=c.calculateMouseCoords(e,t);c.mouseMovementX=n-c.mouseX,c.mouseMovementY=s-c.mouseY,c.mouseX=n,c.mouseY=s},calculateMouseEvent(e){if(c.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?c.mouseMovementX=c.mouseMovementY=0:(c.mouseMovementX=c.getMovementX(e),c.mouseMovementY=c.getMovementY(e)),c.mouseX+=c.mouseMovementX,c.mouseY+=c.mouseMovementY;else{if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var n,s,t=e.touch;if(t===void 0)return;n=c.calculateMouseCoords(t.pageX,t.pageY),e.type==="touchstart"?(c.lastTouches[t.identifier]=n,c.touches[t.identifier]=n):(e.type==="touchend"||e.type==="touchmove")&&(s=c.touches[t.identifier],s||=n,c.lastTouches[t.identifier]=s,c.touches[t.identifier]=n);return}c.setMouseCoords(e.pageX,e.pageY)}},resizeListeners:[],updateResizeListeners(){var e=i.canvas;c.resizeListeners.forEach(t=>t(e.width,e.height))},setCanvasSize(e,t,n){var s=i.canvas;c.updateCanvasDimensions(s,e,t),n||c.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL!="undefined"){var e=g[SDL.screen>>2],e=e|8388608;l[SDL.screen>>2]=e}c.updateCanvasDimensions(i.canvas),c.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL!="undefined"){var e=g[SDL.screen>>2],e=e&~8388608;l[SDL.screen>>2]=e}c.updateCanvasDimensions(i.canvas),c.updateResizeListeners()},updateCanvasDimensions(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var a,s=t,o=n;i.forcedAspectRatio&&i.forcedAspectRatio>0&&(s/o<i.forcedAspectRatio?s=Math.round(o*i.forcedAspectRatio):o=Math.round(s/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen!="undefined"&&(a=Math.min(screen.width/s,screen.height/o),s=Math.round(s*a),o=Math.round(o*a)),c.resizeCanvas?(e.width!=s&&(e.width=s),e.height!=o&&(e.height=o),typeof e.style!="undefined"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),typeof e.style!="undefined"&&(s!=t||o!=n?(e.style.setProperty("width",s+"px","important"),e.style.setProperty("height",o+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},Wn=()=>{c.mainLoop.pause(),c.mainLoop.func=null},Un=()=>Date.now(),Kn=e=>x(L(e)),qn=e=>{gt(),Ve(e)},Yn=()=>2147483648,Gn=e=>{var t=Le.buffer,n=(e-t.byteLength+65535)/65536;try{return Le.grow(n),Cs(),1}catch(n){x(`growMemory: Attempted to grow heap from ${t.byteLength} bytes to ${e} bytes, but got error: ${n}`)}},Xn=e=>{var t,n,s,i,a,r,o=z.length;if(e>>>=0,u(e>o),t=Yn(),e>t)return x(`Cannot enlarge memory, requested ${e} bytes, but the limit is ${t} bytes!`),!1;for(a=(e,t)=>e+(t-e%t)%t,n=1;n<=4;n*=2)if(s=o*(1+.2/n),s=Math.min(s,e+100663296),i=Math.min(t,a(Math.max(e,s),65536)),r=Gn(i),r)return!0;return x(`Failed to grow the heap from ${o} bytes to ${i} bytes, not enough memory!`),!1},_={removeAllEventListeners(){for(;_.eventHandlers.length;)_._removeHandler(_.eventHandlers.length-1);_.deferredCalls=[]},registerRemoveEventListeners(){_.removeEventListenersRegistered||(Rt.push(_.removeAllEventListeners),_.removeEventListenersRegistered=!0)},inEventHandler:0,deferredCalls:[],deferCall(e,t,n){function o(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var s of _.deferredCalls)if(s.targetFunction==e&&o(s.argsList,n))return;_.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),_.deferredCalls.sort((e,t)=>e.precedence<t.precedence)},removeDeferredCalls(e){_.deferredCalls=_.deferredCalls.filter(t=>t.targetFunction!=e)},canPerformEventHandlerRequests(){return navigator.userActivation?navigator.userActivation.isActive:_.inEventHandler&&_.currentEventHandler.allowsDeferredCalls},runDeferredCalls(){if(!_.canPerformEventHandlerRequests())return;var e,t=_.deferredCalls;_.deferredCalls=[];for(e of t)e.targetFunction(...e.argsList)},eventHandlers:[],removeAllHandlersOnTarget:(e,t)=>{for(var n=0;n<_.eventHandlers.length;++n)_.eventHandlers[n].target==e&&(!t||t==_.eventHandlers[n].eventTypeString)&&_._removeHandler(n--)},_removeHandler(e){var t=_.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),_.eventHandlers.splice(e,1)},registerOrRemoveHandler(e){if(!e.target)return x("registerOrRemoveHandler: the target element for event handler registration does not exist, when processing the following event handler registration:"),console.dir(e),-4;if(e.callbackfunc)e.eventListenerFunc=function(t){++_.inEventHandler,_.currentEventHandler=e,_.runDeferredCalls(),e.handlerFunc(t),_.runDeferredCalls(),--_.inEventHandler},e.target.addEventListener(e.eventTypeString,e.eventListenerFunc,e.useCapture),_.eventHandlers.push(e),_.registerRemoveEventListeners();else for(var t=0;t<_.eventHandlers.length;++t)_.eventHandlers[t].target==e.target&&_.eventHandlers[t].eventTypeString==e.eventTypeString&&_._removeHandler(t--);return 0},getNodeNameForTarget(e){return e?e==window?"#window":e==screen?"#screen":e?.nodeName||"":""},fullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},Zn=e=>e>2?L(e):e,Jn=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0],es=e=>{e=Zn(e);var t=Jn[e]||(typeof document!="undefined"?document.querySelector(e):void 0);return t},Ht=es,ns=(e,t,n)=>{var s=Ht(e);return s?(s.width=t,s.height=n,s.GLctxObject&&r.resizeOffscreenFramebuffer(s.GLctxObject),0):-4},ss=(e,t,n)=>{var s=Qt(e);$t(s,t,n)},os=["default","low-power","high-performance"],is=(e,t)=>{u(t);var i,n=t>>2,a=l[n+(8>>2)],s={alpha:!!b[t+0],depth:!!b[t+1],stencil:!!b[t+2],antialias:!!b[t+3],premultipliedAlpha:!!b[t+4],preserveDrawingBuffer:!!b[t+5],powerPreference:os[a],failIfMajorPerformanceCaveat:!!b[t+12],majorVersion:l[n+(16>>2)],minorVersion:l[n+(20>>2)],enableExtensionsByDefault:b[t+24],explicitSwapControl:b[t+25],proxyContextToMainThread:l[n+(28>>2)],renderViaOffscreenBackBuffer:b[t+32]},o=Ht(e);return o?(s.explicitSwapControl&&!s.renderViaOffscreenBackBuffer&&(s.renderViaOffscreenBackBuffer=!0),i=r.createContext(o,s),i):0},rs=is,cs=e=>{r.currentContext==e&&(r.currentContext=0),r.deleteContext(e)},ls=(e,t)=>{var s,o=r.getContext(e),n=L(t);return n.startsWith("GL_")&&(n=n.substr(3)),n=="ANGLE_instanced_arrays"&&cn(a),n=="OES_vertex_array_object"&&an(a),n=="WEBGL_draw_buffers"&&on(a),n=="WEBGL_draw_instanced_base_vertex_base_instance"&&sn(a),n=="WEBGL_multi_draw_instanced_base_vertex_base_instance"&&pt(a),n=="WEBGL_multi_draw"&&tn(a),s=o.GLctx.getExtension(n),!!s},je=e=>{var n=Q(e)+1,t=Fe(n);return t&&H(e,t,n),t},us=()=>je(a.getSupportedExtensions().join(" ")),hs=e=>{var t=r.makeContextCurrent(e);return t?0:-5},Ue={},fs=()=>it||"./this.program",ge=()=>{if(!ge.strings){var e,n,s=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:s,_:fs()};for(e in Ue)Ue[e]===void 0?delete t[e]:t[e]=Ue[e];n=[];for(e in t)n.push(`${e}=${t[e]}`);ge.strings=n}return ge.strings},gs=(e,t)=>{for(var n=0;n<e.length;++n)u(e.charCodeAt(n)===(e.charCodeAt(n)&255)),b[t++]=e.charCodeAt(n);b[t]=0},vs=(e,t)=>{var n=0;return ge().forEach((s,o)=>{var i=t+n;g[e+o*4>>2]=i,gs(s,i),n+=s.length+1}),0},bs=(e,t)=>{var n,s=ge();return g[e>>2]=s.length,n=0,s.forEach(e=>n+=e.length+1),g[t>>2]=n,0};function za(e){try{var t=f.getStreamFromFD(e);return n.close(t),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function Ta(e,t){try{var r=0,o=0,i=0,s=f.getStreamFromFD(e),a=s.tty?2:n.isDir(s.mode)?3:n.isLink(s.mode)?7:4;return b[t]=a,P[t+2>>1]=i,W[t+8>>3]=BigInt(r),W[t+16>>3]=BigInt(o),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}_s=(e,t,s,o)=>{for(var i,a,l,r=0,c=0;c<s;c++){if(l=g[t>>2],a=g[t+4>>2],t+=8,i=n.read(e,b,l,a,o),i<0)return-1;if(r+=i,i<a)break;typeof o!="undefined"&&(o+=i)}return r};function Fa(e,t,s,o){try{var a=f.getStreamFromFD(e),i=_s(a,t,s);return g[o>>2]=i,0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function Ma(e,t,s,o){t=Re(t);try{if(isNaN(t))return 61;var i=f.getStreamFromFD(e);return n.llseek(i,t,s),W[o>>3]=BigInt(i.position),i.getdents&&t===0&&s===0&&(i.getdents=null),0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}xs=(e,t,s,o)=>{for(var i,c,l,a=0,r=0;r<s;r++){if(c=g[t>>2],l=g[t+4>>2],t+=8,i=n.write(e,b,c,l,o),i<0)return-1;a+=i,typeof o!="undefined"&&(o+=i)}return a};function Sa(e,t,s,o){try{var a=f.getStreamFromFD(e),i=xs(a,t,s);return g[o>>2]=i,0}catch(e){if(typeof n=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}Es=(e,t,n,s)=>{var d,i=0,h=0,c=0,o=0,a=0,r=0;function m(e,t,n,s,o,i){var a,r,c,d=e===10?28:16;return o=e===10?_t(o):ot(o),r=Fe(d),c=De(r,e,o,i),u(!c),a=Fe(32),l[a+4>>2]=e,l[a+8>>2]=t,l[a+12>>2]=n,g[a+24>>2]=s,g[a+20>>2]=r,e===10?l[a+16>>2]=28:l[a+16>>2]=16,l[a+28>>2]=0,a}if(n&&(c=l[n>>2],o=l[n+4>>2],a=l[n+8>>2],r=l[n+12>>2]),a&&!r&&(r=a===2?17:6),!a&&r&&(a=r===17?2:1),r===0&&(r=6),a===0&&(a=1),!e&&!t)return-2;if(c&~(1|2|4|1024|8|16|32))return-1;if(n!==0&&l[n>>2]&2&&!e)return-1;if(c&32)return-2;if(a!==0&&a!==1&&a!==2)return-7;if(o!==0&&o!==2&&o!==10)return-6;if(t&&(t=L(t),h=parseInt(t,10),isNaN(h)))return c&1024?-2:-8;if(!e)return o===0&&(o=2),(c&1)===0&&(o===2?i=mt(2130706433):i=[0,0,0,1]),d=m(o,a,r,null,i,h),g[s>>2]=d,0;if(e=L(e),i=ke(e),i!==null)if(o===0||o===2)o=2;else if(o===10&&c&8)i=[0,0,mt(65535),i],o=10;else return-2;else if(i=ut(e),i!==null)if(o===0||o===10)o=10;else return-2;return i!=null?(d=m(o,a,r,e,i,h),g[s>>2]=d,0):c&4?-2:(e=V.lookup_name(e),i=ke(e),o===0?o=2:o===10&&(i=[0,0,mt(65535),i]),d=m(o,a,r,null,i,h),g[s>>2]=d,0)},ks=(e,t,n,s,o,i,a)=>{var r,c,l,d,h,u=wt(e,t);if(u.errno)return-6;if(r=u.port,c=u.addr,l=!1,n&&s){if(a&1||!(h=V.lookup_addr(c))){if(a&8)return-2}else c=h;d=H(c,n,s),d+1>=s&&(l=!0)}return o&&i&&(r=""+r,d=H(r,o,i),d+1>=i&&(l=!0)),l?-12:0},As=e=>a.activeTexture(e),Ss=(e,t)=>{a.attachShader(r.programs[e],r.shaders[t])},Ms=e=>a.beginTransformFeedback(e),Fs=(e,t)=>{e==35051?a.currentPixelPackBufferBinding=t:e==35052&&(a.currentPixelUnpackBufferBinding=t),a.bindBuffer(e,r.buffers[t])},Ts=(e,t,n)=>{a.bindBufferBase(e,t,r.buffers[n])},zs=(e,t,n,s,o)=>{a.bindBufferRange(e,t,r.buffers[n],s,o)},dn=(e,t)=>{a.bindFramebuffer(e,t?r.framebuffers[t]:r.currentContext.defaultFbo)},Ns=(e,t)=>{a.bindRenderbuffer(e,r.renderbuffers[t])},Ls=(e,t)=>{a.bindTexture(e,r.textures[t])},Rs=e=>{a.bindVertexArray(r.vaos[e])},Ps=(e,t,n,s)=>a.blendColor(e,t,n,s),Hs=e=>a.blendEquation(e),Is=(e,t)=>a.blendFunc(e,t),Bs=(e,t,n,s)=>a.blendFuncSeparate(e,t,n,s),Vs=(e,t,n,s,o,i,r,c,l,d)=>a.blitFramebuffer(e,t,n,s,o,i,r,c,l,d),$s=(e,t,n,s)=>{if(r.currentContext.version>=2){n&&t?a.bufferData(e,z,s,n,t):a.bufferData(e,t,s);return}a.bufferData(e,n?z.subarray(n,n+t):t,s)},Ws=(e,t,n,s)=>{if(r.currentContext.version>=2){n&&a.bufferSubData(e,t,z,s,n);return}a.bufferSubData(e,t,z.subarray(s,s+n))},Us=e=>a.checkFramebufferStatus(e),Ks=e=>a.clear(e),qs=(e,t,n)=>{a.clearBufferfv(e,t,v,n>>2)},Ys=(e,t,n,s)=>a.clearColor(e,t,n,s),Gs=e=>a.clearDepth(e),Xs=(e,t,n,s)=>{a.colorMask(!!e,!!t,!!n,!!s)},Qs=e=>{a.compileShader(r.shaders[e])},Zs=(e,t,n,s,o,i,c,l)=>{if(r.currentContext.version>=2){if(a.currentPixelUnpackBufferBinding||!c){a.compressedTexImage2D(e,t,n,s,o,i,c,l);return}a.compressedTexImage2D(e,t,n,s,o,i,z,l,c);return}a.compressedTexImage2D(e,t,n,s,o,i,l?z.subarray(l,l+c):null)},Js=(e,t,n,s,o,i,r,c,l)=>{a.currentPixelUnpackBufferBinding?a.compressedTexImage3D(e,t,n,s,o,i,r,c,l):a.compressedTexImage3D(e,t,n,s,o,i,r,z,l,c)},eo=(e,t,n,s,o,i,r,c,l,d,u)=>{a.currentPixelUnpackBufferBinding?a.compressedTexSubImage3D(e,t,n,s,o,i,r,c,l,d,u):a.compressedTexSubImage3D(e,t,n,s,o,i,r,c,l,z,u,d)},to=(e,t,n,s,o)=>a.copyBufferSubData(e,t,n,s,o),no=()=>{var t=r.getNewId(r.programs),e=a.createProgram();return e.name=t,e.maxUniformLength=e.maxAttributeLength=e.maxUniformBlockNameLength=0,e.uniformIdCounter=1,r.programs[t]=e,t},so=e=>{var t=r.getNewId(r.shaders);return r.shaders[t]=a.createShader(e),t},un=e=>a.cullFace(e),io=(e,t)=>{for(var n,s,o=0;o<e;o++){if(n=l[t+o*4>>2],s=r.buffers[n],!s)continue;a.deleteBuffer(s),s.name=0,r.buffers[n]=null,n==a.currentPixelPackBufferBinding&&(a.currentPixelPackBufferBinding=0),n==a.currentPixelUnpackBufferBinding&&(a.currentPixelUnpackBufferBinding=0)}},ao=(e,t)=>{for(var n,o,s=0;s<e;++s){if(o=l[t+s*4>>2],n=r.framebuffers[o],!n)continue;a.deleteFramebuffer(n),n.name=0,r.framebuffers[o]=null}},ro=e=>{if(!e)return;var t=r.programs[e];if(!t){r.recordError(1281);return}a.deleteProgram(t),t.name=0,r.programs[e]=null},co=(e,t)=>{for(var s,o,n=0;n<e;n++){if(s=l[t+n*4>>2],o=r.queries[s],!o)continue;a.deleteQuery(o),r.queries[s]=null}},lo=(e,t)=>{for(var n,o,s=0;s<e;s++){if(o=l[t+s*4>>2],n=r.renderbuffers[o],!n)continue;a.deleteRenderbuffer(n),n.name=0,r.renderbuffers[o]=null}},uo=e=>{if(!e)return;var t=r.shaders[e];if(!t){r.recordError(1281);return}a.deleteShader(t),r.shaders[e]=null},ho=e=>{if(!e)return;var t=r.syncs[e];if(!t){r.recordError(1281);return}a.deleteSync(t),t.name=0,r.syncs[e]=null},mo=(e,t)=>{for(var n,o,s=0;s<e;s++){if(o=l[t+s*4>>2],n=r.textures[o],!n)continue;a.deleteTexture(n),n.name=0,r.textures[o]=null}},fo=(e,t)=>{for(var s,n=0;n<e;n++)s=l[t+n*4>>2],a.deleteVertexArray(r.vaos[s]),r.vaos[s]=null},po=e=>a.depthFunc(e),go=e=>{a.depthMask(!!e)},vo=e=>a.disable(e),bo=e=>{a.disableVertexAttribArray(e)},jo=(e,t,n)=>{a.drawArrays(e,t,n)},yo=(e,t,n,s)=>{a.drawArraysInstanced(e,t,n,s)},Nt=[],wo=(e,t)=>{for(var s=Nt[e],n=0;n<e;n++)s[n]=l[t+n*4>>2];a.drawBuffers(s)},Oo=(e,t,n,s)=>{a.drawElements(e,t,n,s)},xo=(e,t,n,s,o)=>{a.drawElementsInstanced(e,t,n,s,o)},Co=e=>a.enable(e),Eo=e=>{a.enableVertexAttribArray(e)},ko=()=>a.endTransformFeedback(),Ao=(e,t)=>{var n,s=a.fenceSync(e,t);return s?(n=r.getNewId(r.syncs),s.name=n,r.syncs[n]=s,n):0},So=()=>a.finish(),Mo=(e,t,n,s)=>{a.framebufferRenderbuffer(e,t,n,r.renderbuffers[s])},Fo=(e,t,n,s,o)=>{a.framebufferTexture2D(e,t,n,r.textures[s],o)},To=(e,t,n,s,o)=>{a.framebufferTextureLayer(e,t,r.textures[n],s,o)},zo=e=>a.frontFace(e),Do=(e,t)=>{r.genObject(e,t,"createBuffer",r.buffers)},No=(e,t)=>{r.genObject(e,t,"createFramebuffer",r.framebuffers)},Lo=(e,t)=>{r.genObject(e,t,"createQuery",r.queries)},Ro=(e,t)=>{r.genObject(e,t,"createRenderbuffer",r.renderbuffers)},Po=(e,t)=>{r.genObject(e,t,"createTexture",r.textures)},Ho=(e,t)=>{r.genObject(e,t,"createVertexArray",r.vaos)},Io=e=>a.generateMipmap(e),Bo=e=>g[e>>2]+l[e+4>>2]*4294967296,Vo=e=>g[e>>2]+g[e+4>>2]*4294967296,$o=(e,t)=>{g[e>>2]=t;var n,s,o=g[e>>2];g[e+4>>2]=(t-o)/4294967296,n=t>=0?Vo(e):Bo(e),s=e>>2,n!=t&&G(`writeI53ToI64() out of range: serialized JS Number ${t} to Wasm heap as bytes lo=${oe(g[s])}, hi=${oe(g[s+1])}, which deserializes back to ${n} instead!`)},Dt=function(){var t=Zt(a),t=t.concat(t.map(e=>"GL_"+e));return t},lt=(e,t,n)=>{if(!t){r.recordError(1281);return}var s,i,c,o=void 0;switch(e){case 36346:o=1;break;case 36344:n!=0&&n!=1&&r.recordError(1280);return;case 34814:case 36345:o=0;break;case 34466:c=a.getParameter(34467),o=c?c.length:0;break;case 33309:if(r.currentContext.version<2){r.recordError(1282);return}o=Dt().length;break;case 33307:case 33308:if(r.currentContext.version<2){r.recordError(1280);return}o=e==33307?3:0;break}if(o===void 0)switch(s=a.getParameter(e),typeof s){case"number":o=s;break;case"boolean":o=s?1:0;break;case"string":r.recordError(1280);return;case"object":if(s===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{o=0;break}default:{r.recordError(1280);return}}else if(s instanceof Float32Array||s instanceof Uint32Array||s instanceof Int32Array||s instanceof Array){for(i=0;i<s.length;++i)switch(n){case 0:l[t+i*4>>2]=s[i];break;case 2:v[t+i*4>>2]=s[i];break;case 4:b[t+i]=s[i]?1:0;break}return}else try{o=s.name|0}catch(t){r.recordError(1280),x(`GL_INVALID_ENUM in glGet${n}v: Unknown object returned from WebGL getParameter(${e})! (error: ${t})`);return}break;default:r.recordError(1280),x(`GL_INVALID_ENUM in glGet${n}v: Native code calling glGet${n}v(${e}) and it returns ${s} of type ${typeof s}!`);return}switch(n){case 1:$o(t,o);break;case 0:l[t>>2]=o;break;case 2:v[t>>2]=o;break;case 4:b[t]=o?1:0;break}},Ko=(e,t)=>lt(e,t,2),qo=(e,t)=>{lt(e,t,1)},Yo=(e,t)=>lt(e,t,0),Go=(e,t,n,s)=>{var i,o=a.getProgramInfoLog(r.programs[e]);o===null&&(o="(unknown error)"),i=t>0&&s?H(o,s,t):0,n&&(l[n>>2]=i)},Xo=(e,t,n)=>{if(!n){r.recordError(1281);return}if(e>=r.counter){r.recordError(1281);return}if(e=r.programs[e],t==35716){var s,o=a.getProgramInfoLog(e);o===null&&(o="(unknown error)"),l[n>>2]=o.length+1}else if(t==35719){if(!e.maxUniformLength)for(s=0;s<a.getProgramParameter(e,35718);++s)e.maxUniformLength=Math.max(e.maxUniformLength,a.getActiveUniform(e,s).name.length+1);l[n>>2]=e.maxUniformLength}else if(t==35722){if(!e.maxAttributeLength)for(s=0;s<a.getProgramParameter(e,35721);++s)e.maxAttributeLength=Math.max(e.maxAttributeLength,a.getActiveAttrib(e,s).name.length+1);l[n>>2]=e.maxAttributeLength}else if(t==35381){if(!e.maxUniformBlockNameLength)for(s=0;s<a.getProgramParameter(e,35382);++s)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,a.getActiveUniformBlockName(e,s).length+1);l[n>>2]=e.maxUniformBlockNameLength}else l[n>>2]=a.getProgramParameter(e,t)},Qo=(e,t,n,s)=>{var i,o=a.getShaderInfoLog(r.shaders[e]);o===null&&(o="(unknown error)"),i=t>0&&s?H(o,s,t):0,n&&(l[n>>2]=i)},Zo=(e,t,n)=>{if(!n){r.recordError(1281);return}if(t==35716){var o,i,c,s=a.getShaderInfoLog(r.shaders[e]);s===null&&(s="(unknown error)"),i=s?s.length+1:0,l[n>>2]=i}else t==35720?(o=a.getShaderSource(r.shaders[e]),c=o?o.length+1:0,l[n>>2]=c):l[n>>2]=a.getShaderParameter(r.shaders[e],t)},Jo=e=>{var n,s,o,i,c,t=r.stringCache[e];if(!t){switch(e){case 7939:t=je(Dt().join(" "));break;case 7936:case 7937:case 37445:case 37446:i=a.getParameter(e),i||r.recordError(1280),t=i?je(i):0;break;case 7938:n=a.getParameter(7938),r.currentContext.version>=2?n=`OpenGL ES 3.0 (${n})`:n=`OpenGL ES 2.0 (${n})`,t=je(n);break;case 35724:o=a.getParameter(35724),c=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,s=o.match(c),s!==null&&(s[1].length==3&&(s[1]=s[1]+"0"),o=`OpenGL ES GLSL ES ${s[1]} (${o})`),t=je(o);break;default:r.recordError(1280)}r.stringCache[e]=t}return t},ei=(e,t,n,s,o)=>{if(n<0){r.recordError(1281);return}if(!o){r.recordError(1281);return}var i=a.getSyncParameter(r.syncs[e],t);i!==null&&(l[o>>2]=i,s&&(l[s>>2]=1))},ti=(e,t)=>a.getUniformBlockIndex(r.programs[e],L(t)),Tt=e=>e.slice(-1)=="]"&&e.lastIndexOf("["),si=e=>{var t,n,s,o,i,c,l,d,r=e.uniformLocsById,u=e.uniformSizeAndIdsByName;if(!r){e.uniformLocsById=r={},e.uniformArrayNamesById={};for(t=0;t<a.getProgramParameter(e,35718);++t){c=a.getActiveUniform(e,t),s=c.name,o=c.size,l=Tt(s),d=l>0?s.slice(0,l):s,i=e.uniformIdCounter,e.uniformIdCounter+=o,u[d]=[o,i];for(n=0;n<o;++n)r[i]=n,e.uniformArrayNamesById[i++]=d}}},oi=(e,t)=>{if(t=L(t),e=r.programs[e]){{si(e);var s,i=e.uniformLocsById,n=0,c=t,o=Tt(t);if(o>0&&(n=Oe(t.slice(o+1))>>>0,c=t.slice(0,o)),s=e.uniformSizeAndIdsByName[c],s&&n<s[0]&&(n+=s[1],i[n]=i[n]||a.getUniformLocation(e,t)))return n}}else r.recordError(1281);return-1},ii=e=>{e=r.programs[e],a.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},ai=(e,t)=>{e==3317?r.unpackAlignment=t:e==3314&&(r.unpackRowLength=t),a.pixelStorei(e,t)},ri=e=>a.readBuffer(e),ci=(e,t,n)=>{function s(e,t){return e+t-1&-t}var o=(r.unpackRowLength||e)*n,i=s(o,r.unpackAlignment);return t*i},li=e=>{var t={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return t[e-6402]||1},xe=e=>(e-=5120,e==0?b:e==1?z:e==2?P:e==4?l:e==6?v:e==5||e==28922||e==28520||e==30779||e==30782?g:St),me=(e,t)=>e>>>31-Math.clz32(t.BYTES_PER_ELEMENT),At=(e,t,n,s,o)=>{var a=xe(e),r=li(t)*a.BYTES_PER_ELEMENT,c=ci(n,s,r);return a.subarray(me(o,a),me(o+c,a))},mi=(e,t,n,s,o,i,c)=>{if(r.currentContext.version>=2){if(a.currentPixelPackBufferBinding){a.readPixels(e,t,n,s,o,i,c);return}var l,d=xe(i),u=me(c,d);a.readPixels(e,t,n,s,o,i,d,u);return}if(l=At(i,o,n,s,c,o),!l){r.recordError(1280);return}a.readPixels(e,t,n,s,o,i,l)},fi=(e,t,n,s)=>a.renderbufferStorage(e,t,n,s),pi=(e,t,n,s,o)=>a.renderbufferStorageMultisample(e,t,n,s,o),gi=(e,t,n,s)=>a.scissor(e,t,n,s),vi=(e,t,n,s)=>{var o=r.getSource(e,t,n,s);a.shaderSource(r.shaders[e],o)},bi=(e,t,n,s,o,i,c,l,d)=>{if(r.currentContext.version>=2){if(a.currentPixelUnpackBufferBinding){a.texImage2D(e,t,n,s,o,i,c,l,d);return}if(d){var h,u=xe(l),m=me(d,u);a.texImage2D(e,t,n,s,o,i,c,l,u,m);return}}h=d?At(l,c,s,o,d,n):null,a.texImage2D(e,t,n,s,o,i,c,l,h)},ji=(e,t,n,s,o,i,r,c,l,d)=>{if(a.currentPixelUnpackBufferBinding)a.texImage3D(e,t,n,s,o,i,r,c,l,d);else if(d){var u=xe(l);a.texImage3D(e,t,n,s,o,i,r,c,l,u,me(d,u))}else a.texImage3D(e,t,n,s,o,i,r,c,l,null)},yi=(e,t,n)=>a.texParameterf(e,t,n),_i=(e,t,n)=>a.texParameteri(e,t,n),wi=(e,t,n,s,o)=>a.texStorage2D(e,t,n,s,o),Oi=(e,t,n,s,o,i,r,c,l,d,u)=>{if(a.currentPixelUnpackBufferBinding)a.texSubImage3D(e,t,n,s,o,i,r,c,l,d,u);else if(u){var h=xe(d);a.texSubImage3D(e,t,n,s,o,i,r,c,l,d,h,me(u,h))}else a.texSubImage3D(e,t,n,s,o,i,r,c,l,d,null)},xi=(e,t,n,s)=>{e=r.programs[e];for(var i=[],o=0;o<t;o++)i.push(L(l[n+o*4>>2]));a.transformFeedbackVaryings(e,i,s)},D=e=>{var t,n=a.currentProgram;if(n)return t=n.uniformLocsById[e],typeof t=="number"&&(n.uniformLocsById[e]=t=a.getUniformLocation(n,n.uniformArrayNamesById[e]+(t>0?`[${t}]`:""))),t;r.recordError(1282)},Ei=(e,t)=>{a.uniform1f(D(e),t)},ki=(e,t)=>{a.uniform1i(D(e),t)},rt=[],Si=(e,t,n)=>{if(r.currentContext.version>=2){t&&a.uniform1iv(D(e),l,n>>2,t);return}if(t<=288)for(var o=rt[t],s=0;s<t;++s)o[s]=l[n+4*s>>2];else o=l.subarray(n>>2,n+t*4>>2);a.uniform1iv(D(e),o)},Mi=(e,t)=>{a.uniform1ui(D(e),t)},Fi=(e,t,n)=>{t&&a.uniform1uiv(D(e),g,n>>2,t)},Ti=(e,t,n)=>{a.uniform2f(D(e),t,n)},ue=[],Di=(e,t,n)=>{if(r.currentContext.version>=2){t&&a.uniform2fv(D(e),v,n>>2,t*2);return}if(t<=144)for(var o=ue[2*t],s=0;s<2*t;s+=2)o[s]=v[n+4*s>>2],o[s+1]=v[n+(4*s+4)>>2];else o=v.subarray(n>>2,n+t*8>>2);a.uniform2fv(D(e),o)},Ni=(e,t,n)=>{if(r.currentContext.version>=2){t&&a.uniform2iv(D(e),l,n>>2,t*2);return}if(t<=144)for(var o=rt[2*t],s=0;s<2*t;s+=2)o[s]=l[n+4*s>>2],o[s+1]=l[n+(4*s+4)>>2];else o=l.subarray(n>>2,n+t*8>>2);a.uniform2iv(D(e),o)},Li=(e,t,n)=>{if(r.currentContext.version>=2){t&&a.uniform3fv(D(e),v,n>>2,t*3);return}if(t<=96)for(var o=ue[3*t],s=0;s<3*t;s+=3)o[s]=v[n+4*s>>2],o[s+1]=v[n+(4*s+4)>>2],o[s+2]=v[n+(4*s+8)>>2];else o=v.subarray(n>>2,n+t*12>>2);a.uniform3fv(D(e),o)},Ri=(e,t,n,s,o)=>{a.uniform4f(D(e),t,n,s,o)},Pi=(e,t,n)=>{if(r.currentContext.version>=2){t&&a.uniform4fv(D(e),v,n>>2,t*4);return}if(t<=72){var s,i,o=ue[4*t],c=v;n=n>>2;for(s=0;s<4*t;s+=4)i=n+s,o[s]=c[i],o[s+1]=c[i+1],o[s+2]=c[i+2],o[s+3]=c[i+3]}else o=v.subarray(n>>2,n+t*16>>2);a.uniform4fv(D(e),o)},Hi=(e,t,n)=>{e=r.programs[e],a.uniformBlockBinding(e,t,n)},Ii=(e,t,n,s)=>{if(r.currentContext.version>=2){t&&a.uniformMatrix3fv(D(e),!!n,v,s>>2,t*9);return}if(t<=32)for(var i=ue[9*t],o=0;o<9*t;o+=9)i[o]=v[s+4*o>>2],i[o+1]=v[s+(4*o+4)>>2],i[o+2]=v[s+(4*o+8)>>2],i[o+3]=v[s+(4*o+12)>>2],i[o+4]=v[s+(4*o+16)>>2],i[o+5]=v[s+(4*o+20)>>2],i[o+6]=v[s+(4*o+24)>>2],i[o+7]=v[s+(4*o+28)>>2],i[o+8]=v[s+(4*o+32)>>2];else i=v.subarray(s>>2,s+t*36>>2);a.uniformMatrix3fv(D(e),!!n,i)},Bi=(e,t,n,s)=>{if(r.currentContext.version>=2){t&&a.uniformMatrix4fv(D(e),!!n,v,s>>2,t*16);return}if(t<=18){var o,c,i=ue[16*t],l=v;s=s>>2;for(o=0;o<16*t;o+=16)c=s+o,i[o]=l[c],i[o+1]=l[c+1],i[o+2]=l[c+2],i[o+3]=l[c+3],i[o+4]=l[c+4],i[o+5]=l[c+5],i[o+6]=l[c+6],i[o+7]=l[c+7],i[o+8]=l[c+8],i[o+9]=l[c+9],i[o+10]=l[c+10],i[o+11]=l[c+11],i[o+12]=l[c+12],i[o+13]=l[c+13],i[o+14]=l[c+14],i[o+15]=l[c+15]}else i=v.subarray(s>>2,s+t*64>>2);a.uniformMatrix4fv(D(e),!!n,i)},Vi=e=>{e=r.programs[e],a.useProgram(e),a.currentProgram=e},$i=(e,t,n,s,o)=>a.vertexAttrib4f(e,t,n,s,o),Wi=(e,t)=>{a.vertexAttribDivisor(e,t)},Ui=(e,t,n,s,o)=>a.vertexAttribI4ui(e,t,n,s,o),Ki=(e,t,n,s,o)=>{a.vertexAttribIPointer(e,t,n,s,o)},qi=(e,t,n,s,o,i)=>{a.vertexAttribPointer(e,t,n,!!s,o,i)},Yi=(e,t,n,s)=>a.viewport(e,t,n,s),s={get_func:function(e){return Ye.get(e)},error:function(){x.apply(null,Array.from(arguments))},print:function(){Te.apply(null,Array.from(arguments))},malloc:function(e){return Fe(e)},free:function(e){Qi(e)},getHeapValue:function(e,t){return Hl(e,t)},setHeapValue:function(e,t,n){Pl(e,t,n)},heapSub:function(e,t,n){const s=e.BYTES_PER_ELEMENT;return e.subarray(t/s,t/s+n)},heapSlice:function(e,t,n){const s=e.BYTES_PER_ELEMENT;return e.slice(t/s,t/s+n)},heapCopy:function(e,t,n){const s=t.BYTES_PER_ELEMENT;return e.set(t,n/s)},parseString:function(e){return L(e)},parseStringArray:function(e,t){const n=[],o=s.heapSub(l,e,t);return o.forEach(function(e){n.push(s.parseString(e))}),n},strlen:function(e){return Q(e)},allocString:function(e){const t=s.strlen(e)+1,n=s.malloc(t);return H(e,n,t),n},allocStringArray:function(e){const t=e.length,n=s.malloc(t*4);for(let o=0;o<t;o++)l[(n>>2)+o]=s.allocString(e[o]);return n},freeStringArray:function(e,t){for(let n=0;n<t;n++)s.free(l[(e>>2)+n]);s.free(e)},stringToHeap:function(e,t,n){return Pe(e,b,t,n)}},m={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(e){m.canvas_resize_policy=e.canvasResizePolicy,m.canvas=e.canvas,m.locale=e.locale||m.locale,m.virtual_keyboard=e.virtualKeyboard,m.persistent_drops=!!e.persistentDrops,m.on_execute=e.onExecute,m.on_exit=e.onExit,e.focusCanvas&&m.canvas.focus()},locate_file:function(e){return i.locateFile(e)},clear:function(){m.canvas=null,m.locale="en",m.canvas_resize_policy=2,m.virtual_keyboard=!1,m.persistent_drops=!1,m.on_execute=null,m.on_exit=null}},k={ENOENT:44,_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return k._idbfs?1:0},init:function(e){if(k._idbfs=!1,!Array.isArray(e))return Promise.reject(new Error("Persistent paths must be an array"));if(!e.length)return Promise.resolve();k._mount_points=e.slice();function t(e){try{n.stat(e)}catch(t){t.errno!==k.ENOENT&&s.error(t),n.mkdirTree(e)}}return k._mount_points.forEach(function(e){t(e),n.mount(y,{},e)}),new Promise(function(e){n.syncfs(!0,function(t){t?(k._mount_points=[],k._idbfs=!1,s.print(`IndexedDB not available: ${t.message}`)):k._idbfs=!0,e(t)})})},deinit:function(){k._mount_points.forEach(function(e){try{n.unmount(e)}catch(e){s.print("Already unmounted",e)}k._idbfs&&y.dbs[e]&&(y.dbs[e].close(),delete y.dbs[e])}),k._mount_points=[],k._idbfs=!1,k._syncing=!1},sync:function(){return k._syncing?(s.error("Already syncing!"),Promise.resolve()):(k._syncing=!0,new Promise(function(e){n.syncfs(!1,function(t){t&&s.error(`Failed to save IDB file system: ${t.message}`),k._syncing=!1,e(t)})}))},copy_to_fs:function(e,t){const i=e.lastIndexOf("/");let o="/";i>0&&(o=e.slice(0,i));try{n.stat(o)}catch(e){e.errno!==k.ENOENT&&s.error(e),n.mkdirTree(o)}n.writeFile(e,new Uint8Array(t))}},R={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(e){R._async_cbs.push(e)},cleanup:function(e){const t=m.on_exit;k.deinit(),m.clear(),t&&t(e)},finish_async:function(e){R._fs_sync_promise.then(function(){const t=[];return R._async_cbs.forEach(function(e){t.push(new Promise(e))}),Promise.all(t)}).then(function(){return k.sync()}).then(function(){setTimeout(function(){e()},0)})}},o={MAX_VOLUME_CHANNELS:8,GodotChannel:{CHANNEL_L:0,CHANNEL_R:1,CHANNEL_C:3,CHANNEL_LFE:4,CHANNEL_RL:5,CHANNEL_RR:6,CHANNEL_SL:7,CHANNEL_SR:8},WebChannel:{CHANNEL_L:0,CHANNEL_R:1,CHANNEL_SL:2,CHANNEL_SR:3,CHANNEL_C:4,CHANNEL_LFE:5},samples:null,Sample:class Sample{static getSample(e){if(!o.samples.has(e))throw new ReferenceError(`Could not find sample "${e}"`);return o.samples.get(e)}static getSampleOrNull(e){return o.samples.get(e)??null}static create(e,t={}){const n=new o.Sample(e,t);return o.samples.set(e.id,n),n}static delete(e){o.samples.delete(e)}constructor(e,t={}){this.id=e.id,this._audioBuffer=null,this.numberOfChannels=t.numberOfChannels??2,this.sampleRate=t.sampleRate??44100,this.loopMode=t.loopMode??"disabled",this.loopBegin=t.loopBegin??0,this.loopEnd=t.loopEnd??0,this.setAudioBuffer(e.audioBuffer)}getAudioBuffer(){return this._duplicateAudioBuffer()}setAudioBuffer(e){this._audioBuffer=e}clear(){this.setAudioBuffer(null),o.Sample.delete(this.id)}_duplicateAudioBuffer(){if(this._audioBuffer==null)throw new Error("couldn't duplicate a null audioBuffer");const e=new Array(this._audioBuffer.numberOfChannels);for(let t=0;t<this._audioBuffer.numberOfChannels;t++){const n=new Float32Array(this._audioBuffer.getChannelData(t));e[t]=n}const t=o.ctx.createBuffer(this.numberOfChannels,this._audioBuffer.length,this._audioBuffer.sampleRate);for(let n=0;n<e.length;n++)t.copyToChannel(e[n],n,0);return t}},SampleNodeBus:class SampleNodeBus{static create(e){return new o.SampleNodeBus(e)}constructor(e){const t=6;this._bus=e,this._channelSplitter=o.ctx.createChannelSplitter(t),this._l=o.ctx.createGain(),this._r=o.ctx.createGain(),this._sl=o.ctx.createGain(),this._sr=o.ctx.createGain(),this._c=o.ctx.createGain(),this._lfe=o.ctx.createGain(),this._channelMerger=o.ctx.createChannelMerger(t),this._channelSplitter.connect(this._l,o.WebChannel.CHANNEL_L).connect(this._channelMerger,o.WebChannel.CHANNEL_L,o.WebChannel.CHANNEL_L),this._channelSplitter.connect(this._r,o.WebChannel.CHANNEL_R).connect(this._channelMerger,o.WebChannel.CHANNEL_L,o.WebChannel.CHANNEL_R),this._channelSplitter.connect(this._sl,o.WebChannel.CHANNEL_SL).connect(this._channelMerger,o.WebChannel.CHANNEL_L,o.WebChannel.CHANNEL_SL),this._channelSplitter.connect(this._sr,o.WebChannel.CHANNEL_SR).connect(this._channelMerger,o.WebChannel.CHANNEL_L,o.WebChannel.CHANNEL_SR),this._channelSplitter.connect(this._c,o.WebChannel.CHANNEL_C).connect(this._channelMerger,o.WebChannel.CHANNEL_L,o.WebChannel.CHANNEL_C),this._channelSplitter.connect(this._lfe,o.WebChannel.CHANNEL_L).connect(this._channelMerger,o.WebChannel.CHANNEL_L,o.WebChannel.CHANNEL_LFE),this._channelMerger.connect(this._bus.getInputNode())}getInputNode(){return this._channelSplitter}getOutputNode(){return this._channelMerger}setVolume(e){if(e.length!==o.MAX_VOLUME_CHANNELS)throw new Error(`Volume length isn't "${o.MAX_VOLUME_CHANNELS}", is ${e.length} instead`);this._l.gain.value=e[o.GodotChannel.CHANNEL_L]??0,this._r.gain.value=e[o.GodotChannel.CHANNEL_R]??0,this._sl.gain.value=e[o.GodotChannel.CHANNEL_SL]??0,this._sr.gain.value=e[o.GodotChannel.CHANNEL_SR]??0,this._c.gain.value=e[o.GodotChannel.CHANNEL_C]??0,this._lfe.gain.value=e[o.GodotChannel.CHANNEL_LFE]??0}clear(){this._bus=null,this._channelSplitter.disconnect(),this._channelSplitter=null,this._l.disconnect(),this._l=null,this._r.disconnect(),this._r=null,this._sl.disconnect(),this._sl=null,this._sr.disconnect(),this._sr=null,this._c.disconnect(),this._c=null,this._lfe.disconnect(),this._lfe=null,this._channelMerger.disconnect(),this._channelMerger=null}},sampleNodes:null,SampleNode:class SampleNode{static getSampleNode(e){if(!o.sampleNodes.has(e))throw new ReferenceError(`Could not find sample node "${e}"`);return o.sampleNodes.get(e)}static getSampleNodeOrNull(e){return o.sampleNodes.get(e)??null}static stopSampleNode(e){const t=o.SampleNode.getSampleNodeOrNull(e);if(t==null)return;t.stop()}static pauseSampleNode(e,t){const n=o.SampleNode.getSampleNodeOrNull(e);if(n==null)return;n.pause(t)}static create(e,t={}){const n=new o.SampleNode(e,t);return o.sampleNodes.set(e.id,n),n}static delete(e){o.sampleNodes.delete(e)}constructor(e,t={}){this.id=e.id,this.streamObjectId=e.streamObjectId,this.offset=t.offset??0,this.startTime=t.startTime??0,this.isPaused=!1,this.pauseTime=0,this._playbackRate=44100,this.loopMode=t.loopMode??this.getSample().loopMode??"disabled",this._pitchScale=1,this._sourceStartTime=0,this._sampleNodeBuses=new Map,this._source=o.ctx.createBufferSource(),this._onended=null,this.setPlaybackRate(t.playbackRate??44100),this._source.buffer=this.getSample().getAudioBuffer(),this._addEndedListener();const n=o.Bus.getBus(e.busIndex),s=this.getSampleNodeBus(n);s.setVolume(t.volume)}getPlaybackRate(){return this._playbackRate}setPlaybackRate(e){this._playbackRate=e,this._syncPlaybackRate()}getPitchScale(){return this._pitchScale}setPitchScale(e){this._pitchScale=e,this._syncPlaybackRate()}getSample(){return o.Sample.getSample(this.streamObjectId)}getOutputNode(){return this._source}start(){this._resetSourceStartTime(),this._source.start(this.startTime,this.offset)}stop(){this.clear()}restart(){this.isPaused=!1,this.pauseTime=0,this._resetSourceStartTime(),this._restart()}pause(e=!0){if(e){this._pause();return}this._unpause()}connect(e){return this.getOutputNode().connect(e)}setVolumes(e,t){for(let n=0;n<e.length;n++){const s=this.getSampleNodeBus(e[n]);s.setVolume(t.slice(n*o.MAX_VOLUME_CHANNELS,n*o.MAX_VOLUME_CHANNELS+o.MAX_VOLUME_CHANNELS))}}getSampleNodeBus(e){if(!this._sampleNodeBuses.has(e)){const t=o.SampleNodeBus.create(e);this._sampleNodeBuses.set(e,t),this._source.connect(t.getInputNode())}return this._sampleNodeBuses.get(e)}clear(){this.isPaused=!1,this.pauseTime=0,this._source!=null&&(this._source.removeEventListener("ended",this._onended),this._onended=null,this._source.stop(),this._source.disconnect(),this._source=null);for(const e of this._sampleNodeBuses.values())e.clear();this._sampleNodeBuses.clear(),o.SampleNode.delete(this.id)}_resetSourceStartTime(){this._sourceStartTime=o.ctx.currentTime}_syncPlaybackRate(){this._source.playbackRate.value=this.getPlaybackRate()*this.getPitchScale()}_restart(){this._source!=null&&this._source.disconnect(),this._source=o.ctx.createBufferSource(),this._source.buffer=this.getSample().getAudioBuffer();for(const e of this._sampleNodeBuses.values())this.connect(e.getInputNode());this._addEndedListener();const e=this.isPaused?this.pauseTime:0;this._source.start(this.startTime,this.offset+e)}_pause(){this.isPaused=!0,this.pauseTime=(o.ctx.currentTime-this._sourceStartTime)/this.getPlaybackRate(),this._source.stop()}_unpause(){this._restart(),this.isPaused=!1,this.pauseTime=0}_addEndedListener(){this._onended!=null&&this._source.removeEventListener("ended",this._onended);const e=this;this._onended=t=>{if(e.isPaused)return;switch(e.getSample().loopMode){case"disabled":{const t=this.id;if(e.stop(),o.sampleFinishedCallback!=null){const e=s.allocString(t);o.sampleFinishedCallback(e),s.free(e)}}break;case"forward":case"backward":e.restart();break;default:}},this._source.addEventListener("ended",this._onended)}},buses:null,busSolo:null,Bus:class Bus{static getCount(){return o.buses.length}static setCount(e){const t=o.buses;if(e===t.length)return;if(e<t.length){const n=t.slice(e);for(let e=0;e<n.length;e++){const t=n[e];t.clear()}o.buses=t.slice(0,e);return}for(let t=o.buses.length;t<e;t++)o.Bus.create()}static getBus(e){if(e<0||e>=o.buses.length)throw new ReferenceError(`invalid bus index "${e}"`);return o.buses[e]}static getBusOrNull(e){return e<0||e>=o.buses.length?null:o.buses[e]}static move(e,t){const s=o.Bus.getBus(e),n=o.buses.filter((t,n)=>n!==e);n.splice(t-1,0,s),o.buses=n}static addAt(e){const t=o.Bus.create();e!==t.getId()&&o.Bus.move(t.getId(),e)}static create(){const e=new o.Bus,t=o.buses.length===0;return o.buses.push(e),t?e.setSend(null):e.setSend(o.Bus.getBus(0)),e}constructor(){this._sampleNodes=new Set,this.isSolo=!1,this._send=null,this._gainNode=o.ctx.createGain(),this._soloNode=o.ctx.createGain(),this._muteNode=o.ctx.createGain(),this._gainNode.connect(this._soloNode).connect(this._muteNode)}getId(){return o.buses.indexOf(this)}getVolumeDb(){return o.linear_to_db(this._gainNode.gain.value)}setVolumeDb(e){const t=o.db_to_linear(e);isFinite(t)&&(this._gainNode.gain.value=t)}getSend(){return this._send}setSend(e){if(this._send=e,e==null){if(this.getId()==0){this.getOutputNode().connect(o.ctx.destination);return}throw new Error(`Cannot send to "${e}" without the bus being at index 0 (current index: ${this.getId()})`)}this.connect(e)}getInputNode(){return this._gainNode}getOutputNode(){return this._muteNode}mute(e){this._muteNode.gain.value=e?0:1}solo(e){if(this.isSolo===e)return;if(e){o.busSolo!=null&&o.busSolo!==this&&o.busSolo._disableSolo(),this._enableSolo();return}this._disableSolo()}addSampleNode(e){this._sampleNodes.add(e),e.getOutputNode().connect(this.getInputNode())}removeSampleNode(e){this._sampleNodes.delete(e),e.getOutputNode().disconnect()}connect(e){if(e==null)throw new Error("cannot connect to null bus");return this.getOutputNode().disconnect(),this.getOutputNode().connect(e.getInputNode()),e}clear(){o.buses=o.buses.filter(e=>e!==this)}_syncSampleNodes(){const e=Array.from(this._sampleNodes);for(let t=0;t<e.length;t++){const n=e[t];n.getOutputNode().disconnect(),n.getOutputNode().connect(this.getInputNode())}}_enableSolo(){this.isSolo=!0,o.busSolo=this,this._soloNode.gain.value=1;const e=o.buses.filter(e=>e!==this);for(let t=0;t<e.length;t++){const n=e[t];n._soloNode.gain.value=0}}_disableSolo(){this.isSolo=!1,o.busSolo=null,this._soloNode.gain.value=1;const e=o.buses.filter(e=>e!==this);for(let t=0;t<e.length;t++){const n=e[t];n._soloNode.gain.value=1}}},sampleFinishedCallback:null,ctx:null,input:null,driver:null,interval:0,linear_to_db:function(e){return Math.log(e)*8.685889638065037},db_to_linear:function(e){return Math.exp(e*.11512925464970228)},init:function(e,t,n,s){o.samples=new Map,o.sampleNodes=new Map,o.buses=[],o.busSolo=null;const a={};e&&(o.sampleRate=e,a.sampleRate=e);const i=new(window.AudioContext||window.webkitAudioContext)(a);return o.ctx=i,i.onstatechange=function(){let e=0;switch(i.state){case"suspended":e=0;break;case"running":e=1;break;case"closed":e=2;break;default:}n(e)},i.onstatechange(),o.interval=setInterval(function(){let e=0;i.baseLatency&&(e+=o.ctx.baseLatency),i.outputLatency&&(e+=o.ctx.outputLatency),s(e)},1e3),R.atexit(o.close_async),i.destination.channelCount},create_input:function(e){if(o.input)return 0;function t(t){try{o.input=o.ctx.createMediaStreamSource(t),e(o.input)}catch(e){s.error("Failed creating input.",e)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(t,function(e){s.error("Error getting user media.",e)});else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return s.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},t,function(e){s.print(e)})}return 0},close_async:function(e){const n=o.ctx;if(o.ctx=null,!n){e();return}o.interval&&(clearInterval(o.interval),o.interval=0),o.input&&(o.input.disconnect(),o.input=null);let i=Promise.resolve();o.driver&&(i=o.driver.close()),i.then(function(){return n.close()}).then(function(){n.onstatechange=null,e()}).catch(function(t){n.onstatechange=null,s.error("Error closing AudioContext",t),e()})},start_sample:function(e,t,n,s){o.SampleNode.stopSampleNode(e);const i=o.SampleNode.create({busIndex:n,id:e,streamObjectId:t},s);i.start()},stop_sample:function(e){o.SampleNode.stopSampleNode(e)},sample_set_pause:function(e,t){o.SampleNode.pauseSampleNode(e,t)},update_sample_pitch_scale:function(e,t){const n=o.SampleNode.getSampleNodeOrNull(e);if(n==null)return;n.setPitchScale(t)},sample_set_volumes_linear:function(e,t,n){const s=o.SampleNode.getSampleNodeOrNull(e);if(s==null)return;const i=t.map(e=>o.Bus.getBus(e));s.setVolumes(i,n)},set_sample_bus_count:function(e){o.Bus.setCount(e)},remove_sample_bus:function(e){const t=o.Bus.getBus(e);t.clear()},add_sample_bus:function(e){o.Bus.addAt(e)},move_sample_bus:function(e,t){o.Bus.move(e,t)},set_sample_bus_send:function(e,t){const n=o.Bus.getBus(e);n.setSend(o.Bus.getBus(t))},set_sample_bus_volume_db:function(e,t){const n=o.Bus.getBus(e);n.setVolumeDb(t)},set_sample_bus_solo:function(e,t){const n=o.Bus.getBus(e);n.solo(t)},set_sample_bus_mute:function(e,t){const n=o.Bus.getBus(e);n.mute(t)}};function xa(){return o.ctx&&o.ctx.audioWorklet?1:0}function ta(e,t,n,i){const a=s.get_func(n),r=s.get_func(i),c=s.getHeapValue(e,"i32"),l=o.init(c,t,a,r);return s.setHeapValue(e,o.ctx.sampleRate,"i32"),l}function na(){return o.create_input(function(e){e.connect(o.driver.get_node())})}function sa(){if(o.input){const e=o.input.mediaStream.getTracks();for(let t=0;t<e.length;t++)e[t].stop();o.input.disconnect(),o.input=null}}function oa(){return window.AudioContext||window.webkitAudioContext?1:0}function ia(){o.ctx&&o.ctx.state!=="running"&&o.ctx.resume()}function aa(e){o.add_sample_bus(e)}function ra(e,t){o.move_sample_bus(e,t)}function ca(e){o.remove_sample_bus(e)}function la(e){o.set_sample_bus_count(e)}function da(e,t){o.set_sample_bus_mute(e,Boolean(t))}function ua(e,t){o.set_sample_bus_send(e,t)}function ha(e,t){o.set_sample_bus_solo(e,Boolean(t))}function ma(e,t){o.set_sample_bus_volume_db(e,t)}function fa(e){const t=s.parseString(e);return Number(o.sampleNodes.has(t))}function pa(e,t,n,i,a,r){const u=4,h=s.parseString(e),m=s.parseString(i),l=2,d=o.ctx.sampleRate,f=s.heapSub(v,t,n),p=s.heapSub(v,t+n*u,n),c=o.ctx.createBuffer(l,n,d);c.copyToChannel(new Float32Array(f),0,0),c.copyToChannel(new Float32Array(p),1,0),o.Sample.create({id:h,audioBuffer:c},{loopBegin:a,loopEnd:r,loopMode:m,numberOfChannels:l,sampleRate:d})}function ga(e){o.sampleFinishedCallback=s.get_func(e)}function va(e,t){const n=s.parseString(e);o.sample_set_pause(n,Boolean(t))}function ba(e,t,n,i,a){const r=s.parseString(e),c=s.heapSub(l,t,n),d=s.heapSub(v,i,a);o.sample_set_volumes_linear(r,Array.from(c),d)}function ja(e,t,n,i,a){const r=s.parseString(e),c=s.parseString(t),l=s.heapSub(v,a,8),d={offset:i,volume:l,playbackRate:1};o.start_sample(r,c,n,d)}function ya(e){const t=s.parseString(e);o.stop_sample(t)}function _a(e){const t=s.parseString(e);return Number(o.Sample.getSampleOrNull(t)!=null)}function wa(e){const n=s.parseString(e),t=o.Sample.getSampleOrNull(n);t!=null&&t.clear()}function Oa(e,t){const n=s.parseString(e);o.update_sample_pitch_scale(n,t)}T={promise:null,worklet:null,ring_buffer:null,create:function(e){const t=m.locate_file("godot.audio.worklet.js");T.promise=o.ctx.audioWorklet.addModule(t).then(function(){return T.worklet=new AudioWorkletNode(o.ctx,"godot-processor",{outputChannelCount:[e]}),Promise.resolve()}),o.driver=T},start:function(e,t,n){T.promise.then(function(){const i=T.worklet;i.connect(o.ctx.destination),i.port.postMessage({cmd:"start",data:[n,e,t]}),i.port.onmessage=function(e){s.error(e.data)}})},start_no_threads:function(e,t,n,i,a,r){function c(){let c=0,l=0,o=0;const d=new Float32Array(t);function u(i){if(o===0)return;const a=s.heapSub(v,e,t),r=a.length,l=o;if(n(c,o),c+o>=r){const e=r-c;d.set(a.subarray(c,r)),o-=e,c=0}o>0&&d.set(a.subarray(c,c+o),l-o),i.postMessage({cmd:"chunk",data:d.subarray(0,l)}),c+=o,o=0}this.receive=function(e){const o=s.heapSub(v,i,a),c=l;let t=e.length,n=0;l+t>=a&&(n=a-l,o.set(e.subarray(0,n),l),t-=n,l=0),t&&o.set(e.subarray(n,t),l),r(c,e.length),l+=t},this.consumed=function(e,t){o+=e,u(t)}}T.ring_buffer=new c,T.promise.then(function(){const n=T.worklet,i=s.heapSlice(v,e,t);n.connect(o.ctx.destination),n.port.postMessage({cmd:"start_nothreads",data:[i,a]}),n.port.onmessage=function(e){if(!T.worklet)return;if(e.data.cmd==="read"){const t=e.data.data;T.ring_buffer.consumed(t,T.worklet.port)}else if(e.data.cmd==="input"){const t=e.data.data;if(t.length>a){s.error("Input chunk is too big");return}T.ring_buffer.receive(t)}else s.error(e.data)}})},get_node:function(){return T.worklet},close:function(){return new Promise(function(e){if(T.promise===null)return;const n=T.promise;n.then(function(){T.worklet.port.postMessage({cmd:"stop",data:null}),T.worklet.disconnect(),T.worklet.port.onmessage=null,T.worklet=null,T.promise=null,e()}).catch(function(e){s.error(e)})})}};function Ca(e){try{T.create(e)}catch(e){return s.error("Error starting AudioDriverWorklet",e),1}return 0}function Ea(e,t,n,o,i,a){const r=s.get_func(n),c=s.get_func(a);T.start_no_threads(e,t,r,o,i,c)}function ka(e,t){s.stringToHeap(`#${m.canvas.id}`,e,t)}function Aa(e,t){s.stringToHeap(m.locale,e,t)}E={shape:"default",visible:!0,cursors:{},set_style:function(e){m.canvas.style.cursor=e},set_shape:function(e){E.shape=e;let t=e;if(e in E.cursors){const n=E.cursors[e];t=`url("${n.url}") ${n.x} ${n.y}, default`}E.visible&&E.set_style(t)},clear:function(){E.set_style(""),E.shape="default",E.visible=!0,Object.keys(E.cursors).forEach(function(e){URL.revokeObjectURL(E.cursors[e]),delete E.cursors[e]})},lockPointer:function(){const e=m.canvas;e.requestPointerLock&&e.requestPointerLock()},releasePointer:function(){document.exitPointerLock&&document.exitPointerLock()},isPointerLocked:function(){return document.pointerLockElement===m.canvas}},j={handlers:[],has:function(e,t,n,s){return j.handlers.findIndex(function(o){return o.target===e&&o.event===t&&o.method===n&&o.capture===s})!==-1},add:function(e,t,n,s){if(j.has(e,t,n,s))return;function o(e,t,n,s){this.target=e,this.event=t,this.method=n,this.capture=s}j.handlers.push(new o(e,t,n,s)),e.addEventListener(t,n,s)},clear:function(){j.handlers.forEach(function(e){e.target.removeEventListener(e.event,e.method,e.capture)}),j.handlers.length=0}},ws=()=>r.currentContext?r.currentContext.handle:0,Ge=ws,S={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return S.hidpi?window.devicePixelRatio||1:1},isFullscreen:function(){const e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return e?e===m.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!S.hasFullscreen())return 1;const e=m.canvas;try{const t=(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.mozRequestFullscreen||e.webkitRequestFullscreen).call(e);t&&t.catch(function(){})}catch{return 1}return 0},exitFullscreen:function(){if(!S.isFullscreen())return 0;try{const e=document.exitFullscreen();e&&e.catch(function(){})}catch{return 1}return 0},_updateGL:function(){const t=Ge(),e=r.getContext(t);e&&r.resizeOffscreenFramebuffer(e)},updateSize:function(){const a=S.isFullscreen(),r=m.canvas_resize_policy===2,c=m.canvas_resize_policy===0,l=S.desired_size[0],d=S.desired_size[1],e=m.canvas;let t=l,n=d;if(c)return e.width!==t||e.height!==n?(S.desired_size=[e.width,e.height],S._updateGL(),1):0;const s=S.getPixelRatio();(a||r)&&(t=window.innerWidth*s,n=window.innerHeight*s);const o=`${t/s}px`,i=`${n/s}px`;return e.style.width!==o||e.style.height!==i||e.width!==t||e.height!==n?(e.width=t,e.height=n,e.style.width=o,e.style.height=i,S._updateGL(),1):0}},O={textinput:null,textarea:null,available:function(){return m.virtual_keyboard&&"ontouchstart"in window},init:function(e){function t(t){const n=document.createElement(t);return n.style.display="none",n.style.position="absolute",n.style.zIndex="-1",n.style.background="transparent",n.style.padding="0px",n.style.margin="0px",n.style.overflow="hidden",n.style.width="0px",n.style.height="0px",n.style.border="0px",n.style.outline="none",n.readonly=!0,n.disabled=!0,j.add(n,"input",function(){const o=s.allocString(n.value);e(o,n.selectionEnd),s.free(o)},!1),j.add(n,"blur",function(){n.style.display="none",n.readonly=!0,n.disabled=!0},!1),m.canvas.insertAdjacentElement("beforebegin",n),n}O.textinput=t("input"),O.textarea=t("textarea"),O.updateSize()},show:function(e,t,n,s){if(!O.textinput||!O.textarea)return;(O.textinput.style.display!==""||O.textarea.style.display!=="")&&O.hide(),O.updateSize();let o=O.textinput;switch(t){case 0:o.type="text",o.inputmode="";break;case 1:o=O.textarea;break;case 2:o.type="text",o.inputmode="numeric";break;case 3:o.type="text",o.inputmode="decimal";break;case 4:o.type="tel",o.inputmode="";break;case 5:o.type="email",o.inputmode="";break;case 6:o.type="password",o.inputmode="";break;case 7:o.type="url",o.inputmode="";break;default:o.type="text",o.inputmode="";break}o.readonly=!1,o.disabled=!1,o.value=e,o.style.display="block",o.focus(),o.setSelectionRange(n,s)},hide:function(){if(!O.textinput||!O.textarea)return;[O.textinput,O.textarea].forEach(function(e){e.blur(),e.style.display="none",e.value=""})},updateSize:function(){if(!O.textinput||!O.textarea)return;const e=m.canvas.getBoundingClientRect();function t(t){t.style.left=`${e.left}px`,t.style.top=`${e.top}px`,t.style.width=`${e.width}px`,t.style.height=`${e.height}px`}t(O.textinput),t(O.textarea)},clear:function(){O.textinput&&(O.textinput.remove(),O.textinput=null),O.textarea&&(O.textarea.remove(),O.textarea=null)}},be={window_icon:"",getDPI:function(){const e=Math.round(window.devicePixelRatio*96);return e>=96?e:96}};function La(e){window.alert(s.parseString(e))}function Ra(){m.canvas.focus()}function Pa(){return document.activeElement===m.canvas}function Ha(e){const t=s.get_func(e);try{navigator.clipboard.readText().then(function(e){const n=s.allocString(e);t(n),s.free(n)}).catch(function(){})}catch{}}function Ia(e){const t=s.parseString(e);return!navigator.clipboard||!navigator.clipboard.writeText?1:(navigator.clipboard.writeText(t).catch(function(e){s.error("Setting OS clipboard is only possible from an input callback for the Web platform. Exception:",e)}),0)}function Ba(){return!E.visible}function Va(){return E.isPointerLocked()?1:0}function $a(e){e?E.lockPointer():E.releasePointer()}function Wa(e,t,n,o,i){const a=s.parseString(e),r=E.cursors[a];if(n>0){const e=new Blob([s.heapSlice(z,t,n)],{type:"image/png"}),r=URL.createObjectURL(e);E.cursors[a]={url:r,x:o,y:i}}else delete E.cursors[a];a===E.shape&&E.set_shape(E.shape),r&&URL.revokeObjectURL(r.url)}function Ua(e){E.set_shape(s.parseString(e))}function Ka(e){const t=e!==0;if(t===E.visible)return;E.visible=t,t?E.set_shape(E.shape):E.set_style("none")}function qa(e,t){S.desired_size=[e,t],S.updateSize()}function Ya(e){const n=m.canvas,o=s.get_func(e);function t(e){e.target===n&&o(S.isFullscreen())}j.add(document,"fullscreenchange",t,!1),j.add(document,"mozfullscreenchange",t,!1),j.add(document,"webkitfullscreenchange",t,!1)}function Ga(){return S.exitFullscreen()}function Xa(){return S.requestFullscreen()}function Qa(e){if(e!==1&&e!==2)return!1;try{return!!document.createElement("canvas").getContext(e===2?"webgl2":"webgl")}catch{}return!1}function Za(){const e=["Windows","Win64","Win32","WinCE"],t=navigator.platform||"";return e.indexOf(t)!==-1?1:0}function Ja(e,t,n,o,i){const a=m.canvas,r=s.get_func(e),c=[t,n,o,i];["mouseover","mouseleave","focus","blur"].forEach(function(e,t){j.add(a,e,function(){r(c[t])},!0)})}function er(){return S.getPixelRatio()}function tr(){return be.getDPI()}function nr(e,t){const n=S.getPixelRatio();s.setHeapValue(e,window.screen.width*n,"i32"),s.setHeapValue(t,window.screen.height*n,"i32")}function sr(e,t,n,s){const o=m.canvas;switch(j.add(o,"contextmenu",function(e){e.preventDefault()},!1),j.add(o,"webglcontextlost",function(e){alert("WebGL context lost, please reload the page"),e.preventDefault()},!1),S.hidpi=!!s,m.canvas_resize_policy){case 0:S.desired_size=[o.width,o.height];break;case 1:S.desired_size=[e,t];break;default:o.style.position="absolute",o.style.top=0,o.style.left=0;break}S.updateSize(),n&&S.requestFullscreen()}function or(){const e=S.updateSize();return e&&O.updateSize(),e}function ir(){return"ontouchstart"in window}function ar(){return"speechSynthesis"in window}function rr(){return O.available()}function cr(e){const t=s.get_func(e);O.available()&&O.init(t)}function lr(){O.hide()}function dr(e,t,n,o){const a=s.parseString(e),i=n>0?n:0,r=o>0?o:i;O.show(a,t,i,r)}function ur(e){const t=s.get_func(e);j.add(window,"blur",function(){t()},!1)}function hr(e,t){let n=document.getElementById("-gd-engine-icon");const o=be.window_icon;if(e){n===null&&(n=document.createElement("link"),n.rel="icon",n.id="-gd-engine-icon",document.head.appendChild(n));const o=new Blob([s.heapSlice(z,e,t)],{type:"image/png"});be.window_icon=URL.createObjectURL(o),n.href=be.window_icon}else n&&n.remove(),be.window_icon=null;o&&URL.revokeObjectURL(o)}function mr(e,t){s.setHeapValue(e,m.canvas.width,"i32"),s.setHeapValue(t,m.canvas.height,"i32")}function fr(e){document.title=s.parseString(e)}function pr(e,t,n,o,i,a){const c=s.parseString(e);let r=null;try{if(t){const e=eval;r=e(c)}else r=eval(c)}catch(e){s.error(e)}switch(typeof r){case"boolean":return s.setHeapValue(n,r,"i32"),1;case"number":return s.setHeapValue(n,r,"double"),3;case"string":return s.setHeapValue(n,s.allocString(r),"*"),4;case"object":if(r===null)break;if(ArrayBuffer.isView(r)&&!(r instanceof Uint8Array)?r=new Uint8Array(r.buffer):r instanceof ArrayBuffer&&(r=new Uint8Array(r)),r instanceof Uint8Array){const e=s.get_func(a),t=e(o,i,r.length);return z.set(r,t),29}break}return 0}h={_last_id:0,_references:{},get:function(e){return h._references[e]},add:function(e){const t=++h._last_id;return h._references[t]=e,t},remove:function(e){delete h._references[e]}},se={onread:function(e,t){const n=h.get(e);if(!n)return;t.value&&n.chunks.push(t.value),n.reading=!1,n.done=t.done},onresponse:function(e,t){const n=h.get(e);if(!n)return;let s=!1;t.headers.forEach(function(e,t){const n=e.toLowerCase().trim(),o=t.toLowerCase().trim();o==="transfer-encoding"&&n==="chunked"&&(s=!0)}),n.status=t.status,n.response=t,n.reader=t.body.getReader(),n.chunked=s},onerror:function(e,t){s.error(t);const n=h.get(e);if(!n)return;n.error=t},create:function(e,t,n,s){const o={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[]},i=h.add(o),a={method:e,headers:n,body:s};return o.request=fetch(t,a),o.request.then(se.onresponse.bind(null,i)).catch(se.onerror.bind(null,i)),i},free:function(e){const t=h.get(e);if(!t)return;if(h.remove(e),!t.request)return;t.request.then(function(e){e.abort()}).catch(function(){})},read:function(e){const t=h.get(e);if(!t)return;if(t.reader&&!t.reading){if(t.done){t.reader=null;return}t.reading=!0,t.reader.read().then(se.onread.bind(null,e)).catch(se.onerror.bind(null,e))}}};function br(e,t,n,o,i,a){const r=s.parseString(e),c=s.parseString(t),l=s.parseStringArray(n,o),d=a?s.heapSlice(b,i,a):null;return se.create(r,c,l.map(function(e){const t=e.indexOf(":");return t<=0?[]:[e.slice(0,t).trim(),e.slice(t+1).trim()]}).filter(function(e){return e.length===2}),d)}function jr(e){se.free(e)}function yr(e){const t=h.get(e);return!t||!t.response?0:t.status}function _r(e){const t=h.get(e);return!t||!t.response?-1:t.chunked?1:0}function wr(e,t,n){const i=h.get(e);if(!i||!i.response)return 0;let o=n;const a=i.chunks;for(;o&&a.length;){const e=i.chunks[0];e.length>o?(s.heapCopy(b,e.slice(0,o),t),a[0]=e.slice(o),o=0):(s.heapCopy(b,e,t),o-=e.length,a.pop())}return a.length||se.read(e),n-o}function Or(e,t,n){const i=h.get(e);if(!i||!i.response)return 1;const r=s.get_func(t),o=[];i.response.headers.forEach(function(e,t){o.push(`${t}:${e}`)});const a=s.allocStringArray(o);return r(o.length,a,n),s.freeStringArray(a,o.length),0}function xr(e){const t=h.get(e);return t?t.error?-1:t.response?t.reader?1:t.done?2:-1:0:-1}U={samples:[],get_pads:function(){try{const e=navigator.getGamepads();return e||[]}catch{return[]}},get_samples:function(){return U.samples},get_sample:function(e){const t=U.samples;return e<t.length?t[e]:null},sample:function(){const t=U.get_pads(),e=[];for(let s=0;s<t.length;s++){const n=t[s];if(!n){e.push(null);continue}const o={standard:n.mapping==="standard",buttons:[],axes:[],connected:n.connected};for(let e=0;e<n.buttons.length;e++)o.buttons.push(n.buttons[e].value);for(let e=0;e<n.axes.length;e++)o.axes.push(n.axes[e]);e.push(o)}U.samples=e},init:function(e){U.samples=[];function n(t){const i=U.get_guid(t),n=s.allocString(t.id),o=s.allocString(i);e(t.index,1,n,o),s.free(n),s.free(o)}const t=U.get_pads();for(let e=0;e<t.length;e++)t[e]&&n(t[e]);j.add(window,"gamepadconnected",function(e){e.gamepad&&n(e.gamepad)},!1),j.add(window,"gamepaddisconnected",function(t){t.gamepad&&e(t.gamepad.index,0)},!1)},get_guid:function(e){if(e.mapping)return e.mapping;const n=navigator.userAgent;let t="Unknown";n.indexOf("Android")>=0?t="Android":n.indexOf("Linux")>=0?t="Linux":n.indexOf("iPhone")>=0?t="iOS":n.indexOf("Macintosh")>=0?t="MacOSX":n.indexOf("Windows")>=0&&(t="Windows");const s=e.id,a=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,r=/^([0-9a-f]+)-([0-9a-f]+)-/i;let o="",i="";if(a.test(s)){const e=a.exec(s);o=e[1].padStart(4,"0"),i=e[2].padStart(4,"0")}else if(r.test(s)){const e=r.exec(s);o=e[1].padStart(4,"0"),i=e[2].padStart(4,"0")}return!o||!i?`${t}Unknown`:t+o+i}},N={promises:[],pending_files:[],add_entry:function(e){e.isDirectory?N.add_dir(e):e.isFile?N.add_file(e):s.error("Unrecognized entry...",e)},add_dir:function(e){N.promises.push(new Promise(function(t){const s=e.createReader();s.readEntries(function(e){for(let t=0;t<e.length;t++)N.add_entry(e[t]);t()})}))},add_file:function(e){N.promises.push(new Promise(function(t,n){e.file(function(e){const o=new FileReader;o.onload=function(){const n={path:e.relativePath||e.webkitRelativePath,name:e.name,type:e.type,size:e.size,data:o.result};n.path||(n.path=n.name),N.pending_files.push(n),t()},o.onerror=function(){s.print("Error reading file"),n()},o.readAsArrayBuffer(e)},function(){s.print("Error!"),n()})}))},process:function(e,t){if(N.promises.length===0){e();return}N.promises.pop().then(function(){setTimeout(function(){N.process(e,t)},0)})},_process_event:function(e,t){if(e.preventDefault(),e.dataTransfer.items)for(let s=0;s<e.dataTransfer.items.length;s++){const t=e.dataTransfer.items[s];let n=null;"getAsEntry"in t?n=t.getAsEntry():"webkitGetAsEntry"in t&&(n=t.webkitGetAsEntry()),n&&N.add_entry(n)}else s.error("File upload not supported");new Promise(N.process).then(function(){const e=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,s=[],o=[];n.mkdir(e.slice(0,-1)),N.pending_files.forEach(t=>{const n=t.path;k.copy_to_fs(e+n,t.data);let i=n.indexOf("/");if(i===-1)s.push(e+n);else{const t=n.substr(0,i);i=t.indexOf("/"),i<0&&s.indexOf(e+t)===-1&&s.push(e+t)}o.push(e+n)}),N.promises=[],N.pending_files=[],t(s),m.persistent_drops?R.atexit(function(t){N.remove_drop(o,e),t()}):N.remove_drop(o,e)})},remove_drop:function(e,t){const s=[t.substr(0,t.length-1)];e.forEach(function(e){n.unlink(e);let o=e.replace(t,""),i=o.lastIndexOf("/");for(;i>0;)o=o.substr(0,i),s.indexOf(t+o)===-1&&s.push(t+o),i=o.lastIndexOf("/")}),s.sort(function(e,t){const n=(e.match(/\//g)||[]).length,s=(t.match(/\//g)||[]).length;return n>s?-1:n<s?1:0}).forEach(function(e){n.rmdir(e)})},handler:function(e){return function(t){N._process_event(t,e)}}},M={ime:null,active:!1,getModifiers:function(e){return e.shiftKey+0+(e.altKey+0<<1)+(e.ctrlKey+0<<2)+(e.metaKey+0<<3)},ime_active:function(e){function t(){M.active=!0,M.ime.focus()}M.ime&&(e?(M.ime.style.display="block",setInterval(t,100)):(M.ime.style.display="none",m.canvas.focus(),M.active=!1))},ime_position:function(e,t){if(M.ime){const s=m.canvas,n=s.getBoundingClientRect(),o=s.width/n.width,i=s.height/n.height,a=e/o+n.x,r=t/i+n.y;M.ime.style.left=`${a}px`,M.ime.style.top=`${r}px`}},init:function(e,t,n,o){function r(e,i){const a=M.getModifiers(i);s.stringToHeap(i.code,n,32),s.stringToHeap(i.key,o,32),t(e,i.repeat,a),i.preventDefault()}function a(t){if(M.ime)if(t.type==="compositionstart")e(0,null),M.ime.innerHTML="";else if(t.type==="compositionupdate"){const n=s.allocString(t.data);e(1,n),s.free(n)}else if(t.type==="compositionend"){const n=s.allocString(t.data);e(2,n),s.free(n),M.ime.innerHTML=""}}const i=document.createElement("div");i.className="ime",i.style.background="none",i.style.opacity=0,i.style.position="fixed",i.style.textAlign="left",i.style.fontSize="1px",i.style.left="0px",i.style.top="0px",i.style.width="100%",i.style.height="40px",i.style.pointerEvents="none",i.style.display="none",i.contentEditable="true",j.add(i,"compositionstart",a,!1),j.add(i,"compositionupdate",a,!1),j.add(i,"compositionend",a,!1),j.add(i,"keydown",r.bind(null,1),!1),j.add(i,"keyup",r.bind(null,0),!1),i.onblur=function(){this.style.display="none",m.canvas.focus(),M.active=!1},m.canvas.parentElement.appendChild(i),M.ime=i},clear:function(){M.ime&&(M.ime.remove(),M.ime=null)}},ce={getModifiers:function(e){return e.shiftKey+0+(e.altKey+0<<1)+(e.ctrlKey+0<<2)+(e.metaKey+0<<3)},computePosition:function(e,t){const n=m.canvas,s=n.width/t.width,o=n.height/t.height,i=(e.clientX-t.x)*s,a=(e.clientY-t.y)*o;return[i,a]}};function Sr(e){const n=s.get_func(e),o=function(e){const t=e||[];if(!t.length)return;const o=t.length,i=s.allocStringArray(t);n(i,o),s.freeStringArray(i,o)},t=m.canvas;j.add(t,"dragover",function(e){e.preventDefault()},!1),j.add(t,"drop",N.handler(o))}function Mr(e){const t=s.get_func(e);U.init(t)}function Fr(){return U.sample(),0}function Tr(){return U.get_samples().length}function zr(e,t,n,o,i,a){const r=U.get_sample(e);if(!r||!r.connected)return 1;const c=r.buttons,d=c.length<16?c.length:16;for(let e=0;e<d;e++)s.setHeapValue(t+(e<<2),c[e],"float");s.setHeapValue(n,d,"i32");const l=r.axes,u=l.length<10?l.length:10;for(let e=0;e<u;e++)s.setHeapValue(o+(e<<2),l[e],"float");s.setHeapValue(i,u,"i32");const h=r.standard?1:0;return s.setHeapValue(a,h,"i32"),0}function Dr(e,t,n){const i=s.get_func(e);function o(e,o){const a=ce.getModifiers(o);s.stringToHeap(o.code,t,32),s.stringToHeap(o.key,n,32),i(e,o.repeat,a),o.preventDefault()}j.add(m.canvas,"keydown",o.bind(null,1),!1),j.add(m.canvas,"keyup",o.bind(null,0),!1)}function Nr(e){const o=s.get_func(e),t=m.canvas;function n(e,n){const i=t.getBoundingClientRect(),s=ce.computePosition(n,i),a=ce.getModifiers(n);e&&m.canvas.focus(),o(e,n.button,s[0],s[1],a)&&n.preventDefault()}j.add(t,"mousedown",n.bind(null,1),!1),j.add(window,"mouseup",n.bind(null,0),!1)}function Lr(e){const n=s.get_func(e),t=m.canvas;function o(e){const s=t.getBoundingClientRect(),o=ce.computePosition(e,s),i=t.width/s.width,a=t.height/s.height,r=e.movementX*i,c=e.movementY*a,l=ce.getModifiers(e);n(o[0],o[1],r,c,l)}j.add(window,"mousemove",o,!1)}function Rr(e){const t=s.get_func(e);function n(e){t(e.deltaX||0,e.deltaY||0)&&e.preventDefault()}j.add(m.canvas,"wheel",n,!1)}function Pr(e){const t=s.get_func(e);j.add(window,"paste",function(e){const o=e.clipboardData.getData("text"),n=s.allocString(o);t(n),s.free(n)},!1)}function Hr(e,t,n){const a=s.get_func(e),o=m.canvas;function i(e,i){e===0&&m.canvas.focus();const c=o.getBoundingClientRect(),r=i.changedTouches;for(let e=0;e<r.length;e++){const o=r[e],i=ce.computePosition(o,c);s.setHeapValue(n+e*2*8,i[0],"double"),s.setHeapValue(n+(e*2+1)*8,i[1],"double"),s.setHeapValue(t+e*4,o.identifier,"i32")}a(e,r.length),i.cancelable&&i.preventDefault()}j.add(o,"touchstart",i.bind(null,0),!1),j.add(o,"touchend",i.bind(null,1),!1),j.add(o,"touchcancel",i.bind(null,1),!1),j.add(o,"touchmove",i.bind(null,2),!1)}function Ir(e){typeof navigator.vibrate!="function"?s.print("This browser does not support vibration."):navigator.vibrate(e)}function Br(){return M.active}function Vr(e,t,n,o){const r=s.heapSlice(b,e,t),c=s.parseString(n),l=s.parseString(o),d=new Blob([r],{type:l}),a=window.URL.createObjectURL(d),i=document.createElement("a");i.href=a,i.download=c,i.style.display="none",document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(a)}function $r(e){const t=s.parseString(e),n=JSON.parse(t);return m.on_execute?(m.on_execute(n),0):1}function Wr(e){const t=s.get_func(e);R.finish_async(t)}function Ur(){return k.is_persistent()}function Kr(e){const t=s.get_func(e);R._fs_sync_promise=k.sync(),R._fs_sync_promise.then(function(){t()})}function qr(e){const n=s.parseString(e),t=navigator.userAgent;return n==="web_macos"?t.indexOf("Mac")!==-1?1:0:n==="web_windows"?t.indexOf("Windows")!==-1?1:0:n==="web_android"?t.indexOf("Android")!==-1?1:0:n==="web_ios"?t.indexOf("iPhone")!==-1||t.indexOf("iPad")!==-1||t.indexOf("iPod")!==-1?1:0:n==="web_linuxbsd"?t.indexOf("CrOS")!==-1||t.indexOf("BSD")!==-1||t.indexOf("Linux")!==-1||t.indexOf("X11")!==-1?1:0:0}function Yr(){const e=navigator.hardwareConcurrency||1;return e<2?e:2}function Gr(e){R.request_quit=s.get_func(e)}function Xr(e){window.open(s.parseString(e),"_blank")}Se={hasUpdate:!1,updateState:function(e,t){if(!t)return;if(!t.active)return;t.waiting&&(Se.hasUpdate=!0,e()),j.add(t,"updatefound",function(){const n=t.installing;j.add(n,"statechange",function(){n.state==="installed"&&(Se.hasUpdate=!0,e())})})}};function Zr(e){if("serviceWorker"in navigator){const t=s.get_func(e);navigator.serviceWorker.getRegistration().then(Se.updateState.bind(null,t))}}function Jr(){return"serviceWorker"in navigator&&Se.hasUpdate?(navigator.serviceWorker.getRegistration().then(function(e){if(!e||!e.waiting)return;e.waiting.postMessage("update")}),0):1}J={connect:function(e,t,n,o,i){const a=h.get(e);if(!a)return;a.binaryType="arraybuffer",a.onopen=function(){t()},a.onclose=function(){i()},a.onerror=function(){o()},a.onmessage=function(e){let t,i=0;if(e.data instanceof ArrayBuffer)t=new Uint8Array(e.data);else if(e.data instanceof Blob){s.error("Blob type not supported");return}else if(typeof e.data=="string"){i=1;const n=new TextEncoder("utf-8");t=new Uint8Array(n.encode(e.data))}else{s.error("Unknown message type");return}const a=t.length*t.BYTES_PER_ELEMENT,o=s.malloc(a);z.set(t,o),n(o,a,i),s.free(o)}},close:function(e){const t=h.get(e);if(!t)return;t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null,t.close()},get_prop:function(e,t,n){const s=h.get(e);return s&&s[t]!==void 0?s[t]:n}};function tc(e){const t=h.get(e);if(!t)return;J.close(e)}function nc(e,t,n,o,i,a){const r=s.get_func(n).bind(null,t),c=s.get_func(o).bind(null,t),l=s.get_func(i).bind(null,t),d=s.get_func(a).bind(null,t);J.connect(e,r,c,l,d)}function sc(e){J.close(e),h.remove(e)}function oc(e){return J.get_prop(e,"bufferedAmount",0)}function ic(e){return J.get_prop(e,"id",65535)}function ac(e){return J.get_prop(e,"negotiated",65535)}function rc(e){return J.get_prop(e,"ordered",!0)}function cc(e){const t=h.get(e);return!t||!t.label?0:s.allocString(t.label)}function lc(e){const t=h.get(e);return t?t.maxPacketLifeTime!==void 0?t.maxPacketLifeTime:t.maxRetransmitTime!==void 0?t.maxRetransmitTime:65535:65535}function dc(e){return J.get_prop(e,"maxRetransmits",65535)}function uc(e){const t=h.get(e);return!t||!t.protocol?0:s.allocString(t.protocol)}function hc(e){const t=h.get(e);if(!t)return 3;switch(t.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;case"closed":default:return 3}}function mc(e,t,n,o){const i=h.get(e);if(!i)return 1;const a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=s.getHeapValue(t+e,"i8");if(o)i.send(a.buffer);else{const e=new TextDecoder("utf-8").decode(a);i.send(e)}return 0}K={ConnectionState:{new:0,connecting:1,connected:2,disconnected:3,failed:4,closed:5},ConnectionStateCompat:{new:0,checking:1,connected:2,completed:2,disconnected:3,failed:4,closed:5},IceGatheringState:{new:0,gathering:1,complete:2},SignalingState:{stable:0,"have-local-offer":1,"have-remote-offer":2,"have-local-pranswer":3,"have-remote-pranswer":4,closed:5},create:function(e,t,n,o,i,a){let r=null;try{r=new RTCPeerConnection(e)}catch(e){return s.error(e),0}const c=h.add(r);return"connectionState"in r&&r.connectionState!==void 0?r.onconnectionstatechange=function(){if(!h.get(c))return;t(K.ConnectionState[r.connectionState]||0)}:r.oniceconnectionstatechange=function(){if(!h.get(c))return;t(K.ConnectionStateCompat[r.iceConnectionState]||0)},r.onicegatheringstatechange=function(){if(!h.get(c))return;o(K.IceGatheringState[r.iceGatheringState]||0)},r.onsignalingstatechange=function(){if(!h.get(c))return;n(K.SignalingState[r.signalingState]||0)},r.onicecandidate=function(e){if(!h.get(c))return;const t=e.candidate;if(!t||!t.candidate)return;const n=s.allocString(t.candidate),o=s.allocString(t.sdpMid);i(o,t.sdpMLineIndex,n),s.free(n),s.free(o)},r.ondatachannel=function(e){if(!h.get(c))return;const t=h.add(e.channel);a(t)},c},destroy:function(e){const t=h.get(e);if(!t)return;t.onconnectionstatechange=null,t.oniceconnectionstatechange=null,t.onicegatheringstatechange=null,t.onsignalingstatechange=null,t.onicecandidate=null,t.ondatachannel=null,h.remove(e)},onsession:function(e,t,n){if(!h.get(e))return;const o=s.allocString(n.type),i=s.allocString(n.sdp);t(o,i),s.free(o),s.free(i)},onerror:function(e,t,n){const o=h.get(e);if(!o)return;s.error(n),t()}};function pc(e){const t=h.get(e);if(!t)return;t.close()}function gc(e,t,n,o,i,a,r){const c=function(e){return s.get_func(e).bind(null,t)};return K.create(JSON.parse(s.parseString(e)),c(n),c(i),c(o),c(a),c(r))}function vc(e,t,n){try{const o=h.get(e);if(!o)return 0;const i=s.parseString(t),a=JSON.parse(s.parseString(n)),r=o.createDataChannel(i,a);return h.add(r)}catch(e){return s.error(e),0}}function bc(e){K.destroy(e)}function jc(e,t,n,o){const i=h.get(e);if(!i)return;const a=s.parseString(t),r=s.parseString(o);i.addIceCandidate(new RTCIceCandidate({candidate:r,sdpMid:a,sdpMlineIndex:n}))}function yc(e,t,n,o,i){const a=h.get(e);if(!a)return;const r=s.parseString(t),c=s.parseString(n),l=s.get_func(i).bind(null,o);a.setLocalDescription({sdp:c,type:r}).catch(function(t){K.onerror(e,l,t)})}function _c(e,t,n,o){const i=h.get(e);if(!i)return;const a=s.get_func(n).bind(null,t),r=s.get_func(o).bind(null,t);i.createOffer().then(function(t){K.onsession(e,a,t)}).catch(function(t){K.onerror(e,r,t)})}function wc(e,t,n,o,i,a){const r=h.get(e);if(!r)return;const c=s.parseString(t),l=s.parseString(n),d=s.get_func(a).bind(null,o),u=s.get_func(i).bind(null,o);r.setRemoteDescription({sdp:l,type:c}).then(function(){return c!=="offer"?Promise.resolve():r.createAnswer().then(function(t){K.onsession(e,u,t)})}).catch(function(t){K.onerror(e,d,t)})}function Oc(e){M.ime_active(e)}function xc(e,t,n,o){const i=s.get_func(e),a=s.get_func(t);M.init(i,a,n,o)}function Cc(e,t){M.ime_position(e,t)}function Ec(e){const t=s.get_func(e);try{const e=[],n=window.speechSynthesis.getVoices();for(let t=0;t<n.length;t++)e.push(`${n[t].lang};${n[t].name}`);const o=s.allocStringArray(e);t(e.length,o),s.freeStringArray(o,e.length)}catch{}}function kc(){return window.speechSynthesis.paused}function Ac(){return window.speechSynthesis.speaking}function Sc(){window.speechSynthesis.pause()}function Mc(){window.speechSynthesis.resume()}function Fc(e,t,n,o,i,a,r){const d=s.get_func(r);function u(e){e.currentTarget.cb(1,e.currentTarget.id,0)}function h(e){e.currentTarget.cb(0,e.currentTarget.id,0)}function m(e){e.currentTarget.cb(2,e.currentTarget.id,0)}function f(e){e.currentTarget.cb(3,e.currentTarget.id,e.charIndex)}const c=new SpeechSynthesisUtterance(s.parseString(e));c.rate=i,c.pitch=o,c.volume=n/100,c.addEventListener("end",u),c.addEventListener("start",h),c.addEventListener("error",m),c.addEventListener("boundary",f),c.id=a,c.cb=d;const p=s.parseString(t),l=window.speechSynthesis.getVoices();for(let e=0;e<l.length;e++)if(l[e].name===p){c.voice=l[e];break}window.speechSynthesis.resume(),window.speechSynthesis.speak(c)}function Tc(){window.speechSynthesis.cancel(),window.speechSynthesis.resume()}Y={_onopen:function(e,t){const o=h.get(e);if(!o)return;const i=s.allocString(o.protocol);t(i),s.free(i)},_onmessage:function(e,t,n){const c=h.get(e);if(!c)return;let o,a=0;if(n.data instanceof ArrayBuffer)o=new Uint8Array(n.data);else if(n.data instanceof Blob){s.error("Blob type not supported");return}else if(typeof n.data=="string"){a=1;const e=new TextEncoder("utf-8");o=new Uint8Array(e.encode(n.data))}else{s.error("Unknown message type");return}const r=o.length*o.BYTES_PER_ELEMENT,i=s.malloc(r);z.set(o,i),t(i,r,a),s.free(i)},_onerror:function(e,t){const s=h.get(e);if(!s)return;t()},_onclose:function(e,t,n){const i=h.get(e);if(!i)return;const o=s.allocString(n.reason);t(n.code,o,n.wasClean?1:0),s.free(o)},send:function(e,t){const n=h.get(e);return!n||n.readyState!==n.OPEN?1:(n.send(t),0)},bufferedAmount:function(e){const t=h.get(e);return t?t.bufferedAmount:0},create:function(e,t,n,s,o){const i=h.add(e);return e.onopen=Y._onopen.bind(null,i,t),e.onmessage=Y._onmessage.bind(null,i,n),e.onerror=Y._onerror.bind(null,i,s),e.onclose=Y._onclose.bind(null,i,o),i},close:function(e,t,n){const s=h.get(e);if(s&&s.readyState<s.CLOSING){const e=t,o=n;s.close(e,o)}},destroy:function(e){const t=h.get(e);if(!t)return;Y.close(e,3001,"destroyed"),h.remove(e),t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null}};function Dc(e){return Y.bufferedAmount(e)}function Nc(e,t,n){const o=t,i=s.parseString(n);Y.close(e,o,i)}function Lc(e,t,n,o,i,a,r){const u=s.get_func(o).bind(null,e),h=s.get_func(i).bind(null,e),m=s.get_func(a).bind(null,e),f=s.get_func(r).bind(null,e),l=s.parseString(t),d=s.parseString(n);let c=null;try{d?c=new WebSocket(l,d.split(",")):c=new WebSocket(l)}catch{return 0}return c.binaryType="arraybuffer",Y.create(c,u,h,m,f)}function Rc(e){Y.destroy(e)}function Pc(e,t,n,o){const a=new Uint8Array(n);let i=0;for(i=0;i<n;i++)a[i]=s.getHeapValue(t+i,"i8");let r=a.buffer;return o||(r=new TextDecoder("utf-8").decode(a)),Y.send(e,r)}w={proxies:null,cb_ret:null,MyProxy:function(e){const t=h.add(this);w.proxies.set(e,t);let n=1;this.ref=function(){n++},this.unref=function(){n--,n===0&&(h.remove(t),w.proxies.delete(e))},this.get_val=function(){return e},this.get_id=function(){return t}},get_proxied:function(e){const t=w.proxies.get(e);if(t===void 0){const t=new w.MyProxy(e);return t.get_id()}return h.get(t).ref(),t},get_proxied_value:function(e){const t=h.get(e);return t===void 0?void 0:t.get_val()},variant2js:function(e,t){switch(e){case 0:return null;case 1:return Boolean(s.getHeapValue(t,"i64"));case 2:{const e=s.getHeapValue(t,"i64");return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e}case 3:return Number(s.getHeapValue(t,"double"));case 4:return s.parseString(s.getHeapValue(t,"*"));case 24:return w.get_proxied_value(s.getHeapValue(t,"i64"));default:return void 0}},js2variant:function(e,t){if(e==null)return 0;const n=typeof e;if(n==="boolean")return s.setHeapValue(t,e,"i64"),1;if(n==="number")return Number.isInteger(e)?(s.setHeapValue(t,e,"i64"),2):(s.setHeapValue(t,e,"double"),3);if(n==="bigint")return s.setHeapValue(t,e,"i64"),2;if(n==="string"){const n=s.allocString(e);return s.setHeapValue(t,n,"*"),4}const o=w.get_proxied(e);return s.setHeapValue(t,o,"i64"),24}};function Ic(e,t){const o=s.get_func(t);let n=0;const i=function(){if(!w.get_proxied_value(n))return void 0;w.cb_ret=null;const t=Array.from(arguments),s=new w.MyProxy(t);o(e,s.get_id(),t.length),s.unref();const i=w.cb_ret;return w.cb_ret=null,i};return n=w.get_proxied(i),n}function Bc(e,t,n,o,i,a,r){const c=s.parseString(e);if(typeof window[c]=="undefined")return-1;const d=s.get_func(o),u=s.get_func(r),l=new Array(n);for(let e=0;e<n;e++){const o=d(t,e,i,a),r=s.getHeapValue(a,"*");l[e]=w.variant2js(o,i),r&&u(a,o)}try{const e=new window[c](...l);return w.js2variant(e,i)}catch(e){return s.error(`Error calling constructor ${c} with args:`,l,"error:",e),-1}}function Vc(e){const t=s.parseString(e);return typeof window[t]!="undefined"?w.get_proxied(window[t]):0}function $c(e,t,n,o,i,a,r,c){const l=w.get_proxied_value(e);if(l===void 0)return-1;const d=s.parseString(t),h=s.get_func(i),m=s.get_func(c),u=new Array(o);for(let e=0;e<o;e++){const t=h(n,e,a,r),i=s.getHeapValue(r,"*");u[e]=w.variant2js(t,a),i&&m(r,t)}try{const e=l[d](...u);return w.js2variant(e,a)}catch(e){return s.error(`Error calling method ${d} on:`,l,"error:",e),-1}}function Wc(e,t,n){const o=w.get_proxied_value(e);if(o===void 0)return 0;if(n){const e=s.parseString(n);try{return w.js2variant(o[e],t)}catch{return s.error(`Error getting variable ${e} on object`,o),0}}return w.js2variant(o,t)}function Uc(e,t,n){const i=w.get_proxied_value(e);if(i===void 0)return-1;const o=w.variant2js(t,n);if(o==null)return-1;try{return w.js2variant(i[o],n)}catch(e){return s.error(`Error getting variable ${o} on object`,i,e),-1}}function Kc(e,t,n,o){const i=w.get_proxied_value(e);if(i===void 0)return;const a=s.parseString(t);try{i[a]=w.variant2js(n,o)}catch{s.error(`Error setting variable ${a} on object`,i)}}function qc(e,t){w.cb_ret=w.variant2js(e,t)}function Yc(e,t,n,o,i){const a=w.get_proxied_value(e);if(a===void 0)return-1;const r=w.variant2js(t,n);try{return a[r]=w.variant2js(o,i),0}catch{return s.error(`Error setting variable ${r} on object`,a),-1}}function Gc(e){const t=h.get(e);t!==void 0&&t.unref()}function Xc(e,t,n,o,i,a,c){const l=r.currentContext;if(typeof l.oculusMultiviewExt=="undefined"){const e=l.GLctx.getExtension("OCULUS_multiview");if(!e){s.error("Trying to call glFramebufferTextureMultisampleMultiviewOVR() without the OCULUS_multiview extension");return}l.oculusMultiviewExt=e}const d=l.oculusMultiviewExt;d.framebufferTextureMultisampleMultiviewOVR(e,t,r.textures[n],o,i,a,c)}function Qc(e,t,n,o,i,a){const c=r.currentContext;if(typeof c.multiviewExt=="undefined"){const e=c.GLctx.getExtension("OVR_multiview2");if(!e){s.error("Trying to call glFramebufferTextureMultiviewOVR() without the OVR_multiview2 extension");return}c.multiviewExt=e}const l=c.multiviewExt;l.framebufferTextureMultiviewOVR(e,t,r.textures[n],o,i,a)}function Zc(e,t,n,s){const i=Ge(),o=r.getContext(i);o&&o.GLctx.getBufferSubData(e,t,z,s,n)}d={gl:null,session:null,gl_binding:null,layer:null,space:null,frame:null,pose:null,view_count:1,input_sources:[,,,,,,,,,,,,,,,],touches:[,,,,],onsimpleevent:null,orig_requestAnimationFrame:null,requestAnimationFrame:e=>{if(d.session&&d.space){const t=function(t,n){d.frame=n,d.pose=n.getViewerPose(d.space),e(t),d.frame=null,d.pose=null};d.session.requestAnimationFrame(t)}else d.orig_requestAnimationFrame(e)},monkeyPatchRequestAnimationFrame:e=>{d.orig_requestAnimationFrame===null&&(d.orig_requestAnimationFrame=c.requestAnimationFrame),c.requestAnimationFrame=e?d.requestAnimationFrame:d.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{c.mainLoop.pause(),He(),window.setTimeout(function(){Me(),c.mainLoop.resume()},0)},getLayer:()=>{const t=d.pose?d.pose.views.length:1;let e=d.layer;if(e&&d.view_count===t)return e;if(!d.session||!d.gl_binding)return null;const n=d.gl;return e=d.gl_binding.createProjectionLayer({textureType:t>1?"texture-array":"texture",colorFormat:n.RGBA8,depthFormat:n.DEPTH_COMPONENT24}),d.session.updateRenderState({layers:[e]}),d.layer=e,d.view_count=t,e},getSubImage:()=>{if(!d.pose)return null;const e=d.getLayer();return e===null?null:d.gl_binding.getViewSubImage(e,d.pose.views[0])},getTextureId:e=>{if(e.name!==void 0)return e.name;const t=r.getNewId(r.textures);return e.name=t,r.textures[t]=e,t},addInputSource:e=>{let t=-1;if(e.targetRayMode==="tracked-pointer"&&e.handedness==="left")t=0;else if(e.targetRayMode==="tracked-pointer"&&e.handedness==="right")t=1;else for(let e=2;e<16;e++)if(!d.input_sources[e]){t=e;break}if(t>=0&&(d.input_sources[t]=e,e.name=t,e.targetRayMode==="screen")){let t=-1;for(let e=0;e<5;e++)if(!d.touches[e]){t=e;break}t>=0&&(d.touches[t]=e,e.touch_index=t)}return t},removeInputSource:e=>{if(e.name!==void 0){const t=e.name;if(t>=0&&t<16&&(d.input_sources[t]=null),e.touch_index!==void 0){const t=e.touch_index;t>=0&&t<5&&(d.touches[t]=null)}return t}return-1},getInputSourceId:e=>e!==void 0?e.name:-1,getTouchIndex:e=>e.touch_index!==void 0?e.touch_index:-1};function el(e){if(!d.space||!d.space.boundsGeometry)return 0;const t=d.space.boundsGeometry.length;if(t===0)return 0;const n=s.malloc(t*3*4);for(let e=0;e<t;e++){const o=d.space.boundsGeometry[e];s.setHeapValue(n+(e*3+0)*4,o.x,"float"),s.setHeapValue(n+(e*3+1)*4,o.y,"float"),s.setHeapValue(n+(e*3+2)*4,o.z,"float")}return s.setHeapValue(e,n,"i32"),t}function tl(){const e=d.getSubImage();return e===null?0:d.getTextureId(e.colorTexture)}function nl(){const e=d.getSubImage();return e===null?0:e.depthStencilTexture?d.getTextureId(e.depthStencilTexture):0}function sl(){return!d.session||d.session.frameRate===void 0?0:d.session.frameRate}function ol(e,t){if(!d.session||!d.pose)return!1;const n=d.pose.views[e].projectionMatrix;for(let e=0;e<16;e++)s.setHeapValue(t+e*4,n[e],"float");return!0}function il(e){const t=d.getSubImage();return t!==null&&(s.setHeapValue(e+0,t.viewport.width,"i32"),s.setHeapValue(e+4,t.viewport.height,"i32"),!0)}function al(e){if(!d.session||d.session.supportedFrameRates===void 0)return 0;const t=d.session.supportedFrameRates.length;if(t===0)return 0;const n=s.malloc(t*4);for(let e=0;e<t;e++)s.setHeapValue(n+e*4,d.session.supportedFrameRates[e],"float");return s.setHeapValue(e,n,"i32"),t}function rl(e,t){if(!d.session||!d.pose)return!1;const o=d.pose.views;let n;e>=0?n=o[e].transform.matrix:n=d.pose.transform.matrix;for(let e=0;e<16;e++)s.setHeapValue(t+e*4,n[e],"float");return!0}function cl(){const e=d.getSubImage();return e===null?0:e.motionVectorTexture?d.getTextureId(e.motionVectorTexture):0}function ll(){if(!d.session||!d.pose)return 1;const e=d.pose.views.length;return e>0?e:1}function dl(){return!d.session||!d.session.visibilityState?0:s.allocString(d.session.visibilityState)}Nn=function(e,t,n,o,i,a,c,l,u){d.monkeyPatchRequestAnimationFrame(!0);const b=s.parseString(e),p=s.parseString(t).split(",").map(e=>e.trim()).filter(e=>e!==""),g=s.parseString(n).split(",").map(e=>e.trim()).filter(e=>e!==""),v=s.parseString(o).split(",").map(e=>e.trim()),j=s.get_func(i),y=s.get_func(a),h=s.get_func(c),_=s.get_func(l),m=s.get_func(u),f={};p.length>0&&(f.requiredFeatures=p),g.length>0&&(f.optionalFeatures=g),navigator.xr.requestSession(b,f).then(function(e){d.session=e,e.addEventListener("end",function(){y()}),e.addEventListener("inputsourceschange",function(e){e.added.forEach(d.addInputSource),e.removed.forEach(d.removeInputSource)}),["selectstart","selectend","squeezestart","squeezeend"].forEach((t,n)=>{e.addEventListener(t,function(e){d.frame=e.frame,_(n,d.getInputSourceId(e.inputSource)),d.frame=null})}),e.addEventListener("visibilitychange",function(){const t=s.allocString("visibility_state_changed");m(t),s.free(t)}),d.onsimpleevent=m;const n=Ge(),t=r.getContext(n).GLctx;d.gl=t,t.makeXRCompatible().then(function(){d.gl_binding=new XRWebGLBinding(e,t),d.getLayer();function o(t,n){d.space=t,t.onreset=function(){const t=s.allocString("reference_space_reset");m(t),s.free(t)},d.pauseResumeMainLoop(),window.setTimeout(function(){const t=s.allocString(n),a="enabledFeatures"in e?Array.from(e.enabledFeatures):[],o=s.allocString(a.join(",")),r="environmentBlendMode"in e?e.environmentBlendMode:"",i=s.allocString(r);j(t,o,i),s.free(t),s.free(o),s.free(i)},0)}function n(){const t=v.shift();e.requestReferenceSpace(t).then(e=>{o(e,t)}).catch(()=>{if(v.length===0){const e=s.allocString("Unable to get any of the requested reference space types");h(e),s.free(e)}else n()})}n()}).catch(function(e){const t=s.allocString(`Unable to make WebGL context compatible with WebXR: ${e}`);h(t),s.free(t)})}).catch(function(e){const t=s.allocString(`Unable to start session: ${e}`);h(t),s.free(t)})};function hl(e,t){const n=s.parseString(e),o=s.get_func(t);if(navigator.xr)navigator.xr.isSessionSupported(n).then(function(e){const t=s.allocString(n);o(t,e?1:0),s.free(t)});else{const e=s.allocString(n);o(e,0),s.free(e)}}function ml(){return!!navigator.xr}Ln=function(){d.session&&d.session.end().catch(e=>{}),d.session=null,d.gl_binding=null,d.layer=null,d.space=null,d.frame=null,d.pose=null,d.view_count=1,d.input_sources=new Array(16),d.touches=new Array(5),d.onsimpleevent=null,d.monkeyPatchRequestAnimationFrame(!1),d.pauseResumeMainLoop()};function pl(e,t,n,o,i,a,r,c,l,u,h,m,f,p){if(!d.session||!d.frame)return 0;if(e<0||e>=d.input_sources.length||!d.input_sources[e])return!1;const g=d.input_sources[e],b=d.frame,y=d.space,O=b.getPose(g.targetRaySpace,y);if(!O)return!1;const k=O.transform.matrix;for(let e=0;e<16;e++)s.setHeapValue(t+e*4,k[e],"float");let j=0;switch(g.targetRayMode){case"gaze":j=1;break;case"tracked-pointer":j=2;break;case"screen":j=3;break;default:}s.setHeapValue(n,j,"i32"),s.setHeapValue(o,d.getTouchIndex(g),"i32");let x=!1;if(g.gripSpace){const e=b.getPose(g.gripSpace,y);if(e){const t=e.transform.matrix;for(let e=0;e<16;e++)s.setHeapValue(a+e*4,t[e],"float");x=!0}}s.setHeapValue(i,x?1:0,"i32");let C=!1,_=0,w=0;if(g.gamepad){g.gamepad.mapping==="xr-standard"&&(C=!0),_=Math.min(g.gamepad.buttons.length,10);for(let e=0;e<_;e++)s.setHeapValue(l+e*4,g.gamepad.buttons[e].value,"float");w=Math.min(g.gamepad.axes.length,10);for(let e=0;e<w;e++)s.setHeapValue(h+e*4,g.gamepad.axes[e],"float")}s.setHeapValue(r,C?1:0,"i32"),s.setHeapValue(c,_,"i32"),s.setHeapValue(u,w,"i32");let E=!1;if(g.hand&&f!==0&&p!==0){const e=new Float32Array(25*16),t=new Float32Array(25);b.fillPoses(g.hand.values(),y,e)&&b.fillJointRadii(g.hand.values(),t)&&(s.heapCopy(v,e,f),s.heapCopy(v,t,p),E=!0)}return s.setHeapValue(m,E?1:0,"i32"),!0}function gl(e){if(!d.session||d.session.updateTargetFrameRate===void 0)return;d.session.updateTargetFrameRate(e).then(()=>{const e=s.allocString("display_refresh_rate_changed");d.onsimpleevent(e),s.free(e)})}et=e=>It(e),Ut=e=>{var t=Q(e)+1,n=et(t);return H(e,n,t),n},Pn=e=>{var t=i["_"+e];return u(t,"Cannot call unknown function "+e+", make sure it is exported"),t},Bn=(e,t)=>{u(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),b.set(e,t)},Vn=()=>dt(),$n=e=>Vt(e),ts=(e,t,n,s)=>{var i,a,r,c,l,d,h={string:e=>{var t=0;return e!=null&&e!==0&&(t=Ut(e)),t},array:e=>{var t=et(e.length);return Bn(e,t),t}};function m(e){return t==="string"?L(e):t==="boolean"?Boolean(e):e}if(d=Pn(e),r=[],a=0,u(t!=="array",'Return type should not be "array".'),s)for(i=0;i<s.length;i++)l=h[n[i]],l?(a===0&&(a=Vn()),r[i]=l(s[i])):r[i]=s[i];c=d(...r);function f(e){return a!==0&&$n(a),m(e)}return c=f(c),c},ps=(e,t,n,s)=>(...o)=>ts(e,t,n,o,s),n.createPreloadedFile=Gi,n.staticInit(),i.requestFullscreen=c.requestFullscreen,i.requestFullScreen=c.requestFullScreen,i.requestAnimationFrame=c.requestAnimationFrame,i.setCanvasSize=c.setCanvasSize,i.pauseMainLoop=c.mainLoop.pause,i.resumeMainLoop=c.mainLoop.resume,i.getUserMedia=c.getUserMedia,i.createContext=c.createContext;for(Uo={},ni={},I=0;I<32;++I)Nt.push(new Array(I));for(Ci=new Int32Array(288),I=0;I<=288;++I)rt[I]=Ci.subarray(0,I);for(Ai=new Float32Array(288),I=0;I<=288;++I)ue[I]=Ai.subarray(0,I);i.request_quit=function(){R.request_quit()},i.onExit=R.cleanup,R._fs_sync_promise=Promise.resolve(),i.initConfig=m.init_config,i.initFS=k.init,i.copyToFS=k.copy_to_fs,R.atexit(function(e){E.clear(),e()}),R.atexit(function(e){j.clear(),e()}),R.atexit(function(e){O.clear(),e()}),R.atexit(function(e){M.clear(),e()}),w.proxies=new Map;function Fl(){Bl("fetchSettings")}Ct={__assert_fail:Sn,__call_sighandler:Mn,__syscall__newselect:Rl,__syscall_accept4:Nl,__syscall_bind:zl,__syscall_chdir:Tl,__syscall_chmod:Ml,__syscall_connect:Sl,__syscall_faccessat:Al,__syscall_fchmod:kl,__syscall_fcntl64:El,__syscall_fstat64:Cl,__syscall_ftruncate64:xl,__syscall_getcwd:Ol,__syscall_getdents64:wl,__syscall_getsockname:_l,__syscall_getsockopt:yl,__syscall_ioctl:ea,__syscall_listen:jl,__syscall_lstat64:bl,__syscall_mkdirat:vl,__syscall_mknodat:fl,__syscall_newfstatat:ul,__syscall_openat:Jc,__syscall_poll:Hc,__syscall_readlinkat:zc,__syscall_recvfrom:fc,__syscall_renameat:ec,__syscall_rmdir:Qr,__syscall_sendto:Ar,__syscall_socket:kr,__syscall_stat64:Er,__syscall_statfs64:Cr,__syscall_symlink:vr,__syscall_unlinkat:gr,_abort_js:On,_emscripten_get_now_is_monotonic:oo,_emscripten_runtime_keepalive_clear:gt,_gmtime_js:Na,_localtime_js:Da,_tzset_js:bn,emscripten_cancel_main_loop:Wn,emscripten_date_now:Un,emscripten_err:Kn,emscripten_force_exit:qn,emscripten_get_now:Xe,emscripten_resize_heap:Xn,emscripten_set_canvas_element_size:ns,emscripten_set_main_loop:ss,emscripten_webgl_commit_frame:Tn,emscripten_webgl_create_context:rs,emscripten_webgl_destroy_context:cs,emscripten_webgl_enable_extension:ls,emscripten_webgl_get_supported_extensions:us,emscripten_webgl_make_context_current:hs,environ_get:vs,environ_sizes_get:bs,exit:Ve,fd_close:za,fd_fdstat_get:Ta,fd_read:Fa,fd_seek:Ma,fd_write:Sa,getaddrinfo:Es,getnameinfo:ks,glActiveTexture:As,glAttachShader:Ss,glBeginTransformFeedback:Ms,glBindBuffer:Fs,glBindBufferBase:Ts,glBindBufferRange:zs,glBindFramebuffer:dn,glBindRenderbuffer:Ns,glBindTexture:Ls,glBindVertexArray:Rs,glBlendColor:Ps,glBlendEquation:Hs,glBlendFunc:Is,glBlendFuncSeparate:Bs,glBlitFramebuffer:Vs,glBufferData:$s,glBufferSubData:Ws,glCheckFramebufferStatus:Us,glClear:Ks,glClearBufferfv:qs,glClearColor:Ys,glClearDepthf:Gs,glColorMask:Xs,glCompileShader:Qs,glCompressedTexImage2D:Zs,glCompressedTexImage3D:Js,glCompressedTexSubImage3D:eo,glCopyBufferSubData:to,glCreateProgram:no,glCreateShader:so,glCullFace:un,glDeleteBuffers:io,glDeleteFramebuffers:ao,glDeleteProgram:ro,glDeleteQueries:co,glDeleteRenderbuffers:lo,glDeleteShader:uo,glDeleteSync:ho,glDeleteTextures:mo,glDeleteVertexArrays:fo,glDepthFunc:po,glDepthMask:go,glDisable:vo,glDisableVertexAttribArray:bo,glDrawArrays:jo,glDrawArraysInstanced:yo,glDrawBuffers:wo,glDrawElements:Oo,glDrawElementsInstanced:xo,glEnable:Co,glEnableVertexAttribArray:Eo,glEndTransformFeedback:ko,glFenceSync:Ao,glFinish:So,glFramebufferRenderbuffer:Mo,glFramebufferTexture2D:Fo,glFramebufferTextureLayer:To,glFrontFace:zo,glGenBuffers:Do,glGenFramebuffers:No,glGenQueries:Lo,glGenRenderbuffers:Ro,glGenTextures:Po,glGenVertexArrays:Ho,glGenerateMipmap:Io,glGetFloatv:Ko,glGetInteger64v:qo,glGetIntegerv:Yo,glGetProgramInfoLog:Go,glGetProgramiv:Xo,glGetShaderInfoLog:Qo,glGetShaderiv:Zo,glGetString:Jo,glGetSynciv:ei,glGetUniformBlockIndex:ti,glGetUniformLocation:oi,glLinkProgram:ii,glPixelStorei:ai,glReadBuffer:ri,glReadPixels:mi,glRenderbufferStorage:fi,glRenderbufferStorageMultisample:pi,glScissor:gi,glShaderSource:vi,glTexImage2D:bi,glTexImage3D:ji,glTexParameterf:yi,glTexParameteri:_i,glTexStorage2D:wi,glTexSubImage3D:Oi,glTransformFeedbackVaryings:xi,glUniform1f:Ei,glUniform1i:ki,glUniform1iv:Si,glUniform1ui:Mi,glUniform1uiv:Fi,glUniform2f:Ti,glUniform2fv:Di,glUniform2iv:Ni,glUniform3fv:Li,glUniform4f:Ri,glUniform4fv:Pi,glUniformBlockBinding:Hi,glUniformMatrix3fv:Ii,glUniformMatrix4fv:Bi,glUseProgram:Vi,glVertexAttrib4f:$i,glVertexAttribDivisor:Wi,glVertexAttribI4ui:Ui,glVertexAttribIPointer:Ki,glVertexAttribPointer:qi,glViewport:Yi,godot_audio_has_worklet:xa,godot_audio_init:ta,godot_audio_input_start:na,godot_audio_input_stop:sa,godot_audio_is_available:oa,godot_audio_resume:ia,godot_audio_sample_bus_add:aa,godot_audio_sample_bus_move:ra,godot_audio_sample_bus_remove:ca,godot_audio_sample_bus_set_count:la,godot_audio_sample_bus_set_mute:da,godot_audio_sample_bus_set_send:ua,godot_audio_sample_bus_set_solo:ha,godot_audio_sample_bus_set_volume_db:ma,godot_audio_sample_is_active:fa,godot_audio_sample_register_stream:pa,godot_audio_sample_set_finished_callback:ga,godot_audio_sample_set_pause:va,godot_audio_sample_set_volumes_linear:ba,godot_audio_sample_start:ja,godot_audio_sample_stop:ya,godot_audio_sample_stream_is_registered:_a,godot_audio_sample_unregister_stream:wa,godot_audio_sample_update_pitch_scale:Oa,godot_audio_worklet_create:Ca,godot_audio_worklet_start_no_threads:Ea,godot_js_config_canvas_id_get:ka,godot_js_config_locale_get:Aa,godot_js_display_alert:La,godot_js_display_canvas_focus:Ra,godot_js_display_canvas_is_focused:Pa,godot_js_display_clipboard_get:Ha,godot_js_display_clipboard_set:Ia,godot_js_display_cursor_is_hidden:Ba,godot_js_display_cursor_is_locked:Va,godot_js_display_cursor_lock_set:$a,godot_js_display_cursor_set_custom_shape:Wa,godot_js_display_cursor_set_shape:Ua,godot_js_display_cursor_set_visible:Ka,godot_js_display_desired_size_set:qa,godot_js_display_fullscreen_cb:Ya,godot_js_display_fullscreen_exit:Ga,godot_js_display_fullscreen_request:Xa,godot_js_display_has_webgl:Qa,godot_js_display_is_swap_ok_cancel:Za,godot_js_display_notification_cb:Ja,godot_js_display_pixel_ratio_get:er,godot_js_display_screen_dpi_get:tr,godot_js_display_screen_size_get:nr,godot_js_display_setup_canvas:sr,godot_js_display_size_update:or,godot_js_display_touchscreen_is_available:ir,godot_js_display_tts_available:ar,godot_js_display_vk_available:rr,godot_js_display_vk_cb:cr,godot_js_display_vk_hide:lr,godot_js_display_vk_show:dr,godot_js_display_window_blur_cb:ur,godot_js_display_window_icon_set:hr,godot_js_display_window_size_get:mr,godot_js_display_window_title_set:fr,godot_js_eval:pr,godot_js_fetch_create:br,godot_js_fetch_free:jr,godot_js_fetch_http_status_get:yr,godot_js_fetch_is_chunked:_r,godot_js_fetch_read_chunk:wr,godot_js_fetch_read_headers:Or,godot_js_fetch_state_get:xr,godot_js_input_drop_files_cb:Sr,godot_js_input_gamepad_cb:Mr,godot_js_input_gamepad_sample:Fr,godot_js_input_gamepad_sample_count:Tr,godot_js_input_gamepad_sample_get:zr,godot_js_input_key_cb:Dr,godot_js_input_mouse_button_cb:Nr,godot_js_input_mouse_move_cb:Lr,godot_js_input_mouse_wheel_cb:Rr,godot_js_input_paste_cb:Pr,godot_js_input_touch_cb:Hr,godot_js_input_vibrate_handheld:Ir,godot_js_is_ime_focused:Br,godot_js_os_download_buffer:Vr,godot_js_os_execute:$r,godot_js_os_finish_async:Wr,godot_js_os_fs_is_persistent:Ur,godot_js_os_fs_sync:Kr,godot_js_os_has_feature:qr,godot_js_os_hw_concurrency_get:Yr,godot_js_os_request_quit_cb:Gr,godot_js_os_shell_open:Xr,godot_js_pwa_cb:Zr,godot_js_pwa_update:Jr,godot_js_rtc_datachannel_close:tc,godot_js_rtc_datachannel_connect:nc,godot_js_rtc_datachannel_destroy:sc,godot_js_rtc_datachannel_get_buffered_amount:oc,godot_js_rtc_datachannel_id_get:ic,godot_js_rtc_datachannel_is_negotiated:ac,godot_js_rtc_datachannel_is_ordered:rc,godot_js_rtc_datachannel_label_get:cc,godot_js_rtc_datachannel_max_packet_lifetime_get:lc,godot_js_rtc_datachannel_max_retransmits_get:dc,godot_js_rtc_datachannel_protocol_get:uc,godot_js_rtc_datachannel_ready_state_get:hc,godot_js_rtc_datachannel_send:mc,godot_js_rtc_pc_close:pc,godot_js_rtc_pc_create:gc,godot_js_rtc_pc_datachannel_create:vc,godot_js_rtc_pc_destroy:bc,godot_js_rtc_pc_ice_candidate_add:jc,godot_js_rtc_pc_local_description_set:yc,godot_js_rtc_pc_offer_create:_c,godot_js_rtc_pc_remote_description_set:wc,godot_js_set_ime_active:Oc,godot_js_set_ime_cb:xc,godot_js_set_ime_position:Cc,godot_js_tts_get_voices:Ec,godot_js_tts_is_paused:kc,godot_js_tts_is_speaking:Ac,godot_js_tts_pause:Sc,godot_js_tts_resume:Mc,godot_js_tts_speak:Fc,godot_js_tts_stop:Tc,godot_js_websocket_buffered_amount:Dc,godot_js_websocket_close:Nc,godot_js_websocket_create:Lc,godot_js_websocket_destroy:Rc,godot_js_websocket_send:Pc,godot_js_wrapper_create_cb:Ic,godot_js_wrapper_create_object:Bc,godot_js_wrapper_interface_get:Vc,godot_js_wrapper_object_call:$c,godot_js_wrapper_object_get:Wc,godot_js_wrapper_object_getvar:Uc,godot_js_wrapper_object_set:Kc,godot_js_wrapper_object_set_cb_ret:qc,godot_js_wrapper_object_setvar:Yc,godot_js_wrapper_object_unref:Gc,godot_webgl2_glFramebufferTextureMultisampleMultiviewOVR:Xc,godot_webgl2_glFramebufferTextureMultiviewOVR:Qc,godot_webgl2_glGetBufferSubData:Zc,godot_webxr_get_bounds_geometry:el,godot_webxr_get_color_texture:tl,godot_webxr_get_depth_texture:nl,godot_webxr_get_frame_rate:sl,godot_webxr_get_projection_for_view:ol,godot_webxr_get_render_target_size:il,godot_webxr_get_supported_frame_rates:al,godot_webxr_get_transform_for_view:rl,godot_webxr_get_velocity_texture:cl,godot_webxr_get_view_count:ll,godot_webxr_get_visibility_state:dl,godot_webxr_initialize:Nn,godot_webxr_is_session_supported:hl,godot_webxr_is_supported:ml,godot_webxr_uninitialize:Ln,godot_webxr_update_input_source:pl,godot_webxr_update_target_frame_rate:gl,proc_exit:Gt},B=Vl(),Dl=$("__wasm_call_ctors",0),Qi=$("free",1),Ll=i.__Z14godot_web_mainiPPc=$("_Z14godot_web_mainiPPc",2),Ds=i._main=$("__main_argc_argv",2),Fe=$("malloc",1),An=$("fflush",1),mt=$("htonl",1),ct=$("htons",1),rn=$("ntohs",1),$l=i.__emwebxr_on_input_event=$("_emwebxr_on_input_event",2),Wl=i.__emwebxr_on_simple_event=$("_emwebxr_on_simple_event",1),hn=$("strerror",1),vn=$("__funcs_on_exit",0),ln=()=>(ln=B.emscripten_stack_init)(),wn=()=>(wn=B.emscripten_stack_get_free)(),Hn=()=>(Hn=B.emscripten_stack_get_base)(),Je=()=>(Je=B.emscripten_stack_get_end)(),Vt=e=>(Vt=B._emscripten_stack_restore)(e),It=e=>(It=B._emscripten_stack_alloc)(e),dt=()=>(dt=B.emscripten_stack_get_current)(),i.callMain=Os,i.cwrap=ps,Qn=["writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","setTempRet0","arraySum","addDays","emscriptenLog","readEmAsmArgs","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","setWasmTableEntry","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","registerKeyEventCallback","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","FS_unlink","FS_mkdirTree","_setNetworkCallback","emscriptenWebGLGetUniform","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","emscriptenWebGLGetIndexed","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"],Qn.forEach(Il),ds=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","writeI53ToI64","readI53FromI64","readI53FromU64","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","zeroMemory","exitJS","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","ERRNO_CODES","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","readEmAsmArgsArray","jstoi_q","jstoi_s","getExecutableName","getWasmTableEntry","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","getCFunc","ccall","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","safeSetTimeout","promiseMap","Browser","setMainLoop","getPreloadedImageData__data","wget","SYSCALLS","getSocketFromFD","getSocketAddress","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance","webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance","allocateUTF8","allocateUTF8OnStack","print","printErr","GodotWebXR","GodotWebSocket","GodotRTCDataChannel","GodotRTCPeerConnection","GodotAudio","GodotAudioWorklet","GodotAudioScript","GodotDisplayVK","GodotDisplayCursor","GodotDisplayScreen","GodotDisplay","GodotFetch","IDHandler","GodotConfig","GodotFS","GodotOS","GodotEventListeners","GodotPWA","GodotRuntime","GodotIME","GodotInputGamepads","GodotInputDragDrop","GodotInput","GodotWebGL2","GodotJSWrapper","IDBFS"],ds.forEach(En),we=function e(){Ke||di(),Ke||(we=e)};function Os(e=[]){u(ee==0,'cannot call main when async dependencies remain! (listen on Module["onRuntimeInitialized"])'),u(ht.length==0,"cannot call main when preRun functions remain to be called");var t,n,s,o,i=Ds;e.unshift(it),n=e.length,s=et((n+1)*4),t=s,e.forEach(e=>{g[t>>2]=Ut(e),t+=4}),g[t>>2]=0;try{return o=i(n,s),Yt(o,!0),o}catch(e){return ft(e)}}function od(){ln(),sd()}function di(e=xt){if(ee>0)return;if(od(),nd(),ee>0)return;function t(){if(Ke)return;if(Ke=!0,i.calledRun=!0,te)return;td(),ed(),Ji(i),i.onRuntimeInitialized?.(),Et&&Os(e),Zl()}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t(),de()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();Et=!1,i.noInitialRun&&(Et=!1),di(),In=bt;for(const e of Object.keys(i))e in t||Object.defineProperty(t,e,{configurable:!0,get(){A(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return In}})();typeof exports=="object"&&typeof module=="object"?module.exports=Godot:typeof define=="function"&&define.amd&&define([],()=>Godot);const Features={isWebGLAvailable:function(e=1){try{return!!document.createElement("canvas").getContext(["webgl","webgl2"][e-1])}catch{}return!1},isFetchAvailable:function(){return"fetch"in window&&"Response"in window&&"body"in window.Response.prototype},isSecureContext:function(){return window.isSecureContext===!0},isCrossOriginIsolated:function(){return window.crossOriginIsolated===!0},isSharedArrayBufferAvailable:function(){return"SharedArrayBuffer"in window},isAudioWorkletAvailable:function(){return"AudioContext"in window&&"audioWorklet"in AudioContext.prototype},getMissingFeatures:function(e={}){const{threads:n=!0}=e,t=[];return Features.isWebGLAvailable(2)||t.push("WebGL2 - Check web browser configuration and hardware support"),Features.isFetchAvailable()||t.push("Fetch - Check web browser version"),Features.isSecureContext()||t.push("Secure Context - Check web server configuration (use HTTPS)"),n&&(Features.isCrossOriginIsolated()||t.push("Cross-Origin Isolation - Check that the web server configuration sends the correct headers."),Features.isSharedArrayBufferAvailable()||t.push("SharedArrayBuffer - Check that the web server configuration sends the correct headers.")),t}},Preloader=function(){function i(e,t){function n(e,s){return e.read().then(function(o){return t.done?Promise.resolve():(o.value&&(s.enqueue(o.value),t.loaded+=o.value.length),o.done?(t.done=!0,Promise.resolve()):n(e,s))})}const s=e.body.getReader();return new Response(new ReadableStream({start:function(e){n(s,e).then(function(){e.close()})}}),{headers:e.headers})}function a(e,t,n,s){return t[e]={total:n||0,loaded:0,done:!1},fetch(e).then(function(n){if(!n.ok)return Promise.reject(new Error(`Failed loading file '${e}'`));const o=i(n,t[e]);return s?Promise.resolve(o):o.arrayBuffer()})}function s(e,t=1){function n(n){return t<=1?Promise.reject(n):new Promise(function(n,o){setTimeout(function(){s(e,t-1).then(n).catch(o)},1e3)})}return e().catch(n)}const r=4,t={},e={loaded:0,total:0};let n=null;const o=function(){let i=0,s=0,a=!0,r=!0;Object.keys(t).forEach(function(e){const n=t[e];n.done||(r=!1),!a||n.total===0?(a=!1,s=0):s+=n.total,i+=n.loaded}),(i!==e.loaded||s!==e.total)&&(e.loaded=i,e.total=s,typeof n=="function"&&n(i,s)),r||requestAnimationFrame(o)};this.animateProgress=o,this.setProgressFunc=function(e){n=e},this.loadPromise=function(e,n,o=!1){return s(a.bind(null,e,t,n,o),r)},this.preloadedFiles=[],this.preload=function(e,t,n){let s=null;if(typeof e=="string"){const s=this;return this.loadPromise(e,n).then(function(n){return s.preloadedFiles.push({path:t||e,buffer:n}),Promise.resolve()})}return e instanceof ArrayBuffer?s=new Uint8Array(e):ArrayBuffer.isView(e)&&(s=new Uint8Array(e.buffer)),s?(this.preloadedFiles.push({path:t,buffer:e}),Promise.resolve()):Promise.reject(new Error("Invalid object for preloading"))}},EngineConfig={},InternalConfig=function(e){const n={unloadAfterInit:!0,canvas:null,executable:"",mainPack:null,locale:null,canvasResizePolicy:2,args:[],focusCanvas:!0,experimentalVK:!1,serviceWorker:"",persistentPaths:["/userfs"],persistentDrops:!1,gdextensionLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(){console.error.apply(console,Array.from(arguments))}};function t(e){this.update(e)}return t.prototype=n,t.prototype.update=function(e){const n=e||{};function t(e,t){return typeof n[e]=="undefined"?t:n[e]}this.unloadAfterInit=t("unloadAfterInit",this.unloadAfterInit),this.onPrintError=t("onPrintError",this.onPrintError),this.onPrint=t("onPrint",this.onPrint),this.onProgress=t("onProgress",this.onProgress),this.canvas=t("canvas",this.canvas),this.executable=t("executable",this.executable),this.mainPack=t("mainPack",this.mainPack),this.locale=t("locale",this.locale),this.canvasResizePolicy=t("canvasResizePolicy",this.canvasResizePolicy),this.persistentPaths=t("persistentPaths",this.persistentPaths),this.persistentDrops=t("persistentDrops",this.persistentDrops),this.experimentalVK=t("experimentalVK",this.experimentalVK),this.focusCanvas=t("focusCanvas",this.focusCanvas),this.serviceWorker=t("serviceWorker",this.serviceWorker),this.gdextensionLibs=t("gdextensionLibs",this.gdextensionLibs),this.fileSizes=t("fileSizes",this.fileSizes),this.args=t("args",this.args),this.onExecute=t("onExecute",this.onExecute),this.onExit=t("onExit",this.onExit)},t.prototype.getModuleConfig=function(e,t){let n=t;const s=this.gdextensionLibs;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!1,dynamicLibraries:[`${e}.side.wasm`].concat(this.gdextensionLibs),instantiateWasm:function(e,t){function s(e){t(e.instance,e.module)}return typeof WebAssembly.instantiateStreaming!="undefined"?WebAssembly.instantiateStreaming(Promise.resolve(n),e).then(s):n.arrayBuffer().then(function(t){WebAssembly.instantiate(t,e).then(s)}),n=null,{}},locateFile:function(t){return t.startsWith("godot.")?t.endsWith(".worker.js")?`${e}.worker.js`:t.endsWith(".audio.worklet.js")?`${e}.audio.worklet.js`:t.endsWith(".js")?`${e}.js`:t in s?t:t.endsWith(".side.wasm")?`${e}.side.wasm`:t.endsWith(".wasm")?`${e}.wasm`:t:t}}},t.prototype.getGodotConfig=function(e){if(!(this.canvas instanceof HTMLCanvasElement)){const e=document.getElementsByTagName("canvas");if(e.length&&e[0]instanceof HTMLCanvasElement){const t=e[0];this.canvas=t}if(!this.canvas)throw new Error("No canvas found in page")}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let t=this.locale;t||(t=navigator.languages?navigator.languages[0]:navigator.language,t=t.split(".")[0]),t=t.replace("-","_");const n=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale:t,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,focusCanvas:this.focusCanvas,onExecute:this.onExecute,onExit:function(t){e(),typeof n=="function"&&n(t)}}},new t(e)},Engine=function(){const s=new Preloader;let o=null,i="",n=null;function e(e){this.config=new InternalConfig(e),this.rtenv=null}e.load=function(e,t){return o==null&&(i=e,o=s.loadPromise(`${i}.wasm`,t,!0),requestAnimationFrame(s.animateProgress)),o},e.unload=function(){o=null};function t(t){const a={init:function(t){if(n)return n;if(o==null){if(!t)return n=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded.")),n;e.load(t,this.config.fileSizes[`${t}.wasm`])}const a=this;function r(t){return new Promise(function(n){t.then(function(t){const s=new Response(t.clone().body,{headers:[["content-type","application/wasm"]]});Godot(a.config.getModuleConfig(i,s)).then(function(t){const s=a.config.persistentPaths;t.initFS(s).then(function(){a.rtenv=t,a.config.unloadAfterInit&&e.unload(),n()})})})})}return s.setProgressFunc(this.config.onProgress),n=r(o),n},preloadFile:function(e,t){return s.preload(e,t,this.config.fileSizes[e])},start:function(e){this.config.update(e);const t=this;return t.init().then(function(){if(!t.rtenv)return Promise.reject(new Error("The engine must be initialized before it can be started"));let e={};try{e=t.config.getGodotConfig(function(){t.rtenv=null})}catch(e){return Promise.reject(e)}return t.rtenv.initConfig(e),t.config.gdextensionLibs.length>0&&!t.rtenv.loadDynamicLibrary?Promise.reject(new Error('GDExtension libraries are not supported by this engine version. Enable "Extensions Support" for your export preset and/or build your custom template with "dlink_enabled=yes".')):new Promise(function(e){for(const e of s.preloadedFiles)t.rtenv.copyToFS(e.path,e.buffer);s.preloadedFiles.length=0,t.rtenv.callMain(t.config.args),n=null,t.installServiceWorker(),e()})})},startGame:function(e){this.config.update(e);const n=this.config.executable,t=this.config.mainPack||`${n}.pck`;this.config.args=["--main-pack",t].concat(this.config.args);const s=this;return Promise.all([this.init(n),this.preloadFile(t,t)]).then(function(){return s.start.apply(s)})},copyToFS:function(e,t){if(this.rtenv==null)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(e,t)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()},installServiceWorker:function(){return this.config.serviceWorker&&"serviceWorker"in navigator?navigator.serviceWorker.register(this.config.serviceWorker):Promise.resolve()}};return e.prototype=a,e.prototype.init=e.prototype.init,e.prototype.preloadFile=e.prototype.preloadFile,e.prototype.start=e.prototype.start,e.prototype.startGame=e.prototype.startGame,e.prototype.copyToFS=e.prototype.copyToFS,e.prototype.requestQuit=e.prototype.requestQuit,e.prototype.installServiceWorker=e.prototype.installServiceWorker,e.prototype.load=e.load,e.prototype.unload=e.unload,new e(t)}return t.load=e.load,t.unload=e.unload,t.isWebGLAvailable=Features.isWebGLAvailable,t.isFetchAvailable=Features.isFetchAvailable,t.isSecureContext=Features.isSecureContext,t.isCrossOriginIsolated=Features.isCrossOriginIsolated,t.isSharedArrayBufferAvailable=Features.isSharedArrayBufferAvailable,t.isAudioWorkletAvailable=Features.isAudioWorkletAvailable,t.getMissingFeatures=Features.getMissingFeatures,t}();typeof window!="undefined"&&(window.Engine=Engine)