var Godot=(()=>{var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(t){t=t||{};var n,s,o,i,a,c,l,d,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,z,D,L,R,P,H,B,V,$,W,q,Y,G,X,Q,J,r=typeof t!="undefined"?t:{},wn,ut,ft,vt,We,Ue,Ut,pe,Bt,Nt,pn,Ct,C0,xt,Yt,dn,Le,Dt,$e,ge,Ce,ot,ht,mt,Vt,y0,et,Ht,Je,mn,zt,Tt,Xt,Mt,Ae,ce,Xe,ye,Mn,ne,oe,Pt,fn,qe,ae,re,hn,un,Ve,Ke,Ne,ue,fe,Se,ie,me,ee,Ot,wt,yt,ke,Ee,cn,gt,Jt,Qt,yn,$4,xn,$t,Kt,Zt,ve,De,Re,Be,Et,Wt,an,on,kt,_e,At,Ye,jn,Rt;r.ready=new Promise(function(e,t){wn=e,ut=t}),ft=Object.assign({},r),vt=[],We="./this.program",Ue=(e,t)=>{throw t},Ut=typeof window=="object",pe=typeof importScripts=="function",Bt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Q="";function k0(e){return r.locateFile?r.locateFile(e,Q):Q+e}(Ut||pe)&&(pe?Q=self.location.href:typeof document!="undefined"&&document.currentScript&&(Q=document.currentScript.src),e&&(Q=e),Q.indexOf("blob:")!==0?Q=Q.substr(0,Q.replace(/[?#].*/,"").lastIndexOf("/")+1):Q="",Nt=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},pe&&(Ct=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),pn=(e,t,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>{if(s.status==200||s.status==0&&s.response){t(s.response);return}n()},s.onerror=n,s.send(null)},C0=e=>document.title=e),G=r.print||console.log.bind(console),W=r.printErr||console.warn.bind(console),Object.assign(r,ft),ft=null,r.arguments&&(vt=r.arguments),r.thisProgram&&(We=r.thisProgram),r.quit&&(Ue=r.quit);function Me(e){Me.shown||(Me.shown={}),Me.shown[e]||(Me.shown[e]=1,W(e))}xt=0,Yt=e=>{xt=e},dn=()=>xt,r.wasmBinary&&(Le=r.wasmBinary),Dt=r.noExitRuntime||!1,typeof WebAssembly!="object"&&K("no native wasm support detected"),ge=!1;function le(e,t){e||K(t)}function Tn(e){var t=r["_"+e];return t}function x0(e,t,n,s){var i,a,r,c,l,d,u={string:function(e){var n,t=0;return e!=null&&e!==0&&(n=(e.length<<2)+1,t=_e(n),N(e,t,n)),t},array:function(e){var t=_e(e.length);return bn(e,t),t}};function h(e){return t==="string"?T(e):t==="boolean"?Boolean(e):e}if(d=Tn(e),r=[],a=0,s)for(i=0;i<s.length;i++)l=u[n[i]],l?(a===0&&(a=R()),r[i]=l(s[i])):r[i]=s[i];c=d.apply(null,r);function m(e){return a!==0&&P(a),h(e)}return c=m(c),c}function O0(e,t,n,s){n=n||[];var o=n.every(function(e){return e==="number"}),i=t!=="string";return i&&o&&!s?Tn(e):function(){return x0(e,t,n,arguments,s)}}ot=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function je(e,t,n){for(var s,i,a,r,c,l=t+n,o=t;e[o]&&!(o>=l);)++o;if(o-t>16&&e.buffer&&ot)return ot.decode(e.subarray(t,o));for(i="";t<o;){if(s=e[t++],!(s&128)){i+=String.fromCharCode(s);continue}if(a=e[t++]&63,(s&224)==192){i+=String.fromCharCode((s&31)<<6|a);continue}r=e[t++]&63,(s&240)==224?s=(s&15)<<12|a<<6|r:s=(s&7)<<18|a<<12|r<<6|e[t++]&63,s<65536?i+=String.fromCharCode(s):(c=s-65536,i+=String.fromCharCode(55296|c>>10,56320|c&1023))}return i}function T(e,t){return e?je(y,e,t):""}function xe(e,t,n,s){if(!(s>0))return 0;for(var o,r,c=n,i=n+s-1,a=0;a<e.length;++a)if(o=e.charCodeAt(a),o>=55296&&o<=57343&&(r=e.charCodeAt(++a),o=65536+((o&1023)<<10)|r&1023),o<=127){if(n>=i)break;t[n++]=o}else if(o<=2047){if(n+1>=i)break;t[n++]=192|o>>6,t[n++]=128|o&63}else if(o<=65535){if(n+2>=i)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|o&63}else{if(n+3>=i)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|o&63}return t[n]=0,n-c}function N(e,t,n){return xe(e,y,t,n)}function de(e){for(var t,n=0,s=0;s<e.length;++s)t=e.charCodeAt(s),t>=55296&&t<=57343&&(t=65536+((t&1023)<<10)|e.charCodeAt(++s)&1023),t<=127?++n:t<=2047?n+=2:t<=65535?n+=3:n+=4;return n}function Cn(e){var n=de(e)+1,t=ve(n);return t&&xe(e,C,t,n),t}function w0(e){var t=de(e)+1,n=_e(t);return xe(e,C,n,t),n}function bn(e,t){C.set(e,t)}function _0(e,t,n){for(var s=0;s<e.length;++s)C[t++>>0]=e.charCodeAt(s);n||(C[t>>0]=0)}function Gt(e){ht=e,r.HEAP8=C=new Int8Array(e),r.HEAP16=Y=new Int16Array(e),r.HEAP32=i=new Int32Array(e),r.HEAPU8=y=new Uint8Array(e),r.HEAPU16=mt=new Uint16Array(e),r.HEAPU32=O=new Uint32Array(e),r.HEAPF32=l=new Float32Array(e),r.HEAPF64=Vt=new Float64Array(e)}y0=r.INITIAL_MEMORY||33554432,Ht=[],Je=[],mn=[],zt=[],Tt=[],Xt=!1,Mt=!1,Ae=0;function St(){return Dt||Ae>0}function r0(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)n0(r.preRun.shift());ze(Ht)}function a0(){Xt=!0,!r.noFSInit&&!n.init.initialized&&n.init(),n.ignorePermissions=!1,oe.init(),S.root=n.mount(S,{},null),ze(Je)}function i0(){ze(mn)}function o0(){kt(),ze(zt),n.quit(),oe.shutdown(),x.quit(),Mt=!0}function s0(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)e0(r.postRun.shift());ze(Tt)}function n0(e){Ht.unshift(e)}function t0(e){Je.unshift(e)}function e0(e){Tt.unshift(e)}ce=0,Xe=null,ye=null;function kn(e){return e}function st(){ce++,r.monitorRunDependencies&&r.monitorRunDependencies(ce)}function Ze(){if(ce--,r.monitorRunDependencies&&r.monitorRunDependencies(ce),ce==0&&(Xe!==null&&(clearInterval(Xe),Xe=null),ye)){var t=ye;ye=null,t()}}function K(e){r.onAbort&&r.onAbort(e),e="Aborted("+e+")",W(e),ge=!0,Ce=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw ut(t),t}Mn="data:application/octet-stream;base64,";function vn(e){return e.startsWith(Mn)}J="godot.javascript.opt.wasm",vn(J)||(J=k0(J));function qt(e){try{if(e==J&&Le)return new Uint8Array(Le);if(Ct)return Ct(e);throw"both async and sync fetching of the wasm failed"}catch(e){K(e)}}function J4(){return!Le&&(Ut||pe)&&typeof fetch=="function"?fetch(J,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+J+"'";return e.arrayBuffer()}).catch(function(){return qt(J)}):Promise.resolve().then(function(){return qt(J)})}function Z4(){var o,e={a:yn};function n(e){var n=e.exports;r.asm=n,$e=r.asm.dk,Gt($e.buffer),et=r.asm.rk,t0(r.asm.ek),Ze("wasm-instantiate")}st("wasm-instantiate");function t(e){n(e.instance)}function s(t){return J4().then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){W("failed to asynchronously prepare wasm: "+e),K(e)})}function i(){return!Le&&typeof WebAssembly.instantiateStreaming=="function"&&!vn(J)&&typeof fetch=="function"?fetch(J,{credentials:"same-origin"}).then(function(n){var o=WebAssembly.instantiateStreaming(n,e);return o.then(t,function(e){return W("wasm streaming compile failed: "+e),W("falling back to ArrayBuffer instantiation"),s(t)})}):s(t)}if(r.instantiateWasm)try{return o=r.instantiateWasm(e,n),o}catch(e){return W("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(ut),{}}function ze(e){for(;e.length>0;){var n,t=e.shift();if(typeof t=="function"){t(r);continue}n=t.func,typeof n=="number"?t.arg===void 0?I(n)():I(n)(t.arg):n(t.arg===void 0?null:t.arg)}}function Q4(e,t="i8"){switch(t.endsWith("*")&&(t="i32"),t){case"i1":return C[e>>0];case"i8":return C[e>>0];case"i16":return Y[e>>1];case"i32":return i[e>>2];case"i64":return i[e>>2];case"float":return l[e>>2];case"double":return Number(Vt[e>>3]);default:K("invalid type for getValue: "+t)}return null}function I(e){return et.get(e)}function dt(e){if(e instanceof gn||e=="unwind")return Ce;Ue(1,e)}function X4(e,t,n="i8"){switch(n.endsWith("*")&&(n="i32"),n){case"i1":C[e>>0]=t;break;case"i8":C[e>>0]=t;break;case"i16":Y[e>>1]=t;break;case"i32":i[e>>2]=t;break;case"i64":D=[t>>>0,(b=t,+Math.abs(b)>=1?b>0?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],i[e>>2]=D[0],i[e+4>>2]=D[1];break;case"float":l[e>>2]=t;break;case"double":Vt[e>>3]=t;break;default:K("invalid type for setValue: "+n)}}function G4(e,t){I(e)(t)}j={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var o,s=0,n=e.length-1;n>=0;n--)o=e[n],o==="."?e.splice(n,1):o===".."?(e.splice(n,1),s++):s&&(e.splice(n,1),s--);if(t)for(;s;s--)e.unshift("..");return e},normalize:e=>{var t=j.isAbs(e),n=e.substr(-1)==="/";return e=j.normalizeArray(e.split("/").filter(e=>!!e),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var n=j.splitPath(e),s=n[0],t=n[1];return!s&&!t?".":(t&&(t=t.substr(0,t.length-1)),s+t)},basename:e=>{if(e==="/")return"/";e=j.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return j.normalize(e.join("/"))},join2:(e,t)=>j.normalize(e+"/"+t)};function Y4(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){K("randomDevice")}}ne={resolve:function(){for(var t,e="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){if(t=o>=0?arguments[o]:n.cwd(),typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,s=j.isAbs(t)}return e=j.normalizeArray(e.split("/").filter(e=>!!e),!s).join("/"),(s?"/":"")+e||"."},relative:(e,t)=>{e=ne.resolve(e).substr(1),t=ne.resolve(t).substr(1);function r(e){for(var n,t=0;t<e.length;t++)if(e[t]!=="")break;for(n=e.length-1;n>=0;n--)if(e[n]!=="")break;return t>n?[]:e.slice(t,n-t+1)}for(var s,o=r(e.split("/")),i=r(t.split("/")),c=Math.min(o.length,i.length),a=c,n=0;n<c;n++)if(o[n]!==i[n]){a=n;break}s=[];for(n=a;n<o.length;n++)s.push("..");return s=s.concat(i.slice(a)),s.join("/")}},oe={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){oe.ttys[e]={input:[],output:[],ops:t},n.registerDevice(e,oe.stream_ops)},stream_ops:{open:function(e){var t=oe.ttys[e.node.rdev];if(!t)throw new n.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,s,o){if(!e.tty||!e.tty.ops.get_char)throw new n.ErrnoError(60);for(var a,r=0,c=0;c<o;c++){try{a=e.tty.ops.get_char(e.tty)}catch{throw new n.ErrnoError(29)}if(a===void 0&&r===0)throw new n.ErrnoError(6);if(a==null)break;r++,t[s+c]=a}return r&&(e.node.timestamp=Date.now()),r},write:function(e,t,s,o){if(!e.tty||!e.tty.ops.put_char)throw new n.ErrnoError(60);try{for(var a=0;a<o;a++)e.tty.ops.put_char(e.tty,t[s+a])}catch{throw new n.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;e.input=Qe(t,!0)}return e.input.shift()},put_char:function(e,t){t===null||t===10?(G(je(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(G(je(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){t===null||t===10?(W(je(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(W(je(e.output,0)),e.output=[])}}};function ln(e,t){y.fill(0,e,e+t)}function tn(){K()}p={ops_table:null,mount:function(){return p.createNode(null,"/",16384|511,0)},createNode:function(e,t,s,o){if(n.isBlkdev(s)||n.isFIFO(s))throw new n.ErrnoError(63);p.ops_table||(p.ops_table={dir:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr,lookup:p.node_ops.lookup,mknod:p.node_ops.mknod,rename:p.node_ops.rename,unlink:p.node_ops.unlink,rmdir:p.node_ops.rmdir,readdir:p.node_ops.readdir,symlink:p.node_ops.symlink},stream:{llseek:p.stream_ops.llseek}},file:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr},stream:{llseek:p.stream_ops.llseek,read:p.stream_ops.read,write:p.stream_ops.write,allocate:p.stream_ops.allocate,mmap:p.stream_ops.mmap,msync:p.stream_ops.msync}},link:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr,readlink:p.node_ops.readlink},stream:{}},chrdev:{node:{getattr:p.node_ops.getattr,setattr:p.node_ops.setattr},stream:n.chrdev_stream_ops}});var i=n.createNode(e,t,s,o);return n.isDir(i.mode)?(i.node_ops=p.ops_table.dir.node,i.stream_ops=p.ops_table.dir.stream,i.contents={}):n.isFile(i.mode)?(i.node_ops=p.ops_table.file.node,i.stream_ops=p.ops_table.file.stream,i.usedBytes=0,i.contents=null):n.isLink(i.mode)?(i.node_ops=p.ops_table.link.node,i.stream_ops=p.ops_table.link.stream):n.isChrdev(i.mode)&&(i.node_ops=p.ops_table.chrdev.node,i.stream_ops=p.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var s,o,n=e.contents?e.contents.length:0;if(n>=t)return;s=1024*1024,t=Math.max(t,n*(n<s?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),o=e.contents,e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)},resizeFileStorage:function(e,t){if(e.usedBytes==t)return;if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=n.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,n.isDir(e.mode)?t.size=4096:n.isFile(e.mode)?t.size=e.usedBytes:n.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&p.resizeFileStorage(e,t.size)},lookup:function(){throw n.genericErrors[44]},mknod:function(e,t,n,s){return p.createNode(e,t,n,s)},rename:function(e,t,s){if(n.isDir(e.mode)){var o,i;try{o=n.lookupNode(t,s)}catch{}if(o)for(i in o.contents)throw new n.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=s,t.contents[s]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var o,s=n.lookupNode(e,t);for(o in s.contents)throw new n.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var n,t=[".",".."];for(n in e.contents){if(!e.contents.hasOwnProperty(n))continue;t.push(n)}return t},symlink:function(e,t,n){var s=p.createNode(e,t,511|40960,0);return s.link=n,s},readlink:function(e){if(!n.isLink(e.mode))throw new n.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,s,o){var i,a,r=e.node.contents;if(o>=e.node.usedBytes)return 0;if(i=Math.min(e.node.usedBytes-o,s),i>8&&r.subarray)t.set(r.subarray(o,o+i),n);else for(a=0;a<i;a++)t[n+a]=r[o+a];return i},write:function(e,t,n,s,o,i){if(t.buffer===C.buffer&&(i=!1),!s)return 0;var r,a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=t.subarray(n,n+s),a.usedBytes=s,s;if(a.usedBytes===0&&o===0)return a.contents=t.slice(n,n+s),a.usedBytes=s,s;if(o+s<=a.usedBytes)return a.contents.set(t.subarray(n,n+s),o),s}if(p.expandFileStorage(a,o+s),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+s),o);else for(r=0;r<s;r++)a.contents[o+r]=t[n+r];return a.usedBytes=Math.max(a.usedBytes,o+s),s},llseek:function(e,t,s){var o=t;if(s===1?o+=e.position:s===2&&n.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new n.ErrnoError(28);return o},allocate:function(e,t,n){p.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,s,o,i){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);var r,c,a=e.node.contents;if(!(i&2)&&a.buffer===ht)c=!1,r=a.byteOffset;else{if((s>0||s+t<a.length)&&(a.subarray?a=a.subarray(s,s+t):a=Array.prototype.slice.call(a,s,s+t)),c=!0,r=tn(t),!r)throw new n.ErrnoError(48);C.set(a,r)}return{ptr:r,allocated:c}},msync:function(e,t,s,o,i){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);if(i&2)return 0;var a=p.stream_ops.write(e,t,0,o,s,!1);return 0}}};function q4(e,t,n,s){var o=s?"":kn("al "+e);pn(e,function(n){le(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),o&&Ze(o)},function(){if(n)n();else throw'Loading data file "'+e+'" failed.'}),o&&st(o)}x={dbs:{},indexedDB:()=>{if(typeof indexedDB!="undefined")return indexedDB;var e=null;return typeof window=="object"&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),le(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(){return p.mount.apply(null,arguments)},syncfs:(e,t,n)=>{x.getLocalSet(e,(s,o)=>{if(s)return n(s);x.getRemoteSet(e,(e,s)=>{if(e)return n(e);var i=t?s:o,a=t?o:s;x.reconcile(i,a,n)})})},quit:()=>{Object.values(x.dbs).forEach(e=>e.close()),x.dbs={}},getDB:(e,t)=>{var n,s=x.dbs[e];if(s)return t(null,s);try{n=x.indexedDB().open(e,x.DB_VERSION)}catch(e){return t(e)}if(!n)return t("Unable to connect to IndexedDB");n.onupgradeneeded=e=>{var t,n=e.target.result,s=e.target.transaction;n.objectStoreNames.contains(x.DB_STORE_NAME)?t=s.objectStore(x.DB_STORE_NAME):t=n.createObjectStore(x.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},n.onsuccess=()=>{s=n.result,x.dbs[e]=s,t(null,s)},n.onerror=e=>{t(this.error),e.preventDefault()}},getLocalSet:(e,t)=>{var s,o,i,a={};function r(e){return e!=="."&&e!==".."}function c(e){return t=>j.join2(e,t)}for(s=n.readdir(e.mountpoint).filter(r).map(c(e.mountpoint));s.length;){o=s.pop();try{i=n.stat(o)}catch(e){return t(e)}n.isDir(i.mode)&&s.push.apply(s,n.readdir(o).filter(r).map(c(o))),a[o]={timestamp:i.mtime}}return t(null,{type:"local",entries:a})},getRemoteSet:(e,t)=>{var n={};x.getDB(e.mountpoint,(e,s)=>{if(e)return t(e);try{var i,a,o=s.transaction([x.DB_STORE_NAME],"readonly");o.onerror=e=>{t(this.error),e.preventDefault()},i=o.objectStore(x.DB_STORE_NAME),a=i.index("timestamp"),a.openKeyCursor().onsuccess=e=>{var o=e.target.result;if(!o)return t(null,{type:"remote",db:s,entries:n});n[o.primaryKey]={timestamp:o.key},o.continue()}}catch(e){return t(e)}})},loadLocalEntry:(e,t)=>{try{var s,o,i=n.lookupPath(e);o=i.node,s=n.stat(e)}catch(e){return t(e)}return n.isDir(s.mode)?t(null,{timestamp:s.mtime,mode:s.mode}):n.isFile(s.mode)?(o.contents=p.getFileDataAsTypedArray(o),t(null,{timestamp:s.mtime,mode:s.mode,contents:o.contents})):t(new Error("node type not supported"))},storeLocalEntry:(e,t,s)=>{try{if(n.isDir(t.mode))n.mkdirTree(e,t.mode);else if(n.isFile(t.mode))n.writeFile(e,t.contents,{canOwn:!0});else return s(new Error("node type not supported"));n.chmod(e,t.mode),n.utime(e,t.timestamp,t.timestamp)}catch(e){return s(e)}s(null)},removeLocalEntry:(e,t)=>{try{var s=n.stat(e);n.isDir(s.mode)?n.rmdir(e):n.isFile(s.mode)&&n.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:(e,t,n)=>{var s=e.get(t);s.onsuccess=e=>{n(null,e.target.result)},s.onerror=e=>{n(this.error),e.preventDefault()}},storeRemoteEntry:(e,t,n,s)=>{try{var o=e.put(n,t)}catch(e){s(e);return}o.onsuccess=()=>{s(null)},o.onerror=e=>{s(this.error),e.preventDefault()}},removeRemoteEntry:(e,t,n)=>{var s=e.delete(t);s.onsuccess=()=>{n(null)},s.onerror=e=>{n(this.error),e.preventDefault()}},reconcile:(e,t,n)=>{var o,i,a,c,d,r=0,l=[];if(Object.keys(e.entries).forEach(function(n){var o=e.entries[n],s=t.entries[n];(!s||o.timestamp.getTime()!=s.timestamp.getTime())&&(l.push(n),r++)}),c=[],Object.keys(t.entries).forEach(function(t){e.entries[t]||(c.push(t),r++)}),!r)return n(null);o=!1,d=e.type==="remote"?e.db:t.db,i=d.transaction([x.DB_STORE_NAME],"readwrite"),a=i.objectStore(x.DB_STORE_NAME);function s(e){if(e&&!o)return o=!0,n(e)}i.onerror=e=>{s(this.error),e.preventDefault()},i.oncomplete=e=>{o||n(null)},l.sort().forEach(e=>{t.type==="local"?x.loadRemoteEntry(a,e,(t,n)=>{if(t)return s(t);x.storeLocalEntry(e,n,s)}):x.loadLocalEntry(e,(t,n)=>{if(t)return s(t);x.storeRemoteEntry(a,e,n,s)})}),c.sort().reverse().forEach(e=>{t.type==="local"?x.removeLocalEntry(e,s):x.removeRemoteEntry(a,e,s)})}},n={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(e=ne.resolve(n.cwd(),e),!e)return{path:"",node:null};var s,o,i,a,r,c,l,d,u={follow_mount:!0,recurse_count:0};if(t=Object.assign(u,t),t.recurse_count>8)throw new n.ErrnoError(32);a=j.normalizeArray(e.split("/").filter(e=>!!e),!1),s=n.root,o="/";for(i=0;i<a.length;i++){if(r=i===a.length-1,r&&t.parent)break;if(s=n.lookupNode(s,a[i]),o=j.join2(o,a[i]),n.isMountpoint(s)&&(!r||r&&t.follow_mount)&&(s=s.mounted.root),!r||t.follow)for(c=0;n.isLink(s.mode);)if(l=n.readlink(o),o=ne.resolve(j.dirname(o),l),d=n.lookupPath(o,{recurse_count:t.recurse_count+1}),s=d.node,c++>40)throw new n.ErrnoError(32)}return{path:o,node:s}},getPath:e=>{for(;!0;){if(n.isRoot(e)){var t,s=e.mount.mountpoint;return t?s[s.length-1]!=="/"?s+"/"+t:s+t:s}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var s=0,o=0;o<t.length;o++)s=(s<<5)-s+t.charCodeAt(o)|0;return(e+s>>>0)%n.nameTable.length},hashAddNode:e=>{var t=n.hashName(e.parent.id,e.name);e.name_next=n.nameTable[t],n.nameTable[t]=e},hashRemoveNode:e=>{var t,s=n.hashName(e.parent.id,e.name);if(n.nameTable[s]===e)n.nameTable[s]=e.name_next;else for(t=n.nameTable[s];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:(e,t)=>{var s,i,a,o=n.mayLookup(e);if(o)throw new n.ErrnoError(o,e);i=n.hashName(e.id,t);for(s=n.nameTable[i];s;s=s.name_next)if(a=s.name,s.parent.id===e.id&&a===t)return s;return n.lookup(e,t)},createNode:(e,t,s,o)=>{var i=new n.FSNode(e,t,s,o);return n.hashAddNode(i),i},destroyNode:e=>{n.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=n.flagModes[e];if(typeof t=="undefined")throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions:(e,t)=>n.ignorePermissions?0:t.includes("r")&&!(e.mode&292)?2:t.includes("w")&&!(e.mode&146)?2:t.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var t=n.nodePermissions(e,"x");return t?t:e.node_ops.lookup?0:2},mayCreate:(e,t)=>{try{var s=n.lookupNode(e,t);return 20}catch{}return n.nodePermissions(e,"wx")},mayDelete:(e,t,s)=>{try{o=n.lookupNode(e,t)}catch(e){return e.errno}var o,i=n.nodePermissions(e,"wx");if(i)return i;if(s){{if(!n.isDir(o.mode))return 54;if(n.isRoot(o)||n.getPath(o)===n.cwd())return 10}}else if(n.isDir(o.mode))return 31;return 0},mayOpen:(e,t)=>e?n.isLink(e.mode)?32:n.isDir(e.mode)&&(n.flagsToPermissionString(t)!=="r"||t&512)?31:n.nodePermissions(e,n.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=n.MAX_OPEN_FDS)=>{for(var s=e;s<=t;s++)if(!n.streams[s])return s;throw new n.ErrnoError(33)},getStream:e=>n.streams[e],createStream:(e,t,s)=>{n.FSStream||(n.FSStream=function(){this.shared={}},n.FSStream.prototype={},Object.defineProperties(n.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new n.FSStream,e);var o=n.nextfd(t,s);return e.fd=o,n.streams[o]=e,e},closeStream:e=>{n.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=n.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new n.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{n.devices[e]={stream_ops:t}},getDevice:e=>n.devices[e],getMounts:e=>{for(var n,s=[],t=[e];t.length;)n=t.pop(),s.push(n),t.push.apply(t,n.mounts);return s},syncfs:(e,t)=>{typeof e=="function"&&(t=e,e=!1),n.syncFSRequests++,n.syncFSRequests>1&&W("warning: "+n.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var o=n.getMounts(n.root.mount),a=0;function i(e){return n.syncFSRequests--,t(e)}function s(e){if(e){if(!s.errored)return s.errored=!0,i(e);return}++a>=o.length&&i(null)}o.forEach(t=>{if(!t.type.syncfs)return s(null);t.type.syncfs(t,e,s)})},mount:(e,t,s)=>{var o,i,a,c,r=s==="/",l=!s;if(r&&n.root)throw new n.ErrnoError(10);if(!r&&!l){if(c=n.lookupPath(s,{follow_mount:!1}),s=c.path,o=c.node,n.isMountpoint(o))throw new n.ErrnoError(10);if(!n.isDir(o.mode))throw new n.ErrnoError(54)}return i={type:e,opts:t,mountpoint:s,mounts:[]},a=e.mount(i),a.mount=i,i.root=a,r?n.root=a:o&&(o.mounted=i,o.mount&&o.mount.mounts.push(i)),a},unmount:e=>{var t,s,i,a,o=n.lookupPath(e,{follow_mount:!1});if(!n.isMountpoint(o.node))throw new n.ErrnoError(28);t=o.node,s=t.mounted,i=n.getMounts(s),Object.keys(n.nameTable).forEach(e=>{for(var s,t=n.nameTable[e];t;)s=t.name_next,i.includes(t.mount)&&n.destroyNode(t),t=s}),t.mounted=null,a=t.mount.mounts.indexOf(s),t.mount.mounts.splice(a,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,s)=>{var a,r=n.lookupPath(e,{parent:!0}),i=r.node,o=j.basename(e);if(!o||o==="."||o==="..")throw new n.ErrnoError(28);if(a=n.mayCreate(i,o),a)throw new n.ErrnoError(a);if(!i.node_ops.mknod)throw new n.ErrnoError(63);return i.node_ops.mknod(i,o,t,s)},create:(e,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,n.mknod(e,t,0)),mkdir:(e,t)=>(t=t!==void 0?t:511,t&=511|512,t|=16384,n.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var o=e.split("/"),i="",s=0;s<o.length;++s){if(!o[s])continue;i+="/"+o[s];try{n.mkdir(i,t)}catch(e){if(e.errno!=20)throw e}}},mkdev:(e,t,s)=>(typeof s=="undefined"&&(s=t,t=438),t|=8192,n.mknod(e,t,s)),symlink:(e,t)=>{if(!ne.resolve(e))throw new n.ErrnoError(44);var o,i,a=n.lookupPath(t,{parent:!0}),s=a.node;if(!s)throw new n.ErrnoError(44);if(o=j.basename(t),i=n.mayCreate(s,o),i)throw new n.ErrnoError(i);if(!s.node_ops.symlink)throw new n.ErrnoError(63);return s.node_ops.symlink(s,o,e)},rename:(e,t)=>{var s,a,r,l,d,m=j.dirname(e),f=j.dirname(t),u=j.basename(e),c=j.basename(t),h=n.lookupPath(e,{parent:!0}),o=h.node,h=n.lookupPath(t,{parent:!0}),i=h.node;if(!o||!i)throw new n.ErrnoError(44);if(o.mount!==i.mount)throw new n.ErrnoError(75);if(a=n.lookupNode(o,u),l=ne.relative(e,f),l.charAt(0)!==".")throw new n.ErrnoError(28);if(l=ne.relative(t,m),l.charAt(0)!==".")throw new n.ErrnoError(55);try{r=n.lookupNode(i,c)}catch{}if(a===r)return;if(d=n.isDir(a.mode),s=n.mayDelete(o,u,d),s)throw new n.ErrnoError(s);if(s=r?n.mayDelete(i,c,d):n.mayCreate(i,c),s)throw new n.ErrnoError(s);if(!o.node_ops.rename)throw new n.ErrnoError(63);if(n.isMountpoint(a)||r&&n.isMountpoint(r))throw new n.ErrnoError(10);if(i!==o&&(s=n.nodePermissions(o,"w"),s))throw new n.ErrnoError(s);n.hashRemoveNode(a);try{o.node_ops.rename(a,i,c)}catch(e){throw e}finally{n.hashAddNode(a)}},rmdir:e=>{var a=n.lookupPath(e,{parent:!0}),t=a.node,s=j.basename(e),o=n.lookupNode(t,s),i=n.mayDelete(t,s,!0);if(i)throw new n.ErrnoError(i);if(!t.node_ops.rmdir)throw new n.ErrnoError(63);if(n.isMountpoint(o))throw new n.ErrnoError(10);t.node_ops.rmdir(t,s),n.destroyNode(o)},readdir:e=>{var s=n.lookupPath(e,{follow:!0}),t=s.node;if(!t.node_ops.readdir)throw new n.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var s,o,i,a=n.lookupPath(e,{parent:!0}),t=a.node;if(!t)throw new n.ErrnoError(44);if(s=j.basename(e),o=n.lookupNode(t,s),i=n.mayDelete(t,s,!1),i)throw new n.ErrnoError(i);if(!t.node_ops.unlink)throw new n.ErrnoError(63);if(n.isMountpoint(o))throw new n.ErrnoError(10);t.node_ops.unlink(t,s),n.destroyNode(o)},readlink:e=>{var s=n.lookupPath(e),t=s.node;if(!t)throw new n.ErrnoError(44);if(!t.node_ops.readlink)throw new n.ErrnoError(28);return ne.resolve(n.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var o=n.lookupPath(e,{follow:!t}),s=o.node;if(!s)throw new n.ErrnoError(44);if(!s.node_ops.getattr)throw new n.ErrnoError(63);return s.node_ops.getattr(s)},lstat:e=>n.stat(e,!0),chmod:(e,t,s)=>{if(typeof e=="string"){var o,i=n.lookupPath(e,{follow:!s});o=i.node}else o=e;if(!o.node_ops.setattr)throw new n.ErrnoError(63);o.node_ops.setattr(o,{mode:t&4095|o.mode&~4095,timestamp:Date.now()})},lchmod:(e,t)=>{n.chmod(e,t,!0)},fchmod:(e,t)=>{var s=n.getStream(e);if(!s)throw new n.ErrnoError(8);n.chmod(s.node,t)},chown:(e,t,s,o)=>{if(typeof e=="string"){var i,a=n.lookupPath(e,{follow:!o});i=a.node}else i=e;if(!i.node_ops.setattr)throw new n.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,s)=>{n.chown(e,t,s,!0)},fchown:(e,t,s)=>{var o=n.getStream(e);if(!o)throw new n.ErrnoError(8);n.chown(o.node,t,s)},truncate:(e,t)=>{if(t<0)throw new n.ErrnoError(28);if(typeof e=="string"){var s,o,i=n.lookupPath(e,{follow:!0});s=i.node}else s=e;if(!s.node_ops.setattr)throw new n.ErrnoError(63);if(n.isDir(s.mode))throw new n.ErrnoError(31);if(!n.isFile(s.mode))throw new n.ErrnoError(28);if(o=n.nodePermissions(s,"w"),o)throw new n.ErrnoError(o);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var s=n.getStream(e);if(!s)throw new n.ErrnoError(8);if((s.flags&2097155)===0)throw new n.ErrnoError(28);n.truncate(s.node,t)},utime:(e,t,s)=>{var i=n.lookupPath(e,{follow:!0}),o=i.node;o.node_ops.setattr(o,{timestamp:Math.max(t,s)})},open:(e,t,s)=>{if(e==="")throw new n.ErrnoError(44);if(t=typeof t=="string"?n.modeStringToFlags(t):t,s=typeof s=="undefined"?438:s,t&64?s=s&4095|32768:s=0,typeof e=="object")o=e;else{e=j.normalize(e);try{var o,i,a,c,l=n.lookupPath(e,{follow:!(t&131072)});o=l.node}catch{}}if(a=!1,t&64)if(o){if(t&128)throw new n.ErrnoError(20)}else o=n.mknod(e,s,0),a=!0;if(!o)throw new n.ErrnoError(44);if(n.isChrdev(o.mode)&&(t&=~512),t&65536&&!n.isDir(o.mode))throw new n.ErrnoError(54);if(!a&&(c=n.mayOpen(o,t),c))throw new n.ErrnoError(c);return t&512&&!a&&n.truncate(o,0),t&=~(128|512|131072),i=n.createStream({node:o,path:n.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1}),i.stream_ops.open&&i.stream_ops.open(i),r.logReadFiles&&!(t&1)&&(n.readFiles||(n.readFiles={}),e in n.readFiles||(n.readFiles[e]=1)),i},close:e=>{if(n.isClosed(e))throw new n.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{n.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,t,s)=>{if(n.isClosed(e))throw new n.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new n.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new n.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,s),e.ungotten=[],e.position},read:(e,t,s,o,i)=>{if(o<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(e))throw new n.ErrnoError(8);if((e.flags&2097155)===1)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.read)throw new n.ErrnoError(28);var a,r=typeof i!="undefined";if(r){if(!e.seekable)throw new n.ErrnoError(70)}else i=e.position;return a=e.stream_ops.read(e,t,s,o,i),r||(e.position+=a),a},write:(e,t,s,o,i,a)=>{if(o<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(e))throw new n.ErrnoError(8);if((e.flags&2097155)===0)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.write)throw new n.ErrnoError(28);e.seekable&&e.flags&1024&&n.llseek(e,0,2);var r,c=typeof i!="undefined";if(c){if(!e.seekable)throw new n.ErrnoError(70)}else i=e.position;return r=e.stream_ops.write(e,t,s,o,i,a),c||(e.position+=r),r},allocate:(e,t,s)=>{if(n.isClosed(e))throw new n.ErrnoError(8);if(t<0||s<=0)throw new n.ErrnoError(28);if((e.flags&2097155)===0)throw new n.ErrnoError(8);if(!n.isFile(e.node.mode)&&!n.isDir(e.node.mode))throw new n.ErrnoError(43);if(!e.stream_ops.allocate)throw new n.ErrnoError(138);e.stream_ops.allocate(e,t,s)},mmap:(e,t,s,o,i)=>{if((o&2)!==0&&(i&2)===0&&(e.flags&2097155)!==2)throw new n.ErrnoError(2);if((e.flags&2097155)===1)throw new n.ErrnoError(2);if(!e.stream_ops.mmap)throw new n.ErrnoError(43);return e.stream_ops.mmap(e,t,s,o,i)},msync:(e,t,n,s,o)=>!e||!e.stream_ops.msync?0:e.stream_ops.msync(e,t,n,s,o),munmap:e=>0,ioctl:(e,t,s)=>{if(!e.stream_ops.ioctl)throw new n.ErrnoError(59);return e.stream_ops.ioctl(e,t,s)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var s,i=n.open(e,t.flags),r=n.stat(e),a=r.size,o=new Uint8Array(a);return n.read(i,o,0,a,0),t.encoding==="utf8"?s=je(o,0):t.encoding==="binary"&&(s=o),n.close(i),s},writeFile:(e,t,s={})=>{s.flags=s.flags||577;var o,a,i=n.open(e,s.flags,s.mode);if(typeof t=="string")o=new Uint8Array(de(t)+1),a=xe(t,o,0,o.length),n.write(i,o,0,a,void 0,s.canOwn);else if(ArrayBuffer.isView(t))n.write(i,t,0,t.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");n.close(i)},cwd:()=>n.currentPath,chdir:e=>{var s,t=n.lookupPath(e,{follow:!0});if(t.node===null)throw new n.ErrnoError(44);if(!n.isDir(t.node.mode))throw new n.ErrnoError(54);if(s=n.nodePermissions(t.node,"x"),s)throw new n.ErrnoError(s);n.currentPath=t.path},createDefaultDirectories:()=>{n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},createDefaultDevices:()=>{n.mkdir("/dev"),n.registerDevice(n.makedev(1,3),{read:()=>0,write:(e,t,n,s)=>s}),n.mkdev("/dev/null",n.makedev(1,3)),oe.register(n.makedev(5,0),oe.default_tty_ops),oe.register(n.makedev(6,0),oe.default_tty1_ops),n.mkdev("/dev/tty",n.makedev(5,0)),n.mkdev("/dev/tty1",n.makedev(6,0));var e=Y4();n.createDevice("/dev","random",e),n.createDevice("/dev","urandom",e),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{n.mkdir("/proc");var e=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount:()=>{var t=n.createNode(e,"fd",16384|511,73);return t.node_ops={lookup:(e,t)=>{var s,i=+t,o=n.getStream(i);if(!o)throw new n.ErrnoError(8);return s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}},s.parent=s,s}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{r.stdin?n.createDevice("/dev","stdin",r.stdin):n.symlink("/dev/tty","/dev/stdin"),r.stdout?n.createDevice("/dev","stdout",null,r.stdout):n.symlink("/dev/tty","/dev/stdout"),r.stderr?n.createDevice("/dev","stderr",null,r.stderr):n.symlink("/dev/tty1","/dev/stderr");var e=n.open("/dev/stdin",0),t=n.open("/dev/stdout",1),s=n.open("/dev/stderr",1)},ensureErrnoError:()=>{if(n.ErrnoError)return;n.ErrnoError=function(t,n){this.node=n,this.setErrno=function(e){this.errno=e},this.setErrno(t),this.message="FS error"},n.ErrnoError.prototype=new Error,n.ErrnoError.prototype.constructor=n.ErrnoError,[44].forEach(e=>{n.genericErrors[e]=new n.ErrnoError(e),n.genericErrors[e].stack="<generic error, no stack>"})},staticInit:()=>{n.ensureErrnoError(),n.nameTable=new Array(4096),n.mount(p,{},"/"),n.createDefaultDirectories(),n.createDefaultDevices(),n.createSpecialDirectories(),n.filesystems={MEMFS:p,IDBFS:x}},init:(e,t,s)=>{n.init.initialized=!0,n.ensureErrnoError(),r.stdin=e||r.stdin,r.stdout=t||r.stdout,r.stderr=s||r.stderr,n.createStandardStreams()},quit:()=>{n.init.initialized=!1,Wt(0);for(var t,e=0;e<n.streams.length;e++){if(t=n.streams[e],!t)continue;n.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=292|73),t&&(n|=146),n},findObject:(e,t)=>{var s=n.analyzePath(e,t);return s.exists?s.object:null},analyzePath:(e,t)=>{try{var s,o=n.lookupPath(e,{follow:!t});e=o.path}catch{}s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{o=n.lookupPath(e,{parent:!0}),s.parentExists=!0,s.parentPath=o.path,s.parentObject=o.node,s.name=j.basename(e),o=n.lookupPath(e,{follow:!t}),s.exists=!0,s.path=o.path,s.object=o.node,s.name=o.node.name,s.isRoot=o.path==="/"}catch(e){s.error=e.errno}return s},createPath:(e,t)=>{e=typeof e=="string"?e:n.getPath(e);for(var i,a,r=t.split("/").reverse();r.length;){if(a=r.pop(),!a)continue;i=j.join2(e,a);try{n.mkdir(i)}catch{}e=i}return i},createFile:(e,t,s,o,i)=>{var a=j.join2(typeof e=="string"?e:n.getPath(e),t),r=n.getMode(o,i);return n.create(a,r)},createDataFile:(e,t,s,o,i,a)=>{if(d=t,e&&(e=typeof e=="string"?e:n.getPath(e),d=t?j.join2(e,t):e),c=n.getMode(o,i),r=n.create(d,c),s){if(typeof s=="string"){u=new Array(s.length);for(var r,c,d,u,h,l=0,m=s.length;l<m;++l)u[l]=s.charCodeAt(l);s=u}n.chmod(r,c|146),h=n.open(r,577),n.write(h,s,0,s.length,0,a),n.close(h),n.chmod(r,c)}return r},createDevice:(e,t,s,o)=>{var i,a=j.join2(typeof e=="string"?e:n.getPath(e),t),r=n.getMode(!!s,!!o);return n.createDevice.major||(n.createDevice.major=64),i=n.makedev(n.createDevice.major++,0),n.registerDevice(i,{open:e=>{e.seekable=!1},close:e=>{o&&o.buffer&&o.buffer.length&&o(10)},read:(e,t,o,i)=>{for(var r,c=0,l=0;l<i;l++){try{r=s()}catch{throw new n.ErrnoError(29)}if(r===void 0&&c===0)throw new n.ErrnoError(6);if(r==null)break;c++,t[o+l]=r}return c&&(e.node.timestamp=Date.now()),c},write:(e,t,s,i)=>{for(var r=0;r<i;r++)try{o(t[s+r])}catch{throw new n.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),r}}),n.mkdev(a,r,i)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Nt)try{e.contents=Qe(Nt(e.url),!0),e.usedBytes=e.contents.length}catch{throw new n.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,t,s,o,i)=>{function l(){this.lengthKnown=!1,this.chunks=[]}if(l.prototype.get=function(t){if(t>this.length-1||t<0)return void 0;var n=t%this.chunkSize,s=t/this.chunkSize|0;return this.getter(s)[n]},l.prototype.setDataGetter=function(t){this.getter=t},l.prototype.cacheLength=function(){var t,o,i,a,r,c,l,n=new XMLHttpRequest;if(n.open("HEAD",s,!1),n.send(null),!(n.status>=200&&n.status<300||n.status===304))throw new Error("Couldn't load "+s+". Status: "+n.status);t=Number(n.getResponseHeader("Content-length")),r=(a=n.getResponseHeader("Accept-Ranges"))&&a==="bytes",c=(a=n.getResponseHeader("Content-Encoding"))&&a==="gzip",o=1024*1024,r||(o=t),l=(e,n)=>{if(e>n)throw new Error("invalid range ("+e+", "+n+") or no bytes requested!");if(n>t-1)throw new Error("only "+t+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",s,!1),t!==o&&i.setRequestHeader("Range","bytes="+e+"-"+n),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||i.status===304))throw new Error("Couldn't load "+s+". Status: "+i.status);return i.response!==void 0?new Uint8Array(i.response||[]):Qe(i.responseText||"",!0)},i=this,i.setDataGetter(e=>{var s=e*o,n=(e+1)*o-1,n=Math.min(n,t-1);if(typeof i.chunks[e]=="undefined"&&(i.chunks[e]=l(s,n)),typeof i.chunks[e]=="undefined")throw new Error("doXHR failed!");return i.chunks[e]}),(c||!t)&&(o=t=1,t=this.getter(0).length,o=t,G("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=t,this._chunkSize=o,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){if(!pe)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a,r,c,u,d=new l;Object.defineProperties(d,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}}),r={isDevice:!1,contents:d}}else r={isDevice:!1,url:s};a=n.createFile(e,t,r,o,i),r.contents?a.contents=r.contents:r.url&&(a.contents=null,a.url=r.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}}),c={},u=Object.keys(a.stream_ops),u.forEach(e=>{var t=a.stream_ops[e];c[e]=function(){return n.forceLoadFile(a),t.apply(null,arguments)}});function h(e,t,n,s,o){var i,r,a=e.node.contents;if(o>=a.length)return 0;if(r=Math.min(a.length-o,s),a.slice)for(i=0;i<r;i++)t[n+i]=a[o+i];else for(i=0;i<r;i++)t[n+i]=a.get(o+i);return r}return c.read=(e,t,s,o,i)=>(n.forceLoadFile(a),h(e,t,s,o,i)),c.mmap=(e,t,s)=>{n.forceLoadFile(a);var r=tn(t);if(!r)throw new n.ErrnoError(48);return h(e,C,r,t,s),{ptr:r,allocated:!0}},a.stream_ops=c,a},createPreloadedFile:(e,t,s,o,i,a,r,l,d,u)=>{var m=t?ne.resolve(j.join2(e,t)):e,h=kn("cp "+m);function f(s){function f(s){u&&u(),l||n.createDataFile(e,t,s,o,i,d),a&&a(),Ze(h)}if(c.handledByPreloadPlugin(s,m,f,()=>{r&&r(),Ze(h)}))return;f(s)}st(h),typeof s=="string"?q4(s,e=>f(e),r):f(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var o,i=n.indexedDB();try{o=i.open(n.DB_NAME(),n.DB_VERSION)}catch(e){return s(e)}o.onupgradeneeded=()=>{G("creating db");var e=o.result;e.createObjectStore(n.DB_STORE_NAME)},o.onsuccess=()=>{var d=o.result,r=d.transaction([n.DB_STORE_NAME],"readwrite"),u=r.objectStore(n.DB_STORE_NAME),a=0,i=0,c=e.length;function l(){i==0?t():s()}e.forEach(e=>{var t=u.put(n.analyzePath(e).object.contents,e);t.onsuccess=()=>{a++,a+i==c&&l()},t.onerror=()=>{i++,a+i==c&&l()}}),r.onerror=s},o.onerror=s},loadFilesFromDB:(e,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var o,i=n.indexedDB();try{o=i.open(n.DB_NAME(),n.DB_VERSION)}catch(e){return s(e)}o.onupgradeneeded=s,o.onsuccess=()=>{c=o.result;try{a=c.transaction([n.DB_STORE_NAME],"readonly")}catch(e){s(e);return}var a,c,u=a.objectStore(n.DB_STORE_NAME),r=0,i=0,l=e.length;function d(){i==0?t():s()}e.forEach(e=>{var t=u.get(e);t.onsuccess=()=>{n.analyzePath(e).exists&&n.unlink(e),n.createDataFile(j.dirname(e),j.basename(e),t.result,!0,!0,!0),r++,r+i==l&&d()},t.onerror=()=>{i++,r+i==l&&d()}}),a.onerror=s},o.onerror=s}},f={DEFAULT_POLLMASK:5,calculateAt:function(e,t,s){if(j.isAbs(t))return t;if(e===-100)o=n.cwd();else{var o,i=n.getStream(e);if(!i)throw new n.ErrnoError(8);o=i.path}if(t.length==0){if(!s)throw new n.ErrnoError(44);return o}return j.join2(o,t)},doStat:function(e,t,s){try{var o=e(t)}catch(e){if(e&&e.node&&j.normalize(t)!==j.normalize(n.getPath(e.node)))return-54;throw e}return i[s>>2]=o.dev,i[s+4>>2]=0,i[s+8>>2]=o.ino,i[s+12>>2]=o.mode,i[s+16>>2]=o.nlink,i[s+20>>2]=o.uid,i[s+24>>2]=o.gid,i[s+28>>2]=o.rdev,i[s+32>>2]=0,D=[o.size>>>0,(b=o.size,+Math.abs(b)>=1?b>0?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],i[s+40>>2]=D[0],i[s+44>>2]=D[1],i[s+48>>2]=4096,i[s+52>>2]=o.blocks,i[s+56>>2]=o.atime.getTime()/1e3|0,i[s+60>>2]=0,i[s+64>>2]=o.mtime.getTime()/1e3|0,i[s+68>>2]=0,i[s+72>>2]=o.ctime.getTime()/1e3|0,i[s+76>>2]=0,D=[o.ino>>>0,(b=o.ino,+Math.abs(b)>=1?b>0?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],i[s+80>>2]=D[0],i[s+84>>2]=D[1],0},doMsync:function(e,t,s,o,i){var a=y.slice(e,e+s);n.msync(t,a,i,s,o)},varargs:void 0,get:function(){f.varargs+=4;var e=i[f.varargs-4>>2];return e},getStr:function(e){var t=T(e);return t},getStreamFromFD:function(e){var t=n.getStream(e);if(!t)throw new n.ErrnoError(8);return t}};function K4(e,t,s,o){try{for(var c,d,u,l=0,k=t?i[t>>2]:0,E=t?i[t+4>>2]:0,C=s?i[s>>2]:0,x=s?i[s+4>>2]:0,O=o?i[o>>2]:0,_=o?i[o+4>>2]:0,b=0,g=0,v=0,m=0,j=0,p=0,y=(t?i[t>>2]:0)|(s?i[s>>2]:0)|(o?i[o>>2]:0),w=(t?i[t+4>>2]:0)|(s?i[s+4>>2]:0)|(o?i[o+4>>2]:0),h=function(e,t,n,s){return e<32?t&s:n&s},r=0;r<e;r++){if(c=1<<r%32,!h(r,y,w,c))continue;if(u=n.getStream(r),!u)throw new n.ErrnoError(8);d=f.DEFAULT_POLLMASK,u.stream_ops.poll&&(d=u.stream_ops.poll(u)),d&1&&h(r,k,E,c)&&(r<32?b=b|c:g=g|c,l++),d&4&&h(r,C,x,c)&&(r<32?v=v|c:m=m|c,l++),d&2&&h(r,O,_,c)&&(r<32?j=j|c:p=p|c,l++)}return t&&(i[t>>2]=b,i[t+4>>2]=g),s&&(i[s>>2]=v,i[s+4>>2]=m),o&&(i[o>>2]=j,i[o+4>>2]=p),l}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}S={mount:function(){return r.websocket=r.websocket&&"object"==typeof r.websocket?r.websocket:{},r.websocket._callbacks={},r.websocket.on=function(e,t){return"function"==typeof t&&(this._callbacks[e]=t),this},r.websocket.emit=function(e,t){"function"==typeof this._callbacks[e]&&this._callbacks[e].call(this,t)},n.createNode(null,"/",16384|511,0)},createSocket:function(e,t,s){t&=~526336;var o,i,a,r,c=t==1;if(c&&s&&s!=6)throw new n.ErrnoError(66);return o={family:e,type:t,protocol:s,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:S.websocket_sock_ops},i=S.nextname(),a=n.createNode(S.root,i,49152,0),a.sock=o,r=n.createStream({path:i,node:a,flags:2,seekable:!1,stream_ops:S.stream_ops}),o.stream=r,o},getSocket:function(e){var t=n.getStream(e);return!t||!n.isSocket(t.node.mode)?null:t.node.sock},stream_ops:{poll:function(e){var t=e.node.sock;return t.sock_ops.poll(t)},ioctl:function(e,t,n){var s=e.node.sock;return s.sock_ops.ioctl(s,t,n)},read:function(e,t,n,s){var a=e.node.sock,i=a.sock_ops.recvmsg(a,s);return i?(t.set(i.buffer,n),i.buffer.length):0},write:function(e,t,n,s){var i=e.node.sock;return i.sock_ops.sendmsg(i,t,n,s)},close:function(e){var t=e.node.sock;t.sock_ops.close(t)}},nextname:function(){return S.nextname.current||(S.nextname.current=0),"socket["+S.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,t,s){if(typeof t=="object"&&(o=t,t=null,s=null),o)if(o._socket)t=o._socket.remoteAddress,s=o._socket.remotePort;else{var o,i,a,c,l,d,h,m,u=/ws[s]?:\/\/([^:]+):(\d+)/.exec(o.url);if(!u)throw new Error("WebSocket URL must be in the format ws(s)://address:port");t=u[1],s=parseInt(u[2],10)}else try{l=r.websocket&&"object"==typeof r.websocket,i="ws:#".replace("#","//"),l&&"string"==typeof r.websocket.url&&(i=r.websocket.url),(i==="ws://"||i==="wss://")&&(h=t.split("/"),i=i+h[0]+":"+s+"/"+h.slice(1).join("/")),a="binary",l&&"string"==typeof r.websocket.subprotocol&&(a=r.websocket.subprotocol),d=void 0,a!=="null"&&(a=a.replace(/^ +| +$/g,"").split(/ *, */),d=a),l&&null===r.websocket.subprotocol&&(a="null",d=void 0),m=WebSocket,o=new m(i,d),o.binaryType="arraybuffer"}catch{throw new n.ErrnoError(23)}return c={addr:t,port:s,socket:o,dgram_send_queue:[]},S.websocket_sock_ops.addPeer(e,c),S.websocket_sock_ops.handlePeerEvents(e,c),e.type===2&&typeof e.sport!="undefined"&&c.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(e.sport&65280)>>8,e.sport&255])),c},getPeer:function(e,t,n){return e.peers[t+":"+n]},addPeer:function(e,t){e.peers[t.addr+":"+t.port]=t},removePeer:function(e,t){delete e.peers[t.addr+":"+t.port]},handlePeerEvents:function(e,t){var n=!0,s=function(){r.websocket.emit("open",e.stream.fd);try{for(var n=t.dgram_send_queue.shift();n;)t.socket.send(n),n=t.dgram_send_queue.shift()}catch{t.socket.close()}};function o(s){if(typeof s=="string"){var o,i,a=new TextEncoder;s=a.encode(s)}else{if(le(s.byteLength!==void 0),s.byteLength==0)return;s=new Uint8Array(s)}if(o=n,n=!1,o&&s.length===10&&s[0]===255&&s[1]===255&&s[2]===255&&s[3]===255&&s[4]==="p".charCodeAt(0)&&s[5]==="o".charCodeAt(0)&&s[6]==="r".charCodeAt(0)&&s[7]==="t".charCodeAt(0)){i=s[8]<<8|s[9],S.websocket_sock_ops.removePeer(e,t),t.port=i,S.websocket_sock_ops.addPeer(e,t);return}e.recv_queue.push({addr:t.addr,port:t.port,data:s}),r.websocket.emit("message",e.stream.fd)}Bt?(t.socket.on("open",s),t.socket.on("message",function(e,t){if(!t)return;o(new Uint8Array(e).buffer)}),t.socket.on("close",function(){r.websocket.emit("close",e.stream.fd)}),t.socket.on("error",function(){e.error=14,r.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})):(t.socket.onopen=s,t.socket.onclose=function(){r.websocket.emit("close",e.stream.fd)},t.socket.onmessage=function(t){o(t.data)},t.socket.onerror=function(){e.error=14,r.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll:function(e){if(e.type===1&&e.server)return e.pending.length?64|1:0;var n=0,t=e.type===1?S.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!t||t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(n|=64|1),(!t||t&&t.socket.readyState===t.socket.OPEN)&&(n|=4),(t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(n|=16),n},ioctl:function(e,t,n){switch(t){case 21531:var s=0;return e.recv_queue.length&&(s=e.recv_queue[0].data.length),i[n>>2]=s,0;default:return 28}},close:function(e){if(e.server){try{e.server.close()}catch{}e.server=null}for(var n,s=Object.keys(e.peers),t=0;t<s.length;t++){n=e.peers[s[t]];try{n.socket.close()}catch{}S.websocket_sock_ops.removePeer(e,n)}return 0},bind:function(e,t,s){if(typeof e.saddr!="undefined"||typeof e.sport!="undefined")throw new n.ErrnoError(28);if(e.saddr=t,e.sport=s,e.type===2){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(e){if(!(e instanceof n.ErrnoError))throw e;if(e.errno!==138)throw e}}},connect:function(e,t,s){if(e.server)throw new n.ErrnoError(138);if(typeof e.daddr!="undefined"&&typeof e.dport!="undefined"){var i,o=S.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(o)throw o.socket.readyState===o.socket.CONNECTING?new n.ErrnoError(7):new n.ErrnoError(30)}throw i=S.websocket_sock_ops.createPeer(e,t,s),e.daddr=i.addr,e.dport=i.port,new n.ErrnoError(26)},listen:function(){if(!Bt)throw new n.ErrnoError(138)},accept:function(e){if(!e.server||!e.pending.length)throw new n.ErrnoError(28);var t=e.pending.shift();return t.stream.flags=e.stream.flags,t},getname:function(e,t){var s,o;if(t){if(e.daddr===void 0||e.dport===void 0)throw new n.ErrnoError(53);s=e.daddr,o=e.dport}else s=e.saddr||0,o=e.sport||0;return{addr:s,port:o}},sendmsg:function(e,t,s,o,i,a){if(e.type===2){if((i===void 0||a===void 0)&&(i=e.daddr,a=e.dport),i===void 0||a===void 0)throw new n.ErrnoError(17)}else i=e.daddr,a=e.dport;var c,r=S.websocket_sock_ops.getPeer(e,i,a);if(e.type===1){if(!r||r.socket.readyState===r.socket.CLOSING||r.socket.readyState===r.socket.CLOSED)throw new n.ErrnoError(53);if(r.socket.readyState===r.socket.CONNECTING)throw new n.ErrnoError(6)}if(ArrayBuffer.isView(t)&&(s+=t.byteOffset,t=t.buffer),c=t.slice(s,s+o),e.type===2&&(!r||r.socket.readyState!==r.socket.OPEN))return(!r||r.socket.readyState===r.socket.CLOSING||r.socket.readyState===r.socket.CLOSED)&&(r=S.websocket_sock_ops.createPeer(e,i,a)),r.dgram_send_queue.push(c),o;try{return r.socket.send(c),o}catch{throw new n.ErrnoError(28)}},recvmsg:function(e,t){if(e.type===1&&e.server)throw new n.ErrnoError(53);var o,i,a,r,c,l,d,s=e.recv_queue.shift();if(!s)if(e.type===1){if(o=S.websocket_sock_ops.getPeer(e,e.daddr,e.dport),!o)throw new n.ErrnoError(53);if(o.socket.readyState===o.socket.CLOSING||o.socket.readyState===o.socket.CLOSED)return null;throw new n.ErrnoError(6)}else throw new n.ErrnoError(6);return a=s.data.byteLength||s.data.length,r=s.data.byteOffset||0,c=s.data.buffer||s.data,i=Math.min(t,a),l={buffer:new Uint8Array(c,r,i),addr:s.addr,port:s.port},e.type===1&&i<a&&(d=a-i,s.data=new Uint8Array(c,r+i,d),e.recv_queue.unshift(s)),l}}};function he(e){var t=S.getSocket(e);if(!t)throw new n.ErrnoError(8);return t}function U4(e){return i[Et()>>2]=e,e}function He(e){for(var s,t=e.split("."),n=0;n<4;n++){if(s=Number(t[n]),isNaN(s))return null;t[n]=s}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function Oe(e){return parseInt(e)}function nt(e){var t,s,o,i,a=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,n=[];if(!a.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),t=e.split(":"),t[t.length-4]=Oe(t[t.length-4])+Oe(t[t.length-3])*256,t[t.length-3]=Oe(t[t.length-2])+Oe(t[t.length-1])*256,t=t.slice(0,t.length-2)):t=e.split(":"),i=0,o=0;for(s=0;s<t.length;s++)if(typeof t[s]=="string")if(t[s]==="Z"){for(o=0;o<8-t.length+1;o++)n[s+o]=0;i=o-1}else n[s+i]=Re(parseInt(t[s],16));else n[s+i]=t[s];return[n[1]<<16|n[0],n[3]<<16|n[2],n[5]<<16|n[4],n[7]<<16|n[6]]}function Pe(e,t,n,s,o){switch(t){case 2:n=He(n),ln(e,16),o&&(i[o>>2]=16),Y[e>>1]=t,i[e+4>>2]=n,Y[e+2>>1]=Re(s);break;case 10:n=nt(n),ln(e,28),o&&(i[o>>2]=28),i[e>>2]=t,i[e+8>>2]=n[0],i[e+12>>2]=n[1],i[e+16>>2]=n[2],i[e+20>>2]=n[3],Y[e+2>>1]=Re(s);break;default:return 5}return 0}B={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t,n,s=He(e);return s!==null?e:(s=nt(e),s!==null?e:(B.address_map.addrs[e]?t=B.address_map.addrs[e]:(n=B.address_map.id++,le(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(n&255)+"."+(n&65280),B.address_map.names[t]=e,B.address_map.addrs[e]=t),t))},lookup_addr:function(e){return B.address_map.names[e]?B.address_map.names[e]:null}};function W4(e,t,s){try{var r,a=he(e),i=a.sock_ops.accept(a);return t&&(r=Pe(t,i.family,B.lookup_name(i.daddr),i.dport,s)),i.stream.fd}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function at(e){return(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function On(e){var n="",t=0,i=0,l=0,a=0,r=0,c=0,s=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],d=!0,o="";for(c=0;c<5;c++)if(s[c]!==0){d=!1;break}if(d){if(o=at(s[6]|s[7]<<16),s[5]===-1)return n="::ffff:",n+=o,n;if(s[5]===0)return n="::",o==="0.0.0.0"&&(o=""),o==="0.0.0.1"&&(o="1"),n+=o,n}for(t=0;t<8;t++)s[t]===0&&(t-l>1&&(r=0),l=t,r++),r>i&&(i=r,a=t-i+1);for(t=0;t<8;t++){if(i>1&&s[t]===0&&t>=a&&t<a+i){t===a&&(n+=":",a===0&&(n+=":"));continue}n+=Number(Be(s[t]&65535)).toString(16),n+=t<7?":":""}return n}function _n(e,t){var n,s=Y[e>>1],o=Be(mt[e+2>>1]);switch(s){case 2:if(t!==16)return{errno:28};n=i[e+4>>2],n=at(n);break;case 10:if(t!==28)return{errno:28};n=[i[e+8>>2],i[e+12>>2],i[e+16>>2],i[e+20>>2]],n=On(n);break;default:return{errno:5}}return{family:s,addr:n,port:o}}function lt(e,t,s){if(s&&e===0)return null;var o=_n(e,t);if(o.errno)throw new n.ErrnoError(o.errno);return o.addr=B.lookup_addr(o.addr)||o.addr,o}function V4(e,t,s){try{var i=he(e),o=lt(t,s);return i.sock_ops.bind(i,o.addr,o.port),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function B4(e){try{return e=f.getStr(e),n.chdir(e),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function I4(e,t){try{return e=f.getStr(e),n.chmod(e,t),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function H4(e,t,s){try{var i=he(e),o=lt(t,s);return i.sock_ops.connect(i,o.addr,o.port),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function P4(e,t,s){try{if(t=f.getStr(t),t=f.calculateAt(e,t),s&~7)return-28;var i,r=n.lookupPath(t,{follow:!0}),a=r.node;return a?(i="",s&4&&(i+="r"),s&2&&(i+="w"),s&1&&(i+="x"),i&&n.nodePermissions(a,i)?-2:0):-44}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function R4(e,t,s){f.varargs=s;try{var o,a,r,i=f.getStreamFromFD(e);switch(t){case 0:return o=f.get(),o<0?-28:(a=n.createStream(i,o),a.fd);case 1:case 2:return 0;case 3:return i.flags;case 4:return o=f.get(),i.flags|=o,0;case 5:return o=f.get(),r=0,Y[o+r>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return U4(28),-1;default:return-28}}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function L4(e,t){try{if(t===0)return-28;var o=n.cwd(),s=de(o)+1;return t<s?-68:(N(o,e,t),s)}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function N4(e,t,s){try{var o,r,c,l,d,u,h,m,p,a=f.getStreamFromFD(e);for(a.getdents||(a.getdents=n.readdir(a.path)),r=280,o=0,m=n.llseek(a,0,1),c=Math.floor(m/r);c<a.getdents.length&&o+r<=s;)d=a.getdents[c],d==="."?(l=a.node.id,h=4):d===".."?(p=n.lookupPath(a.path,{parent:!0}),l=p.node.id,h=4):(u=n.lookupNode(a.node,d),l=u.id,h=n.isChrdev(u.mode)?2:n.isDir(u.mode)?4:n.isLink(u.mode)?10:8),D=[l>>>0,(b=l,+Math.abs(b)>=1?b>0?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],i[t+o>>2]=D[0],i[t+o+4>>2]=D[1],D=[(c+1)*r>>>0,(b=(c+1)*r,+Math.abs(b)>=1?b>0?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],i[t+o+8>>2]=D[0],i[t+o+12>>2]=D[1],Y[t+o+16>>1]=280,C[t+o+18>>0]=h,N(d,t+o+19,256),o+=r,c+=1;return n.llseek(a,c*r,0),o}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function D4(e,t,s){try{W("__syscall_getsockname "+e);var o=he(e),i=Pe(t,o.family,B.lookup_name(o.saddr||"0.0.0.0"),o.sport,s);return 0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function z4(e,t,s,o,a){try{var r=he(e);return t===1&&s===4?(i[o>>2]=r.error,i[a>>2]=4,r.error=null,0):-50}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function T4(e,t,s){f.varargs=s;try{var a,o=f.getStreamFromFD(e);switch(t){case 21509:case 21505:return o.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return o.tty?0:-59;case 21519:return o.tty?(a=f.get(),i[a>>2]=0,0):-59;case 21520:return o.tty?-28:-59;case 21531:return a=f.get(),n.ioctl(o,t,a);case 21523:return o.tty?0:-59;case 21524:return o.tty?0:-59;default:K("bad ioctl syscall "+t)}}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function M4(e,t){try{var s=he(e);return s.sock_ops.listen(s,t),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function A4(e,t){try{return e=f.getStr(e),f.doStat(n.lstat,e,t)}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function k4(e,t,s){try{return t=f.getStr(t),t=f.calculateAt(e,t),t=j.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),n.mkdir(t,s,0),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function C4(e,t,s,o){try{t=f.getStr(t);var a=o&256,i=o&4096;return o=o&~4352,t=f.calculateAt(e,t,i),f.doStat(a?n.lstat:n.stat,t,s)}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function i4(e,t,s,o){f.varargs=o;try{t=f.getStr(t),t=f.calculateAt(e,t);var i=o?f.get():0;return n.open(t,s,i).fd}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function G1(e,t){try{for(var o,a,c,d,u,l=0,r=0;r<t;r++)c=e+8*r,d=i[c>>2],u=Y[c+4>>1],o=32,a=n.getStream(d),a&&(o=f.DEFAULT_POLLMASK,a.stream_ops.poll&&(o=a.stream_ops.poll(a))),o&=u|8|16,o&&l++,Y[c+6>>1]=o;return l}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function $1(e,t,s,o){try{if(t=f.getStr(t),t=f.calculateAt(e,t),o<=0)return-28;var a=n.readlink(t),i=Math.min(o,de(a)),r=C[s+i];return N(a,s,o+1),C[s+i]=r,i}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function D1(e,t,s,o,i,a){try{var l,c=he(e),r=c.sock_ops.recvmsg(c,s);return r?(i&&(l=Pe(i,c.family,B.lookup_name(r.addr),r.port,a)),y.set(r.buffer,t),r.buffer.byteLength):0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function y1(e,t,s,o){try{return t=f.getStr(t),o=f.getStr(o),t=f.calculateAt(e,t),o=f.calculateAt(s,o),n.rename(t,o),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function v1(e){try{return e=f.getStr(e),n.rmdir(e),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function Xu(e,t,s,o,i,a){try{var c=he(e),r=lt(i,a,!0);return r?c.sock_ops.sendmsg(c,C,t,s,r.addr,r.port):n.write(c.stream,C,t,s)}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function Gu(e,t,s){try{var o=S.createSocket(e,t,s);return o.stream.fd}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function Yu(e,t){try{return e=f.getStr(e),f.doStat(n.stat,e,t)}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function Hu(e,t,s){try{return e=f.getStr(e),i[s+4>>2]=4096,i[s+40>>2]=4096,i[s+8>>2]=1e6,i[s+12>>2]=5e5,i[s+16>>2]=5e5,i[s+20>>2]=n.nextInode,i[s+24>>2]=1e6,i[s+28>>2]=42,i[s+44>>2]=2,i[s+36>>2]=255,0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function Pu(e,t){try{return e=f.getStr(e),t=f.getStr(t),n.symlink(e,t),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function su(e,t,s){try{return t=f.getStr(t),t=f.calculateAt(e,t),s===0?n.unlink(t):s===512?n.rmdir(t):K("Invalid flags passed to unlinkat"),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return-e.errno}}function nu(){}Pt="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function tu(){K(Pt)}function eu(){K(Pt)}function Zd(){return Date.now()}fn=!0;function Qd(){return fn}function Kd(){throw 1/0}function $d(e,t){var s,o,n=new Date(i[e>>2]*1e3);i[t>>2]=n.getUTCSeconds(),i[t+4>>2]=n.getUTCMinutes(),i[t+8>>2]=n.getUTCHours(),i[t+12>>2]=n.getUTCDate(),i[t+16>>2]=n.getUTCMonth(),i[t+20>>2]=n.getUTCFullYear()-1900,i[t+24>>2]=n.getUTCDay(),s=Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0),o=(n.getTime()-s)/(1e3*60*60*24)|0,i[t+28>>2]=o}function Nd(e,t){var s,o,a,r,c,n=new Date(i[e>>2]*1e3);i[t>>2]=n.getSeconds(),i[t+4>>2]=n.getMinutes(),i[t+8>>2]=n.getHours(),i[t+12>>2]=n.getDate(),i[t+16>>2]=n.getMonth(),i[t+20>>2]=n.getFullYear()-1900,i[t+24>>2]=n.getDay(),s=new Date(n.getFullYear(),0,1),r=(n.getTime()-s.getTime())/(1e3*60*60*24)|0,i[t+28>>2]=r,i[t+36>>2]=-(n.getTimezoneOffset()*60),o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),a=s.getTimezoneOffset(),c=(o!=a&&n.getTimezoneOffset()==Math.min(a,o))|0,i[t+32>>2]=c}function Dd(e,t,n){var a,r,h,m,c=(new Date).getFullYear(),l=new Date(c,0,1),d=new Date(c,6,1),s=l.getTimezoneOffset(),o=d.getTimezoneOffset(),f=Math.max(s,o);i[e>>2]=f*60,i[t>>2]=Number(s!=o);function u(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}h=u(l),m=u(d),a=Cn(h),r=Cn(m),o<s?(O[n>>2]=a,O[n+4>>2]=r):(O[n>>2]=r,O[n+4>>2]=a)}function Lt(e,t,n){if(Lt.called)return;Lt.called=!0,Dd(e,t,n)}function zd(){K("")}function Ft(e,t){if(c.mainLoop.timingMode=e,c.mainLoop.timingValue=t,!c.mainLoop.func)return 1;if(c.mainLoop.running||(_t(),c.mainLoop.running=!0),e==0)c.mainLoop.scheduler=function(){var n=Math.max(0,c.mainLoop.tickStartTime+t-qe())|0;setTimeout(c.mainLoop.runner,n)},c.mainLoop.method="timeout";else if(e==1)c.mainLoop.scheduler=function(){c.requestAnimationFrame(c.mainLoop.runner)},c.mainLoop.method="rAF";else if(e==2){if(typeof setImmediate=="undefined"){var s=[],n="setimmediate",o=function(e){(e.data===n||e.data.target===n)&&(e.stopPropagation(),s.shift()())};addEventListener("message",o,!0),setImmediate=function(t){s.push(t),pe?(r.setImmediates===void 0&&(r.setImmediates=[]),r.setImmediates.push(t),postMessage({target:n})):postMessage(n,"*")}}c.mainLoop.scheduler=function(){setImmediate(c.mainLoop.runner)},c.mainLoop.method="immediate"}return 0}qe=()=>performance.now();function Td(){return!o.currentContext||!o.currentContext.GLctx?-3:o.currentContext.defaultFbo?(o.blitOffscreenFramebuffer(o.currentContext),0):o.currentContext.attributes.explicitSwapControl?0:-3}function Fd(){return Td()}function _t(){Ae+=1}function Md(e){pt(e)}function nn(){if(!St())try{Md(Ce)}catch(e){dt(e)}}function sn(e,t,n,s,o){le(!c.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),c.mainLoop.func=e,c.mainLoop.arg=s;var a=c.mainLoop.currentlyRunningMainloop;function i(){return!(a<c.mainLoop.currentlyRunningMainloop)||(bt(),nn(),!1)}if(c.mainLoop.running=!1,c.mainLoop.runner=function(){if(ge)return;if(c.mainLoop.queue.length>0){var n,s,a=Date.now(),o=c.mainLoop.queue.shift();if(o.func(o.arg),c.mainLoop.remainingBlockers&&(n=c.mainLoop.remainingBlockers,s=n%1==0?n-1:Math.floor(n),o.counted?c.mainLoop.remainingBlockers=s:(s=s+.5,c.mainLoop.remainingBlockers=(8*n+s)/9)),G('main loop blocker "'+o.name+'" took '+(Date.now()-a)+" ms"),c.mainLoop.updateStatus(),!i())return;setTimeout(c.mainLoop.runner,0);return}if(!i())return;if(c.mainLoop.currentFrameNumber=c.mainLoop.currentFrameNumber+1|0,c.mainLoop.timingMode==1&&c.mainLoop.timingValue>1&&c.mainLoop.currentFrameNumber%c.mainLoop.timingValue!=0){c.mainLoop.scheduler();return}if(c.mainLoop.timingMode==0&&(c.mainLoop.tickStartTime=qe()),c.mainLoop.runIter(e),!i())return;typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),c.mainLoop.scheduler()},o||(t&&t>0?Ft(0,1e3/t):Ft(1,1),c.mainLoop.scheduler()),n)throw"unwind"}function jt(e,t){if(Mt||ge)return;if(t){e();return}try{e(),nn()}catch(e){dt(e)}}function bt(){Ae-=1}function rn(e,t){return _t(),setTimeout(function(){bt(),jt(e)},t)}c={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){c.mainLoop.scheduler=null,c.mainLoop.currentlyRunningMainloop++},resume:function(){c.mainLoop.currentlyRunningMainloop++;var e=c.mainLoop.timingMode,t=c.mainLoop.timingValue,n=c.mainLoop.func;c.mainLoop.func=null,sn(n,0,!1,c.mainLoop.arg,!0),Ft(e,t),c.mainLoop.scheduler()},updateStatus:function(){if(r.setStatus){var n=r.statusMessage||"Please wait...",e=c.mainLoop.remainingBlockers,t=c.mainLoop.expectedBlockers;e?e<t?r.setStatus(n+" ("+(t-e)+"/"+t+")"):r.setStatus(n):r.setStatus("")}},runIter:function(e){if(ge)return;if(r.preMainLoop){var t=r.preMainLoop();if(t===!1)return}jt(e),r.postMainLoop&&r.postMainLoop()}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(r.preloadPlugins||(r.preloadPlugins=[]),c.initted)return;c.initted=!0;try{new Blob,c.hasBlobConstructor=!0}catch{c.hasBlobConstructor=!1,G("warning: no blob constructor, cannot create blobs with mimetypes")}c.BlobBuilder=typeof MozBlobBuilder!="undefined"?MozBlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:c.hasBlobConstructor?null:G("warning: no BlobBuilder"),c.URLObject=typeof window!="undefined"?window.URL?window.URL:window.webkitURL:void 0,!r.noImageDecoding&&typeof c.URLObject=="undefined"&&(G("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),r.noImageDecoding=!0);var e,t,s={};s.canHandle=function(t){return!r.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},s.handle=function(t,n,s,o){var i,r,l,a=null;if(c.hasBlobConstructor)try{a=new Blob([t],{type:c.getMimetype(n)}),a.size!==t.length&&(a=new Blob([new Uint8Array(t).buffer],{type:c.getMimetype(n)}))}catch(e){Me("Blob constructor present but fails: "+e+"; falling back to blob builder")}a||(l=new c.BlobBuilder,l.append(new Uint8Array(t).buffer),a=l.getBlob()),r=c.URLObject.createObjectURL(a),i=new Image,i.onload=()=>{le(i.complete,"Image "+n+" could not be decoded");var o,e=document.createElement("canvas");e.width=i.width,e.height=i.height,o=e.getContext("2d"),o.drawImage(i,0,0),cn[n]=e,c.URLObject.revokeObjectURL(r),s&&s(t)},i.onerror=e=>{G("Image "+r+" could not be decoded"),o&&o()},i.src=r},r.preloadPlugins.push(s),t={},t.canHandle=function(t){return!r.noAudioDecoding&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},t.handle=function(t,n,s,o){var i,d,u,a=!1;function r(e){if(a)return;a=!0,gt[n]=e,s&&s(t)}function l(){if(a)return;a=!0,gt[n]=new Audio,o&&o()}if(c.hasBlobConstructor){try{d=new Blob([t],{type:c.getMimetype(n)})}catch{return l()}u=c.URLObject.createObjectURL(d),i=new Audio,i.addEventListener("canplaythrough",function(){r(i)},!1),i.onerror=function(){if(a)return;G("warning: browser could not fully decode audio "+n+", trying slower base64 approach");function o(e){for(var r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="=",t="",s=0,n=0,a=0;a<e.length;a++)for(s=s<<8|e[a],n+=8;n>=6;)r=s>>n-6&63,n-=6,t+=o[r];return n==2?(t+=o[(s&3)<<4],t+=i+i):n==4&&(t+=o[(s&15)<<2],t+=i),t}i.src="data:audio/x-"+n.substr(-3)+";base64,"+o(t),r(i)},i.src=u,rn(function(){r(i)},1e4)}else return l()},r.preloadPlugins.push(t);function n(){c.pointerLock=document.pointerLockElement===r.canvas||document.mozPointerLockElement===r.canvas||document.webkitPointerLockElement===r.canvas||document.msPointerLockElement===r.canvas}e=r.canvas,e&&(e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock||e.msRequestPointerLock||function(){},e.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},e.exitPointerLock=e.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),r.elementPointerLock&&e.addEventListener("click",function(e){!c.pointerLock&&r.canvas.requestPointerLock&&(r.canvas.requestPointerLock(),e.preventDefault())},!1))},handledByPreloadPlugin:function(e,t,n,s){c.init();var o=!1;return r.preloadPlugins.forEach(function(i){if(o)return;i.canHandle(t)&&(i.handle(e,t,n,s),o=!0)}),o},createContext:function(e,t,n,i){if(t&&r.ctx&&e==r.canvas)return r.ctx;if(t){var a,l,u,d={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1};if(i)for(u in i)d[u]=i[u];typeof o!="undefined"&&(l=o.createContext(e,d),l&&(a=o.getContext(l).GLctx))}else a=e.getContext("2d");return a?(n&&(t||le(typeof s=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),r.ctx=a,t&&o.makeContextCurrent(l),r.useWebGL=t,c.moduleContextCreatedCallbacks.forEach(function(e){e()}),c.init()),a):null},destroyContext:function(){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){c.lockPointer=e,c.resizeCanvas=t,typeof c.lockPointer=="undefined"&&(c.lockPointer=!0),typeof c.resizeCanvas=="undefined"&&(c.resizeCanvas=!1);var n,s=r.canvas;function o(){c.isFullscreen=!1;var e=s.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(s.exitFullscreen=c.exitFullscreen,c.lockPointer&&s.requestPointerLock(),c.isFullscreen=!0,c.resizeCanvas?c.setFullscreenCanvasSize():c.updateCanvasDimensions(s)):(e.parentNode.insertBefore(s,e),e.parentNode.removeChild(e),c.resizeCanvas?c.setWindowedCanvasSize():c.updateCanvasDimensions(s)),r.onFullScreen&&r.onFullScreen(c.isFullscreen),r.onFullscreen&&r.onFullscreen(c.isFullscreen)}c.fullscreenHandlersInstalled||(c.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("webkitfullscreenchange",o,!1),document.addEventListener("MSFullscreenChange",o,!1)),n=document.createElement("div"),s.parentNode.insertBefore(n,s),n.appendChild(s),n.requestFullscreen=n.requestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen||(n.webkitRequestFullscreen?function(){n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(n.webkitRequestFullScreen?function(){n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),n.requestFullscreen()},exitFullscreen:function(){if(!c.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(e){var n,t=Date.now();if(c.nextRAF===0)c.nextRAF=t+1e3/60;else for(;t+2>=c.nextRAF;)c.nextRAF+=1e3/60;n=Math.max(c.nextRAF-t,0),setTimeout(e,n)},requestAnimationFrame:function(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var t=c.fakeRequestAnimationFrame;t(e)},safeSetTimeout:function(e){return rn(e)},safeRequestAnimationFrame:function(e){return _t(),c.requestAnimationFrame(function(){bt(),jt(e)})},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(c.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?c.mouseMovementX=c.mouseMovementY=0:(c.mouseMovementX=c.getMovementX(e),c.mouseMovementY=c.getMovementY(e)),typeof SDL!="undefined"?(c.mouseX=SDL.mouseX+c.mouseMovementX,c.mouseY=SDL.mouseY+c.mouseMovementY):(c.mouseX+=c.mouseMovementX,c.mouseY+=c.mouseMovementY);else{var t,s,o,i,a,l,d,n=r.canvas.getBoundingClientRect(),u=r.canvas.width,h=r.canvas.height,m=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,f=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset;if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){if(t=e.touch,t===void 0)return;a=t.pageX-(m+n.left),l=t.pageY-(f+n.top),a=a*(u/n.width),l=l*(h/n.height),s={x:a,y:l},e.type==="touchstart"?(c.lastTouches[t.identifier]=s,c.touches[t.identifier]=s):(e.type==="touchend"||e.type==="touchmove")&&(d=c.touches[t.identifier],d||(d=s),c.lastTouches[t.identifier]=d,c.touches[t.identifier]=s);return}o=e.pageX-(m+n.left),i=e.pageY-(f+n.top),o=o*(u/n.width),i=i*(h/n.height),c.mouseMovementX=o-c.mouseX,c.mouseMovementY=i-c.mouseY,c.mouseX=o,c.mouseY=i}},resizeListeners:[],updateResizeListeners:function(){var e=r.canvas;c.resizeListeners.forEach(function(t){t(e.width,e.height)})},setCanvasSize:function(e,t,n){var s=r.canvas;c.updateCanvasDimensions(s,e,t),n||c.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var e=O[SDL.screen>>2],e=e|8388608;i[SDL.screen>>2]=e}c.updateCanvasDimensions(r.canvas),c.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var e=O[SDL.screen>>2],e=e&~8388608;i[SDL.screen>>2]=e}c.updateCanvasDimensions(r.canvas),c.updateResizeListeners()},updateCanvasDimensions:function(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var i,s=t,o=n;r.forcedAspectRatio&&r.forcedAspectRatio>0&&(s/o<r.forcedAspectRatio?s=Math.round(o*r.forcedAspectRatio):o=Math.round(s/r.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen!="undefined"&&(i=Math.min(screen.width/s,screen.height/o),s=Math.round(s*i),o=Math.round(o*i)),c.resizeCanvas?(e.width!=s&&(e.width=s),e.height!=o&&(e.height=o),typeof e.style!="undefined"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),typeof e.style!="undefined"&&(s!=t||o!=n?(e.style.setProperty("width",s+"px","important"),e.style.setProperty("height",o+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}};function ac(){c.mainLoop.pause(),c.mainLoop.func=null}function oc(e){Dt=!1,Ae=0,pt(e)}function Xr(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,s,o){t.drawArraysInstancedANGLE(e,n,s,o)},e.drawElementsInstanced=function(e,n,s,o,i){t.drawElementsInstancedANGLE(e,n,s,o,i)},1}function Yr(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function qr(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)},1}function Ba(e){return!!(e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function Pa(e){return!!(e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function aa(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}o={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(t){o.lastError||(o.lastError=t)},getNewId:function(e){for(var n=o.counter++,t=e.length;t<n;t++)e[t]=null;return n},getSource:function(e,t,n,s){for(var a,r="",o=0;o<t;++o)a=s?i[s+o*4>>2]:-1,r+=T(i[n+o*4>>2],a<0?void 0:a);return r},createContext:function(e,t){if(t.renderViaOffscreenBackBuffer&&(t.preserveDrawingBuffer=!0),!e.getContextSafariWebGL2Fixed){e.getContextSafariWebGL2Fixed=e.getContext;function i(t,n){var s=e.getContextSafariWebGL2Fixed(t,n);return t=="webgl"==s instanceof WebGLRenderingContext?s:null}e.getContext=i}var s,n=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return n?(s=o.registerContext(n,t),s):0},enableOffscreenFramebufferAttributes:function(e){e.renderViaOffscreenBackBuffer=!0,e.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(e){var n,s,i,a,r,l,d,u,h,m,t=e.GLctx,c=t.createFramebuffer();t.bindFramebuffer(36160,c),e.defaultFbo=c,e.defaultFboForbidBlitFramebuffer=!1,t.getContextAttributes().antialias?e.defaultFboForbidBlitFramebuffer=!0:(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/),a!=null&&(l=a[1],e.defaultFboForbidBlitFramebuffer=l<67)),e.defaultColorTarget=t.createTexture(),e.defaultDepthTarget=t.createRenderbuffer(),o.resizeOffscreenFramebuffer(e),t.bindTexture(3553,e.defaultColorTarget),t.texParameteri(3553,10241,9728),t.texParameteri(3553,10240,9728),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.texImage2D(3553,0,6408,t.canvas.width,t.canvas.height,0,6408,5121,null),t.framebufferTexture2D(36160,36064,3553,e.defaultColorTarget,0),t.bindTexture(3553,null),m=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.canvas.width,t.canvas.height),t.framebufferRenderbuffer(36160,36096,36161,e.defaultDepthTarget),t.bindRenderbuffer(36161,null),d=[-1,-1,-1,1,1,-1,1,1],r=t.createBuffer(),t.bindBuffer(34962,r),t.bufferData(34962,new Float32Array(d),35044),t.bindBuffer(34962,null),e.blitVB=r,u="attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }",s=t.createShader(35633),t.shaderSource(s,u),t.compileShader(s),h="varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }",i=t.createShader(35632),t.shaderSource(i,h),t.compileShader(i),n=t.createProgram(),t.attachShader(n,s),t.attachShader(n,i),t.linkProgram(n),e.blitProgram=n,e.blitPosLoc=t.getAttribLocation(n,"pos"),t.useProgram(n),t.uniform1i(t.getUniformLocation(n,"sampler"),0),t.useProgram(null),e.defaultVao=void 0,t.createVertexArray&&(e.defaultVao=t.createVertexArray(),t.bindVertexArray(e.defaultVao),t.enableVertexAttribArray(e.blitPosLoc),t.bindVertexArray(null))},resizeOffscreenFramebuffer:function(e){var n,s,t=e.GLctx;e.defaultColorTarget&&(n=t.getParameter(32873),t.bindTexture(3553,e.defaultColorTarget),t.texImage2D(3553,0,6408,t.drawingBufferWidth,t.drawingBufferHeight,0,6408,5121,null),t.bindTexture(3553,n)),e.defaultDepthTarget&&(s=t.getParameter(36007),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.drawingBufferWidth,t.drawingBufferHeight),t.bindRenderbuffer(36161,s))},blitOffscreenFramebuffer:function(e){var n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,y,t=e.GLctx,b=t.getParameter(3089);if(b&&t.disable(3089),v=t.getParameter(36006),t.blitFramebuffer&&!e.defaultFboForbidBlitFramebuffer)t.bindFramebuffer(36008,e.defaultFbo),t.bindFramebuffer(36009,null),t.blitFramebuffer(0,0,t.canvas.width,t.canvas.height,0,0,t.canvas.width,t.canvas.height,16384,9728);else{t.bindFramebuffer(36160,null),g=t.getParameter(35725),t.useProgram(e.blitProgram),f=t.getParameter(34964),t.bindBuffer(34962,e.blitVB),p=t.getParameter(34016),t.activeTexture(33984),y=t.getParameter(32873),t.bindTexture(3553,e.defaultColorTarget),c=t.getParameter(3042),c&&t.disable(3042),l=t.getParameter(2884),l&&t.disable(2884),d=t.getParameter(2929),d&&t.disable(2929),u=t.getParameter(2960),u&&t.disable(2960);function j(){t.vertexAttribPointer(e.blitPosLoc,2,5126,!1,0,0),t.drawArrays(5,0,4)}if(e.defaultVao)m=t.getParameter(34229),t.bindVertexArray(e.defaultVao),j(),t.bindVertexArray(m);else{s={buffer:t.getVertexAttrib(e.blitPosLoc,34975),size:t.getVertexAttrib(e.blitPosLoc,34339),stride:t.getVertexAttrib(e.blitPosLoc,34340),type:t.getVertexAttrib(e.blitPosLoc,34341),normalized:t.getVertexAttrib(e.blitPosLoc,34922),pointer:t.getVertexAttribOffset(e.blitPosLoc,34373)},a=t.getParameter(34921),i=[];for(n=0;n<a;++n)o=t.getVertexAttrib(n,34338),h=n==e.blitPosLoc,o&&!h&&t.disableVertexAttribArray(n),!o&&h&&t.enableVertexAttribArray(n),i[n]=o;j();for(n=0;n<a;++n)o=i[n],r=n==e.blitPosLoc,o&&!r&&t.enableVertexAttribArray(n),!o&&r&&t.disableVertexAttribArray(n);t.bindBuffer(34962,s.buffer),t.vertexAttribPointer(e.blitPosLoc,s.size,s.type,s.normalized,s.stride,s.offset)}u&&t.enable(2960),d&&t.enable(2929),l&&t.enable(2884),c&&t.enable(3042),t.bindTexture(3553,y),t.activeTexture(p),t.bindBuffer(34962,f),t.useProgram(g)}t.bindFramebuffer(36160,v),b&&t.enable(3089)},registerContext:function(e,t){var s=o.getNewId(o.contexts),n={handle:s,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),o.contexts[s]=n,(typeof t.enableExtensionsByDefault=="undefined"||t.enableExtensionsByDefault)&&o.initExtensions(n),t.renderViaOffscreenBackBuffer&&o.createOffscreenFramebuffer(n),s},makeContextCurrent:function(e){return o.currentContext=o.contexts[e],r.ctx=s=o.currentContext&&o.currentContext.GLctx,!e||!!s},getContext:function(e){return o.contexts[e]},deleteContext:function(e){o.currentContext===o.contexts[e]&&(o.currentContext=null),typeof v=="object"&&v.removeAllHandlersOnTarget(o.contexts[e].GLctx.canvas),o.contexts[e]&&o.contexts[e].GLctx.canvas&&(o.contexts[e].GLctx.canvas.GLctxObject=void 0),o.contexts[e]=null},initExtensions:function(e){if(e||(e=o.currentContext),e.initExtensionsDone)return;e.initExtensionsDone=!0;var n,t=e.GLctx;Xr(t),Yr(t),qr(t),Ba(t),Pa(t),e.version>=2&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),aa(t),n=t.getSupportedExtensions()||[],n.forEach(function(e){!e.includes("lose_context")&&!e.includes("debug")&&t.getExtension(e)})}};function ia(e){s.activeTexture(e)}function oa(e,t){s.attachShader(o.programs[e],o.shaders[t])}function xi(e,t){s.beginQuery(e,o.queries[t])}function yi(e,t){s.disjointTimerQueryExt.beginQueryEXT(e,o.queries[t])}function ji(e){s.beginTransformFeedback(e)}function vi(e,t,n){s.bindAttribLocation(o.programs[e],t,T(n))}function gi(e,t){e==35051?s.currentPixelPackBufferBinding=t:e==35052&&(s.currentPixelUnpackBufferBinding=t),s.bindBuffer(e,o.buffers[t])}function ri(e,t,n){s.bindBufferBase(e,t,o.buffers[n])}function Po(e,t,n,i,a){s.bindBufferRange(e,t,o.buffers[n],i,a)}function Mo(e,t){s.bindFramebuffer(e,t?o.framebuffers[t]:o.currentContext.defaultFbo)}function So(e,t){s.bindRenderbuffer(e,o.renderbuffers[t])}function _o(e,t){s.bindSampler(e,o.samplers[t])}function co(e,t){s.bindTexture(e,o.textures[t])}function Ys(e,t){s.bindTransformFeedback(e,o.transformFeedbacks[t])}function Ps(e){s.bindVertexArray(o.vaos[e])}function Qn(e){s.bindVertexArray(o.vaos[e])}function Gn(e,t,n,o){s.blendColor(e,t,n,o)}function Fc(e){s.blendEquation(e)}function Ln(e,t){s.blendEquationSeparate(e,t)}function Rn(e,t){s.blendFunc(e,t)}function Pn(e,t,n,o){s.blendFuncSeparate(e,t,n,o)}function Hn(e,t,n,o,i,a,r,c,l,d){s.blitFramebuffer(e,t,n,o,i,a,r,c,l,d)}function In(e,t,n,i){o.currentContext.version>=2?n&&t?s.bufferData(e,y,i,n,t):s.bufferData(e,t,i):s.bufferData(e,n?y.subarray(n,n+t):t,i)}function Bn(e,t,n,i){if(o.currentContext.version>=2){n&&s.bufferSubData(e,t,y,i,n);return}s.bufferSubData(e,t,y.subarray(i,i+n))}function Vn(e){return s.checkFramebufferStatus(e)}function $n(e){s.clear(e)}function Wn(e,t,n,o){s.clearBufferfi(e,t,n,o)}function Un(e,t,n){s.clearBufferfv(e,t,l,n>>2)}function Kn(e,t,n){s.clearBufferiv(e,t,i,n>>2)}function qn(e,t,n){s.clearBufferuiv(e,t,O,n>>2)}function Yn(e,t,n,o){s.clearColor(e,t,n,o)}function Dn(e){s.clearDepth(e)}function Xn(e){s.clearStencil(e)}function zn(e,t){return(e>>>0)+t*4294967296}function Zn(e,t,n,i){return s.clientWaitSync(o.syncs[e],t,zn(n,i))}function Jn(e,t,n,o){s.colorMask(!!e,!!t,!!n,!!o)}function es(e){s.compileShader(o.shaders[e])}function ts(e,t,n,i,a,r,c,l){if(o.currentContext.version>=2){s.currentPixelUnpackBufferBinding||!c?s.compressedTexImage2D(e,t,n,i,a,r,c,l):s.compressedTexImage2D(e,t,n,i,a,r,y,l,c);return}s.compressedTexImage2D(e,t,n,i,a,r,l?y.subarray(l,l+c):null)}function ns(e,t,n,o,i,a,r,c,l){s.currentPixelUnpackBufferBinding?s.compressedTexImage3D(e,t,n,o,i,a,r,c,l):s.compressedTexImage3D(e,t,n,o,i,a,r,y,l,c)}function ss(e,t,n,i,a,r,c,l,d){if(o.currentContext.version>=2){s.currentPixelUnpackBufferBinding||!l?s.compressedTexSubImage2D(e,t,n,i,a,r,c,l,d):s.compressedTexSubImage2D(e,t,n,i,a,r,c,y,d,l);return}s.compressedTexSubImage2D(e,t,n,i,a,r,c,d?y.subarray(d,d+l):null)}function os(e,t,n,o,i,a,r,c,l,d,u){s.currentPixelUnpackBufferBinding?s.compressedTexSubImage3D(e,t,n,o,i,a,r,c,l,d,u):s.compressedTexSubImage3D(e,t,n,o,i,a,r,c,l,y,u,d)}function is(e,t,n,o,i){s.copyBufferSubData(e,t,n,o,i)}function rs(e,t,n,o,i,a,r,c){s.copyTexImage2D(e,t,n,o,i,a,r,c)}function cs(e,t,n,o,i,a,r,c){s.copyTexSubImage2D(e,t,n,o,i,a,r,c)}function ls(e,t,n,o,i,a,r,c,l){s.copyTexSubImage3D(e,t,n,o,i,a,r,c,l)}function ds(){var t=o.getNewId(o.programs),e=s.createProgram();return e.name=t,e.maxUniformLength=e.maxAttributeLength=e.maxUniformBlockNameLength=0,e.uniformIdCounter=1,o.programs[t]=e,t}function us(e){var t=o.getNewId(o.shaders);return o.shaders[t]=s.createShader(e),t}function hs(e){s.cullFace(e)}function ms(e,t){for(var n,a,r=0;r<e;r++){if(n=i[t+r*4>>2],a=o.buffers[n],!a)continue;s.deleteBuffer(a),a.name=0,o.buffers[n]=null,n==s.currentPixelPackBufferBinding&&(s.currentPixelPackBufferBinding=0),n==s.currentPixelUnpackBufferBinding&&(s.currentPixelUnpackBufferBinding=0)}}function fs(e,t){for(var n,r,a=0;a<e;++a){if(r=i[t+a*4>>2],n=o.framebuffers[r],!n)continue;s.deleteFramebuffer(n),n.name=0,o.framebuffers[r]=null}}function ps(e){if(!e)return;var t=o.programs[e];if(!t){o.recordError(1281);return}s.deleteProgram(t),t.name=0,o.programs[e]=null}function gs(e,t){for(var a,r,n=0;n<e;n++){if(a=i[t+n*4>>2],r=o.queries[a],!r)continue;s.deleteQuery(r),o.queries[a]=null}}function vs(e,t){for(var a,r,n=0;n<e;n++){if(a=i[t+n*4>>2],r=o.queries[a],!r)continue;s.disjointTimerQueryExt.deleteQueryEXT(r),o.queries[a]=null}}function bs(e,t){for(var n,r,a=0;a<e;a++){if(r=i[t+a*4>>2],n=o.renderbuffers[r],!n)continue;s.deleteRenderbuffer(n),n.name=0,o.renderbuffers[r]=null}}function js(e,t){for(var n,r,a=0;a<e;a++){if(r=i[t+a*4>>2],n=o.samplers[r],!n)continue;s.deleteSampler(n),n.name=0,o.samplers[r]=null}}function ys(e){if(!e)return;var t=o.shaders[e];if(!t){o.recordError(1281);return}s.deleteShader(t),o.shaders[e]=null}function _s(e){if(!e)return;var t=o.syncs[e];if(!t){o.recordError(1281);return}s.deleteSync(t),t.name=0,o.syncs[e]=null}function ws(e,t){for(var n,r,a=0;a<e;a++){if(r=i[t+a*4>>2],n=o.textures[r],!n)continue;s.deleteTexture(n),n.name=0,o.textures[r]=null}}function Os(e,t){for(var n,r,a=0;a<e;a++){if(r=i[t+a*4>>2],n=o.transformFeedbacks[r],!n)continue;s.deleteTransformFeedback(n),n.name=0,o.transformFeedbacks[r]=null}}function xs(e,t){for(var a,n=0;n<e;n++)a=i[t+n*4>>2],s.deleteVertexArray(o.vaos[a]),o.vaos[a]=null}function Cs(e,t){for(var a,n=0;n<e;n++)a=i[t+n*4>>2],s.deleteVertexArray(o.vaos[a]),o.vaos[a]=null}function Es(e){s.depthFunc(e)}function ks(e){s.depthMask(!!e)}function As(e,t){s.depthRange(e,t)}function Ss(e,t){s.detachShader(o.programs[e],o.shaders[t])}function Ms(e){s.disable(e)}function Fs(e){s.disableVertexAttribArray(e)}function Ts(e,t,n){s.drawArrays(e,t,n)}function zs(e,t,n,o){s.drawArraysInstanced(e,t,n,o)}function Ds(e,t,n,o){s.drawArraysInstanced(e,t,n,o)}function Ns(e,t,n,o){s.drawArraysInstanced(e,t,n,o)}function Ls(e,t,n,o){s.drawArraysInstanced(e,t,n,o)}function Rs(e,t,n,o){s.drawArraysInstanced(e,t,n,o)}ae=[];function Hs(e,t){for(var o=ae[e],n=0;n<e;n++)o[n]=i[t+n*4>>2];s.drawBuffers(o)}function Is(e,t){for(var o=ae[e],n=0;n<e;n++)o[n]=i[t+n*4>>2];s.drawBuffers(o)}function Bs(e,t){for(var o=ae[e],n=0;n<e;n++)o[n]=i[t+n*4>>2];s.drawBuffers(o)}function Vs(e,t,n,o){s.drawElements(e,t,n,o)}function $s(e,t,n,o,i){s.drawElementsInstanced(e,t,n,o,i)}function Ws(e,t,n,o,i){s.drawElementsInstanced(e,t,n,o,i)}function Us(e,t,n,o,i){s.drawElementsInstanced(e,t,n,o,i)}function Ks(e,t,n,o,i){s.drawElementsInstanced(e,t,n,o,i)}function qs(e,t,n,o,i){s.drawElementsInstanced(e,t,n,o,i)}function Fn(e,t,n,o){s.drawElements(e,t,n,o)}function Gs(e,t,n,s,o,i){Fn(e,s,o,i)}function Xs(e){s.enable(e)}function Qs(e){s.enableVertexAttribArray(e)}function Zs(e){s.endQuery(e)}function Js(e){s.disjointTimerQueryExt.endQueryEXT(e)}function eo(){s.endTransformFeedback()}function to(e,t){var n,i=s.fenceSync(e,t);return i?(n=o.getNewId(o.syncs),i.name=n,o.syncs[n]=i,n):0}function no(){s.finish()}function so(){s.flush()}function oo(e,t,n,i){s.framebufferRenderbuffer(e,t,n,o.renderbuffers[i])}function io(e,t,n,i,a){s.framebufferTexture2D(e,t,n,o.textures[i],a)}function ao(e,t,n,i,a){s.framebufferTextureLayer(e,t,o.textures[n],i,a)}function ro(e){s.frontFace(e)}function U(e,t,n,a){for(var r,c,l=0;l<e;l++)r=s[n](),c=r&&o.getNewId(a),r?(r.name=c,a[c]=r):o.recordError(1282),i[t+l*4>>2]=c}function lo(e,t){U(e,t,"createBuffer",o.buffers)}function uo(e,t){U(e,t,"createFramebuffer",o.framebuffers)}function ho(e,t){U(e,t,"createQuery",o.queries)}function mo(e,t){for(var a,r,n=0;n<e;n++){if(a=s.disjointTimerQueryExt.createQueryEXT(),!a){for(o.recordError(1282);n<e;)i[t+n++*4>>2]=0;return}r=o.getNewId(o.queries),a.name=r,o.queries[r]=a,i[t+n*4>>2]=r}}function fo(e,t){U(e,t,"createRenderbuffer",o.renderbuffers)}function po(e,t){U(e,t,"createSampler",o.samplers)}function go(e,t){U(e,t,"createTexture",o.textures)}function vo(e,t){U(e,t,"createTransformFeedback",o.transformFeedbacks)}function bo(e,t){U(e,t,"createVertexArray",o.vaos)}function jo(e,t){U(e,t,"createVertexArray",o.vaos)}function yo(e){s.generateMipmap(e)}function Sn(e,t,n,a,r,c,l,d){t=o.programs[t];var h,u=s[e](t,n);u&&(h=d&&N(u.name,d,a),r&&(i[r>>2]=h),c&&(i[c>>2]=u.size),l&&(i[l>>2]=u.type))}function wo(e,t,n,s,o,i,a){Sn("getActiveAttrib",e,t,n,s,o,i,a)}function Oo(e,t,n,s,o,i,a){Sn("getActiveUniform",e,t,n,s,o,i,a)}function xo(e,t,n,a,r){e=o.programs[e];var l,c=s.getActiveUniformBlockName(e,t);if(!c)return;r&&n>0?(l=N(c,r,n),a&&(i[a>>2]=l)):a&&(i[a>>2]=0)}function Co(e,t,n,a){if(!a){o.recordError(1281);return}if(e=o.programs[e],n==35393){var r,c,l=s.getActiveUniformBlockName(e,t);i[a>>2]=l.length+1;return}if(r=s.getActiveUniformBlockParameter(e,t,n),r===null)return;if(n==35395)for(c=0;c<r.length;c++)i[a+c*4>>2]=r[c];else i[a>>2]=r}function Eo(e,t,n,a,r){if(!r){o.recordError(1281);return}if(t>0&&n==0){o.recordError(1281);return}e=o.programs[e];for(var l,u,d=[],c=0;c<t;c++)d.push(i[n+c*4>>2]);if(l=s.getActiveUniforms(e,d,a),!l)return;u=l.length;for(c=0;c<u;c++)i[r+c*4>>2]=l[c]}function ko(e,t,n,a){var r,d,l=s.getAttachedShaders(o.programs[e]),c=l.length;c>t&&(c=t),i[n>>2]=c;for(r=0;r<c;++r)d=o.shaders.indexOf(l[r]),i[a+r*4>>2]=d}function Ao(e,t){return s.getAttribLocation(o.programs[e],T(t))}function Te(e,t){O[e>>2]=t,O[e+4>>2]=(t-O[e>>2])/4294967296}function we(e,t,n){if(!t){o.recordError(1281);return}var a,c,d,u,r=void 0;switch(e){case 36346:r=1;break;case 36344:n!=0&&n!=1&&o.recordError(1280);return;case 34814:case 36345:r=0;break;case 34466:d=s.getParameter(34467),r=d?d.length:0;break;case 33309:if(o.currentContext.version<2){o.recordError(1282);return}u=s.getSupportedExtensions()||[],r=2*u.length;break;case 33307:case 33308:if(o.currentContext.version<2){o.recordError(1280);return}r=e==33307?3:0;break}if(r===void 0)switch(a=s.getParameter(e),typeof a){case"number":r=a;break;case"boolean":r=a?1:0;break;case"string":o.recordError(1280);return;case"object":if(a===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{r=0;break}default:{o.recordError(1280);return}}else if(a instanceof Float32Array||a instanceof Uint32Array||a instanceof Int32Array||a instanceof Array){for(c=0;c<a.length;++c)switch(n){case 0:i[t+c*4>>2]=a[c];break;case 2:l[t+c*4>>2]=a[c];break;case 4:C[t+c>>0]=a[c]?1:0;break}return}else try{r=a.name|0}catch(t){o.recordError(1280),W("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")");return}break;default:o.recordError(1280),W("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+a+" of type "+typeof a+"!");return}switch(n){case 1:Te(t,r);break;case 0:i[t>>2]=r;break;case 2:l[t>>2]=r;break;case 4:C[t>>0]=r?1:0;break}}function Fo(e,t){we(e,t,4)}function To(e,t,n){if(!n){o.recordError(1281);return}Te(n,s.getBufferParameter(e,t))}function zo(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.getBufferParameter(e,t)}function Do(){var e=s.getError()||o.lastError;return o.lastError=0,e}function No(e,t){we(e,t,2)}function Lo(e,t){return s.getFragDataLocation(o.programs[e],T(t))}function Ro(e,t,n,o){var a=s.getFramebufferAttachmentParameter(e,t,n);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=a.name|0),i[o>>2]=a}function En(e,t,n,a){if(!n){o.recordError(1281);return}var r,c=s.getIndexedParameter(e,t);switch(typeof c){case"boolean":r=c?1:0;break;case"number":r=c;break;case"object":if(c===null)switch(e){case 35983:case 35368:r=0;break;default:{o.recordError(1280);return}}else if(c instanceof WebGLBuffer)r=c.name|0;else{o.recordError(1280);return}break;default:o.recordError(1280);return}switch(a){case 1:Te(n,r);break;case 0:i[n>>2]=r;break;case 2:l[n>>2]=r;break;case 4:C[n>>0]=r?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+a}}function Ho(e,t,n){En(e,t,n,1)}function Io(e,t){we(e,t,1)}function Bo(e,t,n){En(e,t,n,0)}function Vo(e,t){we(e,t,0)}function $o(e,t,n,a,r){if(a<0){o.recordError(1281);return}if(!r){o.recordError(1281);return}var c,l=s.getInternalformatParameter(e,t,n);if(l===null)return;for(c=0;c<l.length&&c<a;++c)i[r+c*4>>2]=l[c]}function Wo(){o.recordError(1282)}function Uo(e,t,n,a){var c,r=s.getProgramInfoLog(o.programs[e]);r===null&&(r="(unknown error)"),c=t>0&&a?N(r,a,t):0,n&&(i[n>>2]=c)}function Ko(e,t,n){if(!n){o.recordError(1281);return}if(e>=o.counter){o.recordError(1281);return}if(e=o.programs[e],t==35716){var a,r=s.getProgramInfoLog(e);r===null&&(r="(unknown error)"),i[n>>2]=r.length+1}else if(t==35719){if(!e.maxUniformLength)for(a=0;a<s.getProgramParameter(e,35718);++a)e.maxUniformLength=Math.max(e.maxUniformLength,s.getActiveUniform(e,a).name.length+1);i[n>>2]=e.maxUniformLength}else if(t==35722){if(!e.maxAttributeLength)for(a=0;a<s.getProgramParameter(e,35721);++a)e.maxAttributeLength=Math.max(e.maxAttributeLength,s.getActiveAttrib(e,a).name.length+1);i[n>>2]=e.maxAttributeLength}else if(t==35381){if(!e.maxUniformBlockNameLength)for(a=0;a<s.getProgramParameter(e,35382);++a)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,s.getActiveUniformBlockName(e,a).length+1);i[n>>2]=e.maxUniformBlockNameLength}else i[n>>2]=s.getProgramParameter(e,t)}function qo(e,t,n){if(!n){o.recordError(1281);return}var i,a,r=o.queries[e];o.currentContext.version<2?i=s.disjointTimerQueryExt.getQueryObjectEXT(r,t):i=s.getQueryParameter(r,t),typeof i=="boolean"?a=i?1:0:a=i,Te(n,a)}function Yo(e,t,n){if(!n){o.recordError(1281);return}var r,c=o.queries[e],a=s.disjointTimerQueryExt.getQueryObjectEXT(c,t);typeof a=="boolean"?r=a?1:0:r=a,i[n>>2]=r}function Go(e,t,n){if(!n){o.recordError(1281);return}var i,a,r=o.queries[e];o.currentContext.version<2?i=s.disjointTimerQueryExt.getQueryObjectEXT(r,t):i=s.getQueryParameter(r,t),typeof i=="boolean"?a=i?1:0:a=i,Te(n,a)}function Xo(e,t,n){if(!n){o.recordError(1281);return}var r,c=o.queries[e],a=s.getQueryParameter(c,t);typeof a=="boolean"?r=a?1:0:r=a,i[n>>2]=r}function Qo(e,t,n){if(!n){o.recordError(1281);return}var r,c=o.queries[e],a=s.disjointTimerQueryExt.getQueryObjectEXT(c,t);typeof a=="boolean"?r=a?1:0:r=a,i[n>>2]=r}function Zo(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.getQuery(e,t)}function Jo(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.disjointTimerQueryExt.getQueryEXT(e,t)}function ei(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.getRenderbufferParameter(e,t)}function ti(e,t,n){if(!n){o.recordError(1281);return}l[n>>2]=s.getSamplerParameter(o.samplers[e],t)}function ni(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.getSamplerParameter(o.samplers[e],t)}function si(e,t,n,a){var c,r=s.getShaderInfoLog(o.shaders[e]);r===null&&(r="(unknown error)"),c=t>0&&a?N(r,a,t):0,n&&(i[n>>2]=c)}function oi(e,t,n,o){var a=s.getShaderPrecisionFormat(e,t);i[n>>2]=a.rangeMin,i[n+4>>2]=a.rangeMax,i[o>>2]=a.precision}function ii(e,t,n,a){var c,r=s.getShaderSource(o.shaders[e]);if(!r)return;c=t>0&&a?N(r,a,t):0,n&&(i[n>>2]=c)}function ai(e,t,n){if(!n){o.recordError(1281);return}if(t==35716){var r,c,l,a=s.getShaderInfoLog(o.shaders[e]);a===null&&(a="(unknown error)"),c=a?a.length+1:0,i[n>>2]=c}else t==35720?(r=s.getShaderSource(o.shaders[e]),l=r?r.length+1:0,i[n>>2]=l):i[n>>2]=s.getShaderParameter(o.shaders[e],t)}function se(e){var t=de(e)+1,n=ve(t);return N(e,n,t),n}function ci(e){var n,i,a,r,c,l,t=o.stringCache[e];if(!t){switch(e){case 7939:a=s.getSupportedExtensions()||[],a=a.concat(a.map(function(e){return"GL_"+e})),t=se(a.join(" "));break;case 7936:case 7937:case 37445:case 37446:c=s.getParameter(e),c||o.recordError(1280),t=c&&se(c);break;case 7938:n=s.getParameter(7938),o.currentContext.version>=2?n="OpenGL ES 3.0 ("+n+")":n="OpenGL ES 2.0 ("+n+")",t=se(n);break;case 35724:r=s.getParameter(35724),l=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,i=r.match(l),i!==null&&(i[1].length==3&&(i[1]=i[1]+"0"),r="OpenGL ES GLSL ES "+i[1]+" ("+r+")"),t=se(r);break;default:o.recordError(1280)}o.stringCache[e]=t}return t}function li(e,t){if(o.currentContext.version<2)return o.recordError(1282),0;var n,i=o.stringiCache[e];if(i)return t<0||t>=i.length?(o.recordError(1281),0):i[t];switch(e){case 7939:return n=s.getSupportedExtensions()||[],n=n.concat(n.map(function(e){return"GL_"+e})),n=n.map(function(e){return se(e)}),i=o.stringiCache[e]=n,t<0||t>=i.length?(o.recordError(1281),0):i[t];default:return o.recordError(1280),0}}function di(e,t,n,a,r){if(n<0){o.recordError(1281);return}if(!r){o.recordError(1281);return}var c=s.getSyncParameter(o.syncs[e],t);c!==null&&(i[r>>2]=c,a&&(i[a>>2]=1))}function ui(e,t,n){if(!n){o.recordError(1281);return}l[n>>2]=s.getTexParameter(e,t)}function hi(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.getTexParameter(e,t)}function mi(e,t,n,a,r,c,l){e=o.programs[e];var u,d=s.getTransformFeedbackVarying(e,t);if(!d)return;l&&n>0?(u=N(d.name,l,n),a&&(i[a>>2]=u)):a&&(i[a>>2]=0),r&&(i[r>>2]=d.size),c&&(i[c>>2]=d.type)}function fi(e,t){return s.getUniformBlockIndex(o.programs[e],T(t))}function pi(e,t,n,a){if(!a){o.recordError(1281);return}if(t>0&&(n==0||a==0)){o.recordError(1281);return}e=o.programs[e];for(var c,d,l=[],r=0;r<t;r++)l.push(T(i[n+r*4>>2]));if(c=s.getUniformIndices(e,l),!c)return;d=c.length;for(r=0;r<d;r++)i[a+r*4>>2]=c[r]}function it(e){return e.slice(-1)=="]"&&e.lastIndexOf("[")}function rt(e){var t,n,o,i,a,c,l,d,r=e.uniformLocsById,u=e.uniformSizeAndIdsByName;if(!r){e.uniformLocsById=r={},e.uniformArrayNamesById={};for(t=0;t<s.getProgramParameter(e,35718);++t){c=s.getActiveUniform(e,t),o=c.name,i=c.size,l=it(o),d=l>0?o.slice(0,l):o,a=e.uniformIdCounter,e.uniformIdCounter+=i,u[d]=[i,a];for(n=0;n<i;++n)r[a]=n,e.uniformArrayNamesById[a++]=d}}}function bi(e,t){if(t=T(t),e=o.programs[e]){{rt(e);var i,r=e.uniformLocsById,n=0,c=t,a=it(t);if(a>0&&(n=Oe(t.slice(a+1))>>>0,c=t.slice(0,a)),i=e.uniformSizeAndIdsByName[c],i&&n<i[0]&&(n+=i[1],r[n]=r[n]||s.getUniformLocation(e,t)))return n}}else o.recordError(1281);return-1}function u(e){var t,n=s.currentProgram;if(n)return t=n.uniformLocsById[e],typeof t=="number"&&(n.uniformLocsById[e]=t=s.getUniformLocation(n,n.uniformArrayNamesById[e]+(t>0?"["+t+"]":""))),t;o.recordError(1282)}function ct(e,t,n,a){if(!n){o.recordError(1281);return}e=o.programs[e],rt(e);var c,r=s.getUniform(e,u(t));if(typeof r=="number"||typeof r=="boolean")switch(a){case 0:i[n>>2]=r;break;case 2:l[n>>2]=r;break}else for(c=0;c<r.length;c++)switch(a){case 0:i[n+c*4>>2]=r[c];break;case 2:l[n+c*4>>2]=r[c];break}}function _i(e,t,n){ct(e,t,n,2)}function wi(e,t,n){ct(e,t,n,0)}function Oi(e,t,n){ct(e,t,n,0)}function Ie(e,t,n,a){if(!n){o.recordError(1281);return}var c,r=s.getVertexAttrib(e,t);if(t==34975)i[n>>2]=r&&r.name;else if(typeof r=="number"||typeof r=="boolean")switch(a){case 0:i[n>>2]=r;break;case 2:l[n>>2]=r;break;case 5:i[n>>2]=Math.fround(r);break}else for(c=0;c<r.length;c++)switch(a){case 0:i[n+c*4>>2]=r[c];break;case 2:l[n+c*4>>2]=r[c];break;case 5:i[n+c*4>>2]=Math.fround(r[c]);break}}function Ci(e,t,n){Ie(e,t,n,0)}function Ei(e,t,n){Ie(e,t,n,0)}function ki(e,t,n){if(!n){o.recordError(1281);return}i[n>>2]=s.getVertexAttribOffset(e,t)}function Ai(e,t,n){Ie(e,t,n,2)}function Si(e,t,n){Ie(e,t,n,5)}function Mi(e,t){s.hint(e,t)}function Fi(e,t,n){for(var a=ae[t],o=0;o<t;o++)a[o]=i[n+o*4>>2];s.invalidateFramebuffer(e,a)}function Ti(e,t,n,o,a,r,c){for(var d=ae[t],l=0;l<t;l++)d[l]=i[n+l*4>>2];s.invalidateSubFramebuffer(e,d,o,a,r,c)}function zi(e){var t=o.buffers[e];return t?s.isBuffer(t):0}function Di(e){return s.isEnabled(e)}function Ni(e){var t=o.framebuffers[e];return t?s.isFramebuffer(t):0}function Li(e){return e=o.programs[e],e?s.isProgram(e):0}function Ri(e){var t=o.queries[e];return t?s.isQuery(t):0}function Pi(e){var t=o.queries[e];return t?s.disjointTimerQueryExt.isQueryEXT(t):0}function Hi(e){var t=o.renderbuffers[e];return t?s.isRenderbuffer(t):0}function Ii(e){var t=o.samplers[e];return t?s.isSampler(t):0}function Bi(e){var t=o.shaders[e];return t?s.isShader(t):0}function Vi(e){return s.isSync(o.syncs[e])}function $i(e){var t=o.textures[e];return t?s.isTexture(t):0}function Wi(e){return s.isTransformFeedback(o.transformFeedbacks[e])}function Ui(e){var t=o.vaos[e];return t?s.isVertexArray(t):0}function Ki(e){var t=o.vaos[e];return t?s.isVertexArray(t):0}function qi(e){s.lineWidth(e)}function Yi(e){e=o.programs[e],s.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function Gi(){s.pauseTransformFeedback()}function Xi(e,t){e==3317&&(o.unpackAlignment=t),s.pixelStorei(e,t)}function Qi(e,t){s.polygonOffset(e,t)}function Zi(){o.recordError(1280)}function Ji(){o.recordError(1280)}function ea(e,t){s.disjointTimerQueryExt.queryCounterEXT(o.queries[e],t)}function ta(e){s.readBuffer(e)}function na(e,t,n,s){function o(e,t){return e+t-1&-t}var i=e*n,a=o(i,s);return t*a}function sa(e){var t={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return t[e-6402]||1}function te(e){return e-=5120,e==0?C:e==1?y:e==2?Y:e==4?i:e==6?l:e==5||e==28922||e==28520||e==30779||e==30782?O:mt}function Z(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function be(e,t,n,s,i){var c=te(e),r=Z(c),l=1<<r,d=sa(t)*l,u=na(n,s,d,o.unpackAlignment);return c.subarray(i>>r,i+u>>r)}function ra(e,t,n,i,a,r,c){if(o.currentContext.version>=2){if(s.currentPixelPackBufferBinding)s.readPixels(e,t,n,i,a,r,c);else{var l,d=te(r);s.readPixels(e,t,n,i,a,r,d,c>>Z(d))}return}if(l=be(r,a,n,i,c,a),!l){o.recordError(1280);return}s.readPixels(e,t,n,i,a,r,l)}function ca(){}function la(e,t,n,o){s.renderbufferStorage(e,t,n,o)}function da(e,t,n,o,i){s.renderbufferStorageMultisample(e,t,n,o,i)}function ua(){s.resumeTransformFeedback()}function ha(e,t){s.sampleCoverage(e,!!t)}function ma(e,t,n){s.samplerParameterf(o.samplers[e],t,n)}function fa(e,t,n){var i=l[n>>2];s.samplerParameterf(o.samplers[e],t,i)}function pa(e,t,n){s.samplerParameteri(o.samplers[e],t,n)}function ga(e,t,n){var a=i[n>>2];s.samplerParameteri(o.samplers[e],t,a)}function va(e,t,n,o){s.scissor(e,t,n,o)}function ba(){o.recordError(1280)}function ja(e,t,n,i){var a=o.getSource(e,t,n,i);s.shaderSource(o.shaders[e],a)}function ya(e,t,n){s.stencilFunc(e,t,n)}function _a(e,t,n,o){s.stencilFuncSeparate(e,t,n,o)}function wa(e){s.stencilMask(e)}function Oa(e,t){s.stencilMaskSeparate(e,t)}function xa(e,t,n){s.stencilOp(e,t,n)}function Ca(e,t,n,o){s.stencilOpSeparate(e,t,n,o)}function Ea(e,t,n,i,a,r,c,l,d){if(o.currentContext.version>=2){if(s.currentPixelUnpackBufferBinding)s.texImage2D(e,t,n,i,a,r,c,l,d);else if(d){var u=te(l);s.texImage2D(e,t,n,i,a,r,c,l,u,d>>Z(u))}else s.texImage2D(e,t,n,i,a,r,c,l,null);return}s.texImage2D(e,t,n,i,a,r,c,l,d?be(l,c,i,a,d,n):null)}function ka(e,t,n,o,i,a,r,c,l,d){if(s.currentPixelUnpackBufferBinding)s.texImage3D(e,t,n,o,i,a,r,c,l,d);else if(d){var u=te(l);s.texImage3D(e,t,n,o,i,a,r,c,l,u,d>>Z(u))}else s.texImage3D(e,t,n,o,i,a,r,c,l,null)}function Aa(e,t,n){s.texParameterf(e,t,n)}function Sa(e,t,n){var o=l[n>>2];s.texParameterf(e,t,o)}function Ma(e,t,n){s.texParameteri(e,t,n)}function Fa(e,t,n){var o=i[n>>2];s.texParameteri(e,t,o)}function Ta(e,t,n,o,i){s.texStorage2D(e,t,n,o,i)}function za(e,t,n,o,i,a){s.texStorage3D(e,t,n,o,i,a)}function Da(e,t,n,i,a,r,c,l,d){if(o.currentContext.version>=2){if(s.currentPixelUnpackBufferBinding)s.texSubImage2D(e,t,n,i,a,r,c,l,d);else if(d){var u,h=te(l);s.texSubImage2D(e,t,n,i,a,r,c,l,h,d>>Z(h))}else s.texSubImage2D(e,t,n,i,a,r,c,l,null);return}u=null,d&&(u=be(l,c,a,r,d,0)),s.texSubImage2D(e,t,n,i,a,r,c,l,u)}function Na(e,t,n,o,i,a,r,c,l,d,u){if(s.currentPixelUnpackBufferBinding)s.texSubImage3D(e,t,n,o,i,a,r,c,l,d,u);else if(u){var h=te(d);s.texSubImage3D(e,t,n,o,i,a,r,c,l,d,h,u>>Z(h))}else s.texSubImage3D(e,t,n,o,i,a,r,c,l,d,null)}function La(e,t,n,a){e=o.programs[e];for(var c=[],r=0;r<t;r++)c.push(T(i[n+r*4>>2]));s.transformFeedbackVaryings(e,c,a)}function Ra(e,t){s.uniform1f(u(e),t)}H=[];function Ha(e,t,n){if(o.currentContext.version>=2){t&&s.uniform1fv(u(e),l,n>>2,t);return}if(t<=288)for(var a=H[t-1],i=0;i<t;++i)a[i]=l[n+4*i>>2];else a=l.subarray(n>>2,n+t*4>>2);s.uniform1fv(u(e),a)}function Ia(e,t){s.uniform1i(u(e),t)}re=[];function Va(e,t,n){if(o.currentContext.version>=2){t&&s.uniform1iv(u(e),i,n>>2,t);return}if(t<=288)for(var r=re[t-1],a=0;a<t;++a)r[a]=i[n+4*a>>2];else r=i.subarray(n>>2,n+t*4>>2);s.uniform1iv(u(e),r)}function $a(e,t){s.uniform1ui(u(e),t)}function Wa(e,t,n){t&&s.uniform1uiv(u(e),O,n>>2,t)}function Ua(e,t,n){s.uniform2f(u(e),t,n)}function Ka(e,t,n){if(o.currentContext.version>=2){t&&s.uniform2fv(u(e),l,n>>2,t*2);return}if(t<=144)for(var a=H[2*t-1],i=0;i<2*t;i+=2)a[i]=l[n+4*i>>2],a[i+1]=l[n+(4*i+4)>>2];else a=l.subarray(n>>2,n+t*8>>2);s.uniform2fv(u(e),a)}function qa(e,t,n){s.uniform2i(u(e),t,n)}function Ya(e,t,n){if(o.currentContext.version>=2){t&&s.uniform2iv(u(e),i,n>>2,t*2);return}if(t<=144)for(var r=re[2*t-1],a=0;a<2*t;a+=2)r[a]=i[n+4*a>>2],r[a+1]=i[n+(4*a+4)>>2];else r=i.subarray(n>>2,n+t*8>>2);s.uniform2iv(u(e),r)}function Ga(e,t,n){s.uniform2ui(u(e),t,n)}function Xa(e,t,n){t&&s.uniform2uiv(u(e),O,n>>2,t*2)}function Qa(e,t,n,o){s.uniform3f(u(e),t,n,o)}function Za(e,t,n){if(o.currentContext.version>=2){t&&s.uniform3fv(u(e),l,n>>2,t*3);return}if(t<=96)for(var a=H[3*t-1],i=0;i<3*t;i+=3)a[i]=l[n+4*i>>2],a[i+1]=l[n+(4*i+4)>>2],a[i+2]=l[n+(4*i+8)>>2];else a=l.subarray(n>>2,n+t*12>>2);s.uniform3fv(u(e),a)}function Ja(e,t,n,o){s.uniform3i(u(e),t,n,o)}function er(e,t,n){if(o.currentContext.version>=2){t&&s.uniform3iv(u(e),i,n>>2,t*3);return}if(t<=96)for(var r=re[3*t-1],a=0;a<3*t;a+=3)r[a]=i[n+4*a>>2],r[a+1]=i[n+(4*a+4)>>2],r[a+2]=i[n+(4*a+8)>>2];else r=i.subarray(n>>2,n+t*12>>2);s.uniform3iv(u(e),r)}function tr(e,t,n,o){s.uniform3ui(u(e),t,n,o)}function nr(e,t,n){t&&s.uniform3uiv(u(e),O,n>>2,t*3)}function sr(e,t,n,o,i){s.uniform4f(u(e),t,n,o,i)}function or(e,t,n){if(o.currentContext.version>=2){t&&s.uniform4fv(u(e),l,n>>2,t*4);return}if(t<=72){var i,r,a=H[4*t-1],c=l;n>>=2;for(i=0;i<4*t;i+=4)r=n+i,a[i]=c[r],a[i+1]=c[r+1],a[i+2]=c[r+2],a[i+3]=c[r+3]}else a=l.subarray(n>>2,n+t*16>>2);s.uniform4fv(u(e),a)}function ir(e,t,n,o,i){s.uniform4i(u(e),t,n,o,i)}function ar(e,t,n){if(o.currentContext.version>=2){t&&s.uniform4iv(u(e),i,n>>2,t*4);return}if(t<=72)for(var r=re[4*t-1],a=0;a<4*t;a+=4)r[a]=i[n+4*a>>2],r[a+1]=i[n+(4*a+4)>>2],r[a+2]=i[n+(4*a+8)>>2],r[a+3]=i[n+(4*a+12)>>2];else r=i.subarray(n>>2,n+t*16>>2);s.uniform4iv(u(e),r)}function rr(e,t,n,o,i){s.uniform4ui(u(e),t,n,o,i)}function cr(e,t,n){t&&s.uniform4uiv(u(e),O,n>>2,t*4)}function lr(e,t,n){e=o.programs[e],s.uniformBlockBinding(e,t,n)}function dr(e,t,n,i){if(o.currentContext.version>=2){t&&s.uniformMatrix2fv(u(e),!!n,l,i>>2,t*4);return}if(t<=72)for(var r=H[4*t-1],a=0;a<4*t;a+=4)r[a]=l[i+4*a>>2],r[a+1]=l[i+(4*a+4)>>2],r[a+2]=l[i+(4*a+8)>>2],r[a+3]=l[i+(4*a+12)>>2];else r=l.subarray(i>>2,i+t*16>>2);s.uniformMatrix2fv(u(e),!!n,r)}function ur(e,t,n,o){t&&s.uniformMatrix2x3fv(u(e),!!n,l,o>>2,t*6)}function hr(e,t,n,o){t&&s.uniformMatrix2x4fv(u(e),!!n,l,o>>2,t*8)}function mr(e,t,n,i){if(o.currentContext.version>=2){t&&s.uniformMatrix3fv(u(e),!!n,l,i>>2,t*9);return}if(t<=32)for(var r=H[9*t-1],a=0;a<9*t;a+=9)r[a]=l[i+4*a>>2],r[a+1]=l[i+(4*a+4)>>2],r[a+2]=l[i+(4*a+8)>>2],r[a+3]=l[i+(4*a+12)>>2],r[a+4]=l[i+(4*a+16)>>2],r[a+5]=l[i+(4*a+20)>>2],r[a+6]=l[i+(4*a+24)>>2],r[a+7]=l[i+(4*a+28)>>2],r[a+8]=l[i+(4*a+32)>>2];else r=l.subarray(i>>2,i+t*36>>2);s.uniformMatrix3fv(u(e),!!n,r)}function fr(e,t,n,o){t&&s.uniformMatrix3x2fv(u(e),!!n,l,o>>2,t*6)}function pr(e,t,n,o){t&&s.uniformMatrix3x4fv(u(e),!!n,l,o>>2,t*12)}function gr(e,t,n,i){if(o.currentContext.version>=2){t&&s.uniformMatrix4fv(u(e),!!n,l,i>>2,t*16);return}if(t<=18){var a,c,r=H[16*t-1],d=l;i>>=2;for(a=0;a<16*t;a+=16)c=i+a,r[a]=d[c],r[a+1]=d[c+1],r[a+2]=d[c+2],r[a+3]=d[c+3],r[a+4]=d[c+4],r[a+5]=d[c+5],r[a+6]=d[c+6],r[a+7]=d[c+7],r[a+8]=d[c+8],r[a+9]=d[c+9],r[a+10]=d[c+10],r[a+11]=d[c+11],r[a+12]=d[c+12],r[a+13]=d[c+13],r[a+14]=d[c+14],r[a+15]=d[c+15]}else r=l.subarray(i>>2,i+t*64>>2);s.uniformMatrix4fv(u(e),!!n,r)}function vr(e,t,n,o){t&&s.uniformMatrix4x2fv(u(e),!!n,l,o>>2,t*8)}function br(e,t,n,o){t&&s.uniformMatrix4x3fv(u(e),!!n,l,o>>2,t*12)}function jr(e){e=o.programs[e],s.useProgram(e),s.currentProgram=e}function yr(e){s.validateProgram(o.programs[e])}function _r(e,t){s.vertexAttrib1f(e,t)}function wr(e,t){s.vertexAttrib1f(e,l[t>>2])}function Or(e,t,n){s.vertexAttrib2f(e,t,n)}function xr(e,t){s.vertexAttrib2f(e,l[t>>2],l[t+4>>2])}function Cr(e,t,n,o){s.vertexAttrib3f(e,t,n,o)}function Er(e,t){s.vertexAttrib3f(e,l[t>>2],l[t+4>>2],l[t+8>>2])}function kr(e,t,n,o,i){s.vertexAttrib4f(e,t,n,o,i)}function Ar(e,t){s.vertexAttrib4f(e,l[t>>2],l[t+4>>2],l[t+8>>2],l[t+12>>2])}function Sr(e,t){s.vertexAttribDivisor(e,t)}function Mr(e,t){s.vertexAttribDivisor(e,t)}function Fr(e,t){s.vertexAttribDivisor(e,t)}function Tr(e,t){s.vertexAttribDivisor(e,t)}function zr(e,t){s.vertexAttribDivisor(e,t)}function Dr(e,t,n,o,i){s.vertexAttribI4i(e,t,n,o,i)}function Nr(e,t){s.vertexAttribI4i(e,i[t>>2],i[t+4>>2],i[t+8>>2],i[t+12>>2])}function Lr(e,t,n,o,i){s.vertexAttribI4ui(e,t,n,o,i)}function Rr(e,t){s.vertexAttribI4ui(e,O[t>>2],O[t+4>>2],O[t+8>>2],O[t+12>>2])}function Pr(e,t,n,o,i){s.vertexAttribIPointer(e,t,n,o,i)}function Hr(e,t,n,o,i,a){s.vertexAttribPointer(e,t,n,!!o,i,a)}function Ir(e,t,n,o){s.viewport(e,t,n,o)}function Br(e,t,n,i){s.waitSync(o.syncs[e],t,zn(n,i))}function Vr(e,t,n){y.copyWithin(e,t,t+n)}function $r(){return 2147483648}function Wr(e){try{return $e.grow(e-ht.byteLength+65535>>>16),Gt($e.buffer),1}catch{}}function Ur(e){var t,n,s,o,i,a=y.length;if(e=e>>>0,s=$r(),e>s)return!1;let r=(e,t)=>e+(t-e%t)%t;for(t=1;t<=4;t*=2)if(n=a*(1+.2/t),n=Math.min(n,e+100663296),o=Math.min(s,r(Math.max(e,n),65536)),i=Wr(o),i)return!0;return!1}function Kr(e,t,n){var s=I(e);sn(s,t,n)}v={inEventHandler:0,removeAllEventListeners:function(){for(var e=v.eventHandlers.length-1;e>=0;--e)v._removeHandler(e);v.eventHandlers=[],v.deferredCalls=[]},registerRemoveEventListeners:function(){v.removeEventListenersRegistered||(zt.push(v.removeAllEventListeners),v.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function o(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(i in v.deferredCalls){var i,s=v.deferredCalls[i];if(s.targetFunction==e&&o(s.argsList,n))return}v.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),v.deferredCalls.sort(function(e,t){return e.precedence<t.precedence})},removeDeferredCalls:function(e){for(var t=0;t<v.deferredCalls.length;++t)v.deferredCalls[t].targetFunction==e&&(v.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return v.inEventHandler&&v.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(!v.canPerformEventHandlerRequests())return;for(var t,e=0;e<v.deferredCalls.length;++e)t=v.deferredCalls[e],v.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<v.eventHandlers.length;++n)v.eventHandlers[n].target==e&&(!t||t==v.eventHandlers[n].eventTypeString)&&v._removeHandler(n--)},_removeHandler:function(e){var t=v.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),v.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t,n=function(n){++v.inEventHandler,v.currentEventHandler=e,v.runDeferredCalls(),e.handlerFunc(n),v.runDeferredCalls(),--v.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=n,e.target.addEventListener(e.eventTypeString,n,e.useCapture),v.eventHandlers.push(e),v.registerRemoveEventListeners();else for(t=0;t<v.eventHandlers.length;++t)v.eventHandlers[t].target==e.target&&v.eventHandlers[t].eventTypeString==e.eventTypeString&&v._removeHandler(t--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},hn=["default","low-power","high-performance"];function Gr(e){return e>2?T(e):e}un=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];function Qr(e){e=Gr(e);var t=un[e]||(typeof document!="undefined"?document.querySelector(e):void 0);return t}function Zr(e){return Qr(e)}function Jr(e,t){var r,n=t>>2,c=i[n+(24>>2)],s={alpha:!!i[n+(0>>2)],depth:!!i[n+(4>>2)],stencil:!!i[n+(8>>2)],antialias:!!i[n+(12>>2)],premultipliedAlpha:!!i[n+(16>>2)],preserveDrawingBuffer:!!i[n+(20>>2)],powerPreference:hn[c],failIfMajorPerformanceCaveat:!!i[n+(28>>2)],majorVersion:i[n+(32>>2)],minorVersion:i[n+(36>>2)],enableExtensionsByDefault:i[n+(40>>2)],explicitSwapControl:i[n+(44>>2)],proxyContextToMainThread:i[n+(48>>2)],renderViaOffscreenBackBuffer:i[n+(52>>2)]},a=Zr(e);return a?(s.explicitSwapControl&&!s.renderViaOffscreenBackBuffer&&(s.renderViaOffscreenBackBuffer=!0),r=o.createContext(a,s),r):0}function ec(e,t){return Jr(e,t)}function tc(e){o.currentContext==e&&(o.currentContext=0),o.deleteContext(e)}function nc(e){for(var t=e>>2,n=0;n<56>>2;++n)i[t+n]=0;i[t+(0>>2)]=i[t+(4>>2)]=i[t+(12>>2)]=i[t+(16>>2)]=i[t+(32>>2)]=i[t+(40>>2)]=1}function sc(e){var t=o.makeContextCurrent(e);return t?0:-5}Ve={};function ic(){return We||"./this.program"}function Fe(){if(!Fe.strings){var e,n,s=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:s,_:ic()};for(e in Ve)Ve[e]===void 0?delete t[e]:t[e]=Ve[e];n=[];for(e in t)n.push(e+"="+t[e]);Fe.strings=n}return Fe.strings}function rc(e,t){var n=0;return Fe().forEach(function(s,o){var i=t+n;O[e+o*4>>2]=i,_0(s,i),n+=s.length+1}),0}function cc(e,t){var n,s=Fe();return O[e>>2]=s.length,n=0,s.forEach(function(e){n+=e.length+1}),O[t>>2]=n,0}function lc(e){try{var t=f.getStreamFromFD(e);return n.close(t),0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return e.errno}}function dc(e,t){try{var s=f.getStreamFromFD(e),o=s.tty?2:n.isDir(s.mode)?3:n.isLink(s.mode)?7:4;return C[t>>0]=o,0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return e.errno}}function uc(e,t,s,o){for(var i,a,l,r=0,c=0;c<s;c++){if(l=O[t>>2],a=O[t+4>>2],t+=8,i=n.read(e,C,l,a,o),i<0)return-1;if(r+=i,i<a)break}return r}function hc(e,t,s,o){try{var r=f.getStreamFromFD(e),a=uc(r,t,s);return i[o>>2]=a,0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return e.errno}}function mc(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN}function fc(e,t,s,o,a){try{var r,c=mc(t,s);return isNaN(c)?61:(r=f.getStreamFromFD(e),n.llseek(r,c,o),D=[r.position>>>0,(b=r.position,+Math.abs(b)>=1?b>0?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],i[a>>2]=D[0],i[a+4>>2]=D[1],r.getdents&&c===0&&o===0&&(r.getdents=null),0)}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return e.errno}}function pc(e,t,s,o){for(var i,c,l,a=0,r=0;r<s;r++){if(c=O[t>>2],l=O[t+4>>2],t+=8,i=n.write(e,C,c,l,o),i<0)return-1;a+=i}return a}function gc(e,t,s,o){try{var a=f.getStreamFromFD(e),i=pc(a,t,s);return O[o>>2]=i,0}catch(e){if(typeof n=="undefined"||!(e instanceof n.ErrnoError))throw e;return e.errno}}function vc(){return dn()}function bc(e,t,n,s){var d,a=0,u=0,l=0,o=0,r=0,c=0;function h(e,t,n,s,o,a){var r,c,l,d=e===10?28:16;return o=e===10?On(o):at(o),c=ve(d),l=Pe(c,e,o,a),le(!l),r=ve(32),i[r+4>>2]=e,i[r+8>>2]=t,i[r+12>>2]=n,i[r+24>>2]=s,O[r+20>>2]=c,e===10?i[r+16>>2]=28:i[r+16>>2]=16,i[r+28>>2]=0,r}if(n&&(l=i[n>>2],o=i[n+4>>2],r=i[n+8>>2],c=i[n+12>>2]),r&&!c&&(c=r===2?17:6),!r&&c&&(r=c===17?2:1),c===0&&(c=6),r===0&&(r=1),!e&&!t)return-2;if(l&~(1|2|4|1024|8|16|32))return-1;if(n!==0&&i[n>>2]&2&&!e)return-1;if(l&32)return-2;if(r!==0&&r!==1&&r!==2)return-7;if(o!==0&&o!==2&&o!==10)return-6;if(t&&(t=T(t),u=parseInt(t,10),isNaN(u)))return l&1024?-2:-8;if(!e)return o===0&&(o=2),(l&1)===0&&(o===2?a=De(2130706433):a=[0,0,0,1]),d=h(o,r,c,null,a,u),O[s>>2]=d,0;if(e=T(e),a=He(e),a!==null)if(o===0||o===2)o=2;else if(o===10&&l&8)a=[0,0,De(65535),a],o=10;else return-2;else if(a=nt(e),a!==null)if(o===0||o===10)o=10;else return-2;return a!=null?(d=h(o,r,c,e,a,u),O[s>>2]=d,0):l&4?-2:(e=B.lookup_name(e),a=He(e),o===0?o=2:o===10&&(a=[0,0,De(65535),a]),d=h(o,r,c,null,a,u),O[s>>2]=d,0)}function jc(e,t,n,s,o,i,a){var r,c,l,d,h,u=_n(e,t);if(u.errno)return-6;if(r=u.port,c=u.addr,l=!1,n&&s){if(a&1||!(h=B.lookup_addr(c))){if(a&8)return-2}else c=h;d=N(c,n,s),d+1>=s&&(l=!0)}return o&&i&&(r=""+r,d=N(r,o,i),d+1>=i&&(l=!0)),l?-12:0}function yc(e){s.activeTexture(e)}function _c(e,t){s.attachShader(o.programs[e],o.shaders[t])}function wc(e){s.beginTransformFeedback(e)}function Oc(e,t,n){s.bindAttribLocation(o.programs[e],t,T(n))}function xc(e,t){e==35051?s.currentPixelPackBufferBinding=t:e==35052&&(s.currentPixelUnpackBufferBinding=t),s.bindBuffer(e,o.buffers[t])}function Cc(e,t,n){s.bindBufferBase(e,t,o.buffers[n])}function Ec(e,t){s.bindFramebuffer(e,t?o.framebuffers[t]:o.currentContext.defaultFbo)}function kc(e,t){s.bindRenderbuffer(e,o.renderbuffers[t])}function Ac(e,t){s.bindTexture(e,o.textures[t])}function Sc(e){s.bindVertexArray(o.vaos[e])}function Mc(e){s.blendEquation(e)}function Nn(e,t){s.blendFunc(e,t)}function Tc(e,t,n,o){s.blendFuncSeparate(e,t,n,o)}function zc(e,t,n,o,i,a,r,c,l,d){s.blitFramebuffer(e,t,n,o,i,a,r,c,l,d)}function Dc(e,t,n,i){o.currentContext.version>=2?n&&t?s.bufferData(e,y,i,n,t):s.bufferData(e,t,i):s.bufferData(e,n?y.subarray(n,n+t):t,i)}function Nc(e,t,n,i){if(o.currentContext.version>=2){n&&s.bufferSubData(e,t,y,i,n);return}s.bufferSubData(e,t,y.subarray(i,i+n))}function Lc(e){return s.checkFramebufferStatus(e)}function Rc(e){s.clear(e)}function Pc(e,t,n){s.clearBufferfv(e,t,l,n>>2)}function Hc(e,t,n,o){s.clearColor(e,t,n,o)}function Ic(e){s.clearDepth(e)}function Bc(e,t,n,o){s.colorMask(!!e,!!t,!!n,!!o)}function Vc(e){s.compileShader(o.shaders[e])}function $c(e,t,n,i,a,r,c,l){if(o.currentContext.version>=2){s.currentPixelUnpackBufferBinding||!c?s.compressedTexImage2D(e,t,n,i,a,r,c,l):s.compressedTexImage2D(e,t,n,i,a,r,y,l,c);return}s.compressedTexImage2D(e,t,n,i,a,r,l?y.subarray(l,l+c):null)}function Wc(e,t,n,i,a,r,c,l,d){if(o.currentContext.version>=2){s.currentPixelUnpackBufferBinding||!l?s.compressedTexSubImage2D(e,t,n,i,a,r,c,l,d):s.compressedTexSubImage2D(e,t,n,i,a,r,c,y,d,l);return}s.compressedTexSubImage2D(e,t,n,i,a,r,c,d?y.subarray(d,d+l):null)}function Uc(e,t,n,o,i,a,r,c,l,d,u){s.currentPixelUnpackBufferBinding?s.compressedTexSubImage3D(e,t,n,o,i,a,r,c,l,d,u):s.compressedTexSubImage3D(e,t,n,o,i,a,r,c,l,y,u,d)}function Kc(e,t,n,o,i){s.copyBufferSubData(e,t,n,o,i)}function qc(e,t,n,o,i,a,r,c){s.copyTexSubImage2D(e,t,n,o,i,a,r,c)}function Yc(){var t=o.getNewId(o.programs),e=s.createProgram();return e.name=t,e.maxUniformLength=e.maxAttributeLength=e.maxUniformBlockNameLength=0,e.uniformIdCounter=1,o.programs[t]=e,t}function Gc(e){var t=o.getNewId(o.shaders);return o.shaders[t]=s.createShader(e),t}function Xc(e){s.cullFace(e)}function Qc(e,t){for(var n,a,r=0;r<e;r++){if(n=i[t+r*4>>2],a=o.buffers[n],!a)continue;s.deleteBuffer(a),a.name=0,o.buffers[n]=null,n==s.currentPixelPackBufferBinding&&(s.currentPixelPackBufferBinding=0),n==s.currentPixelUnpackBufferBinding&&(s.currentPixelUnpackBufferBinding=0)}}function Zc(e,t){for(var n,r,a=0;a<e;++a){if(r=i[t+a*4>>2],n=o.framebuffers[r],!n)continue;s.deleteFramebuffer(n),n.name=0,o.framebuffers[r]=null}}function Jc(e){if(!e)return;var t=o.programs[e];if(!t){o.recordError(1281);return}s.deleteProgram(t),t.name=0,o.programs[e]=null}function el(e,t){for(var n,r,a=0;a<e;a++){if(r=i[t+a*4>>2],n=o.renderbuffers[r],!n)continue;s.deleteRenderbuffer(n),n.name=0,o.renderbuffers[r]=null}}function tl(e){if(!e)return;var t=o.shaders[e];if(!t){o.recordError(1281);return}s.deleteShader(t),o.shaders[e]=null}function nl(e,t){for(var n,r,a=0;a<e;a++){if(r=i[t+a*4>>2],n=o.textures[r],!n)continue;s.deleteTexture(n),n.name=0,o.textures[r]=null}}function sl(e,t){for(var a,n=0;n<e;n++)a=i[t+n*4>>2],s.deleteVertexArray(o.vaos[a]),o.vaos[a]=null}function ol(e){s.depthFunc(e)}function il(e){s.depthMask(!!e)}function al(e){s.disable(e)}function rl(e){s.disableVertexAttribArray(e)}function cl(e,t,n){s.drawArrays(e,t,n)}function ll(e,t,n,o){s.drawArraysInstanced(e,t,n,o)}function dl(e,t){for(var o=ae[e],n=0;n<e;n++)o[n]=i[t+n*4>>2];s.drawBuffers(o)}function ul(e,t,n,o,i){s.drawElementsInstanced(e,t,n,o,i)}function hl(e){s.enable(e)}function ml(e){s.enableVertexAttribArray(e)}function fl(){s.endTransformFeedback()}function pl(){s.finish()}function gl(e,t,n,i){s.framebufferRenderbuffer(e,t,n,o.renderbuffers[i])}function vl(e,t,n,i,a){s.framebufferTexture2D(e,t,n,o.textures[i],a)}function bl(e,t,n,i,a){s.framebufferTextureLayer(e,t,o.textures[n],i,a)}function jl(e){s.frontFace(e)}function yl(e,t){U(e,t,"createBuffer",o.buffers)}function _l(e,t){U(e,t,"createFramebuffer",o.framebuffers)}function wl(e,t){U(e,t,"createRenderbuffer",o.renderbuffers)}function Ol(e,t){U(e,t,"createTexture",o.textures)}function xl(e,t){U(e,t,"createVertexArray",o.vaos)}function Cl(e){s.generateMipmap(e)}function El(){var e=s.getError()||o.lastError;return o.lastError=0,e}function kl(e,t){we(e,t,2)}function Al(e,t){we(e,t,0)}function Sl(){o.recordError(1282)}function Ml(e,t,n,a){var c,r=s.getProgramInfoLog(o.programs[e]);r===null&&(r="(unknown error)"),c=t>0&&a?N(r,a,t):0,n&&(i[n>>2]=c)}function Fl(e,t,n){if(!n){o.recordError(1281);return}if(e>=o.counter){o.recordError(1281);return}if(e=o.programs[e],t==35716){var a,r=s.getProgramInfoLog(e);r===null&&(r="(unknown error)"),i[n>>2]=r.length+1}else if(t==35719){if(!e.maxUniformLength)for(a=0;a<s.getProgramParameter(e,35718);++a)e.maxUniformLength=Math.max(e.maxUniformLength,s.getActiveUniform(e,a).name.length+1);i[n>>2]=e.maxUniformLength}else if(t==35722){if(!e.maxAttributeLength)for(a=0;a<s.getProgramParameter(e,35721);++a)e.maxAttributeLength=Math.max(e.maxAttributeLength,s.getActiveAttrib(e,a).name.length+1);i[n>>2]=e.maxAttributeLength}else if(t==35381){if(!e.maxUniformBlockNameLength)for(a=0;a<s.getProgramParameter(e,35382);++a)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,s.getActiveUniformBlockName(e,a).length+1);i[n>>2]=e.maxUniformBlockNameLength}else i[n>>2]=s.getProgramParameter(e,t)}function Tl(e,t,n,a){var c,r=s.getShaderInfoLog(o.shaders[e]);r===null&&(r="(unknown error)"),c=t>0&&a?N(r,a,t):0,n&&(i[n>>2]=c)}function zl(e,t,n,a){var c,r=s.getShaderSource(o.shaders[e]);if(!r)return;c=t>0&&a?N(r,a,t):0,n&&(i[n>>2]=c)}function Dl(e,t,n){if(!n){o.recordError(1281);return}if(t==35716){var r,c,l,a=s.getShaderInfoLog(o.shaders[e]);a===null&&(a="(unknown error)"),c=a?a.length+1:0,i[n>>2]=c}else t==35720?(r=s.getShaderSource(o.shaders[e]),l=r?r.length+1:0,i[n>>2]=l):i[n>>2]=s.getShaderParameter(o.shaders[e],t)}function Nl(e){var n,i,a,r,c,l,t=o.stringCache[e];if(!t){switch(e){case 7939:a=s.getSupportedExtensions()||[],a=a.concat(a.map(function(e){return"GL_"+e})),t=se(a.join(" "));break;case 7936:case 7937:case 37445:case 37446:c=s.getParameter(e),c||o.recordError(1280),t=c&&se(c);break;case 7938:n=s.getParameter(7938),o.currentContext.version>=2?n="OpenGL ES 3.0 ("+n+")":n="OpenGL ES 2.0 ("+n+")",t=se(n);break;case 35724:r=s.getParameter(35724),l=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,i=r.match(l),i!==null&&(i[1].length==3&&(i[1]=i[1]+"0"),r="OpenGL ES GLSL ES "+i[1]+" ("+r+")"),t=se(r);break;default:o.recordError(1280)}o.stringCache[e]=t}return t}function Ll(e,t){if(o.currentContext.version<2)return o.recordError(1282),0;var n,i=o.stringiCache[e];if(i)return t<0||t>=i.length?(o.recordError(1281),0):i[t];switch(e){case 7939:return n=s.getSupportedExtensions()||[],n=n.concat(n.map(function(e){return"GL_"+e})),n=n.map(function(e){return se(e)}),i=o.stringiCache[e]=n,t<0||t>=i.length?(o.recordError(1281),0):i[t];default:return o.recordError(1280),0}}function Rl(e,t){return s.getUniformBlockIndex(o.programs[e],T(t))}function Pl(e,t){if(t=T(t),e=o.programs[e]){{rt(e);var i,r=e.uniformLocsById,n=0,c=t,a=it(t);if(a>0&&(n=Oe(t.slice(a+1))>>>0,c=t.slice(0,a)),i=e.uniformSizeAndIdsByName[c],i&&n<i[0]&&(n+=i[1],r[n]=r[n]||s.getUniformLocation(e,t)))return n}}else o.recordError(1281);return-1}function Hl(e,t,n){for(var a=ae[t],o=0;o<t;o++)a[o]=i[n+o*4>>2];s.invalidateFramebuffer(e,a)}function Il(e){e=o.programs[e],s.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function Bl(e,t){e==3317&&(o.unpackAlignment=t),s.pixelStorei(e,t)}function Vl(){o.recordError(1280)}function $l(){o.recordError(1280)}function Wl(e){s.readBuffer(e)}function Ul(e,t,n,i,a,r,c){if(o.currentContext.version>=2){if(s.currentPixelPackBufferBinding)s.readPixels(e,t,n,i,a,r,c);else{var l,d=te(r);s.readPixels(e,t,n,i,a,r,d,c>>Z(d))}return}if(l=be(r,a,n,i,c,a),!l){o.recordError(1280);return}s.readPixels(e,t,n,i,a,r,l)}function Kl(e,t,n,o){s.renderbufferStorage(e,t,n,o)}function ql(e,t,n,o,i){s.renderbufferStorageMultisample(e,t,n,o,i)}function Yl(e,t,n,o){s.scissor(e,t,n,o)}function Gl(e,t,n,i){var a=o.getSource(e,t,n,i);s.shaderSource(o.shaders[e],a)}function Xl(e,t,n,i,a,r,c,l,d){if(o.currentContext.version>=2){if(s.currentPixelUnpackBufferBinding)s.texImage2D(e,t,n,i,a,r,c,l,d);else if(d){var u=te(l);s.texImage2D(e,t,n,i,a,r,c,l,u,d>>Z(u))}else s.texImage2D(e,t,n,i,a,r,c,l,null);return}s.texImage2D(e,t,n,i,a,r,c,l,d?be(l,c,i,a,d,n):null)}function Ql(e,t,n,o,i,a,r,c,l,d){if(s.currentPixelUnpackBufferBinding)s.texImage3D(e,t,n,o,i,a,r,c,l,d);else if(d){var u=te(l);s.texImage3D(e,t,n,o,i,a,r,c,l,u,d>>Z(u))}else s.texImage3D(e,t,n,o,i,a,r,c,l,null)}function Zl(e,t,n){s.texParameterf(e,t,n)}function Jl(e,t,n){s.texParameteri(e,t,n)}function ed(e,t,n,o,i){s.texStorage2D(e,t,n,o,i)}function td(e,t,n,i,a,r,c,l,d){if(o.currentContext.version>=2){if(s.currentPixelUnpackBufferBinding)s.texSubImage2D(e,t,n,i,a,r,c,l,d);else if(d){var u,h=te(l);s.texSubImage2D(e,t,n,i,a,r,c,l,h,d>>Z(h))}else s.texSubImage2D(e,t,n,i,a,r,c,l,null);return}u=null,d&&(u=be(l,c,a,r,d,0)),s.texSubImage2D(e,t,n,i,a,r,c,l,u)}function nd(e,t,n,o,i,a,r,c,l,d,u){if(s.currentPixelUnpackBufferBinding)s.texSubImage3D(e,t,n,o,i,a,r,c,l,d,u);else if(u){var h=te(d);s.texSubImage3D(e,t,n,o,i,a,r,c,l,d,h,u>>Z(h))}else s.texSubImage3D(e,t,n,o,i,a,r,c,l,d,null)}function sd(e,t,n,a){e=o.programs[e];for(var c=[],r=0;r<t;r++)c.push(T(i[n+r*4>>2]));s.transformFeedbackVaryings(e,c,a)}function od(e,t){s.uniform1f(u(e),t)}function id(e,t){s.uniform1i(u(e),t)}function ad(e,t,n){if(o.currentContext.version>=2){t&&s.uniform1iv(u(e),i,n>>2,t);return}if(t<=288)for(var r=re[t-1],a=0;a<t;++a)r[a]=i[n+4*a>>2];else r=i.subarray(n>>2,n+t*4>>2);s.uniform1iv(u(e),r)}function rd(e,t){s.uniform1ui(u(e),t)}function cd(e,t,n){s.uniform2f(u(e),t,n)}function ld(e,t,n){if(o.currentContext.version>=2){t&&s.uniform2fv(u(e),l,n>>2,t*2);return}if(t<=144)for(var a=H[2*t-1],i=0;i<2*t;i+=2)a[i]=l[n+4*i>>2],a[i+1]=l[n+(4*i+4)>>2];else a=l.subarray(n>>2,n+t*8>>2);s.uniform2fv(u(e),a)}function dd(e,t,n){s.uniform2i(u(e),t,n)}function ud(e,t,n){if(o.currentContext.version>=2){t&&s.uniform2iv(u(e),i,n>>2,t*2);return}if(t<=144)for(var r=re[2*t-1],a=0;a<2*t;a+=2)r[a]=i[n+4*a>>2],r[a+1]=i[n+(4*a+4)>>2];else r=i.subarray(n>>2,n+t*8>>2);s.uniform2iv(u(e),r)}function hd(e,t,n,o){s.uniform3f(u(e),t,n,o)}function md(e,t,n){if(o.currentContext.version>=2){t&&s.uniform3fv(u(e),l,n>>2,t*3);return}if(t<=96)for(var a=H[3*t-1],i=0;i<3*t;i+=3)a[i]=l[n+4*i>>2],a[i+1]=l[n+(4*i+4)>>2],a[i+2]=l[n+(4*i+8)>>2];else a=l.subarray(n>>2,n+t*12>>2);s.uniform3fv(u(e),a)}function fd(e,t,n,o){s.uniform3i(u(e),t,n,o)}function pd(e,t,n,o,i){s.uniform4f(u(e),t,n,o,i)}function gd(e,t,n){if(o.currentContext.version>=2){t&&s.uniform4fv(u(e),l,n>>2,t*4);return}if(t<=72){var i,r,a=H[4*t-1],c=l;n>>=2;for(i=0;i<4*t;i+=4)r=n+i,a[i]=c[r],a[i+1]=c[r+1],a[i+2]=c[r+2],a[i+3]=c[r+3]}else a=l.subarray(n>>2,n+t*16>>2);s.uniform4fv(u(e),a)}function vd(e,t,n,o,i){s.uniform4i(u(e),t,n,o,i)}function bd(e,t,n){e=o.programs[e],s.uniformBlockBinding(e,t,n)}function jd(e,t,n,i){if(o.currentContext.version>=2){t&&s.uniformMatrix2fv(u(e),!!n,l,i>>2,t*4);return}if(t<=72)for(var r=H[4*t-1],a=0;a<4*t;a+=4)r[a]=l[i+4*a>>2],r[a+1]=l[i+(4*a+4)>>2],r[a+2]=l[i+(4*a+8)>>2],r[a+3]=l[i+(4*a+12)>>2];else r=l.subarray(i>>2,i+t*16>>2);s.uniformMatrix2fv(u(e),!!n,r)}function yd(e,t,n,i){if(o.currentContext.version>=2){t&&s.uniformMatrix3fv(u(e),!!n,l,i>>2,t*9);return}if(t<=32)for(var r=H[9*t-1],a=0;a<9*t;a+=9)r[a]=l[i+4*a>>2],r[a+1]=l[i+(4*a+4)>>2],r[a+2]=l[i+(4*a+8)>>2],r[a+3]=l[i+(4*a+12)>>2],r[a+4]=l[i+(4*a+16)>>2],r[a+5]=l[i+(4*a+20)>>2],r[a+6]=l[i+(4*a+24)>>2],r[a+7]=l[i+(4*a+28)>>2],r[a+8]=l[i+(4*a+32)>>2];else r=l.subarray(i>>2,i+t*36>>2);s.uniformMatrix3fv(u(e),!!n,r)}function _d(e,t,n,i){if(o.currentContext.version>=2){t&&s.uniformMatrix4fv(u(e),!!n,l,i>>2,t*16);return}if(t<=18){var a,c,r=H[16*t-1],d=l;i>>=2;for(a=0;a<16*t;a+=16)c=i+a,r[a]=d[c],r[a+1]=d[c+1],r[a+2]=d[c+2],r[a+3]=d[c+3],r[a+4]=d[c+4],r[a+5]=d[c+5],r[a+6]=d[c+6],r[a+7]=d[c+7],r[a+8]=d[c+8],r[a+9]=d[c+9],r[a+10]=d[c+10],r[a+11]=d[c+11],r[a+12]=d[c+12],r[a+13]=d[c+13],r[a+14]=d[c+14],r[a+15]=d[c+15]}else r=l.subarray(i>>2,i+t*64>>2);s.uniformMatrix4fv(u(e),!!n,r)}function wd(e){e=o.programs[e],s.useProgram(e),s.currentProgram=e}function Od(e,t,n,o,i){s.vertexAttrib4f(e,t,n,o,i)}function xd(e,t){s.vertexAttrib4f(e,l[t>>2],l[t+4>>2],l[t+8>>2],l[t+12>>2])}function Cd(e,t){s.vertexAttribDivisor(e,t)}function Ed(e,t,n,o,i){s.vertexAttribI4ui(e,t,n,o,i)}function kd(e,t,n,o,i){s.vertexAttribIPointer(e,t,n,o,i)}function Ad(e,t,n,o,i,a){s.vertexAttribPointer(e,t,n,!!o,i,a)}function Sd(e,t,n,o){s.viewport(e,t,n,o)}a={get_func:function(e){return et.get(e)},error:function(){W.apply(null,Array.from(arguments))},print:function(){G.apply(null,Array.from(arguments))},malloc:function(e){return ve(e)},free:function(e){$t(e)},getHeapValue:function(e,t){return Q4(e,t)},setHeapValue:function(e,t,n){X4(e,t,n)},heapSub:function(e,t,n){const s=e.BYTES_PER_ELEMENT;return e.subarray(t/s,t/s+n)},heapSlice:function(e,t,n){const s=e.BYTES_PER_ELEMENT;return e.slice(t/s,t/s+n)},heapCopy:function(e,t,n){const s=t.BYTES_PER_ELEMENT;return e.set(t,n/s)},parseString:function(e){return T(e)},parseStringArray:function(e,t){const n=[],s=a.heapSub(i,e,t);return s.forEach(function(e){n.push(a.parseString(e))}),n},strlen:function(e){return de(e)},allocString:function(e){const t=a.strlen(e)+1,n=a.malloc(t);return N(e,n,t),n},allocStringArray:function(e){const t=e.length,n=a.malloc(t*4);for(let s=0;s<t;s++)i[(n>>2)+s]=a.allocString(e[s]);return n},freeStringArray:function(e,t){for(let n=0;n<t;n++)a.free(i[(e>>2)+n]);a.free(e)},stringToHeap:function(e,t,n){return xe(e,C,t,n)}},m={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(e){m.canvas_resize_policy=e.canvasResizePolicy,m.canvas=e.canvas,m.locale=e.locale||m.locale,m.virtual_keyboard=e.virtualKeyboard,m.persistent_drops=!!e.persistentDrops,m.on_execute=e.onExecute,m.on_exit=e.onExit,e.focusCanvas&&m.canvas.focus()},locate_file:function(e){return r.locateFile(e)},clear:function(){m.canvas=null,m.locale="en",m.canvas_resize_policy=2,m.virtual_keyboard=!1,m.persistent_drops=!1,m.on_execute=null,m.on_exit=null}},Ke={},M={_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return M._idbfs?1:0},init:function(e){if(M._idbfs=!1,!Array.isArray(e))return Promise.reject(new Error("Persistent paths must be an array"));if(!e.length)return Promise.resolve();M._mount_points=e.slice();function t(e){try{n.stat(e)}catch(t){if(t.errno!==Ke.ENOENT)throw t;n.mkdirTree(e)}}return M._mount_points.forEach(function(e){t(e),n.mount(x,{},e)}),new Promise(function(e){n.syncfs(!0,function(t){t?(M._mount_points=[],M._idbfs=!1,a.print(`IndexedDB not available: ${t.message}`)):M._idbfs=!0,e(t)})})},deinit:function(){M._mount_points.forEach(function(e){try{n.unmount(e)}catch(e){a.print("Already unmounted",e)}M._idbfs&&x.dbs[e]&&(x.dbs[e].close(),delete x.dbs[e])}),M._mount_points=[],M._idbfs=!1,M._syncing=!1},sync:function(){return M._syncing?(a.error("Already syncing!"),Promise.resolve()):(M._syncing=!0,new Promise(function(e){n.syncfs(!1,function(t){t&&a.error(`Failed to save IDB file system: ${t.message}`),M._syncing=!1,e(t)})}))},copy_to_fs:function(e,t){const o=e.lastIndexOf("/");let s="/";o>0&&(s=e.slice(0,o));try{n.stat(s)}catch(e){if(e.errno!==Ke.ENOENT)throw e;n.mkdirTree(s)}n.writeFile(e,new Uint8Array(t))}},L={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(e){L._async_cbs.push(e)},cleanup:function(e){const t=m.on_exit;M.deinit(),m.clear(),t&&t(e)},finish_async:function(e){L._fs_sync_promise.then(function(){const t=[];return L._async_cbs.forEach(function(e){t.push(new Promise(e))}),Promise.all(t)}).then(function(){return M.sync()}).then(function(){setTimeout(function(){e()},0)})}},g={ctx:null,input:null,driver:null,interval:0,init:function(e,t,n,s){const i={};e&&(i.sampleRate=e);const o=new(window.AudioContext||window.webkitAudioContext)(i);return g.ctx=o,o.onstatechange=function(){let e=0;switch(o.state){case"suspended":e=0;break;case"running":e=1;break;case"closed":e=2;break}n(e)},o.onstatechange(),g.interval=setInterval(function(){let e=0;o.baseLatency&&(e+=g.ctx.baseLatency),o.outputLatency&&(e+=g.ctx.outputLatency),s(e)},1e3),L.atexit(g.close_async),o.destination.channelCount},create_input:function(e){if(g.input)return 0;function t(t){try{g.input=g.ctx.createMediaStreamSource(t),e(g.input)}catch(e){a.error("Failed creaating input.",e)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(t,function(e){a.error("Error getting user media.",e)});else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return a.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},t,function(e){a.print(e)})}return 0},close_async:function(e){const n=g.ctx;if(g.ctx=null,!n){e();return}g.interval&&(clearInterval(g.interval),g.interval=0),g.input&&(g.input.disconnect(),g.input=null);let s=Promise.resolve();g.driver&&(s=g.driver.close()),s.then(function(){return n.close()}).then(function(){n.onstatechange=null,e()}).catch(function(t){n.onstatechange=null,a.error("Error closing AudioContext",t),e()})}};function Ld(){return g.create_input(function(e){e.connect(g.driver.get_node())})}function Rd(){if(g.input){const e=g.input.mediaStream.getTracks();for(let t=0;t<e.length;t++)e[t].stop();g.input.disconnect(),g.input=null}}function Pd(){return g.ctx&&g.ctx.createScriptProcessor?1:0}function Hd(){return g.ctx&&g.ctx.audioWorklet?1:0}function Id(e,t,n,s){const o=a.get_func(n),i=a.get_func(s),r=a.getHeapValue(e,"i32"),c=g.init(r,t,o,i);return a.setHeapValue(e,g.ctx.sampleRate,"i32"),c}function Bd(){return window.AudioContext||window.webkitAudioContext?1:0}function Vd(){g.ctx&&g.ctx.state!=="running"&&g.ctx.resume()}X={script:null,create:function(e,t){return X.script=g.ctx.createScriptProcessor(e,2,t),g.driver=X,X.script.bufferSize},start:function(e,t,n,s,o){X.script.onaudioprocess=function(i){const u=a.heapSub(l,e,t),r=i.inputBuffer;if(g.input){const e=r.getChannelData(0).length;for(let t=0;t<2;t++){const n=r.getChannelData(t);for(let s=0;s<e;s++)u[s*2+t]=n[s]}}o();const h=a.heapSub(l,n,s),c=i.outputBuffer,d=c.numberOfChannels;for(let e=0;e<d;e++){const t=c.getChannelData(e);for(let n=0;n<t.length;n++)t[n]=h[n*d+e]}},X.script.connect(g.ctx.destination)},get_node:function(){return X.script},close:function(){return new Promise(function(e){X.script.disconnect(),X.script.onaudioprocess=null,X.script=null,e()})}};function Wd(e,t){const n=a.getHeapValue(e,"i32");try{const s=X.create(n,t);a.setHeapValue(e,s,"i32")}catch(e){return a.error("Error starting AudioDriverScriptProcessor",e),1}return 0}function Ud(e,t,n,s,o){const i=a.get_func(o);X.start(e,t,n,s,i)}F={promise:null,worklet:null,ring_buffer:null,create:function(e){const t=m.locate_file("godot.audio.worklet.js");F.promise=g.ctx.audioWorklet.addModule(t).then(function(){return F.worklet=new AudioWorkletNode(g.ctx,"godot-processor",{outputChannelCount:[e]}),Promise.resolve()}),g.driver=F},start:function(e,t,n){F.promise.then(function(){const s=F.worklet;s.connect(g.ctx.destination),s.port.postMessage({cmd:"start",data:[n,e,t]}),s.port.onmessage=function(e){a.error(e.data)}})},start_no_threads:function(e,t,n,s,o,i){function r(){let c=0,d=0,r=0;const u=new Float32Array(t);function h(s){if(r===0)return;const o=a.heapSub(l,e,t),i=o.length,d=r;if(n(c,r),c+r>=i){const e=i-c;u.set(o.subarray(c,i)),r-=e,c=0}r>0&&u.set(o.subarray(c,c+r),d-r),s.postMessage({cmd:"chunk",data:u.subarray(0,d)}),c+=r,r=0}this.receive=function(e){const r=a.heapSub(l,s,o),c=d;let t=e.length,n=0;d+t>=o&&(n=o-d,r.set(e.subarray(0,n),d),t-=n,d=0),t&&r.set(e.subarray(n,t),d),i(c,e.length),d+=t},this.consumed=function(e,t){r+=e,h(t)}}F.ring_buffer=new r,F.promise.then(function(){const n=F.worklet,s=a.heapSlice(l,e,t);n.connect(g.ctx.destination),n.port.postMessage({cmd:"start_nothreads",data:[s,o]}),n.port.onmessage=function(e){if(!F.worklet)return;if(e.data.cmd==="read"){const t=e.data.data;F.ring_buffer.consumed(t,F.worklet.port)}else if(e.data.cmd==="input"){const t=e.data.data;if(t.length>o){a.error("Input chunk is too big");return}F.ring_buffer.receive(t)}else a.error(e.data)}})},get_node:function(){return F.worklet},close:function(){return new Promise(function(e){if(F.promise===null)return;F.promise.then(function(){F.worklet.port.postMessage({cmd:"stop",data:null}),F.worklet.disconnect(),F.worklet=null,F.promise=null,e()}).catch(function(){})})}};function qd(e){try{F.create(e)}catch(e){return a.error("Error starting AudioDriverWorklet",e),1}return 0}function Yd(e,t,n,s,o,i){const r=a.get_func(n),c=a.get_func(i);F.start_no_threads(e,t,r,s,o,c)}function Gd(e,t){a.stringToHeap(`#${m.canvas.id}`,e,t)}function Xd(e,t){a.stringToHeap(m.locale,e,t)}E={shape:"default",visible:!0,cursors:{},set_style:function(e){m.canvas.style.cursor=e},set_shape:function(e){E.shape=e;let t=e;if(e in E.cursors){const n=E.cursors[e];t=`url("${n.url}") ${n.x} ${n.y}, default`}E.visible&&E.set_style(t)},clear:function(){E.set_style(""),E.shape="default",E.visible=!0,Object.keys(E.cursors).forEach(function(e){URL.revokeObjectURL(E.cursors[e]),delete E.cursors[e]})},lockPointer:function(){const e=m.canvas;e.requestPointerLock&&e.requestPointerLock()},releasePointer:function(){document.exitPointerLock&&document.exitPointerLock()},isPointerLocked:function(){return document.pointerLockElement===m.canvas}},_={handlers:[],has:function(e,t,n,s){return _.handlers.findIndex(function(o){return o.target===e&&o.event===t&&o.method===n&&o.capture===s})!==-1},add:function(e,t,n,s){if(_.has(e,t,n,s))return;function o(e,t,n,s){this.target=e,this.event=t,this.method=n,this.capture=s}_.handlers.push(new o(e,t,n,s)),e.addEventListener(t,n,s)},clear:function(){_.handlers.forEach(function(e){e.target.removeEventListener(e.event,e.method,e.capture)}),_.handlers.length=0}};function Jd(){return o.currentContext?o.currentContext.handle:0}function It(){return Jd()}A={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return A.hidpi?window.devicePixelRatio||1:1},isFullscreen:function(){const e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return e?e===m.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!A.hasFullscreen())return 1;const e=m.canvas;try{const t=(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.mozRequestFullscreen||e.webkitRequestFullscreen).call(e);t&&t.catch(function(){})}catch{return 1}return 0},exitFullscreen:function(){if(!A.isFullscreen())return 0;try{const e=document.exitFullscreen();e&&e.catch(function(){})}catch{return 1}return 0},_updateGL:function(){const t=It(),e=o.getContext(t);e&&o.resizeOffscreenFramebuffer(e)},updateSize:function(){const a=A.isFullscreen(),r=m.canvas_resize_policy===2,c=m.canvas_resize_policy===0,l=A.desired_size[0],d=A.desired_size[1],e=m.canvas;let t=l,n=d;if(c)return e.width!==t||e.height!==n?(A.desired_size=[e.width,e.height],A._updateGL(),1):0;const s=A.getPixelRatio();(a||r)&&(t=window.innerWidth*s,n=window.innerHeight*s);const o=`${t/s}px`,i=`${n/s}px`;return e.style.width!==o||e.style.height!==i||e.width!==t||e.height!==n?(e.width=t,e.height=n,e.style.width=o,e.style.height=i,A._updateGL(),1):0}},w={textinput:null,textarea:null,available:function(){return m.virtual_keyboard&&"ontouchstart"in window},init:function(e){function t(t){const n=document.createElement(t);return n.style.display="none",n.style.position="absolute",n.style.zIndex="-1",n.style.background="transparent",n.style.padding="0px",n.style.margin="0px",n.style.overflow="hidden",n.style.width="0px",n.style.height="0px",n.style.border="0px",n.style.outline="none",n.readonly=!0,n.disabled=!0,_.add(n,"input",function(){const s=a.allocString(n.value);e(s,n.selectionEnd),a.free(s)},!1),_.add(n,"blur",function(){n.style.display="none",n.readonly=!0,n.disabled=!0},!1),m.canvas.insertAdjacentElement("beforebegin",n),n}w.textinput=t("input"),w.textarea=t("textarea"),w.updateSize()},show:function(e,t,n,s){if(!w.textinput||!w.textarea)return;(w.textinput.style.display!==""||w.textarea.style.display!=="")&&w.hide(),w.updateSize();const o=t?w.textarea:w.textinput;o.readonly=!1,o.disabled=!1,o.value=e,o.style.display="block",o.focus(),o.setSelectionRange(n,s)},hide:function(){if(!w.textinput||!w.textarea)return;[w.textinput,w.textarea].forEach(function(e){e.blur(),e.style.display="none",e.value=""})},updateSize:function(){if(!w.textinput||!w.textarea)return;const e=m.canvas.getBoundingClientRect();function t(t){t.style.left=`${e.left}px`,t.style.top=`${e.top}px`,t.style.width=`${e.width}px`,t.style.height=`${e.height}px`}t(w.textinput),t(w.textarea)},clear:function(){w.textinput&&(w.textinput.remove(),w.textinput=null),w.textarea&&(w.textarea.remove(),w.textarea=null)}},Ne={window_icon:"",findDPI:function(){function t(e){return window.matchMedia(`(max-resolution: ${e}dpi)`).matches}function e(t,n,s){const o=parseInt((n-t)/2+t,10);return n-t<=1?s(n)?n:t:s(o)?e(t,o,s):e(o,n,s)}try{const n=e(0,800,t);return n>=96?n:96}catch{return 96}}};function ou(e){window.alert(a.parseString(e))}function iu(){m.canvas.focus()}function au(){return document.activeElement===m.canvas}function ru(e){const t=a.get_func(e);try{navigator.clipboard.readText().then(function(e){const n=a.allocString(e);t(n),a.free(n)}).catch(function(){})}catch{}}function cu(e){const t=a.parseString(e);return!navigator.clipboard||!navigator.clipboard.writeText?1:(navigator.clipboard.writeText(t).catch(function(e){a.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",e)}),0)}function lu(){return!E.visible}function du(){return E.isPointerLocked()?1:0}function uu(e){e?E.lockPointer():E.releasePointer()}function hu(e,t,n,s,o){const i=a.parseString(e),r=E.cursors[i];if(n>0){const e=new Blob([a.heapSlice(y,t,n)],{type:"image/png"}),r=URL.createObjectURL(e);E.cursors[i]={url:r,x:s,y:o}}else delete E.cursors[i];i===E.shape&&E.set_shape(E.shape),r&&URL.revokeObjectURL(r.url)}function mu(e){E.set_shape(a.parseString(e))}function fu(e){const t=e!==0;if(t===E.visible)return;E.visible=t,t?E.set_shape(E.shape):E.set_style("none")}function pu(e,t){A.desired_size=[e,t],A.updateSize()}function gu(e){const n=m.canvas,s=a.get_func(e);function t(e){e.target===n&&s(A.isFullscreen())}_.add(document,"fullscreenchange",t,!1),_.add(document,"mozfullscreenchange",t,!1),_.add(document,"webkitfullscreenchange",t,!1)}function vu(){return A.exitFullscreen()}function bu(){return A.requestFullscreen()}function ju(e,t,n,s){const a=It(),i=o.getContext(a);i&&i.GLctx.getBufferSubData(e,t,y,s,n)}function yu(e){if(e!==1&&e!==2)return!1;try{return!!document.createElement("canvas").getContext(e===2?"webgl2":"webgl")}catch{}return!1}function _u(){const e=["Windows","Win64","Win32","WinCE"],t=navigator.platform||"";return e.indexOf(t)!==-1?1:0}function wu(e,t,n,s,o){const i=m.canvas,r=a.get_func(e),c=[t,n,s,o];["mouseover","mouseleave","focus","blur"].forEach(function(e,t){_.add(i,e,function(){r(c[t])},!0)})}function Ou(){return A.getPixelRatio()}function xu(){return Ne.findDPI()}function Cu(e,t){const n=A.getPixelRatio();a.setHeapValue(e,window.screen.width*n,"i32"),a.setHeapValue(t,window.screen.height*n,"i32")}function Eu(e,t,n,s){const o=m.canvas;switch(_.add(o,"contextmenu",function(e){e.preventDefault()},!1),_.add(o,"webglcontextlost",function(e){alert("WebGL context lost, please reload the page"),e.preventDefault()},!1),A.hidpi=!!s,m.canvas_resize_policy){case 0:A.desired_size=[o.width,o.height];break;case 1:A.desired_size=[e,t];break;default:o.style.position="absolute",o.style.top=0,o.style.left=0;break}A.updateSize(),n&&A.requestFullscreen()}function ku(){const e=A.updateSize();return e&&w.updateSize(),e}function Au(){return"ontouchstart"in window}function Su(){return w.available()}function Mu(e){const t=a.get_func(e);w.available()&&w.init(t)}function Fu(){w.hide()}function Tu(e,t,n,s){const i=a.parseString(e),o=n>0?n:0,r=s>0?s:o;w.show(i,t,o,r)}function zu(e){const t=a.get_func(e);_.add(window,"blur",function(){t()},!1)}function Du(e,t){let n=document.getElementById("-gd-engine-icon");n===null&&(n=document.createElement("link"),n.rel="icon",n.id="-gd-engine-icon",document.head.appendChild(n));const s=Ne.window_icon,o=new Blob([a.heapSlice(y,e,t)],{type:"image/png"});Ne.window_icon=URL.createObjectURL(o),n.href=Ne.window_icon,s&&URL.revokeObjectURL(s)}function Nu(e,t){a.setHeapValue(e,m.canvas.width,"i32"),a.setHeapValue(t,m.canvas.height,"i32")}function Lu(e){document.title=a.parseString(e)}function Ru(e,t,n,s,o,i){const c=a.parseString(e);let r=null;try{if(t){const e=eval;r=e(c)}else r=eval(c)}catch(e){a.error(e)}switch(typeof r){case"boolean":return a.setHeapValue(n,r,"i32"),1;case"number":return a.setHeapValue(n,r,"double"),3;case"string":return a.setHeapValue(n,a.allocString(r),"*"),4;case"object":if(r===null)break;if(ArrayBuffer.isView(r)&&!(r instanceof Uint8Array)?r=new Uint8Array(r.buffer):r instanceof ArrayBuffer&&(r=new Uint8Array(r)),r instanceof Uint8Array){const e=a.get_func(i),t=e(s,o,r.length);return y.set(r,t),20}break}return 0}h={_last_id:0,_references:{},get:function(e){return h._references[e]},add:function(e){const t=++h._last_id;return h._references[t]=e,t},remove:function(e){delete h._references[e]}},ue={onread:function(e,t){const n=h.get(e);if(!n)return;t.value&&n.chunks.push(t.value),n.reading=!1,n.done=t.done},onresponse:function(e,t){const n=h.get(e);if(!n)return;let s=!1;t.headers.forEach(function(e,t){const n=e.toLowerCase().trim(),o=t.toLowerCase().trim();o==="transfer-encoding"&&n==="chunked"&&(s=!0)}),n.status=t.status,n.response=t,n.reader=t.body.getReader(),n.chunked=s},onerror:function(e,t){a.error(t);const n=h.get(e);if(!n)return;n.error=t},create:function(e,t,n,s){const o={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[],bodySize:-1},i=h.add(o),a={method:e,headers:n,body:s};return o.request=fetch(t,a),o.request.then(ue.onresponse.bind(null,i)).catch(ue.onerror.bind(null,i)),i},free:function(e){const t=h.get(e);if(!t)return;if(h.remove(e),!t.request)return;t.request.then(function(e){e.abort()}).catch(function(){})},read:function(e){const t=h.get(e);if(!t)return;if(t.reader&&!t.reading){if(t.done){t.reader=null;return}t.reading=!0,t.reader.read().then(ue.onread.bind(null,e)).catch(ue.onerror.bind(null,e))}}};function Iu(e){const t=h.get(e);return!t||!t.response?-1:t.bodySize}function Bu(e,t,n,s,o,i){const r=a.parseString(e),c=a.parseString(t),l=a.parseStringArray(n,s),d=i?a.heapSlice(C,o,i):null;return ue.create(r,c,l.map(function(e){const t=e.indexOf(":");return t<=0?[]:[e.slice(0,t).trim(),e.slice(t+1).trim()]}).filter(function(e){return e.length===2}),d)}function Vu(e){ue.free(e)}function $u(e){const t=h.get(e);return!t||!t.response?0:t.status}function Wu(e){const t=h.get(e);return!t||!t.response?-1:t.chunked?1:0}function Uu(e,t,n){const o=h.get(e);if(!o||!o.response)return 0;let s=n;const i=o.chunks;for(;s&&i.length;){const e=o.chunks[0];e.length>s?(a.heapCopy(C,e.slice(0,s),t),i[0]=e.slice(s),s=0):(a.heapCopy(C,e,t),s-=e.length,i.pop())}return i.length||ue.read(e),n-s}function Ku(e,t,n){const o=h.get(e);if(!o||!o.response)return 1;const r=a.get_func(t),s=[];o.response.headers.forEach(function(e,t){s.push(`${t}:${e}`)});const i=a.allocStringArray(s);return r(s.length,i,n),a.freeStringArray(i,s.length),0}function qu(e){const t=h.get(e);return t?t.error?-1:t.response?t.reader?1:t.done?2:-1:0:-1}q={samples:[],get_pads:function(){try{const e=navigator.getGamepads();return e||[]}catch{return[]}},get_samples:function(){return q.samples},get_sample:function(e){const t=q.samples;return e<t.length?t[e]:null},sample:function(){const t=q.get_pads(),e=[];for(let s=0;s<t.length;s++){const n=t[s];if(!n){e.push(null);continue}const o={standard:n.mapping==="standard",buttons:[],axes:[],connected:n.connected};for(let e=0;e<n.buttons.length;e++)o.buttons.push(n.buttons[e].value);for(let e=0;e<n.axes.length;e++)o.axes.push(n.axes[e]);e.push(o)}q.samples=e},init:function(e){q.samples=[];function n(t){const o=q.get_guid(t),n=a.allocString(t.id),s=a.allocString(o);e(t.index,1,n,s),a.free(n),a.free(s)}const t=q.get_pads();for(let e=0;e<t.length;e++)t[e]&&n(t[e]);_.add(window,"gamepadconnected",function(e){e.gamepad&&n(e.gamepad)},!1),_.add(window,"gamepaddisconnected",function(t){t.gamepad&&e(t.gamepad.index,0)},!1)},get_guid:function(e){if(e.mapping)return e.mapping;const n=navigator.userAgent;let t="Unknown";n.indexOf("Android")>=0?t="Android":n.indexOf("Linux")>=0?t="Linux":n.indexOf("iPhone")>=0?t="iOS":n.indexOf("Macintosh")>=0?t="MacOSX":n.indexOf("Windows")>=0&&(t="Windows");const s=e.id,a=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,r=/^([0-9a-f]+)-([0-9a-f]+)-/i;let o="",i="";if(a.test(s)){const e=a.exec(s);o=e[1].padStart(4,"0"),i=e[2].padStart(4,"0")}else if(r.test(s)){const e=r.exec(s);o=e[1].padStart(4,"0"),i=e[2].padStart(4,"0")}return!o||!i?`${t}Unknown`:t+o+i}},z={promises:[],pending_files:[],add_entry:function(e){e.isDirectory?z.add_dir(e):e.isFile?z.add_file(e):a.error("Unrecognized entry...",e)},add_dir:function(e){z.promises.push(new Promise(function(t){const s=e.createReader();s.readEntries(function(e){for(let t=0;t<e.length;t++)z.add_entry(e[t]);t()})}))},add_file:function(e){z.promises.push(new Promise(function(t,n){e.file(function(e){const s=new FileReader;s.onload=function(){const n={path:e.relativePath||e.webkitRelativePath,name:e.name,type:e.type,size:e.size,data:s.result};n.path||(n.path=n.name),z.pending_files.push(n),t()},s.onerror=function(){a.print("Error reading file"),n()},s.readAsArrayBuffer(e)},function(){a.print("Error!"),n()})}))},process:function(e,t){if(z.promises.length===0){e();return}z.promises.pop().then(function(){setTimeout(function(){z.process(e,t)},0)})},_process_event:function(e,t){if(e.preventDefault(),e.dataTransfer.items)for(let s=0;s<e.dataTransfer.items.length;s++){const t=e.dataTransfer.items[s];let n=null;"getAsEntry"in t?n=t.getAsEntry():"webkitGetAsEntry"in t&&(n=t.webkitGetAsEntry()),n&&z.add_entry(n)}else a.error("File upload not supported");new Promise(z.process).then(function(){const e=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,s=[],o=[];n.mkdir(e.slice(0,-1)),z.pending_files.forEach(t=>{const n=t.path;M.copy_to_fs(e+n,t.data);let i=n.indexOf("/");if(i===-1)s.push(e+n);else{const t=n.substr(0,i);i=t.indexOf("/"),i<0&&s.indexOf(e+t)===-1&&s.push(e+t)}o.push(e+n)}),z.promises=[],z.pending_files=[],t(s),m.persistent_drops?L.atexit(function(t){z.remove_drop(o,e),t()}):z.remove_drop(o,e)})},remove_drop:function(e,t){const s=[t.substr(0,t.length-1)];e.forEach(function(e){n.unlink(e);let o=e.replace(t,""),i=o.lastIndexOf("/");for(;i>0;)o=o.substr(0,i),s.indexOf(t+o)===-1&&s.push(t+o),i=o.lastIndexOf("/")}),s.sort(function(e,t){const n=(e.match(/\//g)||[]).length,s=(t.match(/\//g)||[]).length;return n>s?-1:n<s?1:0}).forEach(function(e){n.rmdir(e)})},handler:function(e){return function(t){z._process_event(t,e)}}},fe={getModifiers:function(e){return e.shiftKey+0+(e.altKey+0<<1)+(e.ctrlKey+0<<2)+(e.metaKey+0<<3)},computePosition:function(e,t){const n=m.canvas,s=n.width/t.width,o=n.height/t.height,i=(e.clientX-t.x)*s,a=(e.clientY-t.y)*o;return[i,a]}};function Qu(e){const n=a.get_func(e),s=function(e){const t=e||[];if(!t.length)return;const s=t.length,o=a.allocStringArray(t);n(o,s),a.freeStringArray(o,s)},t=m.canvas;_.add(t,"dragover",function(e){e.preventDefault()},!1),_.add(t,"drop",z.handler(s))}function Zu(e){const t=a.get_func(e);q.init(t)}function Ju(){return q.sample(),0}function e1(){return q.get_samples().length}function t1(e,t,n,s,o,i){const r=q.get_sample(e);if(!r||!r.connected)return 1;const c=r.buttons,d=c.length<16?c.length:16;for(let e=0;e<d;e++)a.setHeapValue(t+(e<<2),c[e],"float");a.setHeapValue(n,d,"i32");const l=r.axes,u=l.length<10?l.length:10;for(let e=0;e<u;e++)a.setHeapValue(s+(e<<2),l[e],"float");a.setHeapValue(o,u,"i32");const h=r.standard?1:0;return a.setHeapValue(i,h,"i32"),0}function n1(e,t,n){const o=a.get_func(e);function s(e,s){const i=fe.getModifiers(s);a.stringToHeap(s.code,t,32),a.stringToHeap(s.key,n,32),o(e,s.repeat,i),s.preventDefault()}_.add(m.canvas,"keydown",s.bind(null,1),!1),_.add(m.canvas,"keyup",s.bind(null,0),!1)}function s1(e){const s=a.get_func(e),t=m.canvas;function n(e,n){const i=t.getBoundingClientRect(),o=fe.computePosition(n,i),a=fe.getModifiers(n);e&&m.canvas.focus(),s(e,n.button,o[0],o[1],a)&&n.preventDefault()}_.add(t,"mousedown",n.bind(null,1),!1),_.add(window,"mouseup",n.bind(null,0),!1)}function o1(e){const n=a.get_func(e),t=m.canvas;function s(e){const s=t.getBoundingClientRect(),o=fe.computePosition(e,s),i=t.width/s.width,a=t.height/s.height,r=e.movementX*i,c=e.movementY*a,l=fe.getModifiers(e);n(o[0],o[1],r,c,l)}_.add(window,"mousemove",s,!1)}function i1(e){const t=a.get_func(e);function n(e){t(e.deltaX||0,e.deltaY||0)&&e.preventDefault()}_.add(m.canvas,"wheel",n,!1)}function a1(e){const t=a.get_func(e);_.add(window,"paste",function(e){const s=e.clipboardData.getData("text"),n=a.allocString(s);t(n),a.free(n)},!1)}function r1(e,t,n){const i=a.get_func(e),s=m.canvas;function o(e,o){e===0&&m.canvas.focus();const c=s.getBoundingClientRect(),r=o.changedTouches;for(let e=0;e<r.length;e++){const s=r[e],o=fe.computePosition(s,c);a.setHeapValue(n+e*2*8,o[0],"double"),a.setHeapValue(n+(e*2+1)*8,o[1],"double"),a.setHeapValue(t+e*4,s.identifier,"i32")}i(e,r.length),o.cancelable&&o.preventDefault()}_.add(s,"touchstart",o.bind(null,0),!1),_.add(s,"touchend",o.bind(null,1),!1),_.add(s,"touchcancel",o.bind(null,1),!1),_.add(s,"touchmove",o.bind(null,2),!1)}function c1(e){typeof navigator.vibrate!="function"?a.print("This browser does not support vibration."):navigator.vibrate(e)}function l1(e,t,n,s){const r=a.heapSlice(C,e,t),c=a.parseString(n),l=a.parseString(s),d=new Blob([r],{type:l}),i=window.URL.createObjectURL(d),o=document.createElement("a");o.href=i,o.download=c,o.style.display="none",document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i)}function d1(e){const t=a.parseString(e),n=JSON.parse(t);return m.on_execute?(m.on_execute(n),0):1}function u1(e){const t=a.get_func(e);L.finish_async(t)}function h1(){return M.is_persistent()}function m1(e){const t=a.get_func(e);L._fs_sync_promise=M.sync(),L._fs_sync_promise.then(function(){t()})}function f1(){return navigator.hardwareConcurrency||1}function p1(e){L.request_quit=a.get_func(e)}function g1(e){window.open(a.parseString(e),"_blank")}Se={hasUpdate:!1,updateState:function(e,t){if(!t)return;if(!t.active)return;t.waiting&&(Se.hasUpdate=!0,e()),_.add(t,"updatefound",function(){const n=t.installing;_.add(n,"statechange",function(){n.state==="installed"&&(Se.hasUpdate=!0,e())})})}};function b1(e){if("serviceWorker"in navigator){const t=a.get_func(e);navigator.serviceWorker.getRegistration().then(Se.updateState.bind(null,t))}}function j1(){return"serviceWorker"in navigator&&Se.hasUpdate?(navigator.serviceWorker.getRegistration().then(function(e){if(!e||!e.waiting)return;e.waiting.postMessage("update")}),0):1}ie={connect:function(e,t,n,s,o){const i=h.get(e);if(!i)return;i.binaryType="arraybuffer",i.onopen=function(){t()},i.onclose=function(){o()},i.onerror=function(){s()},i.onmessage=function(e){let t,o=0;if(e.data instanceof ArrayBuffer)t=new Uint8Array(e.data);else if(e.data instanceof Blob){a.error("Blob type not supported");return}else if(typeof e.data=="string"){o=1;const n=new TextEncoder("utf-8");t=new Uint8Array(n.encode(e.data))}else{a.error("Unknown message type");return}const i=t.length*t.BYTES_PER_ELEMENT,s=a.malloc(i);y.set(t,s),n(s,i,o),a.free(s)}},close:function(e){const t=h.get(e);if(!t)return;t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null,t.close()},get_prop:function(e,t,n){const s=h.get(e);return s&&s[t]!==void 0?s[t]:n}};function _1(e){const t=h.get(e);if(!t)return;ie.close(e)}function w1(e,t,n,s,o,i){const r=a.get_func(n).bind(null,t),c=a.get_func(s).bind(null,t),l=a.get_func(o).bind(null,t),d=a.get_func(i).bind(null,t);ie.connect(e,r,c,l,d)}function O1(e){ie.close(e),h.remove(e)}function x1(e){return ie.get_prop(e,"bufferedAmount",0)}function C1(e){return ie.get_prop(e,"id",65535)}function E1(e){return ie.get_prop(e,"negotiated",65535)}function k1(e){return ie.get_prop(e,"ordered",!0)}function A1(e){const t=h.get(e);return!t||!t.label?0:a.allocString(t.label)}function S1(e){const t=h.get(e);return t?t.maxPacketLifeTime!==void 0?t.maxPacketLifeTime:t.maxRetransmitTime!==void 0?t.maxRetransmitTime:65535:65535}function M1(e){return ie.get_prop(e,"maxRetransmits",65535)}function F1(e){const t=h.get(e);return!t||!t.protocol?0:a.allocString(t.protocol)}function T1(e){const t=h.get(e);if(!t)return 3;switch(t.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;case"closed":default:return 3}}function z1(e,t,n,s){const o=h.get(e);if(!o)return 1;const i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=a.getHeapValue(t+e,"i8");if(s)o.send(i.buffer);else{const e=new TextDecoder("utf-8").decode(i);o.send(e)}return 0}me={onstatechange:function(e,t,n){const i=h.get(e);if(!i)return;let o;switch(t.iceConnectionState){case"new":o=0;break;case"checking":o=1;break;case"connected":case"completed":o=2;break;case"disconnected":o=3;break;case"failed":o=4;break;case"closed":default:o=5;break}n(o)},onicecandidate:function(e,t,n){const r=h.get(e);if(!r||!n.candidate)return;const s=n.candidate,o=a.allocString(s.candidate),i=a.allocString(s.sdpMid);t(i,s.sdpMLineIndex,o),a.free(o),a.free(i)},ondatachannel:function(e,t,n){const s=h.get(e);if(!s)return;const o=h.add(n.channel);t(o)},onsession:function(e,t,n){const i=h.get(e);if(!i)return;const s=a.allocString(n.type),o=a.allocString(n.sdp);t(s,o),a.free(s),a.free(o)},onerror:function(e,t,n){const s=h.get(e);if(!s)return;a.error(n),t()}};function N1(e){const t=h.get(e);if(!t)return;t.close()}function L1(e,t,n,s,o){const l=a.get_func(n).bind(null,t),d=a.get_func(s).bind(null,t),u=a.get_func(o).bind(null,t),m=JSON.parse(a.parseString(e));let i=null;try{i=new RTCPeerConnection(m)}catch(e){return a.error(e),0}const c=me,r=h.add(i);return i.oniceconnectionstatechange=c.onstatechange.bind(null,r,i,l),i.onicecandidate=c.onicecandidate.bind(null,r,d),i.ondatachannel=c.ondatachannel.bind(null,r,u),r}function R1(e,t,n){try{const s=h.get(e);if(!s)return 0;const o=a.parseString(t),i=JSON.parse(a.parseString(n)),r=s.createDataChannel(o,i);return h.add(r)}catch(e){return a.error(e),0}}function P1(e){const t=h.get(e);if(!t)return;t.oniceconnectionstatechange=null,t.onicecandidate=null,t.ondatachannel=null,h.remove(e)}function H1(e,t,n,s){const o=h.get(e);if(!o)return;const i=a.parseString(t),r=a.parseString(s);o.addIceCandidate(new RTCIceCandidate({candidate:r,sdpMid:i,sdpMlineIndex:n}))}function I1(e,t,n,s,o){const i=h.get(e);if(!i)return;const r=a.parseString(t),c=a.parseString(n),l=a.get_func(o).bind(null,s);i.setLocalDescription({sdp:c,type:r}).catch(function(t){me.onerror(e,l,t)})}function B1(e,t,n,s){const o=h.get(e);if(!o)return;const i=a.get_func(n).bind(null,t),r=a.get_func(s).bind(null,t);o.createOffer().then(function(t){me.onsession(e,i,t)}).catch(function(t){me.onerror(e,r,t)})}function V1(e,t,n,s,o,i){const r=h.get(e);if(!r)return;const c=a.parseString(t),l=a.parseString(n),d=a.get_func(i).bind(null,s),u=a.get_func(o).bind(null,s);r.setRemoteDescription({sdp:l,type:c}).then(function(){return c!=="offer"?Promise.resolve():r.createAnswer().then(function(t){me.onsession(e,u,t)})}).catch(function(t){me.onerror(e,d,t)})}ee={_onopen:function(e,t){const s=h.get(e);if(!s)return;const o=a.allocString(s.protocol);t(o),a.free(o)},_onmessage:function(e,t,n){const c=h.get(e);if(!c)return;let s,i=0;if(n.data instanceof ArrayBuffer)s=new Uint8Array(n.data);else if(n.data instanceof Blob){a.error("Blob type not supported");return}else if(typeof n.data=="string"){i=1;const e=new TextEncoder("utf-8");s=new Uint8Array(e.encode(n.data))}else{a.error("Unknown message type");return}const r=s.length*s.BYTES_PER_ELEMENT,o=a.malloc(r);y.set(s,o),t(o,r,i),a.free(o)},_onerror:function(e,t){const s=h.get(e);if(!s)return;t()},_onclose:function(e,t,n){const o=h.get(e);if(!o)return;const s=a.allocString(n.reason);t(n.code,s,n.wasClean?1:0),a.free(s)},send:function(e,t){const n=h.get(e);return!n||n.readyState!==n.OPEN?1:(n.send(t),0)},bufferedAmount:function(e){const t=h.get(e);return t?t.bufferedAmount:0},create:function(e,t,n,s,o){const i=h.add(e);return e.onopen=ee._onopen.bind(null,i,t),e.onmessage=ee._onmessage.bind(null,i,n),e.onerror=ee._onerror.bind(null,i,s),e.onclose=ee._onclose.bind(null,i,o),i},close:function(e,t,n){const s=h.get(e);if(s&&s.readyState<s.CLOSING){const e=t,o=a.parseString(n);s.close(e,o)}},destroy:function(e){const t=h.get(e);if(!t)return;ee.close(e,3001,"destroyed"),h.remove(e),t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null}};function W1(e){return ee.bufferedAmount(e)}function U1(e,t,n){const s=t,o=a.parseString(n);ee.close(e,s,o)}function K1(e,t,n,s,o,i,r){const u=a.get_func(s).bind(null,e),h=a.get_func(o).bind(null,e),m=a.get_func(i).bind(null,e),f=a.get_func(r).bind(null,e),l=a.parseString(t),d=a.parseString(n);let c=null;try{d?c=new WebSocket(l,d.split(",")):c=new WebSocket(l)}catch{return 0}return c.binaryType="arraybuffer",ee.create(c,u,h,m,f)}function q1(e){ee.destroy(e)}function Y1(e,t,n,s){const i=new Uint8Array(n);let o=0;for(o=0;o<n;o++)i[o]=a.getHeapValue(t+o,"i8");let r=i.buffer;return s||(r=new TextDecoder("utf-8").decode(i)),ee.send(e,r)}k={proxies:null,MyProxy:function(e){const t=h.add(this);k.proxies.set(e,t);let n=1;this.ref=function(){n++},this.unref=function(){n--,n===0&&(h.remove(t),k.proxies.delete(e))},this.get_val=function(){return e},this.get_id=function(){return t}},get_proxied:function(e){const t=k.proxies.get(e);if(t===void 0){const t=new k.MyProxy(e);return t.get_id()}return h.get(t).ref(),t},get_proxied_value:function(e){const t=h.get(e);return t===void 0?void 0:t.get_val()},variant2js:function(e,t){switch(e){case 0:return null;case 1:return!!a.getHeapValue(t,"i64");case 2:return a.getHeapValue(t,"i64");case 3:return a.getHeapValue(t,"double");case 4:return a.parseString(a.getHeapValue(t,"*"));case 17:return k.get_proxied_value(a.getHeapValue(t,"i64"));default:return void 0}},js2variant:function(e,t){if(e==null)return 0;const n=typeof e;if(n==="boolean")return a.setHeapValue(t,e,"i64"),1;if(n==="number")return Number.isInteger(e)?(a.setHeapValue(t,e,"i64"),2):(a.setHeapValue(t,e,"double"),3);if(n==="string"){const n=a.allocString(e);return a.setHeapValue(t,n,"*"),4}const s=k.get_proxied(e);return a.setHeapValue(t,s,"i64"),17}};function X1(e,t){const s=a.get_func(t);let n=0;const o=function(){if(!k.get_proxied_value(n))return;const t=Array.from(arguments);s(e,k.get_proxied(t),t.length)};return n=k.get_proxied(o),n}function Q1(e,t,n,s,o,i,r){const c=a.parseString(e);if(typeof window[c]=="undefined")return-1;const d=a.get_func(s),u=a.get_func(r),l=new Array(n);for(let e=0;e<n;e++){const s=d(t,e,o,i),r=a.getHeapValue(i,"*");l[e]=k.variant2js(s,o),r&&u(i,s)}try{const e=new window[c](...l);return k.js2variant(e,o)}catch(e){return a.error(`Error calling constructor ${c} with args:`,l,"error:",e),-1}}function Z1(e){const t=a.parseString(e);return typeof window[t]!="undefined"?k.get_proxied(window[t]):0}function J1(e,t,n,s,o,i,r,c){const l=k.get_proxied_value(e);if(l===void 0)return-1;const d=a.parseString(t),h=a.get_func(o),m=a.get_func(c),u=new Array(s);for(let e=0;e<s;e++){const t=h(n,e,i,r),o=a.getHeapValue(r,"*");u[e]=k.variant2js(t,i),o&&m(r,t)}try{const e=l[d](...u);return k.js2variant(e,i)}catch(e){return a.error(`Error calling method ${d} on:`,l,"error:",e),-1}}function e4(e,t,n){const s=k.get_proxied_value(e);if(s===void 0)return 0;if(n){const e=a.parseString(n);try{return k.js2variant(s[e],t)}catch{return a.error(`Error getting variable ${e} on object`,s),0}}return k.js2variant(s,t)}function t4(e,t,n){const o=k.get_proxied_value(e);if(o===void 0)return-1;const s=k.variant2js(t,n);if(s==null)return-1;try{return k.js2variant(o[s],n)}catch(e){return a.error(`Error getting variable ${s} on object`,o,e),-1}}function n4(e,t,n,s){const o=k.get_proxied_value(e);if(o===void 0)return;const i=a.parseString(t);try{o[i]=k.variant2js(n,s)}catch{a.error(`Error setting variable ${i} on object`,o)}}function s4(e,t,n,s,o){const i=k.get_proxied_value(e);if(i===void 0)return-1;const r=k.variant2js(t,n);try{return i[r]=k.variant2js(s,o),0}catch{return a.error(`Error setting variable ${r} on object`,i),-1}}function o4(e){const t=h.get(e);t!==void 0&&t.unref()}d={gl:null,session:null,space:null,frame:null,pose:null,orig_requestAnimationFrame:null,requestAnimationFrame:e=>{if(d.session&&d.space){const t=function(t,n){d.frame=n,d.pose=n.getViewerPose(d.space),e(t),d.frame=null,d.pose=null};d.session.requestAnimationFrame(t)}else d.orig_requestAnimationFrame(e)},monkeyPatchRequestAnimationFrame:e=>{d.orig_requestAnimationFrame===null&&(d.orig_requestAnimationFrame=c.requestAnimationFrame),c.requestAnimationFrame=e?d.requestAnimationFrame:d.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{c.mainLoop.pause(),window.setTimeout(function(){c.mainLoop.resume()},0)},shaderProgram:null,programInfo:null,buffer:null,vsSource:`
			const vec2 scale = vec2(0.5, 0.5);
			attribute vec4 aVertexPosition;

			varying highp vec2 vTextureCoord;

			void main () {
				gl_Position = aVertexPosition;
				vTextureCoord = aVertexPosition.xy * scale + scale;
			}
		`,fsSource:`
			varying highp vec2 vTextureCoord;

			uniform sampler2D uSampler;

			void main() {
				gl_FragColor = texture2D(uSampler, vTextureCoord);
			}
		`,initShaderProgram:(e,t,n)=>{const o=d.loadShader(e,e.VERTEX_SHADER,t),i=d.loadShader(e,e.FRAGMENT_SHADER,n),s=e.createProgram();return e.attachShader(s,o),e.attachShader(s,i),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(a.error(`Unable to initialize the shader program: ${e.getProgramInfoLog(s)}`),null)},loadShader:(e,t,n)=>{const s=e.createShader(t);return e.shaderSource(s,n),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS)?s:(a.error(`An error occurred compiling the shader: ${e.getShaderInfoLog(s)}`),e.deleteShader(s),null)},initBuffer:e=>{const t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t);const n=[-1,-1,1,-1,-1,1,1,1];return e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),t},blitTexture:(e,t)=>{d.shaderProgram===null&&(d.shaderProgram=d.initShaderProgram(e,d.vsSource,d.fsSource),d.programInfo={program:d.shaderProgram,attribLocations:{vertexPosition:e.getAttribLocation(d.shaderProgram,"aVertexPosition")},uniformLocations:{uSampler:e.getUniformLocation(d.shaderProgram,"uSampler")}},d.buffer=d.initBuffer(e));const n=e.getParameter(e.CURRENT_PROGRAM);e.useProgram(d.shaderProgram),e.bindBuffer(e.ARRAY_BUFFER,d.buffer),e.vertexAttribPointer(d.programInfo.attribLocations.vertexPosition,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(d.programInfo.attribLocations.vertexPosition),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(d.programInfo.uniformLocations.uSampler,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,null),e.disableVertexAttribArray(d.programInfo.attribLocations.vertexPosition),e.bindBuffer(e.ARRAY_BUFFER,null),e.useProgram(n)},controllers:[],sampleControllers:()=>{if(!d.session)return;let t=2;const e=[];d.session.inputSources.forEach(n=>{n.targetRayMode==="tracked-pointer"?n.handedness==="right"?e[1]=n:(n.handedness==="left"||!e[0])&&(e[0]=n):e[t++]=n}),d.controllers=e},getControllerId:e=>d.controllers.indexOf(e)};function a4(e,t){if(!d.session||!d.pose)return;const r=e===2?1:0,a=d.session.renderState.baseLayer,c=d.pose.views[r],s=a.getViewport(c),n=d.gl,l=n.getParameter(n.FRAMEBUFFER_BINDING),i=n.getParameter(n.VIEWPORT);n.bindFramebuffer(n.FRAMEBUFFER,a.framebuffer),n.viewport(s.x,s.y,s.width,s.height),d.blitTexture(n,o.textures[t]),n.bindFramebuffer(n.FRAMEBUFFER,l),n.viewport(i[0],i[1],i[2],i[3])}function r4(){if(!d.space||!d.space.boundsGeometry)return 0;const t=d.space.boundsGeometry.length;if(t===0)return 0;const e=a.malloc((t*3+1)*4);a.setHeapValue(e,t,"i32");for(let n=0;n<t;n++){const s=d.space.boundsGeometry[n];a.setHeapValue(e+(n*3+1)*4,s.x,"float"),a.setHeapValue(e+(n*3+2)*4,s.y,"float"),a.setHeapValue(e+(n*3+3)*4,s.z,"float")}return e}function c4(e,t){if(d.controllers.length===0)return 0;const s=d.controllers[e];if(!s||!s.gamepad)return 0;let n=s.gamepad.axes;if(s.gamepad.mapping==="xr-standard")if(t){const t=s.gamepad.buttons[0].value,e=s.gamepad.buttons[1].value;n=[n[2],n[3]*-1,t,e,e,0,n[0],n[1]*-1]}else n[1]*=-1,n[3]*=-1;const o=a.malloc((n.length+1)*4);a.setHeapValue(o,n.length,"i32");for(let e=0;e<n.length;e++)a.setHeapValue(o+4+e*4,n[e],"float");return o}function l4(e,t){if(d.controllers.length===0)return 0;const s=d.controllers[e];if(!s||!s.gamepad)return 0;let n=s.gamepad.buttons;s.gamepad.mapping==="xr-standard"&&t&&(n=[0,n[5],n[1],n[3],n[6],n[7],n[8],n[4],n[9],n[10],n[11],n[12],n[13],n[14],n[2],n[0]]);const o=a.malloc((n.length+1)*4);a.setHeapValue(o,n.length,"i32");for(let e=0;e<n.length;e++)a.setHeapValue(o+4+e*4,n[e]?n[e].value:0,"float");return o}function d4(){return!d.session||!d.frame?0:d.controllers.length}function u4(e){if(e<0||e>=d.controllers.length)return 0;const t=d.controllers[e];if(!t)return 0;switch(t.targetRayMode){case"gaze":return 1;case"tracked-pointer":return 2;case"screen":return 3;default:break}return 0}function h4(e){if(!d.session||!d.frame)return 0;const t=d.controllers[e];if(!t)return 0;const o=d.frame,i=d.space,n=o.getPose(t.targetRaySpace,i);if(!n)return 0;const r=n.transform.matrix,s=a.malloc(16*4);for(let e=0;e<16;e++)a.setHeapValue(s+e*4,r[e],"float");return s}function m4(e){if(!d.session||!d.pose)return 0;const n=e===2?1:0,s=d.pose.views[n].projectionMatrix,t=a.malloc(16*4);for(let e=0;e<16;e++)a.setHeapValue(t+e*4,s[e],"float");return t}function f4(){if(!d.session||!d.pose)return 0;const n=d.session.renderState.baseLayer,s=d.pose.views[0],t=n.getViewport(s),e=a.malloc(2*4);return a.setHeapValue(e+0,t.width,"i32"),a.setHeapValue(e+4,t.height,"i32"),e}function p4(e){if(!d.session||!d.pose)return 0;const s=d.pose.views;let t;e===0?t=d.pose.transform.matrix:t=s[e-1].transform.matrix;const n=a.malloc(16*4);for(let e=0;e<16;e++)a.setHeapValue(n+e*4,t[e],"float");return n}function g4(){return!d.session||!d.pose?0:d.pose.views.length}function v4(){return!d.session||!d.session.visibilityState?0:a.allocString(d.session.visibilityState)}function b4(e,t,n,s,i,r,c,l,u,h){d.monkeyPatchRequestAnimationFrame(!0);const j=a.parseString(e),p=a.parseString(t).split(",").map(e=>e.trim()).filter(e=>e!==""),g=a.parseString(n).split(",").map(e=>e.trim()).filter(e=>e!==""),v=a.parseString(s).split(",").map(e=>e.trim()),y=a.get_func(i),_=a.get_func(r),m=a.get_func(c),w=a.get_func(l),O=a.get_func(u),b=a.get_func(h),f={};p.length>0&&(f.requiredFeatures=p),g.length>0&&(f.optionalFeatures=g),navigator.xr.requestSession(j,f).then(function(e){d.session=e,e.addEventListener("end",function(){_()}),e.addEventListener("inputsourceschange",function(e){let t=!1;[e.added,e.removed].forEach(e=>{e.forEach(e=>{e.targetRayMode==="tracked-pointer"&&(t=!0)})}),t&&w()}),["selectstart","selectend","select","squeezestart","squeezeend","squeeze"].forEach((t,n)=>{e.addEventListener(t,function(e){d.sampleControllers(),O(n,d.getControllerId(e.inputSource))})}),e.addEventListener("visibilitychange",function(){const t=a.allocString("visibility_state_changed");b(t),a.free(t)});const n=It(),t=o.getContext(n).GLctx;d.gl=t,t.makeXRCompatible().then(function(){e.updateRenderState({baseLayer:new XRWebGLLayer(e,t)});function s(e,t){d.space=e,e.onreset=function(){const t=a.allocString("reference_space_reset");b(t),a.free(t)},d.pauseResumeMainLoop(),window.setTimeout(function(){const e=a.allocString(t);y(e),a.free(e)},0)}function n(){const t=v.shift();e.requestReferenceSpace(t).then(e=>{s(e,t)}).catch(()=>{if(v.length===0){const e=a.allocString("Unable to get any of the requested reference space types");m(e),a.free(e)}else n()})}n()}).catch(function(e){const t=a.allocString(`Unable to make WebGL context compatible with WebXR: ${e}`);m(t),a.free(t)})}).catch(function(e){const t=a.allocString(`Unable to start session: ${e}`);m(t),a.free(t)})}function j4(e){return!!d.session&&!!d.frame&&!!d.controllers[e]}function y4(e,t){const n=a.parseString(e),s=a.get_func(t);if(navigator.xr)navigator.xr.isSessionSupported(n).then(function(e){const t=a.allocString(n);s(t,e?1:0),a.free(t)});else{const e=a.allocString(n);s(e,0),a.free(e)}}function _4(){return!!navigator.xr}function w4(){d.sampleControllers()}function O4(){d.session&&d.session.end().catch(e=>{}),d.session=null,d.space=null,d.frame=null,d.pose=null,d.monkeyPatchRequestAnimationFrame(!1),d.pauseResumeMainLoop()}function x4(e){Yt(e)}function Ge(e){return e%4===0&&(e%100!==0||e%400===0)}function E4(e,t){for(var n=0,s=0;s<=t;n+=e[s++]);return n}Ot=[31,29,31,30,31,30,31,31,30,31,30,31],wt=[31,28,31,30,31,30,31,31,30,31,30,31];function S4(e,t){for(var s,o,i,n=new Date(e.getTime());t>0;)if(i=Ge(n.getFullYear()),s=n.getMonth(),o=(i?Ot:wt)[s],t>o-n.getDate())t-=o-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n;return n}function en(e,t,n,s){var r,c,l,d,u,v=i[s+40>>2],b={tm_sec:i[s>>2],tm_min:i[s+4>>2],tm_hour:i[s+8>>2],tm_mday:i[s+12>>2],tm_mon:i[s+16>>2],tm_year:i[s+20>>2],tm_wday:i[s+24>>2],tm_yday:i[s+28>>2],tm_isdst:i[s+32>>2],tm_gmtoff:i[s+36>>2],tm_zone:v?T(v):""},a=T(n),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(r in h)a=a.replace(new RegExp(r,"g"),h[r]);d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function m(e,t,n){for(var s=typeof e=="number"?e.toString():e||"";s.length<t;)s=n[0]+s;return s}function o(e,t){return m(e,t,"0")}function f(e,t){function s(e){return e<0?-1:e>0?1:0}var n;return(n=s(e.getFullYear()-t.getFullYear()))===0&&(n=s(e.getMonth()-t.getMonth()))===0&&(n=s(e.getDate()-t.getDate())),n}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var t=S4(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),s=new Date(t.getFullYear()+1,0,4),o=p(n),i=p(s);return f(o,t)<=0?f(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}l={"%a":function(e){return d[e.tm_wday].substring(0,3)},"%A":function(e){return d[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){var t=e.tm_year+1900;return o(t/100|0,2)},"%d":function(e){return o(e.tm_mday,2)},"%e":function(e){return m(e.tm_mday,2," ")},"%g":function(e){return g(e).toString().substring(2)},"%G":function(e){return g(e)},"%H":function(e){return o(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return t==0?t=12:t>12&&(t-=12),o(t,2)},"%j":function(e){return o(e.tm_mday+E4(Ge(e.tm_year+1900)?Ot:wt,e.tm_mon-1),3)},"%m":function(e){return o(e.tm_mon+1,2)},"%M":function(e){return o(e.tm_min,2)},"%n":function(){return`
`},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return o(e.tm_sec,2)},"%t":function(){return"	"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return o(Math.floor(t/7),2)},"%V":function(e){var n,s,t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);return(e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t?t==53&&(s=(e.tm_wday+371-e.tm_yday)%7,s!=4&&(s!=3||!Ge(e.tm_year))&&(t=1)):(t=52,n=(e.tm_wday+7-e.tm_yday-1)%7,(n==4||n==5&&Ge(e.tm_year%400-1))&&t++),o(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return o(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0,t=Math.abs(t)/60,t=t/60*100+t%60;return(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}},a=a.replace(/%%/g,"\0\0");for(r in l)a.includes(r)&&(a=a.replace(new RegExp(r,"g"),l[r](b)));return a=a.replace(/\0\0/g,"%"),c=Qe(a,!1),c.length>t?0:(bn(c,e),c.length-1)}function F4(e,t,n,s){return en(e,t,n,s)}yt=function(e,t,s,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=n.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=o},ke=292|73,Ee=146,Object.defineProperties(yt.prototype,{read:{get:function(){return(this.mode&ke)===ke},set:function(e){e?this.mode|=ke:this.mode&=~ke}},write:{get:function(){return(this.mode&Ee)===Ee},set:function(e){e?this.mode|=Ee:this.mode&=~Ee}},isFolder:{get:function(){return n.isDir(this.mode)}},isDevice:{get:function(){return n.isChrdev(this.mode)}}}),n.FSNode=yt,n.staticInit(),r.requestFullscreen=function(t,n){c.requestFullscreen(t,n)},r.requestAnimationFrame=function(t){c.requestAnimationFrame(t)},r.setCanvasSize=function(t,n,s){c.setCanvasSize(t,n,s)},r.pauseMainLoop=function(){c.mainLoop.pause()},r.resumeMainLoop=function(){c.mainLoop.resume()},r.getUserMedia=function(){c.getUserMedia()},r.createContext=function(t,n,s,o){return c.createContext(t,n,s,o)},cn={},gt={};for(V=0;V<32;++V)ae.push(new Array(V));Jt=new Float32Array(288);for(V=0;V<288;++V)H[V]=Jt.subarray(0,V+1);Qt=new Int32Array(288);for(V=0;V<288;++V)re[V]=Qt.subarray(0,V+1);r.request_quit=function(){L.request_quit()},r.onExit=L.cleanup,L._fs_sync_promise=Promise.resolve(),r.initConfig=m.init_config,r.initFS=M.init,r.copyToFS=M.copy_to_fs,Ke={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},L.atexit(function(e){E.clear(),e()}),L.atexit(function(e){_.clear(),e()}),L.atexit(function(e){w.clear(),e()}),k.proxies=new Map;function Qe(e,t,n){var o=n>0?n:de(e)+1,s=new Array(o),i=xe(e,s,0,s.length);return t&&(s.length=i),s}yn={Xc:G4,Rc:K4,Mc:W4,Lc:V4,rd:B4,qd:I4,Kc:H4,sd:P4,Fa:R4,fd:L4,Wc:N4,Jc:D4,Ic:z4,mb:T4,Hc:M4,ad:A4,_c:k4,$c:C4,nb:i4,Zc:G1,Vc:$1,Gc:D1,Sc:y1,Tc:v1,Fc:Xu,jb:Gu,bd:Yu,Qc:Hu,Pc:Pu,Uc:su,nd:nu,pd:tu,od:eu,Va:Zd,id:Qd,Ec:Kd,jd:$d,kd:Nd,md:Lt,ja:zd,qb:ac,Jh:oc,Ua:qe,yi:ia,xi:oa,mf:xi,Qi:yi,Ue:ji,wi:vi,vi:gi,Qe:ri,Re:Po,ui:Mo,ti:So,Td:_o,si:co,Kd:Ys,Ze:Ps,Hi:Qn,ri:Gn,qi:Fc,pi:Ln,ni:Rn,mi:Pn,af:Hn,li:In,ki:Bn,ji:Vn,ii:$n,re:Wn,se:Un,ue:Kn,te:qn,hi:Yn,gi:Dn,fi:Xn,ce:Zn,ei:Jn,bi:es,ai:ts,rf:ns,$h:ss,qf:os,pe:is,_h:rs,Zh:cs,sf:ls,Yh:ds,Xh:us,Wh:hs,Vh:ms,Uh:fs,Th:ps,of:gs,Si:vs,Sh:bs,Vd:js,Rh:ys,de:_s,Qh:ws,Jd:Os,Ye:xs,Gi:Cs,Ph:Es,Oh:ks,Nh:As,Mh:Ss,Lh:Ms,Kh:Fs,Ih:Ts,he:zs,Ci:Ds,Bf:Ns,Cf:Ls,td:Rs,hf:Hs,xf:Is,Di:Bs,Hh:Vs,ge:$s,Bi:Ws,yf:Us,zf:Ks,Af:qs,vf:Gs,Gh:Xs,Fh:Qs,lf:Zs,Pi:Js,Se:eo,fe:to,Eh:no,Dh:so,Ch:oo,Bh:io,_e:ao,Ah:ro,zh:lo,xh:uo,pf:ho,Ti:mo,wh:fo,Wd:po,vh:go,Id:vo,Xe:bo,Fi:jo,yh:yo,uh:wo,th:Oo,je:xo,ke:Co,ne:Eo,sh:ko,rh:Ao,qh:Fo,Xd:To,ph:zo,nh:Do,mh:No,Ee:Lo,lh:Ro,Yd:Ho,_d:Io,Ve:Bo,kh:Vo,wd:$o,Dd:Wo,ih:Uo,jh:Ko,Ji:qo,Mi:Yo,Ii:Go,jf:Xo,Li:Qo,kf:Zo,Ni:Jo,hh:ei,Md:ti,Nd:ni,fh:si,eh:oi,ch:ii,gh:ai,bh:ci,qe:li,Zd:di,ah:ui,$g:hi,Oe:mi,le:fi,oe:pi,Yg:bi,_g:_i,Zg:wi,Fe:Oi,Me:Ci,Le:Ei,Vg:ki,Xg:Ai,Wg:Si,Tg:Mi,Ad:Fi,zd:Ti,Sg:zi,Rg:Di,Qg:Ni,Pg:Li,nf:Ri,Ri:Pi,Og:Hi,Ud:Ii,Ng:Bi,ee:Vi,Mg:$i,Hd:Wi,We:Ui,Ei:Ki,Lg:qi,Kg:Yi,Fd:Gi,Ig:Xi,Hg:Qi,Cd:Zi,Bd:Ji,Oi:ea,wf:ta,Gg:ra,Fg:ca,Eg:la,$e:da,Ed:ua,Dg:ha,Pd:ma,Od:fa,Sd:pa,Qd:ga,Cg:va,Bg:ba,Ag:ja,zg:ya,xg:_a,wg:wa,vg:Oa,ug:xa,tg:Ca,sg:Ea,uf:ka,rg:Aa,qg:Sa,pg:Ma,og:Fa,yd:Ta,xd:za,mg:Da,tf:Na,Pe:La,lg:Ra,kg:Ha,jg:Ia,ig:Va,De:$a,ze:Wa,hg:Ua,gg:Ka,fg:qa,eg:Ya,Ce:Ga,ye:Xa,dg:Qa,ag:Za,$f:Ja,_f:er,Be:tr,we:nr,Zf:sr,Yf:or,Xf:ir,Wf:ar,Ae:rr,ve:cr,ie:lr,Vf:dr,gf:ur,ef:hr,Uf:mr,ff:fr,cf:pr,Tf:gr,df:vr,bf:br,Rf:jr,Qf:yr,Pf:_r,Of:wr,Nf:Or,Mf:xr,Lf:Cr,Kf:Er,Jf:kr,If:Ar,Ld:Sr,Ai:Mr,Df:Fr,Ef:Tr,ud:zr,Ke:Dr,He:Nr,Je:Lr,Ge:Rr,Ne:Pr,Gf:Hr,Ff:Ir,$d:Br,hd:Vr,Ta:Ur,pb:Kr,fb:Fd,Cc:ec,bc:tc,Oc:nc,xc:sc,dd:rc,ed:cc,ua:lc,cd:dc,lb:hc,Ac:fc,kb:gc,k:vc,Sa:bc,Pb:jc,c:yc,Na:_c,bb:wc,vb:Oc,b:xc,P:Cc,e:Ec,_:kc,a:Ac,m:Sc,D:Mc,X:Nn,w:Tc,ha:zc,q:Dc,K:Nc,M:Lc,J:Rc,qa:Pc,O:Hc,aa:Ic,N:Bc,ka:Vc,Ab:$c,gj:Wc,zb:Uc,ej:Kc,_a:qc,$a:Yc,Da:Gc,ra:Xc,L:Qc,F:Zc,Q:Jc,U:el,I:tl,A:nl,ea:sl,Y:ol,H:il,i:al,p:rl,B:cl,ya:ll,Ja:dl,ba:Fn,Ka:ul,s:hl,j:ml,ab:fl,Db:pl,Z:gl,x:vl,fj:bl,Bb:jl,C:yl,E:_l,ga:wl,v:Ol,W:xl,R:Cl,Cb:El,wb:kl,$:Al,Zi:Sl,tb:Ml,Ea:Fl,Oa:Tl,Vi:zl,da:Dl,wa:Nl,dj:Ll,Xi:Rl,va:Pl,lj:Hl,ub:Il,la:Bl,bj:Vl,_i:$l,ia:Wl,cb:Ul,fa:Kl,Ga:ql,T:Yl,Pa:Gl,r:Xl,Ia:Ql,g:Zl,d:Jl,ij:ed,Ha:td,Qa:nd,$i:sd,f:od,u:id,db:ad,xb:rd,Za:cd,n:ld,Ca:dd,ma:ud,Ya:hd,V:md,Ba:fd,xa:pd,y:gd,Aa:vd,Wi:bd,sb:jd,rb:yd,o:_d,pa:wd,z:Od,S:xd,G:Cd,pj:Ed,La:kd,h:Ad,t:Sd,di:Ld,cg:Rd,be:Pd,dc:Hd,bk:Id,ck:Bd,kj:Vd,yc:Wd,nc:Ud,Ub:qd,ak:Yd,Sb:Gd,dh:Xd,_b:ou,me:iu,xe:au,ld:ru,vd:cu,Te:lu,Ie:du,Wa:uu,ob:hu,Hf:mu,Xa:fu,yg:pu,oc:gu,Sf:vu,bg:bu,Rj:ju,ib:yu,Yc:_u,lc:wu,cc:Ou,ec:xu,Jg:Cu,gd:Eu,Ug:ku,ae:Au,jc:Su,kc:Mu,hc:Fu,ic:Tu,mc:zu,Yb:Du,ng:Nu,Zb:Lu,zi:Ru,qj:Iu,Aj:Bu,Jb:Vu,nj:$u,rj:Wu,oj:Uu,mj:Ku,eb:qu,pc:Qu,rc:Zu,fc:Ju,Rd:e1,Gd:t1,sc:n1,wc:s1,vc:o1,uc:i1,qc:a1,tc:r1,Wb:c1,oi:l1,ac:d1,oh:u1,Rb:h1,gc:m1,$b:f1,Tb:p1,Xb:g1,Qb:b1,Vb:j1,Ob:_1,Vj:w1,Sj:O1,Wj:x1,_j:C1,Xj:E1,$j:k1,Uj:A1,Zj:S1,Yj:M1,Tj:F1,Nb:T1,Mb:z1,Qj:N1,Lj:L1,Kj:R1,Lb:P1,Mj:H1,Oj:I1,Pj:B1,Nj:V1,Kb:W1,Ij:U1,Hj:K1,Ib:q1,Jj:Y1,Yi:X1,Ki:Q1,Ui:Z1,aj:J1,hj:e4,yb:t4,jj:n4,cj:s4,ci:o4,vj:a4,Ej:r4,Fb:c4,sj:l4,uj:d4,Ra:u4,tj:h4,wj:m4,yj:f4,xj:p4,Dj:g4,Fj:v4,Bj:b4,Gb:j4,Gj:y4,Cj:_4,Hb:w4,zj:O4,za:u0,na:h0,gb:g0,hb:m0,Dc:f0,Bc:b0,zc:j0,ca:l0,oa:c0,ta:d0,sa:p0,Ma:v0,l:x4,Eb:en,Nc:F4},$4=Z4(),xn=r.___wasm_call_ctors=function(){return(xn=r.___wasm_call_ctors=r.asm.ek).apply(null,arguments)},$t=r._free=function(){return($t=r._free=r.asm.fk).apply(null,arguments)},Kt=r.__Z13godot_js_mainiPPc=function(){return(Kt=r.__Z13godot_js_mainiPPc=r.asm.gk).apply(null,arguments)},Zt=r._main=function(){return(Zt=r._main=r.asm.hk).apply(null,arguments)},ve=r._malloc=function(){return(ve=r._malloc=r.asm.ik).apply(null,arguments)},De=r._htonl=function(){return(De=r._htonl=r.asm.jk).apply(null,arguments)},Re=r._htons=function(){return(Re=r._htons=r.asm.kk).apply(null,arguments)},Be=r._ntohs=function(){return(Be=r._ntohs=r.asm.lk).apply(null,arguments)},Et=r.___errno_location=function(){return(Et=r.___errno_location=r.asm.mk).apply(null,arguments)},Wt=r._fflush=function(){return(Wt=r._fflush=r.asm.nk).apply(null,arguments)},an=r.__emwebxr_on_input_event=function(){return(an=r.__emwebxr_on_input_event=r.asm.ok).apply(null,arguments)},on=r.__emwebxr_on_simple_event=function(){return(on=r.__emwebxr_on_simple_event=r.asm.pk).apply(null,arguments)},kt=r.___funcs_on_exit=function(){return(kt=r.___funcs_on_exit=r.asm.qk).apply(null,arguments)},$=r._setThrew=function(){return($=r._setThrew=r.asm.sk).apply(null,arguments)},R=r.stackSave=function(){return(R=r.stackSave=r.asm.tk).apply(null,arguments)},P=r.stackRestore=function(){return(P=r.stackRestore=r.asm.uk).apply(null,arguments)},_e=r.stackAlloc=function(){return(_e=r.stackAlloc=r.asm.vk).apply(null,arguments)},At=r.dynCall_iij=function(){return(At=r.dynCall_iij=r.asm.wk).apply(null,arguments)};function c0(e,t,n){var s=R();try{I(e)(t,n)}catch(e){if(P(s),e!==e+0)throw e;$(1,0)}}function l0(e,t){var n=R();try{I(e)(t)}catch(e){if(P(n),e!==e+0)throw e;$(1,0)}}function d0(e,t,n,s){var o=R();try{I(e)(t,n,s)}catch(e){if(P(o),e!==e+0)throw e;$(1,0)}}function u0(e,t){var n=R();try{return I(e)(t)}catch(e){if(P(n),e!==e+0)throw e;$(1,0)}}function h0(e,t,n){var s=R();try{return I(e)(t,n)}catch(e){if(P(s),e!==e+0)throw e;$(1,0)}}function m0(e,t,n,s,o){var i=R();try{return I(e)(t,n,s,o)}catch(e){if(P(i),e!==e+0)throw e;$(1,0)}}function f0(e,t,n,s,o,i){var a=R();try{return I(e)(t,n,s,o,i)}catch(e){if(P(a),e!==e+0)throw e;$(1,0)}}function p0(e,t,n,s,o){var i=R();try{I(e)(t,n,s,o)}catch(e){if(P(i),e!==e+0)throw e;$(1,0)}}function g0(e,t,n,s){var o=R();try{return I(e)(t,n,s)}catch(e){if(P(o),e!==e+0)throw e;$(1,0)}}function v0(e,t,n,s,o,i,a,r){var c=R();try{I(e)(t,n,s,o,i,a,r)}catch(e){if(P(c),e!==e+0)throw e;$(1,0)}}function b0(e,t,n,s,o,i,a){var r=R();try{return I(e)(t,n,s,o,i,a)}catch(e){if(P(r),e!==e+0)throw e;$(1,0)}}function j0(e,t,n,s){var o=R();try{return At(e,t,n,s)}catch(e){if(P(o),e!==e+0)throw e;$(1,0)}}r.cwrap=O0,r.callMain=An;function gn(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}jn=!1,ye=function e(){Ye||tt(),Ye||(ye=e)};function An(e){var t,n,s,o,a=r._main;e=e||[],e.unshift(We),t=e.length,n=_e((t+1)*4),s=n>>2,e.forEach(e=>{i[s++]=w0(e)}),i[s]=0;try{return o=a(t,n),pt(o,!0),o}catch(e){return dt(e)}finally{jn=!0}}function tt(e){if(e=e||vt,ce>0)return;if(r0(),ce>0)return;function t(){if(Ye)return;if(Ye=!0,r.calledRun=!0,ge)return;a0(),i0(),wn(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Rt&&An(e),s0()}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t()}r.run=tt;function pt(e){Ce=e,St()||o0(),E0(e)}function E0(e){Ce=e,St()||(r.onExit&&r.onExit(e),ge=!0),Ue(e,new gn(e))}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Rt=!1,r.noInitialRun&&(Rt=!1),tt(),t.ready}})();typeof exports=="object"&&typeof module=="object"?module.exports=Godot:typeof define=="function"&&define.amd?define([],function(){return Godot}):typeof exports=="object"&&(exports.Godot=Godot);const Preloader=function(){function i(e,t){function n(e,s){return e.read().then(function(o){return t.done?Promise.resolve():(o.value&&(s.enqueue(o.value),t.loaded+=o.value.length),o.done?(t.done=!0,Promise.resolve()):n(e,s))})}const s=e.body.getReader();return new Response(new ReadableStream({start:function(e){n(s,e).then(function(){e.close()})}}),{headers:e.headers})}function a(e,t,n,s){return t[e]={total:n||0,loaded:0,done:!1},fetch(e).then(function(n){if(!n.ok)return Promise.reject(new Error(`Failed loading file '${e}'`));const o=i(n,t[e]);return s?Promise.resolve(o):o.arrayBuffer()})}function s(e,t=1){function n(n){return t<=1?Promise.reject(n):new Promise(function(n,o){setTimeout(function(){s(e,t-1).then(n).catch(o)},1e3)})}return e().catch(n)}const r=4,t={},e={loaded:0,total:0};let n=null;const o=function(){let i=0,s=0,a=!0,r=!0;Object.keys(t).forEach(function(e){const n=t[e];n.done||(r=!1),!a||n.total===0?(a=!1,s=0):s+=n.total,i+=n.loaded}),(i!==e.loaded||s!==e.total)&&(e.loaded=i,e.total=s,typeof n=="function"&&n(i,s)),r||requestAnimationFrame(o)};this.animateProgress=o,this.setProgressFunc=function(e){n=e},this.loadPromise=function(e,n,o=!1){return s(a.bind(null,e,t,n,o),r)},this.preloadedFiles=[],this.preload=function(e,t,n){let s=null;if(typeof e=="string"){const s=this;return this.loadPromise(e,n).then(function(n){return s.preloadedFiles.push({path:t||e,buffer:n}),Promise.resolve()})}return e instanceof ArrayBuffer?s=new Uint8Array(e):ArrayBuffer.isView(e)&&(s=new Uint8Array(e.buffer)),s?(this.preloadedFiles.push({path:t,buffer:e}),Promise.resolve()):Promise.reject(new Error("Invalid object for preloading"))}},EngineConfig={},InternalConfig=function(e){const n={unloadAfterInit:!0,canvas:null,executable:"",mainPack:null,locale:null,canvasResizePolicy:2,args:[],focusCanvas:!0,experimentalVK:!1,serviceWorker:"",persistentPaths:["/userfs"],persistentDrops:!1,gdnativeLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(){console.error.apply(console,Array.from(arguments))}};function t(e){this.update(e)}return t.prototype=n,t.prototype.update=function(e){const n=e||{};function t(e,t){return typeof n[e]=="undefined"?t:n[e]}this.unloadAfterInit=t("unloadAfterInit",this.unloadAfterInit),this.onPrintError=t("onPrintError",this.onPrintError),this.onPrint=t("onPrint",this.onPrint),this.onProgress=t("onProgress",this.onProgress),this.canvas=t("canvas",this.canvas),this.executable=t("executable",this.executable),this.mainPack=t("mainPack",this.mainPack),this.locale=t("locale",this.locale),this.canvasResizePolicy=t("canvasResizePolicy",this.canvasResizePolicy),this.persistentPaths=t("persistentPaths",this.persistentPaths),this.persistentDrops=t("persistentDrops",this.persistentDrops),this.experimentalVK=t("experimentalVK",this.experimentalVK),this.focusCanvas=t("focusCanvas",this.focusCanvas),this.serviceWorker=t("serviceWorker",this.serviceWorker),this.gdnativeLibs=t("gdnativeLibs",this.gdnativeLibs),this.fileSizes=t("fileSizes",this.fileSizes),this.args=t("args",this.args),this.onExecute=t("onExecute",this.onExecute),this.onExit=t("onExit",this.onExit)},t.prototype.getModuleConfig=function(e,t){let n=t;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!0,dynamicLibraries:[`${e}.side.wasm`],instantiateWasm:function(e,t){function s(e){t(e.instance,e.module)}return typeof WebAssembly.instantiateStreaming!="undefined"?WebAssembly.instantiateStreaming(Promise.resolve(n),e).then(s):n.arrayBuffer().then(function(t){WebAssembly.instantiate(t,e).then(s)}),n=null,{}},locateFile:function(t){return t.endsWith(".worker.js")?`${e}.worker.js`:t.endsWith(".audio.worklet.js")?`${e}.audio.worklet.js`:t.endsWith(".js")?`${e}.js`:t.endsWith(".side.wasm")?`${e}.side.wasm`:t.endsWith(".wasm")?`${e}.wasm`:t}}},t.prototype.getGodotConfig=function(e){if(!(this.canvas instanceof HTMLCanvasElement)){const e=document.getElementsByTagName("canvas");if(e.length&&e[0]instanceof HTMLCanvasElement&&(this.canvas=e[0]),!this.canvas)throw new Error("No canvas found in page")}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let t=this.locale;t||(t=navigator.languages?navigator.languages[0]:navigator.language,t=t.split(".")[0]),t=t.replace("-","_");const n=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale:t,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,focusCanvas:this.focusCanvas,onExecute:this.onExecute,onExit:function(t){e(),typeof n=="function"&&n(t)}}},new t(e)},Engine=function(){const n=new Preloader;let s=null,i="",t=null;function e(e){this.config=new InternalConfig(e),this.rtenv=null}e.load=function(e,t){return s==null&&(i=e,s=n.loadPromise(`${i}.wasm`,t,!0),requestAnimationFrame(n.animateProgress)),s},e.unload=function(){s=null},e.isWebGLAvailable=function(e=1){try{return!!document.createElement("canvas").getContext(["webgl","webgl2"][e-1])}catch{}return!1};function o(o){const a={init:function(o){if(t)return t;if(s==null){if(!o)return t=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded.")),t;e.load(o,this.config.fileSizes[`${o}.wasm`])}const a=this;function r(t){return new Promise(function(n){t.then(function(t){const s=new Response(t.clone().body,{headers:[["content-type","application/wasm"]]});Godot(a.config.getModuleConfig(i,s)).then(function(t){const s=a.config.persistentPaths;t.initFS(s).then(function(){a.rtenv=t,a.config.unloadAfterInit&&e.unload(),n()})})})})}return n.setProgressFunc(this.config.onProgress),t=r(s),t},preloadFile:function(e,t){return n.preload(e,t,this.config.fileSizes[e])},start:function(e){this.config.update(e);const s=this;return s.init().then(function(){if(!s.rtenv)return Promise.reject(new Error("The engine must be initialized before it can be started"));let e={};try{e=s.config.getGodotConfig(function(){s.rtenv=null})}catch(e){return Promise.reject(e)}s.rtenv.initConfig(e);const o=[];return s.config.gdnativeLibs.forEach(function(e){o.push(s.rtenv.loadDynamicLibrary(e,{loadAsync:!0}))}),Promise.all(o).then(function(){return new Promise(function(e){n.preloadedFiles.forEach(function(e){s.rtenv.copyToFS(e.path,e.buffer)}),n.preloadedFiles.length=0,s.rtenv.callMain(s.config.args),t=null,s.config.serviceWorker&&"serviceWorker"in navigator&&navigator.serviceWorker.register(s.config.serviceWorker),e()})})})},startGame:function(e){this.config.update(e);const n=this.config.executable,t=this.config.mainPack||`${n}.pck`;this.config.args=["--main-pack",t].concat(this.config.args);const s=this;return Promise.all([this.init(n),this.preloadFile(t,t)]).then(function(){return s.start.apply(s)})},copyToFS:function(e,t){if(this.rtenv==null)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(e,t)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()}};return e.prototype=a,e.prototype.init=e.prototype.init,e.prototype.preloadFile=e.prototype.preloadFile,e.prototype.start=e.prototype.start,e.prototype.startGame=e.prototype.startGame,e.prototype.copyToFS=e.prototype.copyToFS,e.prototype.requestQuit=e.prototype.requestQuit,e.prototype.load=e.load,e.prototype.unload=e.unload,e.prototype.isWebGLAvailable=e.isWebGLAvailable,new e(o)}return o.load=e.load,o.unload=e.unload,o.isWebGLAvailable=e.isWebGLAvailable,o}();typeof window!="undefined"&&(window.Engine=Engine)